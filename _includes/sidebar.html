<!-- Sidebar Backdrop -->
<div class="sidebar-backdrop" aria-hidden="true"></div>

<aside class="sidebar" id="sidebar">
  <!-- Close button for mobile -->
  <button class="sidebar-close-btn" aria-label="Close sidebar">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M18 6L6 18M6 6l12 12"></path>
    </svg>
  </button>
  
  <div class="sidebar-content">
    <!-- Categories -->
    {% if site.categories.size > 0 %}
    <div class="sidebar-section">
      <h3 class="sidebar-title">Categories</h3>
      <ul class="sidebar-list">
        {% assign sorted_categories = site.categories | sort %}
        {% for category in sorted_categories limit:8 %}
        <li>
          <a href="{{ '/categories/' | relative_url }}#{{ category[0] | slugify }}">
            {{ category[0] }}
            <span class="count">{{ category[1].size }}</span>
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}
    
    <!-- Recent Posts -->
    {% if site.posts.size > 0 %}
    <div class="sidebar-section">
      <h3 class="sidebar-title">Recent Posts</h3>
      <ul class="sidebar-list">
        {% for post in site.posts limit:5 %}
        <li>
          <a href="{{ post.url | relative_url }}">
            {{ post.title | truncate: 35 }}
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}
    
    <!-- Tags Cloud -->
    {% if site.tags.size > 0 %}
    <div class="sidebar-section">
      <h3 class="sidebar-title">Tags</h3>
      <div class="tag-cloud">
        {% assign sorted_tags = site.tags | sort %}
        {% for tag in sorted_tags limit:12 %}
          <a href="{{ '/tags/' | relative_url }}#{{ tag[0] | slugify }}" class="tag-badge">
            {{ tag[0] }}
          </a>
        {% endfor %}
      </div>
    </div>
    {% endif %}
    
    <!-- Command Palette Hint -->
    <div class="sidebar-section">
      <h3 class="sidebar-title">Quick Navigation</h3>
      <button class="search-trigger" data-command-palette style="width: 100%;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.3-4.3"></path>
        </svg>
        <span>Search & Commands</span>
        <kbd>âŒ˜K</kbd>
      </button>
    </div>
  </div>
</aside>
