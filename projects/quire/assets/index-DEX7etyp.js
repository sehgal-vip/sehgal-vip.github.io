var x0=h=>{throw TypeError(h)};var yd=(h,t,s)=>t.has(h)||x0("Cannot "+s);var Vs=(h,t,s)=>(yd(h,t,"read from private field"),s?s.call(h):t.get(h)),Sa=(h,t,s)=>t.has(h)?x0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,s),Tr=(h,t,s,n)=>(yd(h,t,"write to private field"),n?n.call(h,s):t.set(h,s),s),fl=(h,t,s)=>(yd(h,t,"access private method"),s);var v0=(h,t,s,n)=>({set _(r){Tr(h,t,r,s)},get _(){return Vs(h,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();var nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jd(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}function z2(h){if(Object.prototype.hasOwnProperty.call(h,"__esModule"))return h;var t=h.default;if(typeof t=="function"){var s=function n(){var r=!1;try{r=this instanceof n}catch{}return r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(h).forEach(function(n){var r=Object.getOwnPropertyDescriptor(h,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return h[n]}})}),s}var bd={exports:{}},Nr={};var _0;function jx(){if(_0)return Nr;_0=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(n,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var c in r)c!=="key"&&(o[c]=r[c])}else o=r;return r=o.ref,{$$typeof:h,type:n,key:l,ref:r!==void 0?r:null,props:o}}return Nr.Fragment=t,Nr.jsx=s,Nr.jsxs=s,Nr}var w0;function Mx(){return w0||(w0=1,bd.exports=jx()),bd.exports}var g=Mx(),xd={exports:{}},Ut={};var S0;function Rx(){if(S0)return Ut;S0=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,A={};function S(M,B,J){this.props=M,this.context=B,this.refs=A,this.updater=J||_}S.prototype.isReactComponent={},S.prototype.setState=function(M,B){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,B,"setState")},S.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function k(){}k.prototype=S.prototype;function T(M,B,J){this.props=M,this.context=B,this.refs=A,this.updater=J||_}var j=T.prototype=new k;j.constructor=T,w(j,S.prototype),j.isPureReactComponent=!0;var D=Array.isArray;function H(){}var F={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function I(M,B,J){var ot=J.ref;return{$$typeof:h,type:M,key:B,ref:ot!==void 0?ot:null,props:J}}function K(M,B){return I(M.type,B,M.props)}function ct(M){return typeof M=="object"&&M!==null&&M.$$typeof===h}function P(M){var B={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(J){return B[J]})}var W=/\/+/g;function N(M,B){return typeof M=="object"&&M!==null&&M.key!=null?P(""+M.key):B.toString(36)}function st(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(H,H):(M.status="pending",M.then(function(B){M.status==="pending"&&(M.status="fulfilled",M.value=B)},function(B){M.status==="pending"&&(M.status="rejected",M.reason=B)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function G(M,B,J,ot,at){var _t=typeof M;(_t==="undefined"||_t==="boolean")&&(M=null);var vt=!1;if(M===null)vt=!0;else switch(_t){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(M.$$typeof){case h:case t:vt=!0;break;case p:return vt=M._init,G(vt(M._payload),B,J,ot,at)}}if(vt)return at=at(M),vt=ot===""?"."+N(M,0):ot,D(at)?(J="",vt!=null&&(J=vt.replace(W,"$&/")+"/"),G(at,B,J,"",function(St){return St})):at!=null&&(ct(at)&&(at=K(at,J+(at.key==null||M&&M.key===at.key?"":(""+at.key).replace(W,"$&/")+"/")+vt)),B.push(at)),1;vt=0;var Et=ot===""?".":ot+":";if(D(M))for(var lt=0;lt<M.length;lt++)ot=M[lt],_t=Et+N(ot,lt),vt+=G(ot,B,J,_t,at);else if(lt=v(M),typeof lt=="function")for(M=lt.call(M),lt=0;!(ot=M.next()).done;)ot=ot.value,_t=Et+N(ot,lt++),vt+=G(ot,B,J,_t,at);else if(_t==="object"){if(typeof M.then=="function")return G(st(M),B,J,ot,at);throw B=String(M),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return vt}function O(M,B,J){if(M==null)return M;var ot=[],at=0;return G(M,ot,"","",function(_t){return B.call(J,_t,at++)}),ot}function Y(M){if(M._status===-1){var B=M._result;B=B(),B.then(function(J){(M._status===0||M._status===-1)&&(M._status=1,M._result=J)},function(J){(M._status===0||M._status===-1)&&(M._status=2,M._result=J)}),M._status===-1&&(M._status=0,M._result=B)}if(M._status===1)return M._result.default;throw M._result}var X=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},dt={map:O,forEach:function(M,B,J){O(M,function(){B.apply(this,arguments)},J)},count:function(M){var B=0;return O(M,function(){B++}),B},toArray:function(M){return O(M,function(B){return B})||[]},only:function(M){if(!ct(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ut.Activity=y,Ut.Children=dt,Ut.Component=S,Ut.Fragment=s,Ut.Profiler=r,Ut.PureComponent=T,Ut.StrictMode=n,Ut.Suspense=d,Ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Ut.__COMPILER_RUNTIME={__proto__:null,c:function(M){return F.H.useMemoCache(M)}},Ut.cache=function(M){return function(){return M.apply(null,arguments)}},Ut.cacheSignal=function(){return null},Ut.cloneElement=function(M,B,J){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ot=w({},M.props),at=M.key;if(B!=null)for(_t in B.key!==void 0&&(at=""+B.key),B)!R.call(B,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&B.ref===void 0||(ot[_t]=B[_t]);var _t=arguments.length-2;if(_t===1)ot.children=J;else if(1<_t){for(var vt=Array(_t),Et=0;Et<_t;Et++)vt[Et]=arguments[Et+2];ot.children=vt}return I(M.type,at,ot)},Ut.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},Ut.createElement=function(M,B,J){var ot,at={},_t=null;if(B!=null)for(ot in B.key!==void 0&&(_t=""+B.key),B)R.call(B,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(at[ot]=B[ot]);var vt=arguments.length-2;if(vt===1)at.children=J;else if(1<vt){for(var Et=Array(vt),lt=0;lt<vt;lt++)Et[lt]=arguments[lt+2];at.children=Et}if(M&&M.defaultProps)for(ot in vt=M.defaultProps,vt)at[ot]===void 0&&(at[ot]=vt[ot]);return I(M,_t,at)},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(M){return{$$typeof:c,render:M}},Ut.isValidElement=ct,Ut.lazy=function(M){return{$$typeof:p,_payload:{_status:-1,_result:M},_init:Y}},Ut.memo=function(M,B){return{$$typeof:f,type:M,compare:B===void 0?null:B}},Ut.startTransition=function(M){var B=F.T,J={};F.T=J;try{var ot=M(),at=F.S;at!==null&&at(J,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(H,X)}catch(_t){X(_t)}finally{B!==null&&J.types!==null&&(B.types=J.types),F.T=B}},Ut.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Ut.use=function(M){return F.H.use(M)},Ut.useActionState=function(M,B,J){return F.H.useActionState(M,B,J)},Ut.useCallback=function(M,B){return F.H.useCallback(M,B)},Ut.useContext=function(M){return F.H.useContext(M)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(M,B){return F.H.useDeferredValue(M,B)},Ut.useEffect=function(M,B){return F.H.useEffect(M,B)},Ut.useEffectEvent=function(M){return F.H.useEffectEvent(M)},Ut.useId=function(){return F.H.useId()},Ut.useImperativeHandle=function(M,B,J){return F.H.useImperativeHandle(M,B,J)},Ut.useInsertionEffect=function(M,B){return F.H.useInsertionEffect(M,B)},Ut.useLayoutEffect=function(M,B){return F.H.useLayoutEffect(M,B)},Ut.useMemo=function(M,B){return F.H.useMemo(M,B)},Ut.useOptimistic=function(M,B){return F.H.useOptimistic(M,B)},Ut.useReducer=function(M,B,J){return F.H.useReducer(M,B,J)},Ut.useRef=function(M){return F.H.useRef(M)},Ut.useState=function(M){return F.H.useState(M)},Ut.useSyncExternalStore=function(M,B,J){return F.H.useSyncExternalStore(M,B,J)},Ut.useTransition=function(){return F.H.useTransition()},Ut.version="19.2.4",Ut}var A0;function th(){return A0||(A0=1,xd.exports=Rx()),xd.exports}var z=th();const zr=Jd(z);var vd={exports:{}},jr={},_d={exports:{}},wd={};var k0;function Dx(){return k0||(k0=1,(function(h){function t(G,O){var Y=G.length;G.push(O);t:for(;0<Y;){var X=Y-1>>>1,dt=G[X];if(0<r(dt,O))G[X]=O,G[Y]=dt,Y=X;else break t}}function s(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var O=G[0],Y=G.pop();if(Y!==O){G[0]=Y;t:for(var X=0,dt=G.length,M=dt>>>1;X<M;){var B=2*(X+1)-1,J=G[B],ot=B+1,at=G[ot];if(0>r(J,Y))ot<dt&&0>r(at,J)?(G[X]=at,G[ot]=Y,X=ot):(G[X]=J,G[B]=Y,X=B);else if(ot<dt&&0>r(at,Y))G[X]=at,G[ot]=Y,X=ot;else break t}}return O}function r(G,O){var Y=G.sortIndex-O.sortIndex;return Y!==0?Y:G.id-O.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;h.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();h.unstable_now=function(){return l.now()-c}}var d=[],f=[],p=1,y=null,x=3,v=!1,_=!1,w=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function j(G){for(var O=s(f);O!==null;){if(O.callback===null)n(f);else if(O.startTime<=G)n(f),O.sortIndex=O.expirationTime,t(d,O);else break;O=s(f)}}function D(G){if(w=!1,j(G),!_)if(s(d)!==null)_=!0,H||(H=!0,P());else{var O=s(f);O!==null&&st(D,O.startTime-G)}}var H=!1,F=-1,R=5,I=-1;function K(){return A?!0:!(h.unstable_now()-I<R)}function ct(){if(A=!1,H){var G=h.unstable_now();I=G;var O=!0;try{t:{_=!1,w&&(w=!1,k(F),F=-1),v=!0;var Y=x;try{e:{for(j(G),y=s(d);y!==null&&!(y.expirationTime>G&&K());){var X=y.callback;if(typeof X=="function"){y.callback=null,x=y.priorityLevel;var dt=X(y.expirationTime<=G);if(G=h.unstable_now(),typeof dt=="function"){y.callback=dt,j(G),O=!0;break e}y===s(d)&&n(d),j(G)}else n(d);y=s(d)}if(y!==null)O=!0;else{var M=s(f);M!==null&&st(D,M.startTime-G),O=!1}}break t}finally{y=null,x=Y,v=!1}O=void 0}}finally{O?P():H=!1}}}var P;if(typeof T=="function")P=function(){T(ct)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,N=W.port2;W.port1.onmessage=ct,P=function(){N.postMessage(null)}}else P=function(){S(ct,0)};function st(G,O){F=S(function(){G(h.unstable_now())},O)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(G){G.callback=null},h.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<G?Math.floor(1e3/G):5},h.unstable_getCurrentPriorityLevel=function(){return x},h.unstable_next=function(G){switch(x){case 1:case 2:case 3:var O=3;break;default:O=x}var Y=x;x=O;try{return G()}finally{x=Y}},h.unstable_requestPaint=function(){A=!0},h.unstable_runWithPriority=function(G,O){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Y=x;x=G;try{return O()}finally{x=Y}},h.unstable_scheduleCallback=function(G,O,Y){var X=h.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?X+Y:X):Y=X,G){case 1:var dt=-1;break;case 2:dt=250;break;case 5:dt=1073741823;break;case 4:dt=1e4;break;default:dt=5e3}return dt=Y+dt,G={id:p++,callback:O,priorityLevel:G,startTime:Y,expirationTime:dt,sortIndex:-1},Y>X?(G.sortIndex=Y,t(f,G),s(d)===null&&G===s(f)&&(w?(k(F),F=-1):w=!0,st(D,Y-X))):(G.sortIndex=dt,t(d,G),_||v||(_=!0,H||(H=!0,P()))),G},h.unstable_shouldYield=K,h.unstable_wrapCallback=function(G){var O=x;return function(){var Y=x;x=O;try{return G.apply(this,arguments)}finally{x=Y}}}})(wd)),wd}var E0;function Ox(){return E0||(E0=1,_d.exports=Dx()),_d.exports}var Sd={exports:{}},Ke={};var C0;function Lx(){if(C0)return Ke;C0=1;var h=th();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var n={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:d,containerInfo:f,implementation:p}}var l=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ke.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,p)},Ke.flushSync=function(d){var f=l.T,p=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=f,n.p=p,n.d.f()}},Ke.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},Ke.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Ke.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:v}):p==="script"&&n.d.X(d,{crossOrigin:y,integrity:x,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ke.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},Ke.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin);n.d.L(d,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ke.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=c(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},Ke.requestFormReset=function(d){n.d.r(d)},Ke.unstable_batchedUpdates=function(d,f){return d(f)},Ke.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},Ke.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ke.version="19.2.4",Ke}var T0;function zx(){if(T0)return Sd.exports;T0=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Sd.exports=Lx(),Sd.exports}var N0;function Px(){if(N0)return jr;N0=1;var h=Ox(),t=th(),s=zx();function n(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function l(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function c(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function d(e){if(o(e)!==e)throw Error(n(188))}function f(e){var i=e.alternate;if(!i){if(i=o(e),i===null)throw Error(n(188));return i!==e?null:e}for(var a=e,u=i;;){var m=a.return;if(m===null)break;var b=m.alternate;if(b===null){if(u=m.return,u!==null){a=u;continue}break}if(m.child===b.child){for(b=m.child;b;){if(b===a)return d(m),e;if(b===u)return d(m),i;b=b.sibling}throw Error(n(188))}if(a.return!==u.return)a=m,u=b;else{for(var E=!1,L=m.child;L;){if(L===a){E=!0,a=m,u=b;break}if(L===u){E=!0,u=m,a=b;break}L=L.sibling}if(!E){for(L=b.child;L;){if(L===a){E=!0,a=b,u=m;break}if(L===u){E=!0,u=b,a=m;break}L=L.sibling}if(!E)throw Error(n(189))}}if(a.alternate!==u)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?e:i}function p(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=p(e),i!==null)return i;e=e.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),T=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),ct=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=ct&&e[ct]||e["@@iterator"],typeof e=="function"?e:null)}var W=Symbol.for("react.client.reference");function N(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===W?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case S:return"Profiler";case A:return"StrictMode";case D:return"Suspense";case H:return"SuspenseList";case I:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case T:return e.displayName||"Context";case k:return(e._context.displayName||"Context")+".Consumer";case j:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F:return i=e.displayName||null,i!==null?i:N(e.type)||"Memo";case R:i=e._payload,e=e._init;try{return N(e(i))}catch{}}return null}var st=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},X=[],dt=-1;function M(e){return{current:e}}function B(e){0>dt||(e.current=X[dt],X[dt]=null,dt--)}function J(e,i){dt++,X[dt]=e.current,e.current=i}var ot=M(null),at=M(null),_t=M(null),vt=M(null);function Et(e,i){switch(J(_t,i),J(at,e),J(ot,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Hp(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Hp(i),e=Gp(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(ot),J(ot,e)}function lt(){B(ot),B(at),B(_t)}function St(e){e.memoizedState!==null&&J(vt,e);var i=ot.current,a=Gp(i,e.type);i!==a&&(J(at,e),J(ot,a))}function Pt(e){at.current===e&&(B(ot),B(at)),vt.current===e&&(B(vt),Ar._currentValue=Y)}var Ft,It;function C(e){if(Ft===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ft=i&&i[1]||"",It=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ft+e+It}var ht=!1;function rt(e,i){if(!e||ht)return"";ht=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(ut){var nt=ut}Reflect.construct(e,[],pt)}else{try{pt.call()}catch(ut){nt=ut}e.call(pt.prototype)}}else{try{throw Error()}catch(ut){nt=ut}(pt=e())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(ut){if(ut&&nt&&typeof ut.stack=="string")return[ut.stack,nt.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=u.DetermineComponentFrameRoot(),E=b[0],L=b[1];if(E&&L){var V=E.split(`
`),et=L.split(`
`);for(m=u=0;u<V.length&&!V[u].includes("DetermineComponentFrameRoot");)u++;for(;m<et.length&&!et[m].includes("DetermineComponentFrameRoot");)m++;if(u===V.length||m===et.length)for(u=V.length-1,m=et.length-1;1<=u&&0<=m&&V[u]!==et[m];)m--;for(;1<=u&&0<=m;u--,m--)if(V[u]!==et[m]){if(u!==1||m!==1)do if(u--,m--,0>m||V[u]!==et[m]){var ft=`
`+V[u].replace(" at new "," at ");return e.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",e.displayName)),ft}while(1<=u&&0<=m);break}}}finally{ht=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?C(a):""}function q(e,i){switch(e.tag){case 26:case 27:case 5:return C(e.type);case 16:return C("Lazy");case 13:return e.child!==i&&i!==null?C("Suspense Fallback"):C("Suspense");case 19:return C("SuspenseList");case 0:case 15:return rt(e.type,!1);case 11:return rt(e.type.render,!1);case 1:return rt(e.type,!0);case 31:return C("Activity");default:return""}}function U(e){try{var i="",a=null;do i+=q(e,a),a=e,e=e.return;while(e);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Z=Object.prototype.hasOwnProperty,mt=h.unstable_scheduleCallback,yt=h.unstable_cancelCallback,it=h.unstable_shouldYield,bt=h.unstable_requestPaint,wt=h.unstable_now,xt=h.unstable_getCurrentPriorityLevel,Nt=h.unstable_ImmediatePriority,ie=h.unstable_UserBlockingPriority,Vt=h.unstable_NormalPriority,os=h.unstable_LowPriority,ji=h.unstable_IdlePriority,Ts=h.log,dn=h.unstable_setDisableYieldValue,ce=null,Pe=null;function Ns(e){if(typeof Ts=="function"&&dn(e),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(ce,e)}catch{}}var be=Math.clz32?Math.clz32:nc,Qr=Math.log,ic=Math.LN2;function nc(e){return e>>>=0,e===0?32:31-(Qr(e)/ic|0)|0}var Fn=256,hn=262144,Ws=4194304;function js(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Jr(e,i,a){var u=e.pendingLanes;if(u===0)return 0;var m=0,b=e.suspendedLanes,E=e.pingedLanes;e=e.warmLanes;var L=u&134217727;return L!==0?(u=L&~b,u!==0?m=js(u):(E&=L,E!==0?m=js(E):a||(a=L&~e,a!==0&&(m=js(a))))):(L=u&~b,L!==0?m=js(L):E!==0?m=js(E):a||(a=u&~e,a!==0&&(m=js(a)))),m===0?0:i!==0&&i!==m&&(i&b)===0&&(b=m&-m,a=i&-i,b>=a||b===32&&(a&4194048)!==0)?i:m}function Pa(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function yy(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wh(){var e=Ws;return Ws<<=1,(Ws&62914560)===0&&(Ws=4194304),e}function ac(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function Fa(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function by(e,i,a,u,m,b){var E=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var L=e.entanglements,V=e.expirationTimes,et=e.hiddenUpdates;for(a=E&~a;0<a;){var ft=31-be(a),pt=1<<ft;L[ft]=0,V[ft]=-1;var nt=et[ft];if(nt!==null)for(et[ft]=null,ft=0;ft<nt.length;ft++){var ut=nt[ft];ut!==null&&(ut.lane&=-536870913)}a&=~pt}u!==0&&Sh(e,u,0),b!==0&&m===0&&e.tag!==0&&(e.suspendedLanes|=b&~(E&~i))}function Sh(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var u=31-be(i);e.entangledLanes|=i,e.entanglements[u]=e.entanglements[u]|1073741824|a&261930}function Ah(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var u=31-be(a),m=1<<u;m&i|e[u]&i&&(e[u]|=i),a&=~m}}function kh(e,i){var a=i&-i;return a=(a&42)!==0?1:rc(a),(a&(e.suspendedLanes|i))!==0?0:a}function rc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function oc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Eh(){var e=O.p;return e!==0?e:(e=window.event,e===void 0?32:h0(e.type))}function Ch(e,i){var a=O.p;try{return O.p=e,i()}finally{O.p=a}}var Mi=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Mi,ls="__reactProps$"+Mi,Bn="__reactContainer$"+Mi,lc="__reactEvents$"+Mi,xy="__reactListeners$"+Mi,vy="__reactHandles$"+Mi,Th="__reactResources$"+Mi,Ba="__reactMarker$"+Mi;function cc(e){delete e[Ue],delete e[ls],delete e[lc],delete e[xy],delete e[vy]}function In(e){var i=e[Ue];if(i)return i;for(var a=e.parentNode;a;){if(i=a[Bn]||a[Ue]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=Wp(e);e!==null;){if(a=e[Ue])return a;e=Wp(e)}return i}e=a,a=e.parentNode}return null}function Un(e){if(e=e[Ue]||e[Bn]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function Ia(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(n(33))}function Hn(e){var i=e[Th];return i||(i=e[Th]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Fe(e){e[Ba]=!0}var Nh=new Set,jh={};function fn(e,i){Gn(e,i),Gn(e+"Capture",i)}function Gn(e,i){for(jh[e]=i,e=0;e<i.length;e++)Nh.add(i[e])}var _y=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mh={},Rh={};function wy(e){return Z.call(Rh,e)?!0:Z.call(Mh,e)?!1:_y.test(e)?Rh[e]=!0:(Mh[e]=!0,!1)}function to(e,i,a){if(wy(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function eo(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function oi(e,i,a,u){if(u===null)e.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+u)}}function Ms(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dh(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Sy(e,i,a){var u=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,b=u.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return m.call(this)},set:function(E){a=""+E,b.call(this,E)}}),Object.defineProperty(e,i,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(E){a=""+E},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function uc(e){if(!e._valueTracker){var i=Dh(e)?"checked":"value";e._valueTracker=Sy(e,i,""+e[i])}}function Oh(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return e&&(u=Dh(e)?e.checked?"true":"false":e.value),e=u,e!==a?(i.setValue(e),!0):!1}function so(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ay=/[\n"\\]/g;function Rs(e){return e.replace(Ay,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function dc(e,i,a,u,m,b,E,L){e.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.type=E:e.removeAttribute("type"),i!=null?E==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Ms(i)):e.value!==""+Ms(i)&&(e.value=""+Ms(i)):E!=="submit"&&E!=="reset"||e.removeAttribute("value"),i!=null?hc(e,E,Ms(i)):a!=null?hc(e,E,Ms(a)):u!=null&&e.removeAttribute("value"),m==null&&b!=null&&(e.defaultChecked=!!b),m!=null&&(e.checked=m&&typeof m!="function"&&typeof m!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?e.name=""+Ms(L):e.removeAttribute("name")}function Lh(e,i,a,u,m,b,E,L){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.type=b),i!=null||a!=null){if(!(b!=="submit"&&b!=="reset"||i!=null)){uc(e);return}a=a!=null?""+Ms(a):"",i=i!=null?""+Ms(i):a,L||i===e.value||(e.value=i),e.defaultValue=i}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,e.checked=L?e.checked:!!u,e.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.name=E),uc(e)}function hc(e,i,a){i==="number"&&so(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function qn(e,i,a,u){if(e=e.options,i){i={};for(var m=0;m<a.length;m++)i["$"+a[m]]=!0;for(a=0;a<e.length;a++)m=i.hasOwnProperty("$"+e[a].value),e[a].selected!==m&&(e[a].selected=m),m&&u&&(e[a].defaultSelected=!0)}else{for(a=""+Ms(a),i=null,m=0;m<e.length;m++){if(e[m].value===a){e[m].selected=!0,u&&(e[m].defaultSelected=!0);return}i!==null||e[m].disabled||(i=e[m])}i!==null&&(i.selected=!0)}}function zh(e,i,a){if(i!=null&&(i=""+Ms(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+Ms(a):""}function Ph(e,i,a,u){if(i==null){if(u!=null){if(a!=null)throw Error(n(92));if(st(u)){if(1<u.length)throw Error(n(93));u=u[0]}a=u}a==null&&(a=""),i=a}a=Ms(i),e.defaultValue=a,u=e.textContent,u===a&&u!==""&&u!==null&&(e.value=u),uc(e)}function Xn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var ky=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fh(e,i,a){var u=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":u?e.setProperty(i,a):typeof a!="number"||a===0||ky.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Bh(e,i,a){if(i!=null&&typeof i!="object")throw Error(n(62));if(e=e.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?e.setProperty(u,""):u==="float"?e.cssFloat="":e[u]="");for(var m in i)u=i[m],i.hasOwnProperty(m)&&a[m]!==u&&Fh(e,m,u)}else for(var b in i)i.hasOwnProperty(b)&&Fh(e,b,i[b])}function fc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ey=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function io(e){return Cy.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function li(){}var gc=null;function pc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vn=null,Yn=null;function Ih(e){var i=Un(e);if(i&&(e=i.stateNode)){var a=e[ls]||null;t:switch(e=i.stateNode,i.type){case"input":if(dc(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rs(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==e&&u.form===e.form){var m=u[ls]||null;if(!m)throw Error(n(90));dc(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<a.length;i++)u=a[i],u.form===e.form&&Oh(u)}break t;case"textarea":zh(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&qn(e,!!a.multiple,i,!1)}}}var mc=!1;function Uh(e,i,a){if(mc)return e(i,a);mc=!0;try{var u=e(i);return u}finally{if(mc=!1,(Vn!==null||Yn!==null)&&(Xo(),Vn&&(i=Vn,e=Yn,Yn=Vn=null,Ih(i),e)))for(i=0;i<e.length;i++)Ih(e[i])}}function Ua(e,i){var a=e.stateNode;if(a===null)return null;var u=a[ls]||null;if(u===null)return null;a=u[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(n(231,i,typeof a));return a}var ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yc=!1;if(ci)try{var Ha={};Object.defineProperty(Ha,"passive",{get:function(){yc=!0}}),window.addEventListener("test",Ha,Ha),window.removeEventListener("test",Ha,Ha)}catch{yc=!1}var Ri=null,bc=null,no=null;function Hh(){if(no)return no;var e,i=bc,a=i.length,u,m="value"in Ri?Ri.value:Ri.textContent,b=m.length;for(e=0;e<a&&i[e]===m[e];e++);var E=a-e;for(u=1;u<=E&&i[a-u]===m[b-u];u++);return no=m.slice(e,1<u?1-u:void 0)}function ao(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ro(){return!0}function Gh(){return!1}function cs(e){function i(a,u,m,b,E){this._reactName=a,this._targetInst=m,this.type=u,this.nativeEvent=b,this.target=E,this.currentTarget=null;for(var L in e)e.hasOwnProperty(L)&&(a=e[L],this[L]=a?a(b):b[L]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ro:Gh,this.isPropagationStopped=Gh,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ro)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ro)},persist:function(){},isPersistent:ro}),i}var gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oo=cs(gn),Ga=y({},gn,{view:0,detail:0}),Ty=cs(Ga),xc,vc,qa,lo=y({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qa&&(qa&&e.type==="mousemove"?(xc=e.screenX-qa.screenX,vc=e.screenY-qa.screenY):vc=xc=0,qa=e),xc)},movementY:function(e){return"movementY"in e?e.movementY:vc}}),qh=cs(lo),Ny=y({},lo,{dataTransfer:0}),jy=cs(Ny),My=y({},Ga,{relatedTarget:0}),_c=cs(My),Ry=y({},gn,{animationName:0,elapsedTime:0,pseudoElement:0}),Dy=cs(Ry),Oy=y({},gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ly=cs(Oy),zy=y({},gn,{data:0}),Xh=cs(zy),Py={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},By={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iy(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=By[e])?!!i[e]:!1}function wc(){return Iy}var Uy=y({},Ga,{key:function(e){if(e.key){var i=Py[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=ao(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wc,charCode:function(e){return e.type==="keypress"?ao(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ao(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hy=cs(Uy),Gy=y({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vh=cs(Gy),qy=y({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wc}),Xy=cs(qy),Vy=y({},gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yy=cs(Vy),$y=y({},lo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ky=cs($y),Wy=y({},gn,{newState:0,oldState:0}),Zy=cs(Wy),Qy=[9,13,27,32],Sc=ci&&"CompositionEvent"in window,Xa=null;ci&&"documentMode"in document&&(Xa=document.documentMode);var Jy=ci&&"TextEvent"in window&&!Xa,Yh=ci&&(!Sc||Xa&&8<Xa&&11>=Xa),$h=" ",Kh=!1;function Wh(e,i){switch(e){case"keyup":return Qy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $n=!1;function tb(e,i){switch(e){case"compositionend":return Zh(i);case"keypress":return i.which!==32?null:(Kh=!0,$h);case"textInput":return e=i.data,e===$h&&Kh?null:e;default:return null}}function eb(e,i){if($n)return e==="compositionend"||!Sc&&Wh(e,i)?(e=Hh(),no=bc=Ri=null,$n=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Yh&&i.locale!=="ko"?null:i.data;default:return null}}var sb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!sb[e.type]:i==="textarea"}function Jh(e,i,a,u){Vn?Yn?Yn.push(u):Yn=[u]:Vn=u,i=Qo(i,"onChange"),0<i.length&&(a=new oo("onChange","change",null,a,u),e.push({event:a,listeners:i}))}var Va=null,Ya=null;function ib(e){zp(e,0)}function co(e){var i=Ia(e);if(Oh(i))return e}function tf(e,i){if(e==="change")return i}var ef=!1;if(ci){var Ac;if(ci){var kc="oninput"in document;if(!kc){var sf=document.createElement("div");sf.setAttribute("oninput","return;"),kc=typeof sf.oninput=="function"}Ac=kc}else Ac=!1;ef=Ac&&(!document.documentMode||9<document.documentMode)}function nf(){Va&&(Va.detachEvent("onpropertychange",af),Ya=Va=null)}function af(e){if(e.propertyName==="value"&&co(Ya)){var i=[];Jh(i,Ya,e,pc(e)),Uh(ib,i)}}function nb(e,i,a){e==="focusin"?(nf(),Va=i,Ya=a,Va.attachEvent("onpropertychange",af)):e==="focusout"&&nf()}function ab(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return co(Ya)}function rb(e,i){if(e==="click")return co(i)}function ob(e,i){if(e==="input"||e==="change")return co(i)}function lb(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var xs=typeof Object.is=="function"?Object.is:lb;function $a(e,i){if(xs(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var m=a[u];if(!Z.call(i,m)||!xs(e[m],i[m]))return!1}return!0}function rf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function of(e,i){var a=rf(e);e=0;for(var u;a;){if(a.nodeType===3){if(u=e+a.textContent.length,e<=i&&u>=i)return{node:a,offset:i-e};e=u}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=rf(a)}}function lf(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?lf(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function cf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=so(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=so(e.document)}return i}function Ec(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var cb=ci&&"documentMode"in document&&11>=document.documentMode,Kn=null,Cc=null,Ka=null,Tc=!1;function uf(e,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Tc||Kn==null||Kn!==so(u)||(u=Kn,"selectionStart"in u&&Ec(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ka&&$a(Ka,u)||(Ka=u,u=Qo(Cc,"onSelect"),0<u.length&&(i=new oo("onSelect","select",null,i,a),e.push({event:i,listeners:u}),i.target=Kn)))}function pn(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Wn={animationend:pn("Animation","AnimationEnd"),animationiteration:pn("Animation","AnimationIteration"),animationstart:pn("Animation","AnimationStart"),transitionrun:pn("Transition","TransitionRun"),transitionstart:pn("Transition","TransitionStart"),transitioncancel:pn("Transition","TransitionCancel"),transitionend:pn("Transition","TransitionEnd")},Nc={},df={};ci&&(df=document.createElement("div").style,"AnimationEvent"in window||(delete Wn.animationend.animation,delete Wn.animationiteration.animation,delete Wn.animationstart.animation),"TransitionEvent"in window||delete Wn.transitionend.transition);function mn(e){if(Nc[e])return Nc[e];if(!Wn[e])return e;var i=Wn[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in df)return Nc[e]=i[a];return e}var hf=mn("animationend"),ff=mn("animationiteration"),gf=mn("animationstart"),ub=mn("transitionrun"),db=mn("transitionstart"),hb=mn("transitioncancel"),pf=mn("transitionend"),mf=new Map,jc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jc.push("scrollEnd");function Gs(e,i){mf.set(e,i),fn(i,[e])}var uo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ds=[],Zn=0,Mc=0;function ho(){for(var e=Zn,i=Mc=Zn=0;i<e;){var a=Ds[i];Ds[i++]=null;var u=Ds[i];Ds[i++]=null;var m=Ds[i];Ds[i++]=null;var b=Ds[i];if(Ds[i++]=null,u!==null&&m!==null){var E=u.pending;E===null?m.next=m:(m.next=E.next,E.next=m),u.pending=m}b!==0&&yf(a,m,b)}}function fo(e,i,a,u){Ds[Zn++]=e,Ds[Zn++]=i,Ds[Zn++]=a,Ds[Zn++]=u,Mc|=u,e.lanes|=u,e=e.alternate,e!==null&&(e.lanes|=u)}function Rc(e,i,a,u){return fo(e,i,a,u),go(e)}function yn(e,i){return fo(e,null,null,i),go(e)}function yf(e,i,a){e.lanes|=a;var u=e.alternate;u!==null&&(u.lanes|=a);for(var m=!1,b=e.return;b!==null;)b.childLanes|=a,u=b.alternate,u!==null&&(u.childLanes|=a),b.tag===22&&(e=b.stateNode,e===null||e._visibility&1||(m=!0)),e=b,b=b.return;return e.tag===3?(b=e.stateNode,m&&i!==null&&(m=31-be(a),e=b.hiddenUpdates,u=e[m],u===null?e[m]=[i]:u.push(i),i.lane=a|536870912),b):null}function go(e){if(50<yr)throw yr=0,Uu=null,Error(n(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Qn={};function fb(e,i,a,u){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(e,i,a,u){return new fb(e,i,a,u)}function Dc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ui(e,i){var a=e.alternate;return a===null?(a=vs(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function bf(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function po(e,i,a,u,m,b){var E=0;if(u=e,typeof e=="function")Dc(e)&&(E=1);else if(typeof e=="string")E=bx(e,a,ot.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case I:return e=vs(31,a,i,m),e.elementType=I,e.lanes=b,e;case w:return bn(a.children,m,b,i);case A:E=8,m|=24;break;case S:return e=vs(12,a,i,m|2),e.elementType=S,e.lanes=b,e;case D:return e=vs(13,a,i,m),e.elementType=D,e.lanes=b,e;case H:return e=vs(19,a,i,m),e.elementType=H,e.lanes=b,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T:E=10;break t;case k:E=9;break t;case j:E=11;break t;case F:E=14;break t;case R:E=16,u=null;break t}E=29,a=Error(n(130,e===null?"null":typeof e,"")),u=null}return i=vs(E,a,i,m),i.elementType=e,i.type=u,i.lanes=b,i}function bn(e,i,a,u){return e=vs(7,e,u,i),e.lanes=a,e}function Oc(e,i,a){return e=vs(6,e,null,i),e.lanes=a,e}function xf(e){var i=vs(18,null,null,0);return i.stateNode=e,i}function Lc(e,i,a){return i=vs(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var vf=new WeakMap;function Os(e,i){if(typeof e=="object"&&e!==null){var a=vf.get(e);return a!==void 0?a:(i={value:e,source:i,stack:U(i)},vf.set(e,i),i)}return{value:e,source:i,stack:U(i)}}var Jn=[],ta=0,mo=null,Wa=0,Ls=[],zs=0,Di=null,Zs=1,Qs="";function di(e,i){Jn[ta++]=Wa,Jn[ta++]=mo,mo=e,Wa=i}function _f(e,i,a){Ls[zs++]=Zs,Ls[zs++]=Qs,Ls[zs++]=Di,Di=e;var u=Zs;e=Qs;var m=32-be(u)-1;u&=~(1<<m),a+=1;var b=32-be(i)+m;if(30<b){var E=m-m%5;b=(u&(1<<E)-1).toString(32),u>>=E,m-=E,Zs=1<<32-be(i)+m|a<<m|u,Qs=b+e}else Zs=1<<b|a<<m|u,Qs=e}function zc(e){e.return!==null&&(di(e,1),_f(e,1,0))}function Pc(e){for(;e===mo;)mo=Jn[--ta],Jn[ta]=null,Wa=Jn[--ta],Jn[ta]=null;for(;e===Di;)Di=Ls[--zs],Ls[zs]=null,Qs=Ls[--zs],Ls[zs]=null,Zs=Ls[--zs],Ls[zs]=null}function wf(e,i){Ls[zs++]=Zs,Ls[zs++]=Qs,Ls[zs++]=Di,Zs=i.id,Qs=i.overflow,Di=e}var He=null,he=null,Qt=!1,Oi=null,Ps=!1,Fc=Error(n(519));function Li(e){var i=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Za(Os(i,e)),Fc}function Sf(e){var i=e.stateNode,a=e.type,u=e.memoizedProps;switch(i[Ue]=e,i[ls]=u,a){case"dialog":Kt("cancel",i),Kt("close",i);break;case"iframe":case"object":case"embed":Kt("load",i);break;case"video":case"audio":for(a=0;a<xr.length;a++)Kt(xr[a],i);break;case"source":Kt("error",i);break;case"img":case"image":case"link":Kt("error",i),Kt("load",i);break;case"details":Kt("toggle",i);break;case"input":Kt("invalid",i),Lh(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Kt("invalid",i);break;case"textarea":Kt("invalid",i),Ph(i,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||u.suppressHydrationWarning===!0||Ip(i.textContent,a)?(u.popover!=null&&(Kt("beforetoggle",i),Kt("toggle",i)),u.onScroll!=null&&Kt("scroll",i),u.onScrollEnd!=null&&Kt("scrollend",i),u.onClick!=null&&(i.onclick=li),i=!0):i=!1,i||Li(e,!0)}function Af(e){for(He=e.return;He;)switch(He.tag){case 5:case 31:case 13:Ps=!1;return;case 27:case 3:Ps=!0;return;default:He=He.return}}function ea(e){if(e!==He)return!1;if(!Qt)return Af(e),Qt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||sd(e.type,e.memoizedProps)),a=!a),a&&he&&Li(e),Af(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));he=Kp(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));he=Kp(e)}else i===27?(i=he,Ki(e.type)?(e=od,od=null,he=e):he=i):he=He?Bs(e.stateNode.nextSibling):null;return!0}function xn(){he=He=null,Qt=!1}function Bc(){var e=Oi;return e!==null&&(fs===null?fs=e:fs.push.apply(fs,e),Oi=null),e}function Za(e){Oi===null?Oi=[e]:Oi.push(e)}var Ic=M(null),vn=null,hi=null;function zi(e,i,a){J(Ic,i._currentValue),i._currentValue=a}function fi(e){e._currentValue=Ic.current,B(Ic)}function Uc(e,i,a){for(;e!==null;){var u=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),e===a)break;e=e.return}}function Hc(e,i,a,u){var m=e.child;for(m!==null&&(m.return=e);m!==null;){var b=m.dependencies;if(b!==null){var E=m.child;b=b.firstContext;t:for(;b!==null;){var L=b;b=m;for(var V=0;V<i.length;V++)if(L.context===i[V]){b.lanes|=a,L=b.alternate,L!==null&&(L.lanes|=a),Uc(b.return,a,e),u||(E=null);break t}b=L.next}}else if(m.tag===18){if(E=m.return,E===null)throw Error(n(341));E.lanes|=a,b=E.alternate,b!==null&&(b.lanes|=a),Uc(E,a,e),E=null}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===e){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}}function sa(e,i,a,u){e=null;for(var m=i,b=!1;m!==null;){if(!b){if((m.flags&524288)!==0)b=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var E=m.alternate;if(E===null)throw Error(n(387));if(E=E.memoizedProps,E!==null){var L=m.type;xs(m.pendingProps.value,E.value)||(e!==null?e.push(L):e=[L])}}else if(m===vt.current){if(E=m.alternate,E===null)throw Error(n(387));E.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(e!==null?e.push(Ar):e=[Ar])}m=m.return}e!==null&&Hc(i,e,a,u),i.flags|=262144}function yo(e){for(e=e.firstContext;e!==null;){if(!xs(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _n(e){vn=e,hi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ge(e){return kf(vn,e)}function bo(e,i){return vn===null&&_n(e),kf(e,i)}function kf(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},hi===null){if(e===null)throw Error(n(308));hi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else hi=hi.next=i;return a}var gb=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,u){e.push(u)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},pb=h.unstable_scheduleCallback,mb=h.unstable_NormalPriority,ke={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gc(){return{controller:new gb,data:new Map,refCount:0}}function Qa(e){e.refCount--,e.refCount===0&&pb(mb,function(){e.controller.abort()})}var Ja=null,qc=0,ia=0,na=null;function yb(e,i){if(Ja===null){var a=Ja=[];qc=0,ia=Yu(),na={status:"pending",value:void 0,then:function(u){a.push(u)}}}return qc++,i.then(Ef,Ef),i}function Ef(){if(--qc===0&&Ja!==null){na!==null&&(na.status="fulfilled");var e=Ja;Ja=null,ia=0,na=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function bb(e,i){var a=[],u={status:"pending",value:null,reason:null,then:function(m){a.push(m)}};return e.then(function(){u.status="fulfilled",u.value=i;for(var m=0;m<a.length;m++)(0,a[m])(i)},function(m){for(u.status="rejected",u.reason=m,m=0;m<a.length;m++)(0,a[m])(void 0)}),u}var Cf=G.S;G.S=function(e,i){up=wt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&yb(e,i),Cf!==null&&Cf(e,i)};var wn=M(null);function Xc(){var e=wn.current;return e!==null?e:ue.pooledCache}function xo(e,i){i===null?J(wn,wn.current):J(wn,i.pool)}function Tf(){var e=Xc();return e===null?null:{parent:ke._currentValue,pool:e}}var aa=Error(n(460)),Vc=Error(n(474)),vo=Error(n(542)),_o={then:function(){}};function Nf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function jf(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(li,li),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Rf(e),e;default:if(typeof i.status=="string")i.then(li,li);else{if(e=ue,e!==null&&100<e.shellSuspendCounter)throw Error(n(482));e=i,e.status="pending",e.then(function(u){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=u}},function(u){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Rf(e),e}throw An=i,aa}}function Sn(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(An=a,aa):a}}var An=null;function Mf(){if(An===null)throw Error(n(459));var e=An;return An=null,e}function Rf(e){if(e===aa||e===vo)throw Error(n(483))}var ra=null,tr=0;function wo(e){var i=tr;return tr+=1,ra===null&&(ra=[]),jf(ra,e,i)}function er(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function So(e,i){throw i.$$typeof===x?Error(n(525)):(e=Object.prototype.toString.call(i),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Df(e){function i(Q,$){if(e){var tt=Q.deletions;tt===null?(Q.deletions=[$],Q.flags|=16):tt.push($)}}function a(Q,$){if(!e)return null;for(;$!==null;)i(Q,$),$=$.sibling;return null}function u(Q){for(var $=new Map;Q!==null;)Q.key!==null?$.set(Q.key,Q):$.set(Q.index,Q),Q=Q.sibling;return $}function m(Q,$){return Q=ui(Q,$),Q.index=0,Q.sibling=null,Q}function b(Q,$,tt){return Q.index=tt,e?(tt=Q.alternate,tt!==null?(tt=tt.index,tt<$?(Q.flags|=67108866,$):tt):(Q.flags|=67108866,$)):(Q.flags|=1048576,$)}function E(Q){return e&&Q.alternate===null&&(Q.flags|=67108866),Q}function L(Q,$,tt,gt){return $===null||$.tag!==6?($=Oc(tt,Q.mode,gt),$.return=Q,$):($=m($,tt),$.return=Q,$)}function V(Q,$,tt,gt){var jt=tt.type;return jt===w?ft(Q,$,tt.props.children,gt,tt.key):$!==null&&($.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===R&&Sn(jt)===$.type)?($=m($,tt.props),er($,tt),$.return=Q,$):($=po(tt.type,tt.key,tt.props,null,Q.mode,gt),er($,tt),$.return=Q,$)}function et(Q,$,tt,gt){return $===null||$.tag!==4||$.stateNode.containerInfo!==tt.containerInfo||$.stateNode.implementation!==tt.implementation?($=Lc(tt,Q.mode,gt),$.return=Q,$):($=m($,tt.children||[]),$.return=Q,$)}function ft(Q,$,tt,gt,jt){return $===null||$.tag!==7?($=bn(tt,Q.mode,gt,jt),$.return=Q,$):($=m($,tt),$.return=Q,$)}function pt(Q,$,tt){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Oc(""+$,Q.mode,tt),$.return=Q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case v:return tt=po($.type,$.key,$.props,null,Q.mode,tt),er(tt,$),tt.return=Q,tt;case _:return $=Lc($,Q.mode,tt),$.return=Q,$;case R:return $=Sn($),pt(Q,$,tt)}if(st($)||P($))return $=bn($,Q.mode,tt,null),$.return=Q,$;if(typeof $.then=="function")return pt(Q,wo($),tt);if($.$$typeof===T)return pt(Q,bo(Q,$),tt);So(Q,$)}return null}function nt(Q,$,tt,gt){var jt=$!==null?$.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return jt!==null?null:L(Q,$,""+tt,gt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case v:return tt.key===jt?V(Q,$,tt,gt):null;case _:return tt.key===jt?et(Q,$,tt,gt):null;case R:return tt=Sn(tt),nt(Q,$,tt,gt)}if(st(tt)||P(tt))return jt!==null?null:ft(Q,$,tt,gt,null);if(typeof tt.then=="function")return nt(Q,$,wo(tt),gt);if(tt.$$typeof===T)return nt(Q,$,bo(Q,tt),gt);So(Q,tt)}return null}function ut(Q,$,tt,gt,jt){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return Q=Q.get(tt)||null,L($,Q,""+gt,jt);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case v:return Q=Q.get(gt.key===null?tt:gt.key)||null,V($,Q,gt,jt);case _:return Q=Q.get(gt.key===null?tt:gt.key)||null,et($,Q,gt,jt);case R:return gt=Sn(gt),ut(Q,$,tt,gt,jt)}if(st(gt)||P(gt))return Q=Q.get(tt)||null,ft($,Q,gt,jt,null);if(typeof gt.then=="function")return ut(Q,$,tt,wo(gt),jt);if(gt.$$typeof===T)return ut(Q,$,tt,bo($,gt),jt);So($,gt)}return null}function At(Q,$,tt,gt){for(var jt=null,te=null,Ct=$,Gt=$=0,Zt=null;Ct!==null&&Gt<tt.length;Gt++){Ct.index>Gt?(Zt=Ct,Ct=null):Zt=Ct.sibling;var ee=nt(Q,Ct,tt[Gt],gt);if(ee===null){Ct===null&&(Ct=Zt);break}e&&Ct&&ee.alternate===null&&i(Q,Ct),$=b(ee,$,Gt),te===null?jt=ee:te.sibling=ee,te=ee,Ct=Zt}if(Gt===tt.length)return a(Q,Ct),Qt&&di(Q,Gt),jt;if(Ct===null){for(;Gt<tt.length;Gt++)Ct=pt(Q,tt[Gt],gt),Ct!==null&&($=b(Ct,$,Gt),te===null?jt=Ct:te.sibling=Ct,te=Ct);return Qt&&di(Q,Gt),jt}for(Ct=u(Ct);Gt<tt.length;Gt++)Zt=ut(Ct,Q,Gt,tt[Gt],gt),Zt!==null&&(e&&Zt.alternate!==null&&Ct.delete(Zt.key===null?Gt:Zt.key),$=b(Zt,$,Gt),te===null?jt=Zt:te.sibling=Zt,te=Zt);return e&&Ct.forEach(function(tn){return i(Q,tn)}),Qt&&di(Q,Gt),jt}function Rt(Q,$,tt,gt){if(tt==null)throw Error(n(151));for(var jt=null,te=null,Ct=$,Gt=$=0,Zt=null,ee=tt.next();Ct!==null&&!ee.done;Gt++,ee=tt.next()){Ct.index>Gt?(Zt=Ct,Ct=null):Zt=Ct.sibling;var tn=nt(Q,Ct,ee.value,gt);if(tn===null){Ct===null&&(Ct=Zt);break}e&&Ct&&tn.alternate===null&&i(Q,Ct),$=b(tn,$,Gt),te===null?jt=tn:te.sibling=tn,te=tn,Ct=Zt}if(ee.done)return a(Q,Ct),Qt&&di(Q,Gt),jt;if(Ct===null){for(;!ee.done;Gt++,ee=tt.next())ee=pt(Q,ee.value,gt),ee!==null&&($=b(ee,$,Gt),te===null?jt=ee:te.sibling=ee,te=ee);return Qt&&di(Q,Gt),jt}for(Ct=u(Ct);!ee.done;Gt++,ee=tt.next())ee=ut(Ct,Q,Gt,ee.value,gt),ee!==null&&(e&&ee.alternate!==null&&Ct.delete(ee.key===null?Gt:ee.key),$=b(ee,$,Gt),te===null?jt=ee:te.sibling=ee,te=ee);return e&&Ct.forEach(function(Nx){return i(Q,Nx)}),Qt&&di(Q,Gt),jt}function le(Q,$,tt,gt){if(typeof tt=="object"&&tt!==null&&tt.type===w&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case v:t:{for(var jt=tt.key;$!==null;){if($.key===jt){if(jt=tt.type,jt===w){if($.tag===7){a(Q,$.sibling),gt=m($,tt.props.children),gt.return=Q,Q=gt;break t}}else if($.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===R&&Sn(jt)===$.type){a(Q,$.sibling),gt=m($,tt.props),er(gt,tt),gt.return=Q,Q=gt;break t}a(Q,$);break}else i(Q,$);$=$.sibling}tt.type===w?(gt=bn(tt.props.children,Q.mode,gt,tt.key),gt.return=Q,Q=gt):(gt=po(tt.type,tt.key,tt.props,null,Q.mode,gt),er(gt,tt),gt.return=Q,Q=gt)}return E(Q);case _:t:{for(jt=tt.key;$!==null;){if($.key===jt)if($.tag===4&&$.stateNode.containerInfo===tt.containerInfo&&$.stateNode.implementation===tt.implementation){a(Q,$.sibling),gt=m($,tt.children||[]),gt.return=Q,Q=gt;break t}else{a(Q,$);break}else i(Q,$);$=$.sibling}gt=Lc(tt,Q.mode,gt),gt.return=Q,Q=gt}return E(Q);case R:return tt=Sn(tt),le(Q,$,tt,gt)}if(st(tt))return At(Q,$,tt,gt);if(P(tt)){if(jt=P(tt),typeof jt!="function")throw Error(n(150));return tt=jt.call(tt),Rt(Q,$,tt,gt)}if(typeof tt.then=="function")return le(Q,$,wo(tt),gt);if(tt.$$typeof===T)return le(Q,$,bo(Q,tt),gt);So(Q,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,$!==null&&$.tag===6?(a(Q,$.sibling),gt=m($,tt),gt.return=Q,Q=gt):(a(Q,$),gt=Oc(tt,Q.mode,gt),gt.return=Q,Q=gt),E(Q)):a(Q,$)}return function(Q,$,tt,gt){try{tr=0;var jt=le(Q,$,tt,gt);return ra=null,jt}catch(Ct){if(Ct===aa||Ct===vo)throw Ct;var te=vs(29,Ct,null,Q.mode);return te.lanes=gt,te.return=Q,te}}}var kn=Df(!0),Of=Df(!1),Pi=!1;function Yc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $c(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Fi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Bi(e,i,a){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,(se&2)!==0){var m=u.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),u.pending=i,i=go(e),yf(e,null,a),i}return fo(e,u,i,a),go(e)}function sr(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var u=i.lanes;u&=e.pendingLanes,a|=u,i.lanes=a,Ah(e,a)}}function Kc(e,i){var a=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var m=null,b=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};b===null?m=b=E:b=b.next=E,a=a.next}while(a!==null);b===null?m=b=i:b=b.next=i}else m=b=i;a={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:b,shared:u.shared,callbacks:u.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Wc=!1;function ir(){if(Wc){var e=na;if(e!==null)throw e}}function nr(e,i,a,u){Wc=!1;var m=e.updateQueue;Pi=!1;var b=m.firstBaseUpdate,E=m.lastBaseUpdate,L=m.shared.pending;if(L!==null){m.shared.pending=null;var V=L,et=V.next;V.next=null,E===null?b=et:E.next=et,E=V;var ft=e.alternate;ft!==null&&(ft=ft.updateQueue,L=ft.lastBaseUpdate,L!==E&&(L===null?ft.firstBaseUpdate=et:L.next=et,ft.lastBaseUpdate=V))}if(b!==null){var pt=m.baseState;E=0,ft=et=V=null,L=b;do{var nt=L.lane&-536870913,ut=nt!==L.lane;if(ut?(Wt&nt)===nt:(u&nt)===nt){nt!==0&&nt===ia&&(Wc=!0),ft!==null&&(ft=ft.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});t:{var At=e,Rt=L;nt=i;var le=a;switch(Rt.tag){case 1:if(At=Rt.payload,typeof At=="function"){pt=At.call(le,pt,nt);break t}pt=At;break t;case 3:At.flags=At.flags&-65537|128;case 0:if(At=Rt.payload,nt=typeof At=="function"?At.call(le,pt,nt):At,nt==null)break t;pt=y({},pt,nt);break t;case 2:Pi=!0}}nt=L.callback,nt!==null&&(e.flags|=64,ut&&(e.flags|=8192),ut=m.callbacks,ut===null?m.callbacks=[nt]:ut.push(nt))}else ut={lane:nt,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ft===null?(et=ft=ut,V=pt):ft=ft.next=ut,E|=nt;if(L=L.next,L===null){if(L=m.shared.pending,L===null)break;ut=L,L=ut.next,ut.next=null,m.lastBaseUpdate=ut,m.shared.pending=null}}while(!0);ft===null&&(V=pt),m.baseState=V,m.firstBaseUpdate=et,m.lastBaseUpdate=ft,b===null&&(m.shared.lanes=0),qi|=E,e.lanes=E,e.memoizedState=pt}}function Lf(e,i){if(typeof e!="function")throw Error(n(191,e));e.call(i)}function zf(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Lf(a[e],i)}var oa=M(null),Ao=M(0);function Pf(e,i){e=wi,J(Ao,e),J(oa,i),wi=e|i.baseLanes}function Zc(){J(Ao,wi),J(oa,oa.current)}function Qc(){wi=Ao.current,B(oa),B(Ao)}var _s=M(null),Fs=null;function Ii(e){var i=e.alternate;J(_e,_e.current&1),J(_s,e),Fs===null&&(i===null||oa.current!==null||i.memoizedState!==null)&&(Fs=e)}function Jc(e){J(_e,_e.current),J(_s,e),Fs===null&&(Fs=e)}function Ff(e){e.tag===22?(J(_e,_e.current),J(_s,e),Fs===null&&(Fs=e)):Ui()}function Ui(){J(_e,_e.current),J(_s,_s.current)}function ws(e){B(_s),Fs===e&&(Fs=null),B(_e)}var _e=M(0);function ko(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ad(a)||rd(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var gi=0,Ht=null,re=null,Ee=null,Eo=!1,la=!1,En=!1,Co=0,ar=0,ca=null,xb=0;function xe(){throw Error(n(321))}function tu(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!xs(e[a],i[a]))return!1;return!0}function eu(e,i,a,u,m,b){return gi=b,Ht=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=e===null||e.memoizedState===null?_g:mu,En=!1,b=a(u,m),En=!1,la&&(b=If(i,a,u,m)),Bf(e),b}function Bf(e){G.H=lr;var i=re!==null&&re.next!==null;if(gi=0,Ee=re=Ht=null,Eo=!1,ar=0,ca=null,i)throw Error(n(300));e===null||Ce||(e=e.dependencies,e!==null&&yo(e)&&(Ce=!0))}function If(e,i,a,u){Ht=e;var m=0;do{if(la&&(ca=null),ar=0,la=!1,25<=m)throw Error(n(301));if(m+=1,Ee=re=null,e.updateQueue!=null){var b=e.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}G.H=wg,b=i(a,u)}while(la);return b}function vb(){var e=G.H,i=e.useState()[0];return i=typeof i.then=="function"?rr(i):i,e=e.useState()[0],(re!==null?re.memoizedState:null)!==e&&(Ht.flags|=1024),i}function su(){var e=Co!==0;return Co=0,e}function iu(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function nu(e){if(Eo){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Eo=!1}gi=0,Ee=re=Ht=null,la=!1,ar=Co=0,ca=null}function is(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?Ht.memoizedState=Ee=e:Ee=Ee.next=e,Ee}function we(){if(re===null){var e=Ht.alternate;e=e!==null?e.memoizedState:null}else e=re.next;var i=Ee===null?Ht.memoizedState:Ee.next;if(i!==null)Ee=i,re=e;else{if(e===null)throw Ht.alternate===null?Error(n(467)):Error(n(310));re=e,e={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},Ee===null?Ht.memoizedState=Ee=e:Ee=Ee.next=e}return Ee}function To(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rr(e){var i=ar;return ar+=1,ca===null&&(ca=[]),e=jf(ca,e,i),i=Ht,(Ee===null?i.memoizedState:Ee.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?_g:mu),e}function No(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return rr(e);if(e.$$typeof===T)return Ge(e)}throw Error(n(438,String(e)))}function au(e){var i=null,a=Ht.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var u=Ht.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=To(),Ht.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),u=0;u<e;u++)a[u]=K;return i.index++,a}function pi(e,i){return typeof i=="function"?i(e):i}function jo(e){var i=we();return ru(i,re,e)}function ru(e,i,a){var u=e.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=a;var m=e.baseQueue,b=u.pending;if(b!==null){if(m!==null){var E=m.next;m.next=b.next,b.next=E}i.baseQueue=m=b,u.pending=null}if(b=e.baseState,m===null)e.memoizedState=b;else{i=m.next;var L=E=null,V=null,et=i,ft=!1;do{var pt=et.lane&-536870913;if(pt!==et.lane?(Wt&pt)===pt:(gi&pt)===pt){var nt=et.revertLane;if(nt===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),pt===ia&&(ft=!0);else if((gi&nt)===nt){et=et.next,nt===ia&&(ft=!0);continue}else pt={lane:0,revertLane:et.revertLane,gesture:null,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},V===null?(L=V=pt,E=b):V=V.next=pt,Ht.lanes|=nt,qi|=nt;pt=et.action,En&&a(b,pt),b=et.hasEagerState?et.eagerState:a(b,pt)}else nt={lane:pt,revertLane:et.revertLane,gesture:et.gesture,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},V===null?(L=V=nt,E=b):V=V.next=nt,Ht.lanes|=pt,qi|=pt;et=et.next}while(et!==null&&et!==i);if(V===null?E=b:V.next=L,!xs(b,e.memoizedState)&&(Ce=!0,ft&&(a=na,a!==null)))throw a;e.memoizedState=b,e.baseState=E,e.baseQueue=V,u.lastRenderedState=b}return m===null&&(u.lanes=0),[e.memoizedState,u.dispatch]}function ou(e){var i=we(),a=i.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=e;var u=a.dispatch,m=a.pending,b=i.memoizedState;if(m!==null){a.pending=null;var E=m=m.next;do b=e(b,E.action),E=E.next;while(E!==m);xs(b,i.memoizedState)||(Ce=!0),i.memoizedState=b,i.baseQueue===null&&(i.baseState=b),a.lastRenderedState=b}return[b,u]}function Uf(e,i,a){var u=Ht,m=we(),b=Qt;if(b){if(a===void 0)throw Error(n(407));a=a()}else a=i();var E=!xs((re||m).memoizedState,a);if(E&&(m.memoizedState=a,Ce=!0),m=m.queue,uu(qf.bind(null,u,m,e),[e]),m.getSnapshot!==i||E||Ee!==null&&Ee.memoizedState.tag&1){if(u.flags|=2048,ua(9,{destroy:void 0},Gf.bind(null,u,m,a,i),null),ue===null)throw Error(n(349));b||(gi&127)!==0||Hf(u,i,a)}return a}function Hf(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Ht.updateQueue,i===null?(i=To(),Ht.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function Gf(e,i,a,u){i.value=a,i.getSnapshot=u,Xf(i)&&Vf(e)}function qf(e,i,a){return a(function(){Xf(i)&&Vf(e)})}function Xf(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!xs(e,a)}catch{return!0}}function Vf(e){var i=yn(e,2);i!==null&&gs(i,e,2)}function lu(e){var i=is();if(typeof e=="function"){var a=e;if(e=a(),En){Ns(!0);try{a()}finally{Ns(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:e},i}function Yf(e,i,a,u){return e.baseState=a,ru(e,re,typeof u=="function"?u:pi)}function _b(e,i,a,u,m){if(Do(e))throw Error(n(485));if(e=i.action,e!==null){var b={payload:m,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){b.listeners.push(E)}};G.T!==null?a(!0):b.isTransition=!1,u(b),a=i.pending,a===null?(b.next=i.pending=b,$f(i,b)):(b.next=a.next,i.pending=a.next=b)}}function $f(e,i){var a=i.action,u=i.payload,m=e.state;if(i.isTransition){var b=G.T,E={};G.T=E;try{var L=a(m,u),V=G.S;V!==null&&V(E,L),Kf(e,i,L)}catch(et){cu(e,i,et)}finally{b!==null&&E.types!==null&&(b.types=E.types),G.T=b}}else try{b=a(m,u),Kf(e,i,b)}catch(et){cu(e,i,et)}}function Kf(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Wf(e,i,u)},function(u){return cu(e,i,u)}):Wf(e,i,a)}function Wf(e,i,a){i.status="fulfilled",i.value=a,Zf(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,$f(e,a)))}function cu(e,i,a){var u=e.pending;if(e.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=a,Zf(i),i=i.next;while(i!==u)}e.action=null}function Zf(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Qf(e,i){return i}function Jf(e,i){if(Qt){var a=ue.formState;if(a!==null){t:{var u=Ht;if(Qt){if(he){e:{for(var m=he,b=Ps;m.nodeType!==8;){if(!b){m=null;break e}if(m=Bs(m.nextSibling),m===null){m=null;break e}}b=m.data,m=b==="F!"||b==="F"?m:null}if(m){he=Bs(m.nextSibling),u=m.data==="F!";break t}}Li(u)}u=!1}u&&(i=a[0])}}return a=is(),a.memoizedState=a.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qf,lastRenderedState:i},a.queue=u,a=bg.bind(null,Ht,u),u.dispatch=a,u=lu(!1),b=pu.bind(null,Ht,!1,u.queue),u=is(),m={state:i,dispatch:null,action:e,pending:null},u.queue=m,a=_b.bind(null,Ht,m,b,a),m.dispatch=a,u.memoizedState=e,[i,a,!1]}function tg(e){var i=we();return eg(i,re,e)}function eg(e,i,a){if(i=ru(e,i,Qf)[0],e=jo(pi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=rr(i)}catch(E){throw E===aa?vo:E}else u=i;i=we();var m=i.queue,b=m.dispatch;return a!==i.memoizedState&&(Ht.flags|=2048,ua(9,{destroy:void 0},wb.bind(null,m,a),null)),[u,b,e]}function wb(e,i){e.action=i}function sg(e){var i=we(),a=re;if(a!==null)return eg(i,a,e);we(),i=i.memoizedState,a=we();var u=a.queue.dispatch;return a.memoizedState=e,[i,u,!1]}function ua(e,i,a,u){return e={tag:e,create:a,deps:u,inst:i,next:null},i=Ht.updateQueue,i===null&&(i=To(),Ht.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(u=a.next,a.next=e,e.next=u,i.lastEffect=e),e}function ig(){return we().memoizedState}function Mo(e,i,a,u){var m=is();Ht.flags|=e,m.memoizedState=ua(1|i,{destroy:void 0},a,u===void 0?null:u)}function Ro(e,i,a,u){var m=we();u=u===void 0?null:u;var b=m.memoizedState.inst;re!==null&&u!==null&&tu(u,re.memoizedState.deps)?m.memoizedState=ua(i,b,a,u):(Ht.flags|=e,m.memoizedState=ua(1|i,b,a,u))}function ng(e,i){Mo(8390656,8,e,i)}function uu(e,i){Ro(2048,8,e,i)}function Sb(e){Ht.flags|=4;var i=Ht.updateQueue;if(i===null)i=To(),Ht.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function ag(e){var i=we().memoizedState;return Sb({ref:i,nextImpl:e}),function(){if((se&2)!==0)throw Error(n(440));return i.impl.apply(void 0,arguments)}}function rg(e,i){return Ro(4,2,e,i)}function og(e,i){return Ro(4,4,e,i)}function lg(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function cg(e,i,a){a=a!=null?a.concat([e]):null,Ro(4,4,lg.bind(null,i,e),a)}function du(){}function ug(e,i){var a=we();i=i===void 0?null:i;var u=a.memoizedState;return i!==null&&tu(i,u[1])?u[0]:(a.memoizedState=[e,i],e)}function dg(e,i){var a=we();i=i===void 0?null:i;var u=a.memoizedState;if(i!==null&&tu(i,u[1]))return u[0];if(u=e(),En){Ns(!0);try{e()}finally{Ns(!1)}}return a.memoizedState=[u,i],u}function hu(e,i,a){return a===void 0||(gi&1073741824)!==0&&(Wt&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=hp(),Ht.lanes|=e,qi|=e,a)}function hg(e,i,a,u){return xs(a,i)?a:oa.current!==null?(e=hu(e,a,u),xs(e,i)||(Ce=!0),e):(gi&42)===0||(gi&1073741824)!==0&&(Wt&261930)===0?(Ce=!0,e.memoizedState=a):(e=hp(),Ht.lanes|=e,qi|=e,i)}function fg(e,i,a,u,m){var b=O.p;O.p=b!==0&&8>b?b:8;var E=G.T,L={};G.T=L,pu(e,!1,i,a);try{var V=m(),et=G.S;if(et!==null&&et(L,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ft=bb(V,u);or(e,i,ft,ks(e))}else or(e,i,u,ks(e))}catch(pt){or(e,i,{then:function(){},status:"rejected",reason:pt},ks())}finally{O.p=b,E!==null&&L.types!==null&&(E.types=L.types),G.T=E}}function Ab(){}function fu(e,i,a,u){if(e.tag!==5)throw Error(n(476));var m=gg(e).queue;fg(e,m,i,Y,a===null?Ab:function(){return pg(e),a(u)})}function gg(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:Y},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function pg(e){var i=gg(e);i.next===null&&(i=e.alternate.memoizedState),or(e,i.next.queue,{},ks())}function gu(){return Ge(Ar)}function mg(){return we().memoizedState}function yg(){return we().memoizedState}function kb(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=ks();e=Fi(a);var u=Bi(i,e,a);u!==null&&(gs(u,i,a),sr(u,i,a)),i={cache:Gc()},e.payload=i;return}i=i.return}}function Eb(e,i,a){var u=ks();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Do(e)?xg(i,a):(a=Rc(e,i,a,u),a!==null&&(gs(a,e,u),vg(a,i,u)))}function bg(e,i,a){var u=ks();or(e,i,a,u)}function or(e,i,a,u){var m={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Do(e))xg(i,m);else{var b=e.alternate;if(e.lanes===0&&(b===null||b.lanes===0)&&(b=i.lastRenderedReducer,b!==null))try{var E=i.lastRenderedState,L=b(E,a);if(m.hasEagerState=!0,m.eagerState=L,xs(L,E))return fo(e,i,m,0),ue===null&&ho(),!1}catch{}if(a=Rc(e,i,m,u),a!==null)return gs(a,e,u),vg(a,i,u),!0}return!1}function pu(e,i,a,u){if(u={lane:2,revertLane:Yu(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Do(e)){if(i)throw Error(n(479))}else i=Rc(e,a,u,2),i!==null&&gs(i,e,2)}function Do(e){var i=e.alternate;return e===Ht||i!==null&&i===Ht}function xg(e,i){la=Eo=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function vg(e,i,a){if((a&4194048)!==0){var u=i.lanes;u&=e.pendingLanes,a|=u,i.lanes=a,Ah(e,a)}}var lr={readContext:Ge,use:No,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useLayoutEffect:xe,useInsertionEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useSyncExternalStore:xe,useId:xe,useHostTransitionStatus:xe,useFormState:xe,useActionState:xe,useOptimistic:xe,useMemoCache:xe,useCacheRefresh:xe};lr.useEffectEvent=xe;var _g={readContext:Ge,use:No,useCallback:function(e,i){return is().memoizedState=[e,i===void 0?null:i],e},useContext:Ge,useEffect:ng,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Mo(4194308,4,lg.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Mo(4194308,4,e,i)},useInsertionEffect:function(e,i){Mo(4,2,e,i)},useMemo:function(e,i){var a=is();i=i===void 0?null:i;var u=e();if(En){Ns(!0);try{e()}finally{Ns(!1)}}return a.memoizedState=[u,i],u},useReducer:function(e,i,a){var u=is();if(a!==void 0){var m=a(i);if(En){Ns(!0);try{a(i)}finally{Ns(!1)}}}else m=i;return u.memoizedState=u.baseState=m,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:m},u.queue=e,e=e.dispatch=Eb.bind(null,Ht,e),[u.memoizedState,e]},useRef:function(e){var i=is();return e={current:e},i.memoizedState=e},useState:function(e){e=lu(e);var i=e.queue,a=bg.bind(null,Ht,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:du,useDeferredValue:function(e,i){var a=is();return hu(a,e,i)},useTransition:function(){var e=lu(!1);return e=fg.bind(null,Ht,e.queue,!0,!1),is().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var u=Ht,m=is();if(Qt){if(a===void 0)throw Error(n(407));a=a()}else{if(a=i(),ue===null)throw Error(n(349));(Wt&127)!==0||Hf(u,i,a)}m.memoizedState=a;var b={value:a,getSnapshot:i};return m.queue=b,ng(qf.bind(null,u,b,e),[e]),u.flags|=2048,ua(9,{destroy:void 0},Gf.bind(null,u,b,a,i),null),a},useId:function(){var e=is(),i=ue.identifierPrefix;if(Qt){var a=Qs,u=Zs;a=(u&~(1<<32-be(u)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Co++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=xb++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:gu,useFormState:Jf,useActionState:Jf,useOptimistic:function(e){var i=is();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=pu.bind(null,Ht,!0,a),a.dispatch=i,[e,i]},useMemoCache:au,useCacheRefresh:function(){return is().memoizedState=kb.bind(null,Ht)},useEffectEvent:function(e){var i=is(),a={impl:e};return i.memoizedState=a,function(){if((se&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}},mu={readContext:Ge,use:No,useCallback:ug,useContext:Ge,useEffect:uu,useImperativeHandle:cg,useInsertionEffect:rg,useLayoutEffect:og,useMemo:dg,useReducer:jo,useRef:ig,useState:function(){return jo(pi)},useDebugValue:du,useDeferredValue:function(e,i){var a=we();return hg(a,re.memoizedState,e,i)},useTransition:function(){var e=jo(pi)[0],i=we().memoizedState;return[typeof e=="boolean"?e:rr(e),i]},useSyncExternalStore:Uf,useId:mg,useHostTransitionStatus:gu,useFormState:tg,useActionState:tg,useOptimistic:function(e,i){var a=we();return Yf(a,re,e,i)},useMemoCache:au,useCacheRefresh:yg};mu.useEffectEvent=ag;var wg={readContext:Ge,use:No,useCallback:ug,useContext:Ge,useEffect:uu,useImperativeHandle:cg,useInsertionEffect:rg,useLayoutEffect:og,useMemo:dg,useReducer:ou,useRef:ig,useState:function(){return ou(pi)},useDebugValue:du,useDeferredValue:function(e,i){var a=we();return re===null?hu(a,e,i):hg(a,re.memoizedState,e,i)},useTransition:function(){var e=ou(pi)[0],i=we().memoizedState;return[typeof e=="boolean"?e:rr(e),i]},useSyncExternalStore:Uf,useId:mg,useHostTransitionStatus:gu,useFormState:sg,useActionState:sg,useOptimistic:function(e,i){var a=we();return re!==null?Yf(a,re,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:au,useCacheRefresh:yg};wg.useEffectEvent=ag;function yu(e,i,a,u){i=e.memoizedState,a=a(u,i),a=a==null?i:y({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var bu={enqueueSetState:function(e,i,a){e=e._reactInternals;var u=ks(),m=Fi(u);m.payload=i,a!=null&&(m.callback=a),i=Bi(e,m,u),i!==null&&(gs(i,e,u),sr(i,e,u))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var u=ks(),m=Fi(u);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=Bi(e,m,u),i!==null&&(gs(i,e,u),sr(i,e,u))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=ks(),u=Fi(a);u.tag=2,i!=null&&(u.callback=i),i=Bi(e,u,a),i!==null&&(gs(i,e,a),sr(i,e,a))}};function Sg(e,i,a,u,m,b,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,b,E):i.prototype&&i.prototype.isPureReactComponent?!$a(a,u)||!$a(m,b):!0}function Ag(e,i,a,u){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==e&&bu.enqueueReplaceState(i,i.state,null)}function Cn(e,i){var a=i;if("ref"in i){a={};for(var u in i)u!=="ref"&&(a[u]=i[u])}if(e=e.defaultProps){a===i&&(a=y({},a));for(var m in e)a[m]===void 0&&(a[m]=e[m])}return a}function kg(e){uo(e)}function Eg(e){console.error(e)}function Cg(e){uo(e)}function Oo(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Tg(e,i,a){try{var u=e.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function xu(e,i,a){return a=Fi(a),a.tag=3,a.payload={element:null},a.callback=function(){Oo(e,i)},a}function Ng(e){return e=Fi(e),e.tag=3,e}function jg(e,i,a,u){var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var b=u.value;e.payload=function(){return m(b)},e.callback=function(){Tg(i,a,u)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(e.callback=function(){Tg(i,a,u),typeof m!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var L=u.stack;this.componentDidCatch(u.value,{componentStack:L!==null?L:""})})}function Cb(e,i,a,u,m){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=a.alternate,i!==null&&sa(i,a,m,!0),a=_s.current,a!==null){switch(a.tag){case 31:case 13:return Fs===null?Vo():a.alternate===null&&ve===0&&(ve=3),a.flags&=-257,a.flags|=65536,a.lanes=m,u===_o?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([u]):i.add(u),qu(e,u,m)),!1;case 22:return a.flags|=65536,u===_o?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([u]):a.add(u)),qu(e,u,m)),!1}throw Error(n(435,a.tag))}return qu(e,u,m),Vo(),!1}if(Qt)return i=_s.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,u!==Fc&&(e=Error(n(422),{cause:u}),Za(Os(e,a)))):(u!==Fc&&(i=Error(n(423),{cause:u}),Za(Os(i,a))),e=e.current.alternate,e.flags|=65536,m&=-m,e.lanes|=m,u=Os(u,a),m=xu(e.stateNode,u,m),Kc(e,m),ve!==4&&(ve=2)),!1;var b=Error(n(520),{cause:u});if(b=Os(b,a),mr===null?mr=[b]:mr.push(b),ve!==4&&(ve=2),i===null)return!0;u=Os(u,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=m&-m,a.lanes|=e,e=xu(a.stateNode,u,e),Kc(a,e),!1;case 1:if(i=a.type,b=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Xi===null||!Xi.has(b))))return a.flags|=65536,m&=-m,a.lanes|=m,m=Ng(m),jg(m,e,a,u),Kc(a,m),!1}a=a.return}while(a!==null);return!1}var vu=Error(n(461)),Ce=!1;function qe(e,i,a,u){i.child=e===null?Of(i,null,a,u):kn(i,e.child,a,u)}function Mg(e,i,a,u,m){a=a.render;var b=i.ref;if("ref"in u){var E={};for(var L in u)L!=="ref"&&(E[L]=u[L])}else E=u;return _n(i),u=eu(e,i,a,E,b,m),L=su(),e!==null&&!Ce?(iu(e,i,m),mi(e,i,m)):(Qt&&L&&zc(i),i.flags|=1,qe(e,i,u,m),i.child)}function Rg(e,i,a,u,m){if(e===null){var b=a.type;return typeof b=="function"&&!Dc(b)&&b.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=b,Dg(e,i,b,u,m)):(e=po(a.type,null,u,i,i.mode,m),e.ref=i.ref,e.return=i,i.child=e)}if(b=e.child,!Tu(e,m)){var E=b.memoizedProps;if(a=a.compare,a=a!==null?a:$a,a(E,u)&&e.ref===i.ref)return mi(e,i,m)}return i.flags|=1,e=ui(b,u),e.ref=i.ref,e.return=i,i.child=e}function Dg(e,i,a,u,m){if(e!==null){var b=e.memoizedProps;if($a(b,u)&&e.ref===i.ref)if(Ce=!1,i.pendingProps=u=b,Tu(e,m))(e.flags&131072)!==0&&(Ce=!0);else return i.lanes=e.lanes,mi(e,i,m)}return _u(e,i,a,u,m)}function Og(e,i,a,u){var m=u.children,b=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(b=b!==null?b.baseLanes|a:a,e!==null){for(u=i.child=e.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~b}else u=0,i.child=null;return Lg(e,i,b,a,u)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&xo(i,b!==null?b.cachePool:null),b!==null?Pf(i,b):Zc(),Ff(i);else return u=i.lanes=536870912,Lg(e,i,b!==null?b.baseLanes|a:a,a,u)}else b!==null?(xo(i,b.cachePool),Pf(i,b),Ui(),i.memoizedState=null):(e!==null&&xo(i,null),Zc(),Ui());return qe(e,i,m,a),i.child}function cr(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Lg(e,i,a,u,m){var b=Xc();return b=b===null?null:{parent:ke._currentValue,pool:b},i.memoizedState={baseLanes:a,cachePool:b},e!==null&&xo(i,null),Zc(),Ff(i),e!==null&&sa(e,i,u,!0),i.childLanes=m,null}function Lo(e,i){return i=Po({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function zg(e,i,a){return kn(i,e.child,null,a),e=Lo(i,i.pendingProps),e.flags|=2,ws(i),i.memoizedState=null,e}function Tb(e,i,a){var u=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Qt){if(u.mode==="hidden")return e=Lo(i,u),i.lanes=536870912,cr(null,e);if(Jc(i),(e=he)?(e=$p(e,Ps),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Di!==null?{id:Zs,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},a=xf(e),a.return=i,i.child=a,He=i,he=null)):e=null,e===null)throw Li(i);return i.lanes=536870912,null}return Lo(i,u)}var b=e.memoizedState;if(b!==null){var E=b.dehydrated;if(Jc(i),m)if(i.flags&256)i.flags&=-257,i=zg(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(n(558));else if(Ce||sa(e,i,a,!1),m=(a&e.childLanes)!==0,Ce||m){if(u=ue,u!==null&&(E=kh(u,a),E!==0&&E!==b.retryLane))throw b.retryLane=E,yn(e,E),gs(u,e,E),vu;Vo(),i=zg(e,i,a)}else e=b.treeContext,he=Bs(E.nextSibling),He=i,Qt=!0,Oi=null,Ps=!1,e!==null&&wf(i,e),i=Lo(i,u),i.flags|=4096;return i}return e=ui(e.child,{mode:u.mode,children:u.children}),e.ref=i.ref,i.child=e,e.return=i,e}function zo(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(n(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function _u(e,i,a,u,m){return _n(i),a=eu(e,i,a,u,void 0,m),u=su(),e!==null&&!Ce?(iu(e,i,m),mi(e,i,m)):(Qt&&u&&zc(i),i.flags|=1,qe(e,i,a,m),i.child)}function Pg(e,i,a,u,m,b){return _n(i),i.updateQueue=null,a=If(i,u,a,m),Bf(e),u=su(),e!==null&&!Ce?(iu(e,i,b),mi(e,i,b)):(Qt&&u&&zc(i),i.flags|=1,qe(e,i,a,b),i.child)}function Fg(e,i,a,u,m){if(_n(i),i.stateNode===null){var b=Qn,E=a.contextType;typeof E=="object"&&E!==null&&(b=Ge(E)),b=new a(u,b),i.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=bu,i.stateNode=b,b._reactInternals=i,b=i.stateNode,b.props=u,b.state=i.memoizedState,b.refs={},Yc(i),E=a.contextType,b.context=typeof E=="object"&&E!==null?Ge(E):Qn,b.state=i.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(yu(i,a,E,u),b.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(E=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),E!==b.state&&bu.enqueueReplaceState(b,b.state,null),nr(i,u,b,m),ir(),b.state=i.memoizedState),typeof b.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(e===null){b=i.stateNode;var L=i.memoizedProps,V=Cn(a,L);b.props=V;var et=b.context,ft=a.contextType;E=Qn,typeof ft=="object"&&ft!==null&&(E=Ge(ft));var pt=a.getDerivedStateFromProps;ft=typeof pt=="function"||typeof b.getSnapshotBeforeUpdate=="function",L=i.pendingProps!==L,ft||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(L||et!==E)&&Ag(i,b,u,E),Pi=!1;var nt=i.memoizedState;b.state=nt,nr(i,u,b,m),ir(),et=i.memoizedState,L||nt!==et||Pi?(typeof pt=="function"&&(yu(i,a,pt,u),et=i.memoizedState),(V=Pi||Sg(i,a,V,u,nt,et,E))?(ft||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(i.flags|=4194308)):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=et),b.props=u,b.state=et,b.context=E,u=V):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{b=i.stateNode,$c(e,i),E=i.memoizedProps,ft=Cn(a,E),b.props=ft,pt=i.pendingProps,nt=b.context,et=a.contextType,V=Qn,typeof et=="object"&&et!==null&&(V=Ge(et)),L=a.getDerivedStateFromProps,(et=typeof L=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==pt||nt!==V)&&Ag(i,b,u,V),Pi=!1,nt=i.memoizedState,b.state=nt,nr(i,u,b,m),ir();var ut=i.memoizedState;E!==pt||nt!==ut||Pi||e!==null&&e.dependencies!==null&&yo(e.dependencies)?(typeof L=="function"&&(yu(i,a,L,u),ut=i.memoizedState),(ft=Pi||Sg(i,a,ft,u,nt,ut,V)||e!==null&&e.dependencies!==null&&yo(e.dependencies))?(et||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(u,ut,V),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(u,ut,V)),typeof b.componentDidUpdate=="function"&&(i.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===e.memoizedProps&&nt===e.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&nt===e.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ut),b.props=u,b.state=ut,b.context=V,u=ft):(typeof b.componentDidUpdate!="function"||E===e.memoizedProps&&nt===e.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&nt===e.memoizedState||(i.flags|=1024),u=!1)}return b=u,zo(e,i),u=(i.flags&128)!==0,b||u?(b=i.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:b.render(),i.flags|=1,e!==null&&u?(i.child=kn(i,e.child,null,m),i.child=kn(i,null,a,m)):qe(e,i,a,m),i.memoizedState=b.state,e=i.child):e=mi(e,i,m),e}function Bg(e,i,a,u){return xn(),i.flags|=256,qe(e,i,a,u),i.child}var wu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Su(e){return{baseLanes:e,cachePool:Tf()}}function Au(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=As),e}function Ig(e,i,a){var u=i.pendingProps,m=!1,b=(i.flags&128)!==0,E;if((E=b)||(E=e!==null&&e.memoizedState===null?!1:(_e.current&2)!==0),E&&(m=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,e===null){if(Qt){if(m?Ii(i):Ui(),(e=he)?(e=$p(e,Ps),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Di!==null?{id:Zs,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},a=xf(e),a.return=i,i.child=a,He=i,he=null)):e=null,e===null)throw Li(i);return rd(e)?i.lanes=32:i.lanes=536870912,null}var L=u.children;return u=u.fallback,m?(Ui(),m=i.mode,L=Po({mode:"hidden",children:L},m),u=bn(u,m,a,null),L.return=i,u.return=i,L.sibling=u,i.child=L,u=i.child,u.memoizedState=Su(a),u.childLanes=Au(e,E,a),i.memoizedState=wu,cr(null,u)):(Ii(i),ku(i,L))}var V=e.memoizedState;if(V!==null&&(L=V.dehydrated,L!==null)){if(b)i.flags&256?(Ii(i),i.flags&=-257,i=Eu(e,i,a)):i.memoizedState!==null?(Ui(),i.child=e.child,i.flags|=128,i=null):(Ui(),L=u.fallback,m=i.mode,u=Po({mode:"visible",children:u.children},m),L=bn(L,m,a,null),L.flags|=2,u.return=i,L.return=i,u.sibling=L,i.child=u,kn(i,e.child,null,a),u=i.child,u.memoizedState=Su(a),u.childLanes=Au(e,E,a),i.memoizedState=wu,i=cr(null,u));else if(Ii(i),rd(L)){if(E=L.nextSibling&&L.nextSibling.dataset,E)var et=E.dgst;E=et,u=Error(n(419)),u.stack="",u.digest=E,Za({value:u,source:null,stack:null}),i=Eu(e,i,a)}else if(Ce||sa(e,i,a,!1),E=(a&e.childLanes)!==0,Ce||E){if(E=ue,E!==null&&(u=kh(E,a),u!==0&&u!==V.retryLane))throw V.retryLane=u,yn(e,u),gs(E,e,u),vu;ad(L)||Vo(),i=Eu(e,i,a)}else ad(L)?(i.flags|=192,i.child=e.child,i=null):(e=V.treeContext,he=Bs(L.nextSibling),He=i,Qt=!0,Oi=null,Ps=!1,e!==null&&wf(i,e),i=ku(i,u.children),i.flags|=4096);return i}return m?(Ui(),L=u.fallback,m=i.mode,V=e.child,et=V.sibling,u=ui(V,{mode:"hidden",children:u.children}),u.subtreeFlags=V.subtreeFlags&65011712,et!==null?L=ui(et,L):(L=bn(L,m,a,null),L.flags|=2),L.return=i,u.return=i,u.sibling=L,i.child=u,cr(null,u),u=i.child,L=e.child.memoizedState,L===null?L=Su(a):(m=L.cachePool,m!==null?(V=ke._currentValue,m=m.parent!==V?{parent:V,pool:V}:m):m=Tf(),L={baseLanes:L.baseLanes|a,cachePool:m}),u.memoizedState=L,u.childLanes=Au(e,E,a),i.memoizedState=wu,cr(e.child,u)):(Ii(i),a=e.child,e=a.sibling,a=ui(a,{mode:"visible",children:u.children}),a.return=i,a.sibling=null,e!==null&&(E=i.deletions,E===null?(i.deletions=[e],i.flags|=16):E.push(e)),i.child=a,i.memoizedState=null,a)}function ku(e,i){return i=Po({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Po(e,i){return e=vs(22,e,null,i),e.lanes=0,e}function Eu(e,i,a){return kn(i,e.child,null,a),e=ku(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Ug(e,i,a){e.lanes|=i;var u=e.alternate;u!==null&&(u.lanes|=i),Uc(e.return,i,a)}function Cu(e,i,a,u,m,b){var E=e.memoizedState;E===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:m,treeForkCount:b}:(E.isBackwards=i,E.rendering=null,E.renderingStartTime=0,E.last=u,E.tail=a,E.tailMode=m,E.treeForkCount=b)}function Hg(e,i,a){var u=i.pendingProps,m=u.revealOrder,b=u.tail;u=u.children;var E=_e.current,L=(E&2)!==0;if(L?(E=E&1|2,i.flags|=128):E&=1,J(_e,E),qe(e,i,u,a),u=Qt?Wa:0,!L&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ug(e,a,i);else if(e.tag===19)Ug(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(m){case"forwards":for(a=i.child,m=null;a!==null;)e=a.alternate,e!==null&&ko(e)===null&&(m=a),a=a.sibling;a=m,a===null?(m=i.child,i.child=null):(m=a.sibling,a.sibling=null),Cu(i,!1,m,a,b,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,m=i.child,i.child=null;m!==null;){if(e=m.alternate,e!==null&&ko(e)===null){i.child=m;break}e=m.sibling,m.sibling=a,a=m,m=e}Cu(i,!0,a,null,b,u);break;case"together":Cu(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function mi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),qi|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(sa(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(n(153));if(i.child!==null){for(e=i.child,a=ui(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=ui(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Tu(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&yo(e)))}function Nb(e,i,a){switch(i.tag){case 3:Et(i,i.stateNode.containerInfo),zi(i,ke,e.memoizedState.cache),xn();break;case 27:case 5:St(i);break;case 4:Et(i,i.stateNode.containerInfo);break;case 10:zi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Jc(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ii(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Ig(e,i,a):(Ii(i),e=mi(e,i,a),e!==null?e.sibling:null);Ii(i);break;case 19:var m=(e.flags&128)!==0;if(u=(a&i.childLanes)!==0,u||(sa(e,i,a,!1),u=(a&i.childLanes)!==0),m){if(u)return Hg(e,i,a);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),J(_e,_e.current),u)break;return null;case 22:return i.lanes=0,Og(e,i,a,i.pendingProps);case 24:zi(i,ke,e.memoizedState.cache)}return mi(e,i,a)}function Gg(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Ce=!0;else{if(!Tu(e,a)&&(i.flags&128)===0)return Ce=!1,Nb(e,i,a);Ce=(e.flags&131072)!==0}else Ce=!1,Qt&&(i.flags&1048576)!==0&&_f(i,Wa,i.index);switch(i.lanes=0,i.tag){case 16:t:{var u=i.pendingProps;if(e=Sn(i.elementType),i.type=e,typeof e=="function")Dc(e)?(u=Cn(e,u),i.tag=1,i=Fg(null,i,e,u,a)):(i.tag=0,i=_u(null,i,e,u,a));else{if(e!=null){var m=e.$$typeof;if(m===j){i.tag=11,i=Mg(null,i,e,u,a);break t}else if(m===F){i.tag=14,i=Rg(null,i,e,u,a);break t}}throw i=N(e)||e,Error(n(306,i,""))}}return i;case 0:return _u(e,i,i.type,i.pendingProps,a);case 1:return u=i.type,m=Cn(u,i.pendingProps),Fg(e,i,u,m,a);case 3:t:{if(Et(i,i.stateNode.containerInfo),e===null)throw Error(n(387));u=i.pendingProps;var b=i.memoizedState;m=b.element,$c(e,i),nr(i,u,null,a);var E=i.memoizedState;if(u=E.cache,zi(i,ke,u),u!==b.cache&&Hc(i,[ke],a,!0),ir(),u=E.element,b.isDehydrated)if(b={element:u,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=b,i.memoizedState=b,i.flags&256){i=Bg(e,i,u,a);break t}else if(u!==m){m=Os(Error(n(424)),i),Za(m),i=Bg(e,i,u,a);break t}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,he=Bs(e.firstChild),He=i,Qt=!0,Oi=null,Ps=!0,a=Of(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(xn(),u===m){i=mi(e,i,a);break t}qe(e,i,u,a)}i=i.child}return i;case 26:return zo(e,i),e===null?(a=t0(i.type,null,i.pendingProps,null))?i.memoizedState=a:Qt||(a=i.type,e=i.pendingProps,u=Jo(_t.current).createElement(a),u[Ue]=i,u[ls]=e,Xe(u,a,e),Fe(u),i.stateNode=u):i.memoizedState=t0(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return St(i),e===null&&Qt&&(u=i.stateNode=Zp(i.type,i.pendingProps,_t.current),He=i,Ps=!0,m=he,Ki(i.type)?(od=m,he=Bs(u.firstChild)):he=m),qe(e,i,i.pendingProps.children,a),zo(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Qt&&((m=u=he)&&(u=ax(u,i.type,i.pendingProps,Ps),u!==null?(i.stateNode=u,He=i,he=Bs(u.firstChild),Ps=!1,m=!0):m=!1),m||Li(i)),St(i),m=i.type,b=i.pendingProps,E=e!==null?e.memoizedProps:null,u=b.children,sd(m,b)?u=null:E!==null&&sd(m,E)&&(i.flags|=32),i.memoizedState!==null&&(m=eu(e,i,vb,null,null,a),Ar._currentValue=m),zo(e,i),qe(e,i,u,a),i.child;case 6:return e===null&&Qt&&((e=a=he)&&(a=rx(a,i.pendingProps,Ps),a!==null?(i.stateNode=a,He=i,he=null,e=!0):e=!1),e||Li(i)),null;case 13:return Ig(e,i,a);case 4:return Et(i,i.stateNode.containerInfo),u=i.pendingProps,e===null?i.child=kn(i,null,u,a):qe(e,i,u,a),i.child;case 11:return Mg(e,i,i.type,i.pendingProps,a);case 7:return qe(e,i,i.pendingProps,a),i.child;case 8:return qe(e,i,i.pendingProps.children,a),i.child;case 12:return qe(e,i,i.pendingProps.children,a),i.child;case 10:return u=i.pendingProps,zi(i,i.type,u.value),qe(e,i,u.children,a),i.child;case 9:return m=i.type._context,u=i.pendingProps.children,_n(i),m=Ge(m),u=u(m),i.flags|=1,qe(e,i,u,a),i.child;case 14:return Rg(e,i,i.type,i.pendingProps,a);case 15:return Dg(e,i,i.type,i.pendingProps,a);case 19:return Hg(e,i,a);case 31:return Tb(e,i,a);case 22:return Og(e,i,a,i.pendingProps);case 24:return _n(i),u=Ge(ke),e===null?(m=Xc(),m===null&&(m=ue,b=Gc(),m.pooledCache=b,b.refCount++,b!==null&&(m.pooledCacheLanes|=a),m=b),i.memoizedState={parent:u,cache:m},Yc(i),zi(i,ke,m)):((e.lanes&a)!==0&&($c(e,i),nr(i,null,null,a),ir()),m=e.memoizedState,b=i.memoizedState,m.parent!==u?(m={parent:u,cache:u},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),zi(i,ke,u)):(u=b.cache,zi(i,ke,u),u!==m.cache&&Hc(i,[ke],a,!0))),qe(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(n(156,i.tag))}function yi(e){e.flags|=4}function Nu(e,i,a,u,m){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(m&335544128)===m)if(e.stateNode.complete)e.flags|=8192;else if(mp())e.flags|=8192;else throw An=_o,Vc}else e.flags&=-16777217}function qg(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!a0(i))if(mp())e.flags|=8192;else throw An=_o,Vc}function Fo(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?wh():536870912,e.lanes|=i,ga|=i)}function ur(e,i){if(!Qt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function fe(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,u=0;if(i)for(var m=e.child;m!==null;)a|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)a|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=u,e.childLanes=a,i}function jb(e,i,a){var u=i.pendingProps;switch(Pc(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fe(i),null;case 1:return fe(i),null;case 3:return a=i.stateNode,u=null,e!==null&&(u=e.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),fi(ke),lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ea(i)?yi(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Bc())),fe(i),null;case 26:var m=i.type,b=i.memoizedState;return e===null?(yi(i),b!==null?(fe(i),qg(i,b)):(fe(i),Nu(i,m,null,u,a))):b?b!==e.memoizedState?(yi(i),fe(i),qg(i,b)):(fe(i),i.flags&=-16777217):(e=e.memoizedProps,e!==u&&yi(i),fe(i),Nu(i,m,e,u,a)),null;case 27:if(Pt(i),a=_t.current,m=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==u&&yi(i);else{if(!u){if(i.stateNode===null)throw Error(n(166));return fe(i),null}e=ot.current,ea(i)?Sf(i):(e=Zp(m,u,a),i.stateNode=e,yi(i))}return fe(i),null;case 5:if(Pt(i),m=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==u&&yi(i);else{if(!u){if(i.stateNode===null)throw Error(n(166));return fe(i),null}if(b=ot.current,ea(i))Sf(i);else{var E=Jo(_t.current);switch(b){case 1:b=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:b=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":b=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":b=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":b=E.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?b.multiple=!0:u.size&&(b.size=u.size);break;default:b=typeof u.is=="string"?E.createElement(m,{is:u.is}):E.createElement(m)}}b[Ue]=i,b[ls]=u;t:for(E=i.child;E!==null;){if(E.tag===5||E.tag===6)b.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===i)break t;for(;E.sibling===null;){if(E.return===null||E.return===i)break t;E=E.return}E.sibling.return=E.return,E=E.sibling}i.stateNode=b;t:switch(Xe(b,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&yi(i)}}return fe(i),Nu(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==u&&yi(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(n(166));if(e=_t.current,ea(i)){if(e=i.stateNode,a=i.memoizedProps,u=null,m=He,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}e[Ue]=i,e=!!(e.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Ip(e.nodeValue,a)),e||Li(i,!0)}else e=Jo(e).createTextNode(u),e[Ue]=i,i.stateNode=e}return fe(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(u=ea(i),a!==null){if(e===null){if(!u)throw Error(n(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(557));e[Ue]=i}else xn(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;fe(i),e=!1}else a=Bc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(ws(i),i):(ws(i),null);if((i.flags&128)!==0)throw Error(n(558))}return fe(i),null;case 13:if(u=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(m=ea(i),u!==null&&u.dehydrated!==null){if(e===null){if(!m)throw Error(n(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[Ue]=i}else xn(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;fe(i),m=!1}else m=Bc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(ws(i),i):(ws(i),null)}return ws(i),(i.flags&128)!==0?(i.lanes=a,i):(a=u!==null,e=e!==null&&e.memoizedState!==null,a&&(u=i.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),b=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),b!==m&&(u.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),Fo(i,i.updateQueue),fe(i),null);case 4:return lt(),e===null&&Zu(i.stateNode.containerInfo),fe(i),null;case 10:return fi(i.type),fe(i),null;case 19:if(B(_e),u=i.memoizedState,u===null)return fe(i),null;if(m=(i.flags&128)!==0,b=u.rendering,b===null)if(m)ur(u,!1);else{if(ve!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(b=ko(e),b!==null){for(i.flags|=128,ur(u,!1),e=b.updateQueue,i.updateQueue=e,Fo(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)bf(a,e),a=a.sibling;return J(_e,_e.current&1|2),Qt&&di(i,u.treeForkCount),i.child}e=e.sibling}u.tail!==null&&wt()>Go&&(i.flags|=128,m=!0,ur(u,!1),i.lanes=4194304)}else{if(!m)if(e=ko(b),e!==null){if(i.flags|=128,m=!0,e=e.updateQueue,i.updateQueue=e,Fo(i,e),ur(u,!0),u.tail===null&&u.tailMode==="hidden"&&!b.alternate&&!Qt)return fe(i),null}else 2*wt()-u.renderingStartTime>Go&&a!==536870912&&(i.flags|=128,m=!0,ur(u,!1),i.lanes=4194304);u.isBackwards?(b.sibling=i.child,i.child=b):(e=u.last,e!==null?e.sibling=b:i.child=b,u.last=b)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=wt(),e.sibling=null,a=_e.current,J(_e,m?a&1|2:a&1),Qt&&di(i,u.treeForkCount),e):(fe(i),null);case 22:case 23:return ws(i),Qc(),u=i.memoizedState!==null,e!==null?e.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(a&536870912)!==0&&(i.flags&128)===0&&(fe(i),i.subtreeFlags&6&&(i.flags|=8192)):fe(i),a=i.updateQueue,a!==null&&Fo(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==a&&(i.flags|=2048),e!==null&&B(wn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),fi(ke),fe(i),null;case 25:return null;case 30:return null}throw Error(n(156,i.tag))}function Mb(e,i){switch(Pc(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return fi(ke),lt(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Pt(i),null;case 31:if(i.memoizedState!==null){if(ws(i),i.alternate===null)throw Error(n(340));xn()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(ws(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(n(340));xn()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return B(_e),null;case 4:return lt(),null;case 10:return fi(i.type),null;case 22:case 23:return ws(i),Qc(),e!==null&&B(wn),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return fi(ke),null;case 25:return null;default:return null}}function Xg(e,i){switch(Pc(i),i.tag){case 3:fi(ke),lt();break;case 26:case 27:case 5:Pt(i);break;case 4:lt();break;case 31:i.memoizedState!==null&&ws(i);break;case 13:ws(i);break;case 19:B(_e);break;case 10:fi(i.type);break;case 22:case 23:ws(i),Qc(),e!==null&&B(wn);break;case 24:fi(ke)}}function dr(e,i){try{var a=i.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var m=u.next;a=m;do{if((a.tag&e)===e){u=void 0;var b=a.create,E=a.inst;u=b(),E.destroy=u}a=a.next}while(a!==m)}}catch(L){ae(i,i.return,L)}}function Hi(e,i,a){try{var u=i.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var b=m.next;u=b;do{if((u.tag&e)===e){var E=u.inst,L=E.destroy;if(L!==void 0){E.destroy=void 0,m=i;var V=a,et=L;try{et()}catch(ft){ae(m,V,ft)}}}u=u.next}while(u!==b)}}catch(ft){ae(i,i.return,ft)}}function Vg(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{zf(i,a)}catch(u){ae(e,e.return,u)}}}function Yg(e,i,a){a.props=Cn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(u){ae(e,i,u)}}function hr(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var u=e.stateNode;break;case 30:u=e.stateNode;break;default:u=e.stateNode}typeof a=="function"?e.refCleanup=a(u):a.current=u}}catch(m){ae(e,i,m)}}function Js(e,i){var a=e.ref,u=e.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(m){ae(e,i,m)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(m){ae(e,i,m)}else a.current=null}function $g(e){var i=e.type,a=e.memoizedProps,u=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break t;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(m){ae(e,e.return,m)}}function ju(e,i,a){try{var u=e.stateNode;Jb(u,e.type,a,i),u[ls]=i}catch(m){ae(e,e.return,m)}}function Kg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ki(e.type)||e.tag===4}function Mu(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Kg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ki(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ru(e,i,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=li));else if(u!==4&&(u===27&&Ki(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Ru(e,i,a),e=e.sibling;e!==null;)Ru(e,i,a),e=e.sibling}function Bo(e,i,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(u!==4&&(u===27&&Ki(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Bo(e,i,a),e=e.sibling;e!==null;)Bo(e,i,a),e=e.sibling}function Wg(e){var i=e.stateNode,a=e.memoizedProps;try{for(var u=e.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);Xe(i,u,a),i[Ue]=e,i[ls]=a}catch(b){ae(e,e.return,b)}}var bi=!1,Te=!1,Du=!1,Zg=typeof WeakSet=="function"?WeakSet:Set,Be=null;function Rb(e,i){if(e=e.containerInfo,td=rl,e=cf(e),Ec(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var m=u.anchorOffset,b=u.focusNode;u=u.focusOffset;try{a.nodeType,b.nodeType}catch{a=null;break t}var E=0,L=-1,V=-1,et=0,ft=0,pt=e,nt=null;e:for(;;){for(var ut;pt!==a||m!==0&&pt.nodeType!==3||(L=E+m),pt!==b||u!==0&&pt.nodeType!==3||(V=E+u),pt.nodeType===3&&(E+=pt.nodeValue.length),(ut=pt.firstChild)!==null;)nt=pt,pt=ut;for(;;){if(pt===e)break e;if(nt===a&&++et===m&&(L=E),nt===b&&++ft===u&&(V=E),(ut=pt.nextSibling)!==null)break;pt=nt,nt=pt.parentNode}pt=ut}a=L===-1||V===-1?null:{start:L,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(ed={focusedElem:e,selectionRange:a},rl=!1,Be=i;Be!==null;)if(i=Be,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Be=e;else for(;Be!==null;){switch(i=Be,b=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)m=e[a],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&b!==null){e=void 0,a=i,m=b.memoizedProps,b=b.memoizedState,u=a.stateNode;try{var At=Cn(a.type,m);e=u.getSnapshotBeforeUpdate(At,b),u.__reactInternalSnapshotBeforeUpdate=e}catch(Rt){ae(a,a.return,Rt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)nd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":nd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(n(163))}if(e=i.sibling,e!==null){e.return=i.return,Be=e;break}Be=i.return}}function Qg(e,i,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:vi(e,a),u&4&&dr(5,a);break;case 1:if(vi(e,a),u&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(E){ae(a,a.return,E)}else{var m=Cn(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(m,i,e.__reactInternalSnapshotBeforeUpdate)}catch(E){ae(a,a.return,E)}}u&64&&Vg(a),u&512&&hr(a,a.return);break;case 3:if(vi(e,a),u&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{zf(e,i)}catch(E){ae(a,a.return,E)}}break;case 27:i===null&&u&4&&Wg(a);case 26:case 5:vi(e,a),i===null&&u&4&&$g(a),u&512&&hr(a,a.return);break;case 12:vi(e,a);break;case 31:vi(e,a),u&4&&ep(e,a);break;case 13:vi(e,a),u&4&&sp(e,a),u&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Ub.bind(null,a),ox(e,a))));break;case 22:if(u=a.memoizedState!==null||bi,!u){i=i!==null&&i.memoizedState!==null||Te,m=bi;var b=Te;bi=u,(Te=i)&&!b?_i(e,a,(a.subtreeFlags&8772)!==0):vi(e,a),bi=m,Te=b}break;case 30:break;default:vi(e,a)}}function Jg(e){var i=e.alternate;i!==null&&(e.alternate=null,Jg(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&cc(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var pe=null,us=!1;function xi(e,i,a){for(a=a.child;a!==null;)tp(e,i,a),a=a.sibling}function tp(e,i,a){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(ce,a)}catch{}switch(a.tag){case 26:Te||Js(a,i),xi(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Te||Js(a,i);var u=pe,m=us;Ki(a.type)&&(pe=a.stateNode,us=!1),xi(e,i,a),_r(a.stateNode),pe=u,us=m;break;case 5:Te||Js(a,i);case 6:if(u=pe,m=us,pe=null,xi(e,i,a),pe=u,us=m,pe!==null)if(us)try{(pe.nodeType===9?pe.body:pe.nodeName==="HTML"?pe.ownerDocument.body:pe).removeChild(a.stateNode)}catch(b){ae(a,i,b)}else try{pe.removeChild(a.stateNode)}catch(b){ae(a,i,b)}break;case 18:pe!==null&&(us?(e=pe,Vp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),wa(e)):Vp(pe,a.stateNode));break;case 4:u=pe,m=us,pe=a.stateNode.containerInfo,us=!0,xi(e,i,a),pe=u,us=m;break;case 0:case 11:case 14:case 15:Hi(2,a,i),Te||Hi(4,a,i),xi(e,i,a);break;case 1:Te||(Js(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Yg(a,i,u)),xi(e,i,a);break;case 21:xi(e,i,a);break;case 22:Te=(u=Te)||a.memoizedState!==null,xi(e,i,a),Te=u;break;default:xi(e,i,a)}}function ep(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{wa(e)}catch(a){ae(i,i.return,a)}}}function sp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{wa(e)}catch(a){ae(i,i.return,a)}}function Db(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Zg),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Zg),i;default:throw Error(n(435,e.tag))}}function Io(e,i){var a=Db(e);i.forEach(function(u){if(!a.has(u)){a.add(u);var m=Hb.bind(null,e,u);u.then(m,m)}})}function ds(e,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var m=a[u],b=e,E=i,L=E;t:for(;L!==null;){switch(L.tag){case 27:if(Ki(L.type)){pe=L.stateNode,us=!1;break t}break;case 5:pe=L.stateNode,us=!1;break t;case 3:case 4:pe=L.stateNode.containerInfo,us=!0;break t}L=L.return}if(pe===null)throw Error(n(160));tp(b,E,m),pe=null,us=!1,b=m.alternate,b!==null&&(b.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)ip(i,e),i=i.sibling}var qs=null;function ip(e,i){var a=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ds(i,e),hs(e),u&4&&(Hi(3,e,e.return),dr(3,e),Hi(5,e,e.return));break;case 1:ds(i,e),hs(e),u&512&&(Te||a===null||Js(a,a.return)),u&64&&bi&&(e=e.updateQueue,e!==null&&(u=e.callbacks,u!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var m=qs;if(ds(i,e),hs(e),u&512&&(Te||a===null||Js(a,a.return)),u&4){var b=a!==null?a.memoizedState:null;if(u=e.memoizedState,a===null)if(u===null)if(e.stateNode===null){t:{u=e.type,a=e.memoizedProps,m=m.ownerDocument||m;e:switch(u){case"title":b=m.getElementsByTagName("title")[0],(!b||b[Ba]||b[Ue]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=m.createElement(u),m.head.insertBefore(b,m.querySelector("head > title"))),Xe(b,u,a),b[Ue]=e,Fe(b),u=b;break t;case"link":var E=i0("link","href",m).get(u+(a.href||""));if(E){for(var L=0;L<E.length;L++)if(b=E[L],b.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&b.getAttribute("rel")===(a.rel==null?null:a.rel)&&b.getAttribute("title")===(a.title==null?null:a.title)&&b.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(L,1);break e}}b=m.createElement(u),Xe(b,u,a),m.head.appendChild(b);break;case"meta":if(E=i0("meta","content",m).get(u+(a.content||""))){for(L=0;L<E.length;L++)if(b=E[L],b.getAttribute("content")===(a.content==null?null:""+a.content)&&b.getAttribute("name")===(a.name==null?null:a.name)&&b.getAttribute("property")===(a.property==null?null:a.property)&&b.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&b.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(L,1);break e}}b=m.createElement(u),Xe(b,u,a),m.head.appendChild(b);break;default:throw Error(n(468,u))}b[Ue]=e,Fe(b),u=b}e.stateNode=u}else n0(m,e.type,e.stateNode);else e.stateNode=s0(m,u,e.memoizedProps);else b!==u?(b===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):b.count--,u===null?n0(m,e.type,e.stateNode):s0(m,u,e.memoizedProps)):u===null&&e.stateNode!==null&&ju(e,e.memoizedProps,a.memoizedProps)}break;case 27:ds(i,e),hs(e),u&512&&(Te||a===null||Js(a,a.return)),a!==null&&u&4&&ju(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ds(i,e),hs(e),u&512&&(Te||a===null||Js(a,a.return)),e.flags&32){m=e.stateNode;try{Xn(m,"")}catch(At){ae(e,e.return,At)}}u&4&&e.stateNode!=null&&(m=e.memoizedProps,ju(e,m,a!==null?a.memoizedProps:m)),u&1024&&(Du=!0);break;case 6:if(ds(i,e),hs(e),u&4){if(e.stateNode===null)throw Error(n(162));u=e.memoizedProps,a=e.stateNode;try{a.nodeValue=u}catch(At){ae(e,e.return,At)}}break;case 3:if(sl=null,m=qs,qs=tl(i.containerInfo),ds(i,e),qs=m,hs(e),u&4&&a!==null&&a.memoizedState.isDehydrated)try{wa(i.containerInfo)}catch(At){ae(e,e.return,At)}Du&&(Du=!1,np(e));break;case 4:u=qs,qs=tl(e.stateNode.containerInfo),ds(i,e),hs(e),qs=u;break;case 12:ds(i,e),hs(e);break;case 31:ds(i,e),hs(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,Io(e,u)));break;case 13:ds(i,e),hs(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ho=wt()),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,Io(e,u)));break;case 22:m=e.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,et=bi,ft=Te;if(bi=et||m,Te=ft||V,ds(i,e),Te=ft,bi=et,hs(e),u&8192)t:for(i=e.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(a===null||V||bi||Te||Tn(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){V=a=i;try{if(b=V.stateNode,m)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{L=V.stateNode;var pt=V.memoizedProps.style,nt=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;L.style.display=nt==null||typeof nt=="boolean"?"":(""+nt).trim()}}catch(At){ae(V,V.return,At)}}}else if(i.tag===6){if(a===null){V=i;try{V.stateNode.nodeValue=m?"":V.memoizedProps}catch(At){ae(V,V.return,At)}}}else if(i.tag===18){if(a===null){V=i;try{var ut=V.stateNode;m?Yp(ut,!0):Yp(V.stateNode,!1)}catch(At){ae(V,V.return,At)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=e.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Io(e,a))));break;case 19:ds(i,e),hs(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,Io(e,u)));break;case 30:break;case 21:break;default:ds(i,e),hs(e)}}function hs(e){var i=e.flags;if(i&2){try{for(var a,u=e.return;u!==null;){if(Kg(u)){a=u;break}u=u.return}if(a==null)throw Error(n(160));switch(a.tag){case 27:var m=a.stateNode,b=Mu(e);Bo(e,b,m);break;case 5:var E=a.stateNode;a.flags&32&&(Xn(E,""),a.flags&=-33);var L=Mu(e);Bo(e,L,E);break;case 3:case 4:var V=a.stateNode.containerInfo,et=Mu(e);Ru(e,et,V);break;default:throw Error(n(161))}}catch(ft){ae(e,e.return,ft)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function np(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;np(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function vi(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Qg(e,i.alternate,i),i=i.sibling}function Tn(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Hi(4,i,i.return),Tn(i);break;case 1:Js(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Yg(i,i.return,a),Tn(i);break;case 27:_r(i.stateNode);case 26:case 5:Js(i,i.return),Tn(i);break;case 22:i.memoizedState===null&&Tn(i);break;case 30:Tn(i);break;default:Tn(i)}e=e.sibling}}function _i(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,m=e,b=i,E=b.flags;switch(b.tag){case 0:case 11:case 15:_i(m,b,a),dr(4,b);break;case 1:if(_i(m,b,a),u=b,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(et){ae(u,u.return,et)}if(u=b,m=u.updateQueue,m!==null){var L=u.stateNode;try{var V=m.shared.hiddenCallbacks;if(V!==null)for(m.shared.hiddenCallbacks=null,m=0;m<V.length;m++)Lf(V[m],L)}catch(et){ae(u,u.return,et)}}a&&E&64&&Vg(b),hr(b,b.return);break;case 27:Wg(b);case 26:case 5:_i(m,b,a),a&&u===null&&E&4&&$g(b),hr(b,b.return);break;case 12:_i(m,b,a);break;case 31:_i(m,b,a),a&&E&4&&ep(m,b);break;case 13:_i(m,b,a),a&&E&4&&sp(m,b);break;case 22:b.memoizedState===null&&_i(m,b,a),hr(b,b.return);break;case 30:break;default:_i(m,b,a)}i=i.sibling}}function Ou(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Qa(a))}function Lu(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Qa(e))}function Xs(e,i,a,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ap(e,i,a,u),i=i.sibling}function ap(e,i,a,u){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Xs(e,i,a,u),m&2048&&dr(9,i);break;case 1:Xs(e,i,a,u);break;case 3:Xs(e,i,a,u),m&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Qa(e)));break;case 12:if(m&2048){Xs(e,i,a,u),e=i.stateNode;try{var b=i.memoizedProps,E=b.id,L=b.onPostCommit;typeof L=="function"&&L(E,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(V){ae(i,i.return,V)}}else Xs(e,i,a,u);break;case 31:Xs(e,i,a,u);break;case 13:Xs(e,i,a,u);break;case 23:break;case 22:b=i.stateNode,E=i.alternate,i.memoizedState!==null?b._visibility&2?Xs(e,i,a,u):fr(e,i):b._visibility&2?Xs(e,i,a,u):(b._visibility|=2,da(e,i,a,u,(i.subtreeFlags&10256)!==0||!1)),m&2048&&Ou(E,i);break;case 24:Xs(e,i,a,u),m&2048&&Lu(i.alternate,i);break;default:Xs(e,i,a,u)}}function da(e,i,a,u,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var b=e,E=i,L=a,V=u,et=E.flags;switch(E.tag){case 0:case 11:case 15:da(b,E,L,V,m),dr(8,E);break;case 23:break;case 22:var ft=E.stateNode;E.memoizedState!==null?ft._visibility&2?da(b,E,L,V,m):fr(b,E):(ft._visibility|=2,da(b,E,L,V,m)),m&&et&2048&&Ou(E.alternate,E);break;case 24:da(b,E,L,V,m),m&&et&2048&&Lu(E.alternate,E);break;default:da(b,E,L,V,m)}i=i.sibling}}function fr(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,u=i,m=u.flags;switch(u.tag){case 22:fr(a,u),m&2048&&Ou(u.alternate,u);break;case 24:fr(a,u),m&2048&&Lu(u.alternate,u);break;default:fr(a,u)}i=i.sibling}}var gr=8192;function ha(e,i,a){if(e.subtreeFlags&gr)for(e=e.child;e!==null;)rp(e,i,a),e=e.sibling}function rp(e,i,a){switch(e.tag){case 26:ha(e,i,a),e.flags&gr&&e.memoizedState!==null&&xx(a,qs,e.memoizedState,e.memoizedProps);break;case 5:ha(e,i,a);break;case 3:case 4:var u=qs;qs=tl(e.stateNode.containerInfo),ha(e,i,a),qs=u;break;case 22:e.memoizedState===null&&(u=e.alternate,u!==null&&u.memoizedState!==null?(u=gr,gr=16777216,ha(e,i,a),gr=u):ha(e,i,a));break;default:ha(e,i,a)}}function op(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function pr(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];Be=u,cp(u,e)}op(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)lp(e),e=e.sibling}function lp(e){switch(e.tag){case 0:case 11:case 15:pr(e),e.flags&2048&&Hi(9,e,e.return);break;case 3:pr(e);break;case 12:pr(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Uo(e)):pr(e);break;default:pr(e)}}function Uo(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];Be=u,cp(u,e)}op(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Hi(8,i,i.return),Uo(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Uo(i));break;default:Uo(i)}e=e.sibling}}function cp(e,i){for(;Be!==null;){var a=Be;switch(a.tag){case 0:case 11:case 15:Hi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Qa(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Be=u;else t:for(a=e;Be!==null;){u=Be;var m=u.sibling,b=u.return;if(Jg(u),u===a){Be=null;break t}if(m!==null){m.return=b,Be=m;break t}Be=b}}}var Ob={getCacheForType:function(e){var i=Ge(ke),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return Ge(ke).controller.signal}},Lb=typeof WeakMap=="function"?WeakMap:Map,se=0,ue=null,$t=null,Wt=0,ne=0,Ss=null,Gi=!1,fa=!1,zu=!1,wi=0,ve=0,qi=0,Nn=0,Pu=0,As=0,ga=0,mr=null,fs=null,Fu=!1,Ho=0,up=0,Go=1/0,qo=null,Xi=null,Me=0,Vi=null,pa=null,Si=0,Bu=0,Iu=null,dp=null,yr=0,Uu=null;function ks(){return(se&2)!==0&&Wt!==0?Wt&-Wt:G.T!==null?Yu():Eh()}function hp(){if(As===0)if((Wt&536870912)===0||Qt){var e=hn;hn<<=1,(hn&3932160)===0&&(hn=262144),As=e}else As=536870912;return e=_s.current,e!==null&&(e.flags|=32),As}function gs(e,i,a){(e===ue&&(ne===2||ne===9)||e.cancelPendingCommit!==null)&&(ma(e,0),Yi(e,Wt,As,!1)),Fa(e,a),((se&2)===0||e!==ue)&&(e===ue&&((se&2)===0&&(Nn|=a),ve===4&&Yi(e,Wt,As,!1)),ti(e))}function fp(e,i,a){if((se&6)!==0)throw Error(n(327));var u=!a&&(i&127)===0&&(i&e.expiredLanes)===0||Pa(e,i),m=u?Fb(e,i):Gu(e,i,!0),b=u;do{if(m===0){fa&&!u&&Yi(e,i,0,!1);break}else{if(a=e.current.alternate,b&&!zb(a)){m=Gu(e,i,!1),b=!1;continue}if(m===2){if(b=i,e.errorRecoveryDisabledLanes&b)var E=0;else E=e.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;t:{var L=e;m=mr;var V=L.current.memoizedState.isDehydrated;if(V&&(ma(L,E).flags|=256),E=Gu(L,E,!1),E!==2){if(zu&&!V){L.errorRecoveryDisabledLanes|=b,Nn|=b,m=4;break t}b=fs,fs=m,b!==null&&(fs===null?fs=b:fs.push.apply(fs,b))}m=E}if(b=!1,m!==2)continue}}if(m===1){ma(e,0),Yi(e,i,0,!0);break}t:{switch(u=e,b=m,b){case 0:case 1:throw Error(n(345));case 4:if((i&4194048)!==i)break;case 6:Yi(u,i,As,!Gi);break t;case 2:fs=null;break;case 3:case 5:break;default:throw Error(n(329))}if((i&62914560)===i&&(m=Ho+300-wt(),10<m)){if(Yi(u,i,As,!Gi),Jr(u,0,!0)!==0)break t;Si=i,u.timeoutHandle=qp(gp.bind(null,u,a,fs,qo,Fu,i,As,Nn,ga,Gi,b,"Throttled",-0,0),m);break t}gp(u,a,fs,qo,Fu,i,As,Nn,ga,Gi,b,null,-0,0)}}break}while(!0);ti(e)}function gp(e,i,a,u,m,b,E,L,V,et,ft,pt,nt,ut){if(e.timeoutHandle=-1,pt=i.subtreeFlags,pt&8192||(pt&16785408)===16785408){pt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},rp(i,b,pt);var At=(b&62914560)===b?Ho-wt():(b&4194048)===b?up-wt():0;if(At=vx(pt,At),At!==null){Si=b,e.cancelPendingCommit=At(wp.bind(null,e,i,b,a,u,m,E,L,V,ft,pt,null,nt,ut)),Yi(e,b,E,!et);return}}wp(e,i,b,a,u,m,E,L,V)}function zb(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var m=a[u],b=m.getSnapshot;m=m.value;try{if(!xs(b(),m))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Yi(e,i,a,u){i&=~Pu,i&=~Nn,e.suspendedLanes|=i,e.pingedLanes&=~i,u&&(e.warmLanes|=i),u=e.expirationTimes;for(var m=i;0<m;){var b=31-be(m),E=1<<b;u[b]=-1,m&=~E}a!==0&&Sh(e,a,i)}function Xo(){return(se&6)===0?(br(0),!1):!0}function Hu(){if($t!==null){if(ne===0)var e=$t.return;else e=$t,hi=vn=null,nu(e),ra=null,tr=0,e=$t;for(;e!==null;)Xg(e.alternate,e),e=e.return;$t=null}}function ma(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,sx(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Si=0,Hu(),ue=e,$t=a=ui(e.current,null),Wt=i,ne=0,Ss=null,Gi=!1,fa=Pa(e,i),zu=!1,ga=As=Pu=Nn=qi=ve=0,fs=mr=null,Fu=!1,(i&8)!==0&&(i|=i&32);var u=e.entangledLanes;if(u!==0)for(e=e.entanglements,u&=i;0<u;){var m=31-be(u),b=1<<m;i|=e[m],u&=~b}return wi=i,ho(),a}function pp(e,i){Ht=null,G.H=lr,i===aa||i===vo?(i=Mf(),ne=3):i===Vc?(i=Mf(),ne=4):ne=i===vu?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ss=i,$t===null&&(ve=1,Oo(e,Os(i,e.current)))}function mp(){var e=_s.current;return e===null?!0:(Wt&4194048)===Wt?Fs===null:(Wt&62914560)===Wt||(Wt&536870912)!==0?e===Fs:!1}function yp(){var e=G.H;return G.H=lr,e===null?lr:e}function bp(){var e=G.A;return G.A=Ob,e}function Vo(){ve=4,Gi||(Wt&4194048)!==Wt&&_s.current!==null||(fa=!0),(qi&134217727)===0&&(Nn&134217727)===0||ue===null||Yi(ue,Wt,As,!1)}function Gu(e,i,a){var u=se;se|=2;var m=yp(),b=bp();(ue!==e||Wt!==i)&&(qo=null,ma(e,i)),i=!1;var E=ve;t:do try{if(ne!==0&&$t!==null){var L=$t,V=Ss;switch(ne){case 8:Hu(),E=6;break t;case 3:case 2:case 9:case 6:_s.current===null&&(i=!0);var et=ne;if(ne=0,Ss=null,ya(e,L,V,et),a&&fa){E=0;break t}break;default:et=ne,ne=0,Ss=null,ya(e,L,V,et)}}Pb(),E=ve;break}catch(ft){pp(e,ft)}while(!0);return i&&e.shellSuspendCounter++,hi=vn=null,se=u,G.H=m,G.A=b,$t===null&&(ue=null,Wt=0,ho()),E}function Pb(){for(;$t!==null;)xp($t)}function Fb(e,i){var a=se;se|=2;var u=yp(),m=bp();ue!==e||Wt!==i?(qo=null,Go=wt()+500,ma(e,i)):fa=Pa(e,i);t:do try{if(ne!==0&&$t!==null){i=$t;var b=Ss;e:switch(ne){case 1:ne=0,Ss=null,ya(e,i,b,1);break;case 2:case 9:if(Nf(b)){ne=0,Ss=null,vp(i);break}i=function(){ne!==2&&ne!==9||ue!==e||(ne=7),ti(e)},b.then(i,i);break t;case 3:ne=7;break t;case 4:ne=5;break t;case 7:Nf(b)?(ne=0,Ss=null,vp(i)):(ne=0,Ss=null,ya(e,i,b,7));break;case 5:var E=null;switch($t.tag){case 26:E=$t.memoizedState;case 5:case 27:var L=$t;if(E?a0(E):L.stateNode.complete){ne=0,Ss=null;var V=L.sibling;if(V!==null)$t=V;else{var et=L.return;et!==null?($t=et,Yo(et)):$t=null}break e}}ne=0,Ss=null,ya(e,i,b,5);break;case 6:ne=0,Ss=null,ya(e,i,b,6);break;case 8:Hu(),ve=6;break t;default:throw Error(n(462))}}Bb();break}catch(ft){pp(e,ft)}while(!0);return hi=vn=null,G.H=u,G.A=m,se=a,$t!==null?0:(ue=null,Wt=0,ho(),ve)}function Bb(){for(;$t!==null&&!it();)xp($t)}function xp(e){var i=Gg(e.alternate,e,wi);e.memoizedProps=e.pendingProps,i===null?Yo(e):$t=i}function vp(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Pg(a,i,i.pendingProps,i.type,void 0,Wt);break;case 11:i=Pg(a,i,i.pendingProps,i.type.render,i.ref,Wt);break;case 5:nu(i);default:Xg(a,i),i=$t=bf(i,wi),i=Gg(a,i,wi)}e.memoizedProps=e.pendingProps,i===null?Yo(e):$t=i}function ya(e,i,a,u){hi=vn=null,nu(i),ra=null,tr=0;var m=i.return;try{if(Cb(e,m,i,a,Wt)){ve=1,Oo(e,Os(a,e.current)),$t=null;return}}catch(b){if(m!==null)throw $t=m,b;ve=1,Oo(e,Os(a,e.current)),$t=null;return}i.flags&32768?(Qt||u===1?e=!0:fa||(Wt&536870912)!==0?e=!1:(Gi=e=!0,(u===2||u===9||u===3||u===6)&&(u=_s.current,u!==null&&u.tag===13&&(u.flags|=16384))),_p(i,e)):Yo(i)}function Yo(e){var i=e;do{if((i.flags&32768)!==0){_p(i,Gi);return}e=i.return;var a=jb(i.alternate,i,wi);if(a!==null){$t=a;return}if(i=i.sibling,i!==null){$t=i;return}$t=i=e}while(i!==null);ve===0&&(ve=5)}function _p(e,i){do{var a=Mb(e.alternate,e);if(a!==null){a.flags&=32767,$t=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){$t=e;return}$t=e=a}while(e!==null);ve=6,$t=null}function wp(e,i,a,u,m,b,E,L,V){e.cancelPendingCommit=null;do $o();while(Me!==0);if((se&6)!==0)throw Error(n(327));if(i!==null){if(i===e.current)throw Error(n(177));if(b=i.lanes|i.childLanes,b|=Mc,by(e,a,b,E,L,V),e===ue&&($t=ue=null,Wt=0),pa=i,Vi=e,Si=a,Bu=b,Iu=m,dp=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Gb(Vt,function(){return Cp(),null})):(e.callbackNode=null,e.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=G.T,G.T=null,m=O.p,O.p=2,E=se,se|=4;try{Rb(e,i,a)}finally{se=E,O.p=m,G.T=u}}Me=1,Sp(),Ap(),kp()}}function Sp(){if(Me===1){Me=0;var e=Vi,i=pa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var u=O.p;O.p=2;var m=se;se|=4;try{ip(i,e);var b=ed,E=cf(e.containerInfo),L=b.focusedElem,V=b.selectionRange;if(E!==L&&L&&L.ownerDocument&&lf(L.ownerDocument.documentElement,L)){if(V!==null&&Ec(L)){var et=V.start,ft=V.end;if(ft===void 0&&(ft=et),"selectionStart"in L)L.selectionStart=et,L.selectionEnd=Math.min(ft,L.value.length);else{var pt=L.ownerDocument||document,nt=pt&&pt.defaultView||window;if(nt.getSelection){var ut=nt.getSelection(),At=L.textContent.length,Rt=Math.min(V.start,At),le=V.end===void 0?Rt:Math.min(V.end,At);!ut.extend&&Rt>le&&(E=le,le=Rt,Rt=E);var Q=of(L,Rt),$=of(L,le);if(Q&&$&&(ut.rangeCount!==1||ut.anchorNode!==Q.node||ut.anchorOffset!==Q.offset||ut.focusNode!==$.node||ut.focusOffset!==$.offset)){var tt=pt.createRange();tt.setStart(Q.node,Q.offset),ut.removeAllRanges(),Rt>le?(ut.addRange(tt),ut.extend($.node,$.offset)):(tt.setEnd($.node,$.offset),ut.addRange(tt))}}}}for(pt=[],ut=L;ut=ut.parentNode;)ut.nodeType===1&&pt.push({element:ut,left:ut.scrollLeft,top:ut.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<pt.length;L++){var gt=pt[L];gt.element.scrollLeft=gt.left,gt.element.scrollTop=gt.top}}rl=!!td,ed=td=null}finally{se=m,O.p=u,G.T=a}}e.current=i,Me=2}}function Ap(){if(Me===2){Me=0;var e=Vi,i=pa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var u=O.p;O.p=2;var m=se;se|=4;try{Qg(e,i.alternate,i)}finally{se=m,O.p=u,G.T=a}}Me=3}}function kp(){if(Me===4||Me===3){Me=0,bt();var e=Vi,i=pa,a=Si,u=dp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Me=5:(Me=0,pa=Vi=null,Ep(e,e.pendingLanes));var m=e.pendingLanes;if(m===0&&(Xi=null),oc(a),i=i.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(ce,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=G.T,m=O.p,O.p=2,G.T=null;try{for(var b=e.onRecoverableError,E=0;E<u.length;E++){var L=u[E];b(L.value,{componentStack:L.stack})}}finally{G.T=i,O.p=m}}(Si&3)!==0&&$o(),ti(e),m=e.pendingLanes,(a&261930)!==0&&(m&42)!==0?e===Uu?yr++:(yr=0,Uu=e):yr=0,br(0)}}function Ep(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Qa(i)))}function $o(){return Sp(),Ap(),kp(),Cp()}function Cp(){if(Me!==5)return!1;var e=Vi,i=Bu;Bu=0;var a=oc(Si),u=G.T,m=O.p;try{O.p=32>a?32:a,G.T=null,a=Iu,Iu=null;var b=Vi,E=Si;if(Me=0,pa=Vi=null,Si=0,(se&6)!==0)throw Error(n(331));var L=se;if(se|=4,lp(b.current),ap(b,b.current,E,a),se=L,br(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(ce,b)}catch{}return!0}finally{O.p=m,G.T=u,Ep(e,i)}}function Tp(e,i,a){i=Os(a,i),i=xu(e.stateNode,i,2),e=Bi(e,i,2),e!==null&&(Fa(e,2),ti(e))}function ae(e,i,a){if(e.tag===3)Tp(e,e,a);else for(;i!==null;){if(i.tag===3){Tp(i,e,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Xi===null||!Xi.has(u))){e=Os(a,e),a=Ng(2),u=Bi(i,a,2),u!==null&&(jg(a,u,i,e),Fa(u,2),ti(u));break}}i=i.return}}function qu(e,i,a){var u=e.pingCache;if(u===null){u=e.pingCache=new Lb;var m=new Set;u.set(i,m)}else m=u.get(i),m===void 0&&(m=new Set,u.set(i,m));m.has(a)||(zu=!0,m.add(a),e=Ib.bind(null,e,i,a),i.then(e,e))}function Ib(e,i,a){var u=e.pingCache;u!==null&&u.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ue===e&&(Wt&a)===a&&(ve===4||ve===3&&(Wt&62914560)===Wt&&300>wt()-Ho?(se&2)===0&&ma(e,0):Pu|=a,ga===Wt&&(ga=0)),ti(e)}function Np(e,i){i===0&&(i=wh()),e=yn(e,i),e!==null&&(Fa(e,i),ti(e))}function Ub(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Np(e,a)}function Hb(e,i){var a=0;switch(e.tag){case 31:case 13:var u=e.stateNode,m=e.memoizedState;m!==null&&(a=m.retryLane);break;case 19:u=e.stateNode;break;case 22:u=e.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(i),Np(e,a)}function Gb(e,i){return mt(e,i)}var Ko=null,ba=null,Xu=!1,Wo=!1,Vu=!1,$i=0;function ti(e){e!==ba&&e.next===null&&(ba===null?Ko=ba=e:ba=ba.next=e),Wo=!0,Xu||(Xu=!0,Xb())}function br(e,i){if(!Vu&&Wo){Vu=!0;do for(var a=!1,u=Ko;u!==null;){if(e!==0){var m=u.pendingLanes;if(m===0)var b=0;else{var E=u.suspendedLanes,L=u.pingedLanes;b=(1<<31-be(42|e)+1)-1,b&=m&~(E&~L),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(a=!0,Dp(u,b))}else b=Wt,b=Jr(u,u===ue?b:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(b&3)===0||Pa(u,b)||(a=!0,Dp(u,b));u=u.next}while(a);Vu=!1}}function qb(){jp()}function jp(){Wo=Xu=!1;var e=0;$i!==0&&ex()&&(e=$i);for(var i=wt(),a=null,u=Ko;u!==null;){var m=u.next,b=Mp(u,i);b===0?(u.next=null,a===null?Ko=m:a.next=m,m===null&&(ba=a)):(a=u,(e!==0||(b&3)!==0)&&(Wo=!0)),u=m}Me!==0&&Me!==5||br(e),$i!==0&&($i=0)}function Mp(e,i){for(var a=e.suspendedLanes,u=e.pingedLanes,m=e.expirationTimes,b=e.pendingLanes&-62914561;0<b;){var E=31-be(b),L=1<<E,V=m[E];V===-1?((L&a)===0||(L&u)!==0)&&(m[E]=yy(L,i)):V<=i&&(e.expiredLanes|=L),b&=~L}if(i=ue,a=Wt,a=Jr(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u=e.callbackNode,a===0||e===i&&(ne===2||ne===9)||e.cancelPendingCommit!==null)return u!==null&&u!==null&&yt(u),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Pa(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(u!==null&&yt(u),oc(a)){case 2:case 8:a=ie;break;case 32:a=Vt;break;case 268435456:a=ji;break;default:a=Vt}return u=Rp.bind(null,e),a=mt(a,u),e.callbackPriority=i,e.callbackNode=a,i}return u!==null&&u!==null&&yt(u),e.callbackPriority=2,e.callbackNode=null,2}function Rp(e,i){if(Me!==0&&Me!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if($o()&&e.callbackNode!==a)return null;var u=Wt;return u=Jr(e,e===ue?u:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u===0?null:(fp(e,u,i),Mp(e,wt()),e.callbackNode!=null&&e.callbackNode===a?Rp.bind(null,e):null)}function Dp(e,i){if($o())return null;fp(e,i,!0)}function Xb(){ix(function(){(se&6)!==0?mt(Nt,qb):jp()})}function Yu(){if($i===0){var e=ia;e===0&&(e=Fn,Fn<<=1,(Fn&261888)===0&&(Fn=256)),$i=e}return $i}function Op(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:io(""+e)}function Lp(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function Vb(e,i,a,u,m){if(i==="submit"&&a&&a.stateNode===m){var b=Op((m[ls]||null).action),E=u.submitter;E&&(i=(i=E[ls]||null)?Op(i.formAction):E.getAttribute("formAction"),i!==null&&(b=i,E=null));var L=new oo("action","action",null,u,m);e.push({event:L,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if($i!==0){var V=E?Lp(m,E):new FormData(m);fu(a,{pending:!0,data:V,method:m.method,action:b},null,V)}}else typeof b=="function"&&(L.preventDefault(),V=E?Lp(m,E):new FormData(m),fu(a,{pending:!0,data:V,method:m.method,action:b},b,V))},currentTarget:m}]})}}for(var $u=0;$u<jc.length;$u++){var Ku=jc[$u],Yb=Ku.toLowerCase(),$b=Ku[0].toUpperCase()+Ku.slice(1);Gs(Yb,"on"+$b)}Gs(hf,"onAnimationEnd"),Gs(ff,"onAnimationIteration"),Gs(gf,"onAnimationStart"),Gs("dblclick","onDoubleClick"),Gs("focusin","onFocus"),Gs("focusout","onBlur"),Gs(ub,"onTransitionRun"),Gs(db,"onTransitionStart"),Gs(hb,"onTransitionCancel"),Gs(pf,"onTransitionEnd"),Gn("onMouseEnter",["mouseout","mouseover"]),Gn("onMouseLeave",["mouseout","mouseover"]),Gn("onPointerEnter",["pointerout","pointerover"]),Gn("onPointerLeave",["pointerout","pointerover"]),fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xr));function zp(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var u=e[a],m=u.event;u=u.listeners;t:{var b=void 0;if(i)for(var E=u.length-1;0<=E;E--){var L=u[E],V=L.instance,et=L.currentTarget;if(L=L.listener,V!==b&&m.isPropagationStopped())break t;b=L,m.currentTarget=et;try{b(m)}catch(ft){uo(ft)}m.currentTarget=null,b=V}else for(E=0;E<u.length;E++){if(L=u[E],V=L.instance,et=L.currentTarget,L=L.listener,V!==b&&m.isPropagationStopped())break t;b=L,m.currentTarget=et;try{b(m)}catch(ft){uo(ft)}m.currentTarget=null,b=V}}}}function Kt(e,i){var a=i[lc];a===void 0&&(a=i[lc]=new Set);var u=e+"__bubble";a.has(u)||(Pp(i,e,2,!1),a.add(u))}function Wu(e,i,a){var u=0;i&&(u|=4),Pp(a,e,u,i)}var Zo="_reactListening"+Math.random().toString(36).slice(2);function Zu(e){if(!e[Zo]){e[Zo]=!0,Nh.forEach(function(a){a!=="selectionchange"&&(Kb.has(a)||Wu(a,!1,e),Wu(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Zo]||(i[Zo]=!0,Wu("selectionchange",!1,i))}}function Pp(e,i,a,u){switch(h0(i)){case 2:var m=Sx;break;case 8:m=Ax;break;default:m=hd}a=m.bind(null,i,a,e),m=void 0,!yc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),u?m!==void 0?e.addEventListener(i,a,{capture:!0,passive:m}):e.addEventListener(i,a,!0):m!==void 0?e.addEventListener(i,a,{passive:m}):e.addEventListener(i,a,!1)}function Qu(e,i,a,u,m){var b=u;if((i&1)===0&&(i&2)===0&&u!==null)t:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var L=u.stateNode.containerInfo;if(L===m)break;if(E===4)for(E=u.return;E!==null;){var V=E.tag;if((V===3||V===4)&&E.stateNode.containerInfo===m)return;E=E.return}for(;L!==null;){if(E=In(L),E===null)return;if(V=E.tag,V===5||V===6||V===26||V===27){u=b=E;continue t}L=L.parentNode}}u=u.return}Uh(function(){var et=b,ft=pc(a),pt=[];t:{var nt=mf.get(e);if(nt!==void 0){var ut=oo,At=e;switch(e){case"keypress":if(ao(a)===0)break t;case"keydown":case"keyup":ut=Hy;break;case"focusin":At="focus",ut=_c;break;case"focusout":At="blur",ut=_c;break;case"beforeblur":case"afterblur":ut=_c;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ut=qh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ut=jy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ut=Xy;break;case hf:case ff:case gf:ut=Dy;break;case pf:ut=Yy;break;case"scroll":case"scrollend":ut=Ty;break;case"wheel":ut=Ky;break;case"copy":case"cut":case"paste":ut=Ly;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ut=Vh;break;case"toggle":case"beforetoggle":ut=Zy}var Rt=(i&4)!==0,le=!Rt&&(e==="scroll"||e==="scrollend"),Q=Rt?nt!==null?nt+"Capture":null:nt;Rt=[];for(var $=et,tt;$!==null;){var gt=$;if(tt=gt.stateNode,gt=gt.tag,gt!==5&&gt!==26&&gt!==27||tt===null||Q===null||(gt=Ua($,Q),gt!=null&&Rt.push(vr($,gt,tt))),le)break;$=$.return}0<Rt.length&&(nt=new ut(nt,At,null,a,ft),pt.push({event:nt,listeners:Rt}))}}if((i&7)===0){t:{if(nt=e==="mouseover"||e==="pointerover",ut=e==="mouseout"||e==="pointerout",nt&&a!==gc&&(At=a.relatedTarget||a.fromElement)&&(In(At)||At[Bn]))break t;if((ut||nt)&&(nt=ft.window===ft?ft:(nt=ft.ownerDocument)?nt.defaultView||nt.parentWindow:window,ut?(At=a.relatedTarget||a.toElement,ut=et,At=At?In(At):null,At!==null&&(le=o(At),Rt=At.tag,At!==le||Rt!==5&&Rt!==27&&Rt!==6)&&(At=null)):(ut=null,At=et),ut!==At)){if(Rt=qh,gt="onMouseLeave",Q="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(Rt=Vh,gt="onPointerLeave",Q="onPointerEnter",$="pointer"),le=ut==null?nt:Ia(ut),tt=At==null?nt:Ia(At),nt=new Rt(gt,$+"leave",ut,a,ft),nt.target=le,nt.relatedTarget=tt,gt=null,In(ft)===et&&(Rt=new Rt(Q,$+"enter",At,a,ft),Rt.target=tt,Rt.relatedTarget=le,gt=Rt),le=gt,ut&&At)e:{for(Rt=Wb,Q=ut,$=At,tt=0,gt=Q;gt;gt=Rt(gt))tt++;gt=0;for(var jt=$;jt;jt=Rt(jt))gt++;for(;0<tt-gt;)Q=Rt(Q),tt--;for(;0<gt-tt;)$=Rt($),gt--;for(;tt--;){if(Q===$||$!==null&&Q===$.alternate){Rt=Q;break e}Q=Rt(Q),$=Rt($)}Rt=null}else Rt=null;ut!==null&&Fp(pt,nt,ut,Rt,!1),At!==null&&le!==null&&Fp(pt,le,At,Rt,!0)}}t:{if(nt=et?Ia(et):window,ut=nt.nodeName&&nt.nodeName.toLowerCase(),ut==="select"||ut==="input"&&nt.type==="file")var te=tf;else if(Qh(nt))if(ef)te=ob;else{te=ab;var Ct=nb}else ut=nt.nodeName,!ut||ut.toLowerCase()!=="input"||nt.type!=="checkbox"&&nt.type!=="radio"?et&&fc(et.elementType)&&(te=tf):te=rb;if(te&&(te=te(e,et))){Jh(pt,te,a,ft);break t}Ct&&Ct(e,nt,et),e==="focusout"&&et&&nt.type==="number"&&et.memoizedProps.value!=null&&hc(nt,"number",nt.value)}switch(Ct=et?Ia(et):window,e){case"focusin":(Qh(Ct)||Ct.contentEditable==="true")&&(Kn=Ct,Cc=et,Ka=null);break;case"focusout":Ka=Cc=Kn=null;break;case"mousedown":Tc=!0;break;case"contextmenu":case"mouseup":case"dragend":Tc=!1,uf(pt,a,ft);break;case"selectionchange":if(cb)break;case"keydown":case"keyup":uf(pt,a,ft)}var Gt;if(Sc)t:{switch(e){case"compositionstart":var Zt="onCompositionStart";break t;case"compositionend":Zt="onCompositionEnd";break t;case"compositionupdate":Zt="onCompositionUpdate";break t}Zt=void 0}else $n?Wh(e,a)&&(Zt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Zt="onCompositionStart");Zt&&(Yh&&a.locale!=="ko"&&($n||Zt!=="onCompositionStart"?Zt==="onCompositionEnd"&&$n&&(Gt=Hh()):(Ri=ft,bc="value"in Ri?Ri.value:Ri.textContent,$n=!0)),Ct=Qo(et,Zt),0<Ct.length&&(Zt=new Xh(Zt,e,null,a,ft),pt.push({event:Zt,listeners:Ct}),Gt?Zt.data=Gt:(Gt=Zh(a),Gt!==null&&(Zt.data=Gt)))),(Gt=Jy?tb(e,a):eb(e,a))&&(Zt=Qo(et,"onBeforeInput"),0<Zt.length&&(Ct=new Xh("onBeforeInput","beforeinput",null,a,ft),pt.push({event:Ct,listeners:Zt}),Ct.data=Gt)),Vb(pt,e,et,a,ft)}zp(pt,i)})}function vr(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Qo(e,i){for(var a=i+"Capture",u=[];e!==null;){var m=e,b=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||b===null||(m=Ua(e,a),m!=null&&u.unshift(vr(e,m,b)),m=Ua(e,i),m!=null&&u.push(vr(e,m,b))),e.tag===3)return u;e=e.return}return[]}function Wb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Fp(e,i,a,u,m){for(var b=i._reactName,E=[];a!==null&&a!==u;){var L=a,V=L.alternate,et=L.stateNode;if(L=L.tag,V!==null&&V===u)break;L!==5&&L!==26&&L!==27||et===null||(V=et,m?(et=Ua(a,b),et!=null&&E.unshift(vr(a,et,V))):m||(et=Ua(a,b),et!=null&&E.push(vr(a,et,V)))),a=a.return}E.length!==0&&e.push({event:i,listeners:E})}var Zb=/\r\n?/g,Qb=/\u0000|\uFFFD/g;function Bp(e){return(typeof e=="string"?e:""+e).replace(Zb,`
`).replace(Qb,"")}function Ip(e,i){return i=Bp(i),Bp(e)===i}function oe(e,i,a,u,m,b){switch(a){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Xn(e,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Xn(e,""+u);break;case"className":eo(e,"class",u);break;case"tabIndex":eo(e,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":eo(e,a,u);break;case"style":Bh(e,u,b);break;case"data":if(i!=="object"){eo(e,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(a);break}u=io(""+u),e.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(a==="formAction"?(i!=="input"&&oe(e,i,"name",m.name,m,null),oe(e,i,"formEncType",m.formEncType,m,null),oe(e,i,"formMethod",m.formMethod,m,null),oe(e,i,"formTarget",m.formTarget,m,null)):(oe(e,i,"encType",m.encType,m,null),oe(e,i,"method",m.method,m,null),oe(e,i,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(a);break}u=io(""+u),e.setAttribute(a,u);break;case"onClick":u!=null&&(e.onclick=li);break;case"onScroll":u!=null&&Kt("scroll",e);break;case"onScrollEnd":u!=null&&Kt("scrollend",e);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(a=u.__html,a!=null){if(m.children!=null)throw Error(n(60));e.innerHTML=a}}break;case"multiple":e.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":e.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){e.removeAttribute("xlink:href");break}a=io(""+u),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(a,""+u):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":u===!0?e.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(a,u):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?e.setAttribute(a,u):e.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?e.removeAttribute(a):e.setAttribute(a,u);break;case"popover":Kt("beforetoggle",e),Kt("toggle",e),to(e,"popover",u);break;case"xlinkActuate":oi(e,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":oi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":oi(e,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":oi(e,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":oi(e,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":oi(e,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":oi(e,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":oi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":oi(e,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":to(e,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ey.get(a)||a,to(e,a,u))}}function Ju(e,i,a,u,m,b){switch(a){case"style":Bh(e,u,b);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(a=u.__html,a!=null){if(m.children!=null)throw Error(n(60));e.innerHTML=a}}break;case"children":typeof u=="string"?Xn(e,u):(typeof u=="number"||typeof u=="bigint")&&Xn(e,""+u);break;case"onScroll":u!=null&&Kt("scroll",e);break;case"onScrollEnd":u!=null&&Kt("scrollend",e);break;case"onClick":u!=null&&(e.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jh.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(m=a.endsWith("Capture"),i=a.slice(2,m?a.length-7:void 0),b=e[ls]||null,b=b!=null?b[a]:null,typeof b=="function"&&e.removeEventListener(i,b,m),typeof u=="function")){typeof b!="function"&&b!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,u,m);break t}a in e?e[a]=u:u===!0?e.setAttribute(a,""):to(e,a,u)}}}function Xe(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Kt("error",e),Kt("load",e);var u=!1,m=!1,b;for(b in a)if(a.hasOwnProperty(b)){var E=a[b];if(E!=null)switch(b){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:oe(e,i,b,E,a,null)}}m&&oe(e,i,"srcSet",a.srcSet,a,null),u&&oe(e,i,"src",a.src,a,null);return;case"input":Kt("invalid",e);var L=b=E=m=null,V=null,et=null;for(u in a)if(a.hasOwnProperty(u)){var ft=a[u];if(ft!=null)switch(u){case"name":m=ft;break;case"type":E=ft;break;case"checked":V=ft;break;case"defaultChecked":et=ft;break;case"value":b=ft;break;case"defaultValue":L=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(n(137,i));break;default:oe(e,i,u,ft,a,null)}}Lh(e,b,L,V,et,E,m,!1);return;case"select":Kt("invalid",e),u=E=b=null;for(m in a)if(a.hasOwnProperty(m)&&(L=a[m],L!=null))switch(m){case"value":b=L;break;case"defaultValue":E=L;break;case"multiple":u=L;default:oe(e,i,m,L,a,null)}i=b,a=E,e.multiple=!!u,i!=null?qn(e,!!u,i,!1):a!=null&&qn(e,!!u,a,!0);return;case"textarea":Kt("invalid",e),b=m=u=null;for(E in a)if(a.hasOwnProperty(E)&&(L=a[E],L!=null))switch(E){case"value":u=L;break;case"defaultValue":m=L;break;case"children":b=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(n(91));break;default:oe(e,i,E,L,a,null)}Ph(e,u,m,b);return;case"option":for(V in a)a.hasOwnProperty(V)&&(u=a[V],u!=null)&&(V==="selected"?e.selected=u&&typeof u!="function"&&typeof u!="symbol":oe(e,i,V,u,a,null));return;case"dialog":Kt("beforetoggle",e),Kt("toggle",e),Kt("cancel",e),Kt("close",e);break;case"iframe":case"object":Kt("load",e);break;case"video":case"audio":for(u=0;u<xr.length;u++)Kt(xr[u],e);break;case"image":Kt("error",e),Kt("load",e);break;case"details":Kt("toggle",e);break;case"embed":case"source":case"link":Kt("error",e),Kt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in a)if(a.hasOwnProperty(et)&&(u=a[et],u!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:oe(e,i,et,u,a,null)}return;default:if(fc(i)){for(ft in a)a.hasOwnProperty(ft)&&(u=a[ft],u!==void 0&&Ju(e,i,ft,u,a,void 0));return}}for(L in a)a.hasOwnProperty(L)&&(u=a[L],u!=null&&oe(e,i,L,u,a,null))}function Jb(e,i,a,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,b=null,E=null,L=null,V=null,et=null,ft=null;for(ut in a){var pt=a[ut];if(a.hasOwnProperty(ut)&&pt!=null)switch(ut){case"checked":break;case"value":break;case"defaultValue":V=pt;default:u.hasOwnProperty(ut)||oe(e,i,ut,null,u,pt)}}for(var nt in u){var ut=u[nt];if(pt=a[nt],u.hasOwnProperty(nt)&&(ut!=null||pt!=null))switch(nt){case"type":b=ut;break;case"name":m=ut;break;case"checked":et=ut;break;case"defaultChecked":ft=ut;break;case"value":E=ut;break;case"defaultValue":L=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(n(137,i));break;default:ut!==pt&&oe(e,i,nt,ut,u,pt)}}dc(e,E,L,V,et,ft,b,m);return;case"select":ut=E=L=nt=null;for(b in a)if(V=a[b],a.hasOwnProperty(b)&&V!=null)switch(b){case"value":break;case"multiple":ut=V;default:u.hasOwnProperty(b)||oe(e,i,b,null,u,V)}for(m in u)if(b=u[m],V=a[m],u.hasOwnProperty(m)&&(b!=null||V!=null))switch(m){case"value":nt=b;break;case"defaultValue":L=b;break;case"multiple":E=b;default:b!==V&&oe(e,i,m,b,u,V)}i=L,a=E,u=ut,nt!=null?qn(e,!!a,nt,!1):!!u!=!!a&&(i!=null?qn(e,!!a,i,!0):qn(e,!!a,a?[]:"",!1));return;case"textarea":ut=nt=null;for(L in a)if(m=a[L],a.hasOwnProperty(L)&&m!=null&&!u.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:oe(e,i,L,null,u,m)}for(E in u)if(m=u[E],b=a[E],u.hasOwnProperty(E)&&(m!=null||b!=null))switch(E){case"value":nt=m;break;case"defaultValue":ut=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(n(91));break;default:m!==b&&oe(e,i,E,m,u,b)}zh(e,nt,ut);return;case"option":for(var At in a)nt=a[At],a.hasOwnProperty(At)&&nt!=null&&!u.hasOwnProperty(At)&&(At==="selected"?e.selected=!1:oe(e,i,At,null,u,nt));for(V in u)nt=u[V],ut=a[V],u.hasOwnProperty(V)&&nt!==ut&&(nt!=null||ut!=null)&&(V==="selected"?e.selected=nt&&typeof nt!="function"&&typeof nt!="symbol":oe(e,i,V,nt,u,ut));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in a)nt=a[Rt],a.hasOwnProperty(Rt)&&nt!=null&&!u.hasOwnProperty(Rt)&&oe(e,i,Rt,null,u,nt);for(et in u)if(nt=u[et],ut=a[et],u.hasOwnProperty(et)&&nt!==ut&&(nt!=null||ut!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(n(137,i));break;default:oe(e,i,et,nt,u,ut)}return;default:if(fc(i)){for(var le in a)nt=a[le],a.hasOwnProperty(le)&&nt!==void 0&&!u.hasOwnProperty(le)&&Ju(e,i,le,void 0,u,nt);for(ft in u)nt=u[ft],ut=a[ft],!u.hasOwnProperty(ft)||nt===ut||nt===void 0&&ut===void 0||Ju(e,i,ft,nt,u,ut);return}}for(var Q in a)nt=a[Q],a.hasOwnProperty(Q)&&nt!=null&&!u.hasOwnProperty(Q)&&oe(e,i,Q,null,u,nt);for(pt in u)nt=u[pt],ut=a[pt],!u.hasOwnProperty(pt)||nt===ut||nt==null&&ut==null||oe(e,i,pt,nt,u,ut)}function Up(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var m=a[u],b=m.transferSize,E=m.initiatorType,L=m.duration;if(b&&L&&Up(E)){for(E=0,L=m.responseEnd,u+=1;u<a.length;u++){var V=a[u],et=V.startTime;if(et>L)break;var ft=V.transferSize,pt=V.initiatorType;ft&&Up(pt)&&(V=V.responseEnd,E+=ft*(V<L?1:(L-et)/(V-et)))}if(--u,i+=8*(b+E)/(m.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var td=null,ed=null;function Jo(e){return e.nodeType===9?e:e.ownerDocument}function Hp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gp(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function sd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var id=null;function ex(){var e=window.event;return e&&e.type==="popstate"?e===id?!1:(id=e,!0):(id=null,!1)}var qp=typeof setTimeout=="function"?setTimeout:void 0,sx=typeof clearTimeout=="function"?clearTimeout:void 0,Xp=typeof Promise=="function"?Promise:void 0,ix=typeof queueMicrotask=="function"?queueMicrotask:typeof Xp<"u"?function(e){return Xp.resolve(null).then(e).catch(nx)}:qp;function nx(e){setTimeout(function(){throw e})}function Ki(e){return e==="head"}function Vp(e,i){var a=i,u=0;do{var m=a.nextSibling;if(e.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"||a==="/&"){if(u===0){e.removeChild(m),wa(i);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")_r(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,_r(a);for(var b=a.firstChild;b;){var E=b.nextSibling,L=b.nodeName;b[Ba]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=E}}else a==="body"&&_r(e.ownerDocument.body);a=m}while(a);wa(i)}function Yp(e,i){var a=e;e=0;do{var u=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=u}while(a)}function nd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":nd(a),cc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function ax(e,i,a,u){for(;e.nodeType===1;){var m=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(u){if(!e[Ba])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(b=e.getAttribute("rel"),b==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(b!==m.rel||e.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||e.getAttribute("title")!==(m.title==null?null:m.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(b=e.getAttribute("src"),(b!==(m.src==null?null:m.src)||e.getAttribute("type")!==(m.type==null?null:m.type)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&b&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var b=m.name==null?null:""+m.name;if(m.type==="hidden"&&e.getAttribute("name")===b)return e}else return e;if(e=Bs(e.nextSibling),e===null)break}return null}function rx(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Bs(e.nextSibling),e===null))return null;return e}function $p(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Bs(e.nextSibling),e===null))return null;return e}function ad(e){return e.data==="$?"||e.data==="$~"}function rd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ox(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var u=function(){i(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),e._reactRetry=u}}function Bs(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var od=null;function Kp(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return Bs(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function Wp(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function Zp(e,i,a){switch(i=Jo(a),e){case"html":if(e=i.documentElement,!e)throw Error(n(452));return e;case"head":if(e=i.head,!e)throw Error(n(453));return e;case"body":if(e=i.body,!e)throw Error(n(454));return e;default:throw Error(n(451))}}function _r(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);cc(e)}var Is=new Map,Qp=new Set;function tl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ai=O.d;O.d={f:lx,r:cx,D:ux,C:dx,L:hx,m:fx,X:px,S:gx,M:mx};function lx(){var e=Ai.f(),i=Xo();return e||i}function cx(e){var i=Un(e);i!==null&&i.tag===5&&i.type==="form"?pg(i):Ai.r(e)}var xa=typeof document>"u"?null:document;function Jp(e,i,a){var u=xa;if(u&&typeof i=="string"&&i){var m=Rs(i);m='link[rel="'+e+'"][href="'+m+'"]',typeof a=="string"&&(m+='[crossorigin="'+a+'"]'),Qp.has(m)||(Qp.add(m),e={rel:e,crossOrigin:a,href:i},u.querySelector(m)===null&&(i=u.createElement("link"),Xe(i,"link",e),Fe(i),u.head.appendChild(i)))}}function ux(e){Ai.D(e),Jp("dns-prefetch",e,null)}function dx(e,i){Ai.C(e,i),Jp("preconnect",e,i)}function hx(e,i,a){Ai.L(e,i,a);var u=xa;if(u&&e&&i){var m='link[rel="preload"][as="'+Rs(i)+'"]';i==="image"&&a&&a.imageSrcSet?(m+='[imagesrcset="'+Rs(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(m+='[imagesizes="'+Rs(a.imageSizes)+'"]')):m+='[href="'+Rs(e)+'"]';var b=m;switch(i){case"style":b=va(e);break;case"script":b=_a(e)}Is.has(b)||(e=y({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Is.set(b,e),u.querySelector(m)!==null||i==="style"&&u.querySelector(wr(b))||i==="script"&&u.querySelector(Sr(b))||(i=u.createElement("link"),Xe(i,"link",e),Fe(i),u.head.appendChild(i)))}}function fx(e,i){Ai.m(e,i);var a=xa;if(a&&e){var u=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+Rs(u)+'"][href="'+Rs(e)+'"]',b=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=_a(e)}if(!Is.has(b)&&(e=y({rel:"modulepreload",href:e},i),Is.set(b,e),a.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Sr(b)))return}u=a.createElement("link"),Xe(u,"link",e),Fe(u),a.head.appendChild(u)}}}function gx(e,i,a){Ai.S(e,i,a);var u=xa;if(u&&e){var m=Hn(u).hoistableStyles,b=va(e);i=i||"default";var E=m.get(b);if(!E){var L={loading:0,preload:null};if(E=u.querySelector(wr(b)))L.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Is.get(b))&&ld(e,a);var V=E=u.createElement("link");Fe(V),Xe(V,"link",e),V._p=new Promise(function(et,ft){V.onload=et,V.onerror=ft}),V.addEventListener("load",function(){L.loading|=1}),V.addEventListener("error",function(){L.loading|=2}),L.loading|=4,el(E,i,u)}E={type:"stylesheet",instance:E,count:1,state:L},m.set(b,E)}}}function px(e,i){Ai.X(e,i);var a=xa;if(a&&e){var u=Hn(a).hoistableScripts,m=_a(e),b=u.get(m);b||(b=a.querySelector(Sr(m)),b||(e=y({src:e,async:!0},i),(i=Is.get(m))&&cd(e,i),b=a.createElement("script"),Fe(b),Xe(b,"link",e),a.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},u.set(m,b))}}function mx(e,i){Ai.M(e,i);var a=xa;if(a&&e){var u=Hn(a).hoistableScripts,m=_a(e),b=u.get(m);b||(b=a.querySelector(Sr(m)),b||(e=y({src:e,async:!0,type:"module"},i),(i=Is.get(m))&&cd(e,i),b=a.createElement("script"),Fe(b),Xe(b,"link",e),a.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},u.set(m,b))}}function t0(e,i,a,u){var m=(m=_t.current)?tl(m):null;if(!m)throw Error(n(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=va(a.href),a=Hn(m).hoistableStyles,u=a.get(i),u||(u={type:"style",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=va(a.href);var b=Hn(m).hoistableStyles,E=b.get(e);if(E||(m=m.ownerDocument||m,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(e,E),(b=m.querySelector(wr(e)))&&!b._p&&(E.instance=b,E.state.loading=5),Is.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Is.set(e,a),b||yx(m,e,a,E.state))),i&&u===null)throw Error(n(528,""));return E}if(i&&u!==null)throw Error(n(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=_a(a),a=Hn(m).hoistableScripts,u=a.get(i),u||(u={type:"script",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,e))}}function va(e){return'href="'+Rs(e)+'"'}function wr(e){return'link[rel="stylesheet"]['+e+"]"}function e0(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function yx(e,i,a,u){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=e.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Xe(i,"link",a),Fe(i),e.head.appendChild(i))}function _a(e){return'[src="'+Rs(e)+'"]'}function Sr(e){return"script[async]"+e}function s0(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var u=e.querySelector('style[data-href~="'+Rs(a.href)+'"]');if(u)return i.instance=u,Fe(u),u;var m=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(e.ownerDocument||e).createElement("style"),Fe(u),Xe(u,"style",m),el(u,a.precedence,e),i.instance=u;case"stylesheet":m=va(a.href);var b=e.querySelector(wr(m));if(b)return i.state.loading|=4,i.instance=b,Fe(b),b;u=e0(a),(m=Is.get(m))&&ld(u,m),b=(e.ownerDocument||e).createElement("link"),Fe(b);var E=b;return E._p=new Promise(function(L,V){E.onload=L,E.onerror=V}),Xe(b,"link",u),i.state.loading|=4,el(b,a.precedence,e),i.instance=b;case"script":return b=_a(a.src),(m=e.querySelector(Sr(b)))?(i.instance=m,Fe(m),m):(u=a,(m=Is.get(b))&&(u=y({},a),cd(u,m)),e=e.ownerDocument||e,m=e.createElement("script"),Fe(m),Xe(m,"link",u),e.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(n(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,el(u,a.precedence,e));return i.instance}function el(e,i,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,b=m,E=0;E<u.length;E++){var L=u[E];if(L.dataset.precedence===i)b=L;else if(b!==m)break}b?b.parentNode.insertBefore(e,b.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function ld(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function cd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var sl=null;function i0(e,i,a){if(sl===null){var u=new Map,m=sl=new Map;m.set(a,u)}else m=sl,u=m.get(a),u||(u=new Map,m.set(a,u));if(u.has(e))return u;for(u.set(e,null),a=a.getElementsByTagName(e),m=0;m<a.length;m++){var b=a[m];if(!(b[Ba]||b[Ue]||e==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var E=b.getAttribute(i)||"";E=e+E;var L=u.get(E);L?L.push(b):u.set(E,[b])}}return u}function n0(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function bx(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function a0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function xx(e,i,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=va(u.href),b=i.querySelector(wr(m));if(b){i=b._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=il.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=b,Fe(b);return}b=i.ownerDocument||i,u=e0(u),(m=Is.get(m))&&ld(u,m),b=b.createElement("link"),Fe(b);var E=b;E._p=new Promise(function(L,V){E.onload=L,E.onerror=V}),Xe(b,"link",u),a.instance=b}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=il.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var ud=0;function vx(e,i){return e.stylesheets&&e.count===0&&al(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var u=setTimeout(function(){if(e.stylesheets&&al(e,e.stylesheets),e.unsuspend){var b=e.unsuspend;e.unsuspend=null,b()}},6e4+i);0<e.imgBytes&&ud===0&&(ud=62500*tx());var m=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&al(e,e.stylesheets),e.unsuspend)){var b=e.unsuspend;e.unsuspend=null,b()}},(e.imgBytes>ud?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function il(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)al(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var nl=null;function al(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,nl=new Map,i.forEach(_x,e),nl=null,il.call(e))}function _x(e,i){if(!(i.state.loading&4)){var a=nl.get(e);if(a)var u=a.get(null);else{a=new Map,nl.set(e,a);for(var m=e.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<m.length;b++){var E=m[b];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),u=E)}u&&a.set(null,u)}m=i.instance,E=m.getAttribute("data-precedence"),b=a.get(E)||u,b===u&&a.set(null,m),a.set(E,m),this.count++,u=il.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),b?b.parentNode.insertBefore(m,b.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(m,e.firstChild)),i.state.loading|=4}}var Ar={$$typeof:T,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function wx(e,i,a,u,m,b,E,L,V){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ac(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ac(0),this.hiddenUpdates=ac(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=b,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function r0(e,i,a,u,m,b,E,L,V,et,ft,pt){return e=new wx(e,i,a,E,V,et,ft,pt,L),i=1,b===!0&&(i|=24),b=vs(3,null,null,i),e.current=b,b.stateNode=e,i=Gc(),i.refCount++,e.pooledCache=i,i.refCount++,b.memoizedState={element:u,isDehydrated:a,cache:i},Yc(b),e}function o0(e){return e?(e=Qn,e):Qn}function l0(e,i,a,u,m,b){m=o0(m),u.context===null?u.context=m:u.pendingContext=m,u=Fi(i),u.payload={element:a},b=b===void 0?null:b,b!==null&&(u.callback=b),a=Bi(e,u,i),a!==null&&(gs(a,e,i),sr(a,e,i))}function c0(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function dd(e,i){c0(e,i),(e=e.alternate)&&c0(e,i)}function u0(e){if(e.tag===13||e.tag===31){var i=yn(e,67108864);i!==null&&gs(i,e,67108864),dd(e,67108864)}}function d0(e){if(e.tag===13||e.tag===31){var i=ks();i=rc(i);var a=yn(e,i);a!==null&&gs(a,e,i),dd(e,i)}}var rl=!0;function Sx(e,i,a,u){var m=G.T;G.T=null;var b=O.p;try{O.p=2,hd(e,i,a,u)}finally{O.p=b,G.T=m}}function Ax(e,i,a,u){var m=G.T;G.T=null;var b=O.p;try{O.p=8,hd(e,i,a,u)}finally{O.p=b,G.T=m}}function hd(e,i,a,u){if(rl){var m=fd(u);if(m===null)Qu(e,i,u,ol,a),f0(e,u);else if(Ex(m,e,i,a,u))u.stopPropagation();else if(f0(e,u),i&4&&-1<kx.indexOf(e)){for(;m!==null;){var b=Un(m);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var E=js(b.pendingLanes);if(E!==0){var L=b;for(L.pendingLanes|=2,L.entangledLanes|=2;E;){var V=1<<31-be(E);L.entanglements[1]|=V,E&=~V}ti(b),(se&6)===0&&(Go=wt()+500,br(0))}}break;case 31:case 13:L=yn(b,2),L!==null&&gs(L,b,2),Xo(),dd(b,2)}if(b=fd(u),b===null&&Qu(e,i,u,ol,a),b===m)break;m=b}m!==null&&u.stopPropagation()}else Qu(e,i,u,null,a)}}function fd(e){return e=pc(e),gd(e)}var ol=null;function gd(e){if(ol=null,e=In(e),e!==null){var i=o(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=l(i),e!==null)return e;e=null}else if(a===31){if(e=c(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return ol=e,null}function h0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xt()){case Nt:return 2;case ie:return 8;case Vt:case os:return 32;case ji:return 268435456;default:return 32}default:return 32}}var pd=!1,Wi=null,Zi=null,Qi=null,kr=new Map,Er=new Map,Ji=[],kx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function f0(e,i){switch(e){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":kr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Er.delete(i.pointerId)}}function Cr(e,i,a,u,m,b){return e===null||e.nativeEvent!==b?(e={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:b,targetContainers:[m]},i!==null&&(i=Un(i),i!==null&&u0(i)),e):(e.eventSystemFlags|=u,i=e.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),e)}function Ex(e,i,a,u,m){switch(i){case"focusin":return Wi=Cr(Wi,e,i,a,u,m),!0;case"dragenter":return Zi=Cr(Zi,e,i,a,u,m),!0;case"mouseover":return Qi=Cr(Qi,e,i,a,u,m),!0;case"pointerover":var b=m.pointerId;return kr.set(b,Cr(kr.get(b)||null,e,i,a,u,m)),!0;case"gotpointercapture":return b=m.pointerId,Er.set(b,Cr(Er.get(b)||null,e,i,a,u,m)),!0}return!1}function g0(e){var i=In(e.target);if(i!==null){var a=o(i);if(a!==null){if(i=a.tag,i===13){if(i=l(a),i!==null){e.blockedOn=i,Ch(e.priority,function(){d0(a)});return}}else if(i===31){if(i=c(a),i!==null){e.blockedOn=i,Ch(e.priority,function(){d0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ll(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=fd(e.nativeEvent);if(a===null){a=e.nativeEvent;var u=new a.constructor(a.type,a);gc=u,a.target.dispatchEvent(u),gc=null}else return i=Un(a),i!==null&&u0(i),e.blockedOn=a,!1;i.shift()}return!0}function p0(e,i,a){ll(e)&&a.delete(i)}function Cx(){pd=!1,Wi!==null&&ll(Wi)&&(Wi=null),Zi!==null&&ll(Zi)&&(Zi=null),Qi!==null&&ll(Qi)&&(Qi=null),kr.forEach(p0),Er.forEach(p0)}function cl(e,i){e.blockedOn===i&&(e.blockedOn=null,pd||(pd=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,Cx)))}var ul=null;function m0(e){ul!==e&&(ul=e,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){ul===e&&(ul=null);for(var i=0;i<e.length;i+=3){var a=e[i],u=e[i+1],m=e[i+2];if(typeof u!="function"){if(gd(u||a)===null)continue;break}var b=Un(a);b!==null&&(e.splice(i,3),i-=3,fu(b,{pending:!0,data:m,method:a.method,action:u},u,m))}}))}function wa(e){function i(V){return cl(V,e)}Wi!==null&&cl(Wi,e),Zi!==null&&cl(Zi,e),Qi!==null&&cl(Qi,e),kr.forEach(i),Er.forEach(i);for(var a=0;a<Ji.length;a++){var u=Ji[a];u.blockedOn===e&&(u.blockedOn=null)}for(;0<Ji.length&&(a=Ji[0],a.blockedOn===null);)g0(a),a.blockedOn===null&&Ji.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var m=a[u],b=a[u+1],E=m[ls]||null;if(typeof b=="function")E||m0(a);else if(E){var L=null;if(b&&b.hasAttribute("formAction")){if(m=b,E=b[ls]||null)L=E.formAction;else if(gd(m)!==null)continue}else L=E.action;typeof L=="function"?a[u+1]=L:(a.splice(u,3),u-=3),m0(a)}}}function y0(){function e(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(E){return m=E})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function md(e){this._internalRoot=e}dl.prototype.render=md.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(n(409));var a=i.current,u=ks();l0(a,u,e,i,null,null)},dl.prototype.unmount=md.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;l0(e.current,2,null,e,null,null),Xo(),i[Bn]=null}};function dl(e){this._internalRoot=e}dl.prototype.unstable_scheduleHydration=function(e){if(e){var i=Eh();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Ji.length&&i!==0&&i<Ji[a].priority;a++);Ji.splice(a,0,e),a===0&&g0(e)}};var b0=t.version;if(b0!=="19.2.4")throw Error(n(527,b0,"19.2.4"));O.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=f(i),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var Tx={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hl.isDisabled&&hl.supportsFiber)try{ce=hl.inject(Tx),Pe=hl}catch{}}return jr.createRoot=function(e,i){if(!r(e))throw Error(n(299));var a=!1,u="",m=kg,b=Eg,E=Cg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError)),i=r0(e,1,!1,null,null,a,u,null,m,b,E,y0),e[Bn]=i.current,Zu(e),new md(i)},jr.hydrateRoot=function(e,i,a){if(!r(e))throw Error(n(299));var u=!1,m="",b=kg,E=Eg,L=Cg,V=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(b=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(L=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),i=r0(e,1,!0,i,a??null,u,m,V,b,E,L,y0),i.context=o0(null),a=i.current,u=ks(),u=rc(u),m=Fi(u),m.callback=null,Bi(a,m,u),a=u,i.current.lanes=a,Fa(i,a),ti(i),e[Bn]=i.current,Zu(e),new dl(i)},jr.version="19.2.4",jr}var j0;function Fx(){if(j0)return vd.exports;j0=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),vd.exports=Px(),vd.exports}var Bx=Fx();const Ix=Jd(Bx);const vm=(...h)=>h.filter((t,s,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===s).join(" ").trim();const Ux=h=>h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Hx=h=>h.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,n)=>n?n.toUpperCase():s.toLowerCase());const M0=h=>{const t=Hx(h);return t.charAt(0).toUpperCase()+t.slice(1)};var Gx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qx=h=>{for(const t in h)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const Xx=z.forwardRef(({color:h="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:r="",children:o,iconNode:l,...c},d)=>z.createElement("svg",{ref:d,...Gx,width:t,height:t,stroke:h,strokeWidth:n?Number(s)*24/Number(t):s,className:vm("lucide",r),...!o&&!qx(c)&&{"aria-hidden":"true"},...c},[...l.map(([f,p])=>z.createElement(f,p)),...Array.isArray(o)?o:[o]]));const Mt=(h,t)=>{const s=z.forwardRef(({className:n,...r},o)=>z.createElement(Xx,{ref:o,iconNode:t,className:vm(`lucide-${Ux(M0(h))}`,`lucide-${h}`,n),...r}));return s.displayName=M0(h),s};const Vx=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Pl=Mt("arrow-left",Vx);const Yx=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],$x=Mt("arrow-right",Yx);const Kx=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Fl=Mt("arrow-up-down",Kx);const Wx=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Tl=Mt("check",Wx);const Zx=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_m=Mt("chevron-down",Zx);const Qx=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],R0=Mt("chevron-right",Qx);const Jx=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],wm=Mt("chevron-up",Jx);const tv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],eh=Mt("circle-alert",tv);const ev=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],sv=Mt("circle-check-big",ev);const iv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],nv=Mt("circle-question-mark",iv);const av=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ad=Mt("circle-x",av);const rv=[["path",{d:"M14 3a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1",key:"1l7d7l"}],["path",{d:"M19 3a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1",key:"9955pe"}],["path",{d:"m7 15 3 3",key:"4hkfgk"}],["path",{d:"m7 21 3-3H5a2 2 0 0 1-2-2v-2",key:"1xljwe"}],["rect",{x:"14",y:"14",width:"7",height:"7",rx:"1",key:"1cdgtw"}],["rect",{x:"3",y:"3",width:"7",height:"7",rx:"1",key:"zi3rio"}]],D0=Mt("combine",rv);const ov=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],O0=Mt("download",ov);const lv=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],cv=Mt("droplets",lv);const uv=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Nl=Mt("eye-off",uv);const dv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jl=Mt("eye",dv);const hv=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Sm=Mt("file-check",hv);const fv=[["path",{d:"M4.226 20.925A2 2 0 0 0 6 22h12a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v3.127",key:"wfxp4w"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 11-3 3",key:"1dgrs4"}],["path",{d:"m5 17-3-3h10",key:"1mvvaf"}]],Bl=Mt("file-output",fv);const gv=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],Ma=Mt("file-plus",gv);const pv=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ve=Mt("file-text",pv);const mv=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],Am=Mt("file-up",mv);const yv=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],bv=Mt("grip-vertical",yv);const xv=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Vr=Mt("hash",xv);const vv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],_v=Mt("image",vv);const wv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Il=Mt("info",wv);const Sv=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Yr=Mt("layers",Sv);const Av=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],kv=Mt("loader-circle",Av);const Ev=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Ra=Mt("lock-open",Ev);const Cv=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ti=Mt("lock",Cv);const Tv=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],L0=Mt("maximize-2",Tv);const Nv=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Ul=Mt("maximize",Nv);const jv=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],z0=Mt("minimize-2",jv);const Mv=[["path",{d:"M5 12h14",key:"1ays0h"}]],Rv=Mt("minus",Mv);const Dv=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Ov=Mt("monitor",Dv);const Lv=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],zv=Mt("moon",Lv);const Pv=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Fv=Mt("pen-line",Pv);const Bv=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],km=Mt("play",Bv);const Iv=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],Uv=Mt("redo-2",Iv);const Hv=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Br=Mt("refresh-cw",Hv);const Gv=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Em=Mt("rotate-ccw",Gv);const qv=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],$s=Mt("rotate-cw",qv);const Xv=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Vv=Mt("save",Xv);const Yv=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],Cm=Mt("scan-line",Yv);const $v=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Da=Mt("scissors",$v);const Kv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Tm=Mt("shield-check",Kv);const Wv=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],gl=Mt("skip-forward",Wv);const Zv=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Qv=Mt("sun",Zv);const Jv=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ln=Mt("trash-2",Jv);const t1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Hr=Mt("triangle-alert",t1);const e1=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Hl=Mt("type",e1);const s1=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],i1=Mt("undo-2",s1);const n1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],sh=Mt("upload",n1);const a1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rn=Mt("x",a1);const r1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],o1=Mt("zoom-in",r1);const l1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],c1=Mt("zoom-out",l1);function kd(h){return h.replace(/[^a-zA-Z0-9_\-. ]/g,"").slice(0,200)}function u1(h){return h.replace(/\.pdf$/i,"")}function d1(h){return h.replace(/\.[^.]+$/,"")}function We(h,t,s){const n=u1(t);if(h==="convert-to-pdf")return(s?.fileCount??1)>1?kd("converted.pdf"):kd(`${d1(t)}.pdf`);const o={split:`_pages_${s?.range||"selected"}`,merge:`merged_${s?.fileCount||2}_files`,reorder:"_reordered","delete-pages":`_${s?.deletedCount||0}_pages_removed`,"extract-pages":s?.pageNum?`_page_${s.pageNum}`:"_extracted","add-blank-pages":"_with_blanks",rotate:"_rotated",scale:`_resized_${s?.target||"custom"}`,"add-page-numbers":"_numbered","text-watermark":"_watermarked",encrypt:"_encrypted",unlock:"_unlocked","edit-metadata":"_edited","edit-pdf":"_edited",compress:"_compressed"}[h]||"_processed",c=h==="merge"?`${o}.pdf`:`${n}${o}.pdf`;return kd(c)}const P0=h=>{let t;const s=new Set,n=(f,p)=>{const y=typeof f=="function"?f(t):f;if(!Object.is(y,t)){const x=t;t=p??(typeof y!="object"||y===null)?y:Object.assign({},t,y),s.forEach(v=>v(t,x))}},r=()=>t,c={setState:n,getState:r,getInitialState:()=>d,subscribe:f=>(s.add(f),()=>s.delete(f))},d=t=h(n,r,c);return c},h1=(h=>h?P0(h):P0),f1=h=>h;function g1(h,t=f1){const s=zr.useSyncExternalStore(h.subscribe,zr.useCallback(()=>t(h.getState()),[h,t]),zr.useCallback(()=>t(h.getInitialState()),[h,t]));return zr.useDebugValue(s),s}const F0=h=>{const t=h1(h),s=n=>g1(t,n);return Object.assign(s,t),s},La=(h=>h?F0(h):F0),Dt=La()(h=>({status:"idle",progress:null,result:null,error:null,startTime:null,startProcessing:()=>{h({status:"processing",progress:null,result:null,error:null,startTime:Date.now()})},updateProgress:t=>{h({progress:t})},setResult:t=>{h({status:"done",result:t,progress:null})},setError:t=>{h({status:"error",error:t,progress:null})},cancel:()=>{h({status:"cancelled",progress:null})},reset:()=>{h({status:"idle",progress:null,result:null,error:null,startTime:null})}}));class p1{worker;pending=new Map;constructor(){this.worker=new Worker(new URL("/projects/quire/assets/pdf-engine.worker-zMudoV74.js",import.meta.url),{type:"module"}),this.worker.onmessage=this.handleMessage.bind(this),this.worker.onerror=this.handleError.bind(this)}handleMessage(t){const{id:s,type:n,progress:r,result:o,error:l}=t.data,c=this.pending.get(s);if(!c)return;const d=Dt.getState();switch(n){case"progress":r&&d.updateProgress(r);break;case"result":if(o){const f={files:o.files.map(p=>({name:p.name,bytes:new Uint8Array(p.bytes),pageCount:p.pageCount??0})),processingTime:d.startTime?Date.now()-d.startTime:0};d.setResult(f),c.resolve(f)}else c.reject("Empty result from worker");this.pending.delete(s);break;case"error":d.setError(l??"Unknown error"),c.reject(l??"Unknown error"),this.pending.delete(s);break;case"cancelled":d.cancel(),c.reject("Operation cancelled"),this.pending.delete(s);break}}handleError(){Dt.getState().setError("Processing failed  this file may be too large. Try a smaller file or close other tabs.");for(const[s,n]of this.pending)n.reject("Worker crashed"),this.pending.delete(s)}process(t,s,n={}){const r=crypto.randomUUID();return Dt.getState().startProcessing(),new Promise((l,c)=>{this.pending.set(r,{resolve:l,reject:c});const d=s.map(f=>new Uint8Array(f).buffer);this.worker.postMessage({id:r,operation:t,pdfBytes:d,options:n},d)})}processConvert(t,s){const n=crypto.randomUUID();return Dt.getState().startProcessing(),new Promise((o,l)=>{this.pending.set(n,{resolve:o,reject:l});const c=new Set;for(const f of t)if(f.bytes){const p=new Uint8Array(f.bytes).buffer;f.bytes=new Uint8Array(p),c.add(p)}const d=s.fontBytes;if(d)for(const f of Object.keys(d)){const p=new Uint8Array(d[f]).buffer;d[f]=new Uint8Array(p),c.add(p)}this.worker.postMessage({id:n,operation:"convert-to-pdf",pdfBytes:[],options:{files:t,config:s}},Array.from(c))})}cancelAll(){for(const t of this.pending.keys())this.worker.postMessage({id:t,type:"cancel"})}}const ze=new p1;function Gl(h,t){if(!h.trim())return{pages:[],error:"Please enter a page range"};const s=new Set,n=h.split(",").map(r=>r.trim()).filter(Boolean);for(const r of n)if(r.includes("-")){const[o,l]=r.split("-").map(f=>f.trim()),c=parseInt(o,10),d=l.toLowerCase()==="end"?t:parseInt(l,10);if(isNaN(c)||isNaN(d))return{pages:[],error:`Invalid range: "${r}"`};if(c<1||d<1)return{pages:[],error:"Page numbers must be at least 1"};if(c>t||d>t)return{pages:[],error:`Page number exceeds total (${t})`};if(c>d)return{pages:[],error:`Invalid range: ${c} > ${d}`};for(let f=c;f<=d;f++)s.add(f)}else{const o=r.toLowerCase()==="end"?t:parseInt(r,10);if(isNaN(o))return{pages:[],error:`Invalid page number: "${r}"`};if(o<1||o>t)return{pages:[],error:`Page ${o} out of range (1-${t})`};s.add(o)}return{pages:Array.from(s).sort((r,o)=>r-o)}}function m1(h){if(h.length===0)return"";const t=[...h].sort((o,l)=>o-l),s=[];let n=t[0],r=t[0];for(let o=1;o<=t.length;o++)o<t.length&&t[o]===r+1?r=t[o]:(s.push(n===r?`${n}`:`${n}-${r}`),o<t.length&&(n=t[o],r=t[o]));return s.join(", ")}const y1="modulepreload",b1=function(h){return"/projects/quire/"+h},B0={},Gr=function(t,s,n){let r=Promise.resolve();if(s&&s.length>0){let d=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");r=d(s.map(f=>{if(f=b1(f),f in B0)return;B0[f]=!0;const p=f.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":y1,p||(x.as="script"),x.crossOrigin="",x.href=f,c&&x.setAttribute("nonce",c),document.head.appendChild(x),p)return new Promise((v,_)=>{x.addEventListener("load",v),x.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return r.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return t().catch(o)})},x1=5,Hd=La()(h=>({recentFiles:[],currentFiles:[],addToCache:t=>{h(s=>{const n=s.recentFiles.filter(o=>o.id!==t.id);return{recentFiles:[t,...n].slice(0,x1)}})},setCurrentFiles:t=>{h({currentFiles:t})},clearCurrentFiles:()=>{h({currentFiles:[]})},removeCurrentFile:t=>{h(s=>({currentFiles:s.currentFiles.filter(n=>n.id!==t)}))}})),Ie={INVALID_PDF:"This file is not a valid PDF.",ENCRYPTED_NEEDS_PASSWORD:"This PDF is password-protected. Please enter the password.",WRONG_PASSWORD:"Incorrect password. Please try again.",FILE_TOO_LARGE:"This file may be too large for your browser. Try a smaller file or close other tabs.",WORKER_CRASHED:"Processing failed unexpectedly. Try again with a smaller file.",OPERATION_CANCELLED:"Operation cancelled.",CANNOT_DELETE_ALL:"Cannot delete all pages. At least one page must remain.",MERGE_MIN_FILES:"Merge requires at least 2 PDF files.",NON_LATIN_WARNING:"Your text contains non-Latin characters. These may not display correctly with the standard font.",ANNOTATIONS_WARNING:"Note: Annotations and form fields may not be preserved.",NO_FORM_FIELDS:"This PDF does not contain any form fields.",NO_EDITABLE_TEXT:"No editable text found on this page.",EDIT_TEXT_LIMITATION:"Text editing replaces text visually. The original text layer is covered and redrawn.",UNSAVED_CHANGES:"You have unsaved changes. Are you sure you want to leave?",NO_FILES_ADDED:"Please add at least one file to convert.",IMAGE_LOAD_FAILED:"Failed to load image. The file may be corrupted or in an unsupported format.",ANIMATED_GIF_NOTE:"Animated GIFs will be converted using the first frame only.",MAX_FILES_EXCEEDED:"Maximum of 50 files can be converted at once.",EMPTY_DOCUMENT:"The document appears to be empty.",DOC_NOT_SUPPORTED:"Legacy .doc files are not supported. Please convert to .docx first.",DOCX_PARSE_FAILED:"Failed to parse the DOCX file. It may be corrupted.",DOCX_LAYOUT_NOTE:"DOCX conversion preserves text and basic formatting. Complex layouts, headers/footers, and embedded fonts may differ from the original.",TABLE_SIMPLIFIED:"Tables are converted to simplified text layout.",CJK_NOT_SUPPORTED:"Chinese, Japanese, and Korean characters are not supported in this version.",UNDERLINE_NOT_SUPPORTED:"Underlined text will appear without underline in the converted PDF.",COMPRESS_NO_SAVINGS:"The compressed file is not smaller than the original. This PDF may already be optimized."};var wl={exports:{}},v1=wl.exports,I0;function _1(){return I0||(I0=1,(function(h,t){(function(s,n){n()})(v1,function(){function s(f,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function n(f,p,y){var x=new XMLHttpRequest;x.open("GET",f),x.responseType="blob",x.onload=function(){d(x.response,p,y)},x.onerror=function(){console.error("could not download file")},x.send()}function r(f){var p=new XMLHttpRequest;p.open("HEAD",f,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function o(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(p)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof nn=="object"&&nn.global===nn?nn:void 0,c=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(f,p,y){var x=l.URL||l.webkitURL,v=document.createElement("a");p=p||f.name||"download",v.download=p,v.rel="noopener",typeof f=="string"?(v.href=f,v.origin===location.origin?o(v):r(v.href)?n(f,p,y):o(v,v.target="_blank")):(v.href=x.createObjectURL(f),setTimeout(function(){x.revokeObjectURL(v.href)},4e4),setTimeout(function(){o(v)},0))}:"msSaveOrOpenBlob"in navigator?function(f,p,y){if(p=p||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(s(f,y),p);else if(r(f))n(f,p,y);else{var x=document.createElement("a");x.href=f,x.target="_blank",setTimeout(function(){o(x)})}}:function(f,p,y,x){if(x=x||open("","_blank"),x&&(x.document.title=x.document.body.innerText="downloading..."),typeof f=="string")return n(f,p,y);var v=f.type==="application/octet-stream",_=/constructor/i.test(l.HTMLElement)||l.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||v&&_||c)&&typeof FileReader<"u"){var A=new FileReader;A.onloadend=function(){var T=A.result;T=w?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),x?x.location.href=T:location=T,x=null},A.readAsDataURL(f)}else{var S=l.URL||l.webkitURL,k=S.createObjectURL(f);x?x.location=k:location.href=k,x=null,setTimeout(function(){S.revokeObjectURL(k)},4e4)}});l.saveAs=d.saveAs=d,h.exports=d})})(wl)),wl.exports}var Nm=_1();function pl(h){throw new Error('Could not dynamically require "'+h+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ed={exports:{}};var U0;function w1(){return U0||(U0=1,(function(h,t){(function(s){h.exports=s()})(function(){return(function s(n,r,o){function l(f,p){if(!r[f]){if(!n[f]){var y=typeof pl=="function"&&pl;if(!p&&y)return y(f,!0);if(c)return c(f,!0);var x=new Error("Cannot find module '"+f+"'");throw x.code="MODULE_NOT_FOUND",x}var v=r[f]={exports:{}};n[f][0].call(v.exports,function(_){var w=n[f][1][_];return l(w||_)},v,v.exports,s,n,r,o)}return r[f].exports}for(var c=typeof pl=="function"&&pl,d=0;d<o.length;d++)l(o[d]);return l})({1:[function(s,n,r){var o=s("./utils"),l=s("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(d){for(var f,p,y,x,v,_,w,A=[],S=0,k=d.length,T=k,j=o.getTypeOf(d)!=="string";S<d.length;)T=k-S,y=j?(f=d[S++],p=S<k?d[S++]:0,S<k?d[S++]:0):(f=d.charCodeAt(S++),p=S<k?d.charCodeAt(S++):0,S<k?d.charCodeAt(S++):0),x=f>>2,v=(3&f)<<4|p>>4,_=1<T?(15&p)<<2|y>>6:64,w=2<T?63&y:64,A.push(c.charAt(x)+c.charAt(v)+c.charAt(_)+c.charAt(w));return A.join("")},r.decode=function(d){var f,p,y,x,v,_,w=0,A=0,S="data:";if(d.substr(0,S.length)===S)throw new Error("Invalid base64 input, it looks like a data url.");var k,T=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===c.charAt(64)&&T--,d.charAt(d.length-2)===c.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=l.uint8array?new Uint8Array(0|T):new Array(0|T);w<d.length;)f=c.indexOf(d.charAt(w++))<<2|(x=c.indexOf(d.charAt(w++)))>>4,p=(15&x)<<4|(v=c.indexOf(d.charAt(w++)))>>2,y=(3&v)<<6|(_=c.indexOf(d.charAt(w++))),k[A++]=f,v!==64&&(k[A++]=p),_!==64&&(k[A++]=y);return k}},{"./support":30,"./utils":32}],2:[function(s,n,r){var o=s("./external"),l=s("./stream/DataWorker"),c=s("./stream/Crc32Probe"),d=s("./stream/DataLengthProbe");function f(p,y,x,v,_){this.compressedSize=p,this.uncompressedSize=y,this.crc32=x,this.compression=v,this.compressedContent=_}f.prototype={getContentWorker:function(){var p=new l(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),y=this;return p.on("end",function(){if(this.streamInfo.data_length!==y.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new l(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(p,y,x){return p.pipe(new c).pipe(new d("uncompressedSize")).pipe(y.compressWorker(x)).pipe(new d("compressedSize")).withStreamInfo("compression",y)},n.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(s,n,r){var o=s("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},r.DEFLATE=s("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(s,n,r){var o=s("./utils"),l=(function(){for(var c,d=[],f=0;f<256;f++){c=f;for(var p=0;p<8;p++)c=1&c?3988292384^c>>>1:c>>>1;d[f]=c}return d})();n.exports=function(c,d){return c!==void 0&&c.length?o.getTypeOf(c)!=="string"?(function(f,p,y,x){var v=l,_=x+y;f^=-1;for(var w=x;w<_;w++)f=f>>>8^v[255&(f^p[w])];return-1^f})(0|d,c,c.length,0):(function(f,p,y,x){var v=l,_=x+y;f^=-1;for(var w=x;w<_;w++)f=f>>>8^v[255&(f^p.charCodeAt(w))];return-1^f})(0|d,c,c.length,0):0}},{"./utils":32}],5:[function(s,n,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(s,n,r){var o=null;o=typeof Promise<"u"?Promise:s("lie"),n.exports={Promise:o}},{lie:37}],7:[function(s,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=s("pako"),c=s("./utils"),d=s("./stream/GenericWorker"),f=o?"uint8array":"array";function p(y,x){d.call(this,"FlateWorker/"+y),this._pako=null,this._pakoAction=y,this._pakoOptions=x,this.meta={}}r.magic="\b\0",c.inherits(p,d),p.prototype.processChunk=function(y){this.meta=y.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(f,y.data),!1)},p.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var y=this;this._pako.onData=function(x){y.push({data:x,meta:y.meta})}},r.compressWorker=function(y){return new p("Deflate",y)},r.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(s,n,r){function o(v,_){var w,A="";for(w=0;w<_;w++)A+=String.fromCharCode(255&v),v>>>=8;return A}function l(v,_,w,A,S,k){var T,j,D=v.file,H=v.compression,F=k!==f.utf8encode,R=c.transformTo("string",k(D.name)),I=c.transformTo("string",f.utf8encode(D.name)),K=D.comment,ct=c.transformTo("string",k(K)),P=c.transformTo("string",f.utf8encode(K)),W=I.length!==D.name.length,N=P.length!==K.length,st="",G="",O="",Y=D.dir,X=D.date,dt={crc32:0,compressedSize:0,uncompressedSize:0};_&&!w||(dt.crc32=v.crc32,dt.compressedSize=v.compressedSize,dt.uncompressedSize=v.uncompressedSize);var M=0;_&&(M|=8),F||!W&&!N||(M|=2048);var B=0,J=0;Y&&(B|=16),S==="UNIX"?(J=798,B|=(function(at,_t){var vt=at;return at||(vt=_t?16893:33204),(65535&vt)<<16})(D.unixPermissions,Y)):(J=20,B|=(function(at){return 63&(at||0)})(D.dosPermissions)),T=X.getUTCHours(),T<<=6,T|=X.getUTCMinutes(),T<<=5,T|=X.getUTCSeconds()/2,j=X.getUTCFullYear()-1980,j<<=4,j|=X.getUTCMonth()+1,j<<=5,j|=X.getUTCDate(),W&&(G=o(1,1)+o(p(R),4)+I,st+="up"+o(G.length,2)+G),N&&(O=o(1,1)+o(p(ct),4)+P,st+="uc"+o(O.length,2)+O);var ot="";return ot+=`
\0`,ot+=o(M,2),ot+=H.magic,ot+=o(T,2),ot+=o(j,2),ot+=o(dt.crc32,4),ot+=o(dt.compressedSize,4),ot+=o(dt.uncompressedSize,4),ot+=o(R.length,2),ot+=o(st.length,2),{fileRecord:y.LOCAL_FILE_HEADER+ot+R+st,dirRecord:y.CENTRAL_FILE_HEADER+o(J,2)+ot+o(ct.length,2)+"\0\0\0\0"+o(B,4)+o(A,4)+R+st+ct}}var c=s("../utils"),d=s("../stream/GenericWorker"),f=s("../utf8"),p=s("../crc32"),y=s("../signature");function x(v,_,w,A){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=w,this.encodeFileName=A,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(x,d),x.prototype.push=function(v){var _=v.meta.percent||0,w=this.entriesCount,A=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,d.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:w?(_+100*(w-A-1))/w:100}}))},x.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var _=this.streamFiles&&!v.file.dir;if(_){var w=l(v,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},x.prototype.closedSource=function(v){this.accumulate=!1;var _=this.streamFiles&&!v.file.dir,w=l(v,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),_)this.push({data:(function(A){return y.DATA_DESCRIPTOR+o(A.crc32,4)+o(A.compressedSize,4)+o(A.uncompressedSize,4)})(v),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},x.prototype.flush=function(){for(var v=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var w=this.bytesWritten-v,A=(function(S,k,T,j,D){var H=c.transformTo("string",D(j));return y.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(S,2)+o(S,2)+o(k,4)+o(T,4)+o(H.length,2)+H})(this.dirRecords.length,w,v,this.zipComment,this.encodeFileName);this.push({data:A,meta:{percent:100}})},x.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},x.prototype.registerPrevious=function(v){this._sources.push(v);var _=this;return v.on("data",function(w){_.processChunk(w)}),v.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),v.on("error",function(w){_.error(w)}),this},x.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},x.prototype.error=function(v){var _=this._sources;if(!d.prototype.error.call(this,v))return!1;for(var w=0;w<_.length;w++)try{_[w].error(v)}catch{}return!0},x.prototype.lock=function(){d.prototype.lock.call(this);for(var v=this._sources,_=0;_<v.length;_++)v[_].lock()},n.exports=x},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(s,n,r){var o=s("../compressions"),l=s("./ZipFileWorker");r.generateWorker=function(c,d,f){var p=new l(d.streamFiles,f,d.platform,d.encodeFileName),y=0;try{c.forEach(function(x,v){y++;var _=(function(k,T){var j=k||T,D=o[j];if(!D)throw new Error(j+" is not a valid compression method !");return D})(v.options.compression,d.compression),w=v.options.compressionOptions||d.compressionOptions||{},A=v.dir,S=v.date;v._compressWorker(_,w).withStreamInfo("file",{name:x,dir:A,date:S,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(p)}),p.entriesCount=y}catch(x){p.error(x)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(s,n,r){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new o;for(var c in this)typeof this[c]!="function"&&(l[c]=this[c]);return l}}(o.prototype=s("./object")).loadAsync=s("./load"),o.support=s("./support"),o.defaults=s("./defaults"),o.version="3.10.1",o.loadAsync=function(l,c){return new o().loadAsync(l,c)},o.external=s("./external"),n.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(s,n,r){var o=s("./utils"),l=s("./external"),c=s("./utf8"),d=s("./zipEntries"),f=s("./stream/Crc32Probe"),p=s("./nodejsUtils");function y(x){return new l.Promise(function(v,_){var w=x.decompressed.getContentWorker().pipe(new f);w.on("error",function(A){_(A)}).on("end",function(){w.streamInfo.crc32!==x.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}n.exports=function(x,v){var _=this;return v=o.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),p.isNode&&p.isStream(x)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",x,!0,v.optimizedBinaryString,v.base64).then(function(w){var A=new d(v);return A.load(w),A}).then(function(w){var A=[l.Promise.resolve(w)],S=w.files;if(v.checkCRC32)for(var k=0;k<S.length;k++)A.push(y(S[k]));return l.Promise.all(A)}).then(function(w){for(var A=w.shift(),S=A.files,k=0;k<S.length;k++){var T=S[k],j=T.fileNameStr,D=o.resolve(T.fileNameStr);_.file(D,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileCommentStr.length?T.fileCommentStr:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:v.createFolders}),T.dir||(_.file(D).unsafeOriginalName=j)}return A.zipComment.length&&(_.comment=A.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(s,n,r){var o=s("../utils"),l=s("../stream/GenericWorker");function c(d,f){l.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(f)}o.inherits(c,l),c.prototype._bindStream=function(d){var f=this;(this._stream=d).pause(),d.on("data",function(p){f.push({data:p,meta:{percent:0}})}).on("error",function(p){f.isPaused?this.generatedError=p:f.error(p)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},c.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(s,n,r){var o=s("readable-stream").Readable;function l(c,d,f){o.call(this,d),this._helper=c;var p=this;c.on("data",function(y,x){p.push(y)||p._helper.pause(),f&&f(x)}).on("error",function(y){p.emit("error",y)}).on("end",function(){p.push(null)})}s("../utils").inherits(l,o),l.prototype._read=function(){this._helper.resume()},n.exports=l},{"../utils":32,"readable-stream":16}],14:[function(s,n,r){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,l);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,l)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var l=new Buffer(o);return l.fill(0),l},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(s,n,r){function o(D,H,F){var R,I=c.getTypeOf(H),K=c.extend(F||{},p);K.date=K.date||new Date,K.compression!==null&&(K.compression=K.compression.toUpperCase()),typeof K.unixPermissions=="string"&&(K.unixPermissions=parseInt(K.unixPermissions,8)),K.unixPermissions&&16384&K.unixPermissions&&(K.dir=!0),K.dosPermissions&&16&K.dosPermissions&&(K.dir=!0),K.dir&&(D=S(D)),K.createFolders&&(R=A(D))&&k.call(this,R,!0);var ct=I==="string"&&K.binary===!1&&K.base64===!1;F&&F.binary!==void 0||(K.binary=!ct),(H instanceof y&&H.uncompressedSize===0||K.dir||!H||H.length===0)&&(K.base64=!1,K.binary=!0,H="",K.compression="STORE",I="string");var P=null;P=H instanceof y||H instanceof d?H:_.isNode&&_.isStream(H)?new w(D,H):c.prepareContent(D,H,K.binary,K.optimizedBinaryString,K.base64);var W=new x(D,P,K);this.files[D]=W}var l=s("./utf8"),c=s("./utils"),d=s("./stream/GenericWorker"),f=s("./stream/StreamHelper"),p=s("./defaults"),y=s("./compressedObject"),x=s("./zipObject"),v=s("./generate"),_=s("./nodejsUtils"),w=s("./nodejs/NodejsStreamInputAdapter"),A=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var H=D.lastIndexOf("/");return 0<H?D.substring(0,H):""},S=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},k=function(D,H){return H=H!==void 0?H:p.createFolders,D=S(D),this.files[D]||o.call(this,D,null,{dir:!0,createFolders:H}),this.files[D]};function T(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var j={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var H,F,R;for(H in this.files)R=this.files[H],(F=H.slice(this.root.length,H.length))&&H.slice(0,this.root.length)===this.root&&D(F,R)},filter:function(D){var H=[];return this.forEach(function(F,R){D(F,R)&&H.push(R)}),H},file:function(D,H,F){if(arguments.length!==1)return D=this.root+D,o.call(this,D,H,F),this;if(T(D)){var R=D;return this.filter(function(K,ct){return!ct.dir&&R.test(K)})}var I=this.files[this.root+D];return I&&!I.dir?I:null},folder:function(D){if(!D)return this;if(T(D))return this.filter(function(I,K){return K.dir&&D.test(I)});var H=this.root+D,F=k.call(this,H),R=this.clone();return R.root=F.name,R},remove:function(D){D=this.root+D;var H=this.files[D];if(H||(D.slice(-1)!=="/"&&(D+="/"),H=this.files[D]),H&&!H.dir)delete this.files[D];else for(var F=this.filter(function(I,K){return K.name.slice(0,D.length)===D}),R=0;R<F.length;R++)delete this.files[F[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var H,F={};try{if((F=c.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=F.type.toLowerCase(),F.compression=F.compression.toUpperCase(),F.type==="binarystring"&&(F.type="string"),!F.type)throw new Error("No output type specified.");c.checkSupport(F.type),F.platform!=="darwin"&&F.platform!=="freebsd"&&F.platform!=="linux"&&F.platform!=="sunos"||(F.platform="UNIX"),F.platform==="win32"&&(F.platform="DOS");var R=F.comment||this.comment||"";H=v.generateWorker(this,F,R)}catch(I){(H=new d("error")).error(I)}return new f(H,F.type||"string",F.mimeType)},generateAsync:function(D,H){return this.generateInternalStream(D).accumulate(H)},generateNodeStream:function(D,H){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(H)}};n.exports=j},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(s,n,r){n.exports=s("stream")},{stream:void 0}],17:[function(s,n,r){var o=s("./DataReader");function l(c){o.call(this,c);for(var d=0;d<this.data.length;d++)c[d]=255&c[d]}s("../utils").inherits(l,o),l.prototype.byteAt=function(c){return this.data[this.zero+c]},l.prototype.lastIndexOfSignature=function(c){for(var d=c.charCodeAt(0),f=c.charCodeAt(1),p=c.charCodeAt(2),y=c.charCodeAt(3),x=this.length-4;0<=x;--x)if(this.data[x]===d&&this.data[x+1]===f&&this.data[x+2]===p&&this.data[x+3]===y)return x-this.zero;return-1},l.prototype.readAndCheckSignature=function(c){var d=c.charCodeAt(0),f=c.charCodeAt(1),p=c.charCodeAt(2),y=c.charCodeAt(3),x=this.readData(4);return d===x[0]&&f===x[1]&&p===x[2]&&y===x[3]},l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},n.exports=l},{"../utils":32,"./DataReader":18}],18:[function(s,n,r){var o=s("../utils");function l(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var d,f=0;for(this.checkOffset(c),d=this.index+c-1;d>=this.index;d--)f=(f<<8)+this.byteAt(d);return this.index+=c,f},readString:function(c){return o.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},n.exports=l},{"../utils":32}],19:[function(s,n,r){var o=s("./Uint8ArrayReader");function l(c){o.call(this,c)}s("../utils").inherits(l,o),l.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},n.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(s,n,r){var o=s("./DataReader");function l(c){o.call(this,c)}s("../utils").inherits(l,o),l.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},l.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},l.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},l.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},n.exports=l},{"../utils":32,"./DataReader":18}],21:[function(s,n,r){var o=s("./ArrayReader");function l(c){o.call(this,c)}s("../utils").inherits(l,o),l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},n.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(s,n,r){var o=s("../utils"),l=s("../support"),c=s("./ArrayReader"),d=s("./StringReader"),f=s("./NodeBufferReader"),p=s("./Uint8ArrayReader");n.exports=function(y){var x=o.getTypeOf(y);return o.checkSupport(x),x!=="string"||l.uint8array?x==="nodebuffer"?new f(y):l.uint8array?new p(o.transformTo("uint8array",y)):new c(o.transformTo("array",y)):new d(y)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(s,n,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(s,n,r){var o=s("./GenericWorker"),l=s("../utils");function c(d){o.call(this,"ConvertWorker to "+d),this.destType=d}l.inherits(c,o),c.prototype.processChunk=function(d){this.push({data:l.transformTo(this.destType,d.data),meta:d.meta})},n.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(s,n,r){var o=s("./GenericWorker"),l=s("../crc32");function c(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}s("../utils").inherits(c,o),c.prototype.processChunk=function(d){this.streamInfo.crc32=l(d.data,this.streamInfo.crc32||0),this.push(d)},n.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(s,n,r){var o=s("../utils"),l=s("./GenericWorker");function c(d){l.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}o.inherits(c,l),c.prototype.processChunk=function(d){if(d){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+d.data.length}l.prototype.processChunk.call(this,d)},n.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(s,n,r){var o=s("../utils"),l=s("./GenericWorker");function c(d){l.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(p){f.dataIsReady=!0,f.data=p,f.max=p&&p.length||0,f.type=o.getTypeOf(p),f.isPaused||f._tickAndRepeat()},function(p){f.error(p)})}o.inherits(c,l),c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,f);break;case"uint8array":d=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":d=this.data.slice(this.index,f)}return this.index=f,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(s,n,r){function o(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,c){return this._listeners[l].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,c){if(this._listeners[l])for(var d=0;d<this._listeners[l].length;d++)this._listeners[l][d].call(this,c)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var c=this;return l.on("data",function(d){c.processChunk(d)}),l.on("end",function(){c.end()}),l.on("error",function(d){c.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,c){return this.extraStreamInfo[l]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},n.exports=o},{}],29:[function(s,n,r){var o=s("../utils"),l=s("./ConvertWorker"),c=s("./GenericWorker"),d=s("../base64"),f=s("../support"),p=s("../external"),y=null;if(f.nodestream)try{y=s("../nodejs/NodejsStreamOutputAdapter")}catch{}function x(_,w){return new p.Promise(function(A,S){var k=[],T=_._internalType,j=_._outputType,D=_._mimeType;_.on("data",function(H,F){k.push(H),w&&w(F)}).on("error",function(H){k=[],S(H)}).on("end",function(){try{var H=(function(F,R,I){switch(F){case"blob":return o.newBlob(o.transformTo("arraybuffer",R),I);case"base64":return d.encode(R);default:return o.transformTo(F,R)}})(j,(function(F,R){var I,K=0,ct=null,P=0;for(I=0;I<R.length;I++)P+=R[I].length;switch(F){case"string":return R.join("");case"array":return Array.prototype.concat.apply([],R);case"uint8array":for(ct=new Uint8Array(P),I=0;I<R.length;I++)ct.set(R[I],K),K+=R[I].length;return ct;case"nodebuffer":return Buffer.concat(R);default:throw new Error("concat : unsupported type '"+F+"'")}})(T,k),D);A(H)}catch(F){S(F)}k=[]}).resume()})}function v(_,w,A){var S=w;switch(w){case"blob":case"arraybuffer":S="uint8array";break;case"base64":S="string"}try{this._internalType=S,this._outputType=w,this._mimeType=A,o.checkSupport(S),this._worker=_.pipe(new l(S)),_.lock()}catch(k){this._worker=new c("error"),this._worker.error(k)}}v.prototype={accumulate:function(_){return x(this,_)},on:function(_,w){var A=this;return _==="data"?this._worker.on(_,function(S){w.call(A,S.data,S.meta)}):this._worker.on(_,function(){o.delay(w,arguments,A)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new y(this,{objectMode:this._outputType!=="nodebuffer"},_)}},n.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(s,n,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var o=new ArrayBuffer(0);try{r.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(o),r.blob=l.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!s("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(s,n,r){for(var o=s("./utils"),l=s("./support"),c=s("./nodejsUtils"),d=s("./stream/GenericWorker"),f=new Array(256),p=0;p<256;p++)f[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;f[254]=f[254]=1;function y(){d.call(this,"utf-8 decode"),this.leftOver=null}function x(){d.call(this,"utf-8 encode")}r.utf8encode=function(v){return l.nodebuffer?c.newBufferFrom(v,"utf-8"):(function(_){var w,A,S,k,T,j=_.length,D=0;for(k=0;k<j;k++)(64512&(A=_.charCodeAt(k)))==55296&&k+1<j&&(64512&(S=_.charCodeAt(k+1)))==56320&&(A=65536+(A-55296<<10)+(S-56320),k++),D+=A<128?1:A<2048?2:A<65536?3:4;for(w=l.uint8array?new Uint8Array(D):new Array(D),k=T=0;T<D;k++)(64512&(A=_.charCodeAt(k)))==55296&&k+1<j&&(64512&(S=_.charCodeAt(k+1)))==56320&&(A=65536+(A-55296<<10)+(S-56320),k++),A<128?w[T++]=A:(A<2048?w[T++]=192|A>>>6:(A<65536?w[T++]=224|A>>>12:(w[T++]=240|A>>>18,w[T++]=128|A>>>12&63),w[T++]=128|A>>>6&63),w[T++]=128|63&A);return w})(v)},r.utf8decode=function(v){return l.nodebuffer?o.transformTo("nodebuffer",v).toString("utf-8"):(function(_){var w,A,S,k,T=_.length,j=new Array(2*T);for(w=A=0;w<T;)if((S=_[w++])<128)j[A++]=S;else if(4<(k=f[S]))j[A++]=65533,w+=k-1;else{for(S&=k===2?31:k===3?15:7;1<k&&w<T;)S=S<<6|63&_[w++],k--;1<k?j[A++]=65533:S<65536?j[A++]=S:(S-=65536,j[A++]=55296|S>>10&1023,j[A++]=56320|1023&S)}return j.length!==A&&(j.subarray?j=j.subarray(0,A):j.length=A),o.applyFromCharCode(j)})(v=o.transformTo(l.uint8array?"uint8array":"array",v))},o.inherits(y,d),y.prototype.processChunk=function(v){var _=o.transformTo(l.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var w=_;(_=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),_.set(w,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var A=(function(k,T){var j;for((T=T||k.length)>k.length&&(T=k.length),j=T-1;0<=j&&(192&k[j])==128;)j--;return j<0||j===0?T:j+f[k[j]]>T?j:T})(_),S=_;A!==_.length&&(l.uint8array?(S=_.subarray(0,A),this.leftOver=_.subarray(A,_.length)):(S=_.slice(0,A),this.leftOver=_.slice(A,_.length))),this.push({data:r.utf8decode(S),meta:v.meta})},y.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=y,o.inherits(x,d),x.prototype.processChunk=function(v){this.push({data:r.utf8encode(v.data),meta:v.meta})},r.Utf8EncodeWorker=x},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(s,n,r){var o=s("./support"),l=s("./base64"),c=s("./nodejsUtils"),d=s("./external");function f(w){return w}function p(w,A){for(var S=0;S<w.length;++S)A[S]=255&w.charCodeAt(S);return A}s("setimmediate"),r.newBlob=function(w,A){r.checkSupport("blob");try{return new Blob([w],{type:A})}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return S.append(w),S.getBlob(A)}catch{throw new Error("Bug : can't construct the Blob.")}}};var y={stringifyByChunk:function(w,A,S){var k=[],T=0,j=w.length;if(j<=S)return String.fromCharCode.apply(null,w);for(;T<j;)A==="array"||A==="nodebuffer"?k.push(String.fromCharCode.apply(null,w.slice(T,Math.min(T+S,j)))):k.push(String.fromCharCode.apply(null,w.subarray(T,Math.min(T+S,j)))),T+=S;return k.join("")},stringifyByChar:function(w){for(var A="",S=0;S<w.length;S++)A+=String.fromCharCode(w[S]);return A},applyCanBeUsed:{uint8array:(function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}})()}};function x(w){var A=65536,S=r.getTypeOf(w),k=!0;if(S==="uint8array"?k=y.applyCanBeUsed.uint8array:S==="nodebuffer"&&(k=y.applyCanBeUsed.nodebuffer),k)for(;1<A;)try{return y.stringifyByChunk(w,S,A)}catch{A=Math.floor(A/2)}return y.stringifyByChar(w)}function v(w,A){for(var S=0;S<w.length;S++)A[S]=w[S];return A}r.applyFromCharCode=x;var _={};_.string={string:f,array:function(w){return p(w,new Array(w.length))},arraybuffer:function(w){return _.string.uint8array(w).buffer},uint8array:function(w){return p(w,new Uint8Array(w.length))},nodebuffer:function(w){return p(w,c.allocBuffer(w.length))}},_.array={string:x,array:f,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return c.newBufferFrom(w)}},_.arraybuffer={string:function(w){return x(new Uint8Array(w))},array:function(w){return v(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:f,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return c.newBufferFrom(new Uint8Array(w))}},_.uint8array={string:x,array:function(w){return v(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:f,nodebuffer:function(w){return c.newBufferFrom(w)}},_.nodebuffer={string:x,array:function(w){return v(w,new Array(w.length))},arraybuffer:function(w){return _.nodebuffer.uint8array(w).buffer},uint8array:function(w){return v(w,new Uint8Array(w.length))},nodebuffer:f},r.transformTo=function(w,A){if(A=A||"",!w)return A;r.checkSupport(w);var S=r.getTypeOf(A);return _[S][w](A)},r.resolve=function(w){for(var A=w.split("/"),S=[],k=0;k<A.length;k++){var T=A[k];T==="."||T===""&&k!==0&&k!==A.length-1||(T===".."?S.pop():S.push(T))}return S.join("/")},r.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":o.nodebuffer&&c.isBuffer(w)?"nodebuffer":o.uint8array&&w instanceof Uint8Array?"uint8array":o.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(w){if(!o[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(w){var A,S,k="";for(S=0;S<(w||"").length;S++)k+="\\x"+((A=w.charCodeAt(S))<16?"0":"")+A.toString(16).toUpperCase();return k},r.delay=function(w,A,S){setImmediate(function(){w.apply(S||null,A||[])})},r.inherits=function(w,A){function S(){}S.prototype=A.prototype,w.prototype=new S},r.extend=function(){var w,A,S={};for(w=0;w<arguments.length;w++)for(A in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],A)&&S[A]===void 0&&(S[A]=arguments[w][A]);return S},r.prepareContent=function(w,A,S,k,T){return d.Promise.resolve(A).then(function(j){return o.blob&&(j instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(j))!==-1)&&typeof FileReader<"u"?new d.Promise(function(D,H){var F=new FileReader;F.onload=function(R){D(R.target.result)},F.onerror=function(R){H(R.target.error)},F.readAsArrayBuffer(j)}):j}).then(function(j){var D=r.getTypeOf(j);return D?(D==="arraybuffer"?j=r.transformTo("uint8array",j):D==="string"&&(T?j=l.decode(j):S&&k!==!0&&(j=(function(H){return p(H,o.uint8array?new Uint8Array(H.length):new Array(H.length))})(j))),j):d.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(s,n,r){var o=s("./reader/readerFor"),l=s("./utils"),c=s("./signature"),d=s("./zipEntry"),f=s("./support");function p(y){this.files=[],this.loadOptions=y}p.prototype={checkSignature:function(y){if(!this.reader.readAndCheckSignature(y)){this.reader.index-=4;var x=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(x)+", expected "+l.pretty(y)+")")}},isSignature:function(y,x){var v=this.reader.index;this.reader.setIndex(y);var _=this.reader.readString(4)===x;return this.reader.setIndex(v),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var y=this.reader.readData(this.zipCommentLength),x=f.uint8array?"uint8array":"array",v=l.transformTo(x,y);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var y,x,v,_=this.zip64EndOfCentralSize-44;0<_;)y=this.reader.readInt(2),x=this.reader.readInt(4),v=this.reader.readData(x),this.zip64ExtensibleData[y]={id:y,length:x,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var y,x;for(y=0;y<this.files.length;y++)x=this.files[y],this.reader.setIndex(x.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),x.readLocalPart(this.reader),x.handleUTF8(),x.processAttributes()},readCentralDir:function(){var y;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(y=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(y);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var y=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(y<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(y);var x=y;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(y=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(y),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var _=x-v;if(0<_)this.isSignature(x,c.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(y){this.reader=o(y)},load:function(y){this.prepareReader(y),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(s,n,r){var o=s("./reader/readerFor"),l=s("./utils"),c=s("./compressedObject"),d=s("./crc32"),f=s("./utf8"),p=s("./compressions"),y=s("./support");function x(v,_){this.options=v,this.loadOptions=_}x.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var _,w;if(v.skip(22),this.fileNameLength=v.readInt(2),w=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=(function(A){for(var S in p)if(Object.prototype.hasOwnProperty.call(p,S)&&p[S].magic===A)return p[S];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,_,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var _=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(_),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=o(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var _,w,A,S=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<S;)_=v.readInt(2),w=v.readInt(2),A=v.readData(w),this.extraFields[_]={id:_,length:w,value:A};v.setIndex(S)},handleUTF8:function(){var v=y.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var w=l.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var A=this.findExtraFieldUnicodeComment();if(A!==null)this.fileCommentStr=A;else{var S=l.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(S)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var _=o(v.value);return _.readInt(1)!==1||d(this.fileName)!==_.readInt(4)?null:f.utf8decode(_.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var _=o(v.value);return _.readInt(1)!==1||d(this.fileComment)!==_.readInt(4)?null:f.utf8decode(_.readData(v.length-5))}return null}},n.exports=x},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(s,n,r){function o(_,w,A){this.name=_,this.dir=A.dir,this.date=A.date,this.comment=A.comment,this.unixPermissions=A.unixPermissions,this.dosPermissions=A.dosPermissions,this._data=w,this._dataBinary=A.binary,this.options={compression:A.compression,compressionOptions:A.compressionOptions}}var l=s("./stream/StreamHelper"),c=s("./stream/DataWorker"),d=s("./utf8"),f=s("./compressedObject"),p=s("./stream/GenericWorker");o.prototype={internalStream:function(_){var w=null,A="string";try{if(!_)throw new Error("No output type specified.");var S=(A=_.toLowerCase())==="string"||A==="text";A!=="binarystring"&&A!=="text"||(A="string"),w=this._decompressWorker();var k=!this._dataBinary;k&&!S&&(w=w.pipe(new d.Utf8EncodeWorker)),!k&&S&&(w=w.pipe(new d.Utf8DecodeWorker))}catch(T){(w=new p("error")).error(T)}return new l(w,A,"")},async:function(_,w){return this.internalStream(_).accumulate(w)},nodeStream:function(_,w){return this.internalStream(_||"nodebuffer").toNodejsStream(w)},_compressWorker:function(_,w){if(this._data instanceof f&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var A=this._decompressWorker();return this._dataBinary||(A=A.pipe(new d.Utf8EncodeWorker)),f.createWorkerFrom(A,_,w)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof p?this._data:new c(this._data)}};for(var y=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],x=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<y.length;v++)o.prototype[y[v]]=x;n.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(s,n,r){(function(o){var l,c,d=o.MutationObserver||o.WebKitMutationObserver;if(d){var f=0,p=new d(_),y=o.document.createTextNode("");p.observe(y,{characterData:!0}),l=function(){y.data=f=++f%2}}else if(o.setImmediate||o.MessageChannel===void 0)l="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var w=o.document.createElement("script");w.onreadystatechange=function(){_(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},o.document.documentElement.appendChild(w)}:function(){setTimeout(_,0)};else{var x=new o.MessageChannel;x.port1.onmessage=_,l=function(){x.port2.postMessage(0)}}var v=[];function _(){var w,A;c=!0;for(var S=v.length;S;){for(A=v,v=[],w=-1;++w<S;)A[w]();S=v.length}c=!1}n.exports=function(w){v.push(w)!==1||c||l()}}).call(this,typeof nn<"u"?nn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(s,n,r){var o=s("immediate");function l(){}var c={},d=["REJECTED"],f=["FULFILLED"],p=["PENDING"];function y(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,S!==l&&w(this,S)}function x(S,k,T){this.promise=S,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}function v(S,k,T){o(function(){var j;try{j=k(T)}catch(D){return c.reject(S,D)}j===S?c.reject(S,new TypeError("Cannot resolve promise with itself")):c.resolve(S,j)})}function _(S){var k=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof k=="function")return function(){k.apply(S,arguments)}}function w(S,k){var T=!1;function j(F){T||(T=!0,c.reject(S,F))}function D(F){T||(T=!0,c.resolve(S,F))}var H=A(function(){k(D,j)});H.status==="error"&&j(H.value)}function A(S,k){var T={};try{T.value=S(k),T.status="success"}catch(j){T.status="error",T.value=j}return T}(n.exports=y).prototype.finally=function(S){if(typeof S!="function")return this;var k=this.constructor;return this.then(function(T){return k.resolve(S()).then(function(){return T})},function(T){return k.resolve(S()).then(function(){throw T})})},y.prototype.catch=function(S){return this.then(null,S)},y.prototype.then=function(S,k){if(typeof S!="function"&&this.state===f||typeof k!="function"&&this.state===d)return this;var T=new this.constructor(l);return this.state!==p?v(T,this.state===f?S:k,this.outcome):this.queue.push(new x(T,S,k)),T},x.prototype.callFulfilled=function(S){c.resolve(this.promise,S)},x.prototype.otherCallFulfilled=function(S){v(this.promise,this.onFulfilled,S)},x.prototype.callRejected=function(S){c.reject(this.promise,S)},x.prototype.otherCallRejected=function(S){v(this.promise,this.onRejected,S)},c.resolve=function(S,k){var T=A(_,k);if(T.status==="error")return c.reject(S,T.value);var j=T.value;if(j)w(S,j);else{S.state=f,S.outcome=k;for(var D=-1,H=S.queue.length;++D<H;)S.queue[D].callFulfilled(k)}return S},c.reject=function(S,k){S.state=d,S.outcome=k;for(var T=-1,j=S.queue.length;++T<j;)S.queue[T].callRejected(k);return S},y.resolve=function(S){return S instanceof this?S:c.resolve(new this(l),S)},y.reject=function(S){var k=new this(l);return c.reject(k,S)},y.all=function(S){var k=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=S.length,j=!1;if(!T)return this.resolve([]);for(var D=new Array(T),H=0,F=-1,R=new this(l);++F<T;)I(S[F],F);return R;function I(K,ct){k.resolve(K).then(function(P){D[ct]=P,++H!==T||j||(j=!0,c.resolve(R,D))},function(P){j||(j=!0,c.reject(R,P))})}},y.race=function(S){var k=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=S.length,j=!1;if(!T)return this.resolve([]);for(var D=-1,H=new this(l);++D<T;)F=S[D],k.resolve(F).then(function(R){j||(j=!0,c.resolve(H,R))},function(R){j||(j=!0,c.reject(H,R))});var F;return H}},{immediate:36}],38:[function(s,n,r){var o={};(0,s("./lib/utils/common").assign)(o,s("./lib/deflate"),s("./lib/inflate"),s("./lib/zlib/constants")),n.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(s,n,r){var o=s("./zlib/deflate"),l=s("./utils/common"),c=s("./utils/strings"),d=s("./zlib/messages"),f=s("./zlib/zstream"),p=Object.prototype.toString,y=0,x=-1,v=0,_=8;function w(S){if(!(this instanceof w))return new w(S);this.options=l.assign({level:x,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},S||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var T=o.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(T!==y)throw new Error(d[T]);if(k.header&&o.deflateSetHeader(this.strm,k.header),k.dictionary){var j;if(j=typeof k.dictionary=="string"?c.string2buf(k.dictionary):p.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(T=o.deflateSetDictionary(this.strm,j))!==y)throw new Error(d[T]);this._dict_set=!0}}function A(S,k){var T=new w(k);if(T.push(S,!0),T.err)throw T.msg||d[T.err];return T.result}w.prototype.push=function(S,k){var T,j,D=this.strm,H=this.options.chunkSize;if(this.ended)return!1;j=k===~~k?k:k===!0?4:0,typeof S=="string"?D.input=c.string2buf(S):p.call(S)==="[object ArrayBuffer]"?D.input=new Uint8Array(S):D.input=S,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new l.Buf8(H),D.next_out=0,D.avail_out=H),(T=o.deflate(D,j))!==1&&T!==y)return this.onEnd(T),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||j!==4&&j!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(l.shrinkBuf(D.output,D.next_out))):this.onData(l.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&T!==1);return j===4?(T=o.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===y):j!==2||(this.onEnd(y),!(D.avail_out=0))},w.prototype.onData=function(S){this.chunks.push(S)},w.prototype.onEnd=function(S){S===y&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},r.Deflate=w,r.deflate=A,r.deflateRaw=function(S,k){return(k=k||{}).raw=!0,A(S,k)},r.gzip=function(S,k){return(k=k||{}).gzip=!0,A(S,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(s,n,r){var o=s("./zlib/inflate"),l=s("./utils/common"),c=s("./utils/strings"),d=s("./zlib/constants"),f=s("./zlib/messages"),p=s("./zlib/zstream"),y=s("./zlib/gzheader"),x=Object.prototype.toString;function v(w){if(!(this instanceof v))return new v(w);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},w||{});var A=this.options;A.raw&&0<=A.windowBits&&A.windowBits<16&&(A.windowBits=-A.windowBits,A.windowBits===0&&(A.windowBits=-15)),!(0<=A.windowBits&&A.windowBits<16)||w&&w.windowBits||(A.windowBits+=32),15<A.windowBits&&A.windowBits<48&&(15&A.windowBits)==0&&(A.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var S=o.inflateInit2(this.strm,A.windowBits);if(S!==d.Z_OK)throw new Error(f[S]);this.header=new y,o.inflateGetHeader(this.strm,this.header)}function _(w,A){var S=new v(A);if(S.push(w,!0),S.err)throw S.msg||f[S.err];return S.result}v.prototype.push=function(w,A){var S,k,T,j,D,H,F=this.strm,R=this.options.chunkSize,I=this.options.dictionary,K=!1;if(this.ended)return!1;k=A===~~A?A:A===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof w=="string"?F.input=c.binstring2buf(w):x.call(w)==="[object ArrayBuffer]"?F.input=new Uint8Array(w):F.input=w,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new l.Buf8(R),F.next_out=0,F.avail_out=R),(S=o.inflate(F,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&I&&(H=typeof I=="string"?c.string2buf(I):x.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,S=o.inflateSetDictionary(this.strm,H)),S===d.Z_BUF_ERROR&&K===!0&&(S=d.Z_OK,K=!1),S!==d.Z_STREAM_END&&S!==d.Z_OK)return this.onEnd(S),!(this.ended=!0);F.next_out&&(F.avail_out!==0&&S!==d.Z_STREAM_END&&(F.avail_in!==0||k!==d.Z_FINISH&&k!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(T=c.utf8border(F.output,F.next_out),j=F.next_out-T,D=c.buf2string(F.output,T),F.next_out=j,F.avail_out=R-j,j&&l.arraySet(F.output,F.output,T,j,0),this.onData(D)):this.onData(l.shrinkBuf(F.output,F.next_out)))),F.avail_in===0&&F.avail_out===0&&(K=!0)}while((0<F.avail_in||F.avail_out===0)&&S!==d.Z_STREAM_END);return S===d.Z_STREAM_END&&(k=d.Z_FINISH),k===d.Z_FINISH?(S=o.inflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===d.Z_OK):k!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(F.avail_out=0))},v.prototype.onData=function(w){this.chunks.push(w)},v.prototype.onEnd=function(w){w===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},r.Inflate=v,r.inflate=_,r.inflateRaw=function(w,A){return(A=A||{}).raw=!0,_(w,A)},r.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(s,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(d){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var p=f.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var y in p)p.hasOwnProperty(y)&&(d[y]=p[y])}}return d},r.shrinkBuf=function(d,f){return d.length===f?d:d.subarray?d.subarray(0,f):(d.length=f,d)};var l={arraySet:function(d,f,p,y,x){if(f.subarray&&d.subarray)d.set(f.subarray(p,p+y),x);else for(var v=0;v<y;v++)d[x+v]=f[p+v]},flattenChunks:function(d){var f,p,y,x,v,_;for(f=y=0,p=d.length;f<p;f++)y+=d[f].length;for(_=new Uint8Array(y),f=x=0,p=d.length;f<p;f++)v=d[f],_.set(v,x),x+=v.length;return _}},c={arraySet:function(d,f,p,y,x){for(var v=0;v<y;v++)d[x+v]=f[p+v]},flattenChunks:function(d){return[].concat.apply([],d)}};r.setTyped=function(d){d?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,l)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,c))},r.setTyped(o)},{}],42:[function(s,n,r){var o=s("./common"),l=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var d=new o.Buf8(256),f=0;f<256;f++)d[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function p(y,x){if(x<65537&&(y.subarray&&c||!y.subarray&&l))return String.fromCharCode.apply(null,o.shrinkBuf(y,x));for(var v="",_=0;_<x;_++)v+=String.fromCharCode(y[_]);return v}d[254]=d[254]=1,r.string2buf=function(y){var x,v,_,w,A,S=y.length,k=0;for(w=0;w<S;w++)(64512&(v=y.charCodeAt(w)))==55296&&w+1<S&&(64512&(_=y.charCodeAt(w+1)))==56320&&(v=65536+(v-55296<<10)+(_-56320),w++),k+=v<128?1:v<2048?2:v<65536?3:4;for(x=new o.Buf8(k),w=A=0;A<k;w++)(64512&(v=y.charCodeAt(w)))==55296&&w+1<S&&(64512&(_=y.charCodeAt(w+1)))==56320&&(v=65536+(v-55296<<10)+(_-56320),w++),v<128?x[A++]=v:(v<2048?x[A++]=192|v>>>6:(v<65536?x[A++]=224|v>>>12:(x[A++]=240|v>>>18,x[A++]=128|v>>>12&63),x[A++]=128|v>>>6&63),x[A++]=128|63&v);return x},r.buf2binstring=function(y){return p(y,y.length)},r.binstring2buf=function(y){for(var x=new o.Buf8(y.length),v=0,_=x.length;v<_;v++)x[v]=y.charCodeAt(v);return x},r.buf2string=function(y,x){var v,_,w,A,S=x||y.length,k=new Array(2*S);for(v=_=0;v<S;)if((w=y[v++])<128)k[_++]=w;else if(4<(A=d[w]))k[_++]=65533,v+=A-1;else{for(w&=A===2?31:A===3?15:7;1<A&&v<S;)w=w<<6|63&y[v++],A--;1<A?k[_++]=65533:w<65536?k[_++]=w:(w-=65536,k[_++]=55296|w>>10&1023,k[_++]=56320|1023&w)}return p(k,_)},r.utf8border=function(y,x){var v;for((x=x||y.length)>y.length&&(x=y.length),v=x-1;0<=v&&(192&y[v])==128;)v--;return v<0||v===0?x:v+d[y[v]]>x?v:x}},{"./common":41}],43:[function(s,n,r){n.exports=function(o,l,c,d){for(var f=65535&o|0,p=o>>>16&65535|0,y=0;c!==0;){for(c-=y=2e3<c?2e3:c;p=p+(f=f+l[d++]|0)|0,--y;);f%=65521,p%=65521}return f|p<<16|0}},{}],44:[function(s,n,r){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(s,n,r){var o=(function(){for(var l,c=[],d=0;d<256;d++){l=d;for(var f=0;f<8;f++)l=1&l?3988292384^l>>>1:l>>>1;c[d]=l}return c})();n.exports=function(l,c,d,f){var p=o,y=f+d;l^=-1;for(var x=f;x<y;x++)l=l>>>8^p[255&(l^c[x])];return-1^l}},{}],46:[function(s,n,r){var o,l=s("../utils/common"),c=s("./trees"),d=s("./adler32"),f=s("./crc32"),p=s("./messages"),y=0,x=4,v=0,_=-2,w=-1,A=4,S=2,k=8,T=9,j=286,D=30,H=19,F=2*j+1,R=15,I=3,K=258,ct=K+I+1,P=42,W=113,N=1,st=2,G=3,O=4;function Y(C,ht){return C.msg=p[ht],ht}function X(C){return(C<<1)-(4<C?9:0)}function dt(C){for(var ht=C.length;0<=--ht;)C[ht]=0}function M(C){var ht=C.state,rt=ht.pending;rt>C.avail_out&&(rt=C.avail_out),rt!==0&&(l.arraySet(C.output,ht.pending_buf,ht.pending_out,rt,C.next_out),C.next_out+=rt,ht.pending_out+=rt,C.total_out+=rt,C.avail_out-=rt,ht.pending-=rt,ht.pending===0&&(ht.pending_out=0))}function B(C,ht){c._tr_flush_block(C,0<=C.block_start?C.block_start:-1,C.strstart-C.block_start,ht),C.block_start=C.strstart,M(C.strm)}function J(C,ht){C.pending_buf[C.pending++]=ht}function ot(C,ht){C.pending_buf[C.pending++]=ht>>>8&255,C.pending_buf[C.pending++]=255&ht}function at(C,ht){var rt,q,U=C.max_chain_length,Z=C.strstart,mt=C.prev_length,yt=C.nice_match,it=C.strstart>C.w_size-ct?C.strstart-(C.w_size-ct):0,bt=C.window,wt=C.w_mask,xt=C.prev,Nt=C.strstart+K,ie=bt[Z+mt-1],Vt=bt[Z+mt];C.prev_length>=C.good_match&&(U>>=2),yt>C.lookahead&&(yt=C.lookahead);do if(bt[(rt=ht)+mt]===Vt&&bt[rt+mt-1]===ie&&bt[rt]===bt[Z]&&bt[++rt]===bt[Z+1]){Z+=2,rt++;do;while(bt[++Z]===bt[++rt]&&bt[++Z]===bt[++rt]&&bt[++Z]===bt[++rt]&&bt[++Z]===bt[++rt]&&bt[++Z]===bt[++rt]&&bt[++Z]===bt[++rt]&&bt[++Z]===bt[++rt]&&bt[++Z]===bt[++rt]&&Z<Nt);if(q=K-(Nt-Z),Z=Nt-K,mt<q){if(C.match_start=ht,yt<=(mt=q))break;ie=bt[Z+mt-1],Vt=bt[Z+mt]}}while((ht=xt[ht&wt])>it&&--U!=0);return mt<=C.lookahead?mt:C.lookahead}function _t(C){var ht,rt,q,U,Z,mt,yt,it,bt,wt,xt=C.w_size;do{if(U=C.window_size-C.lookahead-C.strstart,C.strstart>=xt+(xt-ct)){for(l.arraySet(C.window,C.window,xt,xt,0),C.match_start-=xt,C.strstart-=xt,C.block_start-=xt,ht=rt=C.hash_size;q=C.head[--ht],C.head[ht]=xt<=q?q-xt:0,--rt;);for(ht=rt=xt;q=C.prev[--ht],C.prev[ht]=xt<=q?q-xt:0,--rt;);U+=xt}if(C.strm.avail_in===0)break;if(mt=C.strm,yt=C.window,it=C.strstart+C.lookahead,bt=U,wt=void 0,wt=mt.avail_in,bt<wt&&(wt=bt),rt=wt===0?0:(mt.avail_in-=wt,l.arraySet(yt,mt.input,mt.next_in,wt,it),mt.state.wrap===1?mt.adler=d(mt.adler,yt,wt,it):mt.state.wrap===2&&(mt.adler=f(mt.adler,yt,wt,it)),mt.next_in+=wt,mt.total_in+=wt,wt),C.lookahead+=rt,C.lookahead+C.insert>=I)for(Z=C.strstart-C.insert,C.ins_h=C.window[Z],C.ins_h=(C.ins_h<<C.hash_shift^C.window[Z+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[Z+I-1])&C.hash_mask,C.prev[Z&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=Z,Z++,C.insert--,!(C.lookahead+C.insert<I)););}while(C.lookahead<ct&&C.strm.avail_in!==0)}function vt(C,ht){for(var rt,q;;){if(C.lookahead<ct){if(_t(C),C.lookahead<ct&&ht===y)return N;if(C.lookahead===0)break}if(rt=0,C.lookahead>=I&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+I-1])&C.hash_mask,rt=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),rt!==0&&C.strstart-rt<=C.w_size-ct&&(C.match_length=at(C,rt)),C.match_length>=I)if(q=c._tr_tally(C,C.strstart-C.match_start,C.match_length-I),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=I){for(C.match_length--;C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+I-1])&C.hash_mask,rt=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart,--C.match_length!=0;);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;else q=c._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(q&&(B(C,!1),C.strm.avail_out===0))return N}return C.insert=C.strstart<I-1?C.strstart:I-1,ht===x?(B(C,!0),C.strm.avail_out===0?G:O):C.last_lit&&(B(C,!1),C.strm.avail_out===0)?N:st}function Et(C,ht){for(var rt,q,U;;){if(C.lookahead<ct){if(_t(C),C.lookahead<ct&&ht===y)return N;if(C.lookahead===0)break}if(rt=0,C.lookahead>=I&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+I-1])&C.hash_mask,rt=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=I-1,rt!==0&&C.prev_length<C.max_lazy_match&&C.strstart-rt<=C.w_size-ct&&(C.match_length=at(C,rt),C.match_length<=5&&(C.strategy===1||C.match_length===I&&4096<C.strstart-C.match_start)&&(C.match_length=I-1)),C.prev_length>=I&&C.match_length<=C.prev_length){for(U=C.strstart+C.lookahead-I,q=c._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-I),C.lookahead-=C.prev_length-1,C.prev_length-=2;++C.strstart<=U&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+I-1])&C.hash_mask,rt=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),--C.prev_length!=0;);if(C.match_available=0,C.match_length=I-1,C.strstart++,q&&(B(C,!1),C.strm.avail_out===0))return N}else if(C.match_available){if((q=c._tr_tally(C,0,C.window[C.strstart-1]))&&B(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return N}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(q=c._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<I-1?C.strstart:I-1,ht===x?(B(C,!0),C.strm.avail_out===0?G:O):C.last_lit&&(B(C,!1),C.strm.avail_out===0)?N:st}function lt(C,ht,rt,q,U){this.good_length=C,this.max_lazy=ht,this.nice_length=rt,this.max_chain=q,this.func=U}function St(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*F),this.dyn_dtree=new l.Buf16(2*(2*D+1)),this.bl_tree=new l.Buf16(2*(2*H+1)),dt(this.dyn_ltree),dt(this.dyn_dtree),dt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(R+1),this.heap=new l.Buf16(2*j+1),dt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*j+1),dt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Pt(C){var ht;return C&&C.state?(C.total_in=C.total_out=0,C.data_type=S,(ht=C.state).pending=0,ht.pending_out=0,ht.wrap<0&&(ht.wrap=-ht.wrap),ht.status=ht.wrap?P:W,C.adler=ht.wrap===2?0:1,ht.last_flush=y,c._tr_init(ht),v):Y(C,_)}function Ft(C){var ht=Pt(C);return ht===v&&(function(rt){rt.window_size=2*rt.w_size,dt(rt.head),rt.max_lazy_match=o[rt.level].max_lazy,rt.good_match=o[rt.level].good_length,rt.nice_match=o[rt.level].nice_length,rt.max_chain_length=o[rt.level].max_chain,rt.strstart=0,rt.block_start=0,rt.lookahead=0,rt.insert=0,rt.match_length=rt.prev_length=I-1,rt.match_available=0,rt.ins_h=0})(C.state),ht}function It(C,ht,rt,q,U,Z){if(!C)return _;var mt=1;if(ht===w&&(ht=6),q<0?(mt=0,q=-q):15<q&&(mt=2,q-=16),U<1||T<U||rt!==k||q<8||15<q||ht<0||9<ht||Z<0||A<Z)return Y(C,_);q===8&&(q=9);var yt=new St;return(C.state=yt).strm=C,yt.wrap=mt,yt.gzhead=null,yt.w_bits=q,yt.w_size=1<<yt.w_bits,yt.w_mask=yt.w_size-1,yt.hash_bits=U+7,yt.hash_size=1<<yt.hash_bits,yt.hash_mask=yt.hash_size-1,yt.hash_shift=~~((yt.hash_bits+I-1)/I),yt.window=new l.Buf8(2*yt.w_size),yt.head=new l.Buf16(yt.hash_size),yt.prev=new l.Buf16(yt.w_size),yt.lit_bufsize=1<<U+6,yt.pending_buf_size=4*yt.lit_bufsize,yt.pending_buf=new l.Buf8(yt.pending_buf_size),yt.d_buf=1*yt.lit_bufsize,yt.l_buf=3*yt.lit_bufsize,yt.level=ht,yt.strategy=Z,yt.method=rt,Ft(C)}o=[new lt(0,0,0,0,function(C,ht){var rt=65535;for(rt>C.pending_buf_size-5&&(rt=C.pending_buf_size-5);;){if(C.lookahead<=1){if(_t(C),C.lookahead===0&&ht===y)return N;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var q=C.block_start+rt;if((C.strstart===0||C.strstart>=q)&&(C.lookahead=C.strstart-q,C.strstart=q,B(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-ct&&(B(C,!1),C.strm.avail_out===0))return N}return C.insert=0,ht===x?(B(C,!0),C.strm.avail_out===0?G:O):(C.strstart>C.block_start&&(B(C,!1),C.strm.avail_out),N)}),new lt(4,4,8,4,vt),new lt(4,5,16,8,vt),new lt(4,6,32,32,vt),new lt(4,4,16,16,Et),new lt(8,16,32,32,Et),new lt(8,16,128,128,Et),new lt(8,32,128,256,Et),new lt(32,128,258,1024,Et),new lt(32,258,258,4096,Et)],r.deflateInit=function(C,ht){return It(C,ht,k,15,8,0)},r.deflateInit2=It,r.deflateReset=Ft,r.deflateResetKeep=Pt,r.deflateSetHeader=function(C,ht){return C&&C.state?C.state.wrap!==2?_:(C.state.gzhead=ht,v):_},r.deflate=function(C,ht){var rt,q,U,Z;if(!C||!C.state||5<ht||ht<0)return C?Y(C,_):_;if(q=C.state,!C.output||!C.input&&C.avail_in!==0||q.status===666&&ht!==x)return Y(C,C.avail_out===0?-5:_);if(q.strm=C,rt=q.last_flush,q.last_flush=ht,q.status===P)if(q.wrap===2)C.adler=0,J(q,31),J(q,139),J(q,8),q.gzhead?(J(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),J(q,255&q.gzhead.time),J(q,q.gzhead.time>>8&255),J(q,q.gzhead.time>>16&255),J(q,q.gzhead.time>>24&255),J(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),J(q,255&q.gzhead.os),q.gzhead.extra&&q.gzhead.extra.length&&(J(q,255&q.gzhead.extra.length),J(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&(C.adler=f(C.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=69):(J(q,0),J(q,0),J(q,0),J(q,0),J(q,0),J(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),J(q,3),q.status=W);else{var mt=k+(q.w_bits-8<<4)<<8;mt|=(2<=q.strategy||q.level<2?0:q.level<6?1:q.level===6?2:3)<<6,q.strstart!==0&&(mt|=32),mt+=31-mt%31,q.status=W,ot(q,mt),q.strstart!==0&&(ot(q,C.adler>>>16),ot(q,65535&C.adler)),C.adler=1}if(q.status===69)if(q.gzhead.extra){for(U=q.pending;q.gzindex<(65535&q.gzhead.extra.length)&&(q.pending!==q.pending_buf_size||(q.gzhead.hcrc&&q.pending>U&&(C.adler=f(C.adler,q.pending_buf,q.pending-U,U)),M(C),U=q.pending,q.pending!==q.pending_buf_size));)J(q,255&q.gzhead.extra[q.gzindex]),q.gzindex++;q.gzhead.hcrc&&q.pending>U&&(C.adler=f(C.adler,q.pending_buf,q.pending-U,U)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=73)}else q.status=73;if(q.status===73)if(q.gzhead.name){U=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>U&&(C.adler=f(C.adler,q.pending_buf,q.pending-U,U)),M(C),U=q.pending,q.pending===q.pending_buf_size)){Z=1;break}Z=q.gzindex<q.gzhead.name.length?255&q.gzhead.name.charCodeAt(q.gzindex++):0,J(q,Z)}while(Z!==0);q.gzhead.hcrc&&q.pending>U&&(C.adler=f(C.adler,q.pending_buf,q.pending-U,U)),Z===0&&(q.gzindex=0,q.status=91)}else q.status=91;if(q.status===91)if(q.gzhead.comment){U=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>U&&(C.adler=f(C.adler,q.pending_buf,q.pending-U,U)),M(C),U=q.pending,q.pending===q.pending_buf_size)){Z=1;break}Z=q.gzindex<q.gzhead.comment.length?255&q.gzhead.comment.charCodeAt(q.gzindex++):0,J(q,Z)}while(Z!==0);q.gzhead.hcrc&&q.pending>U&&(C.adler=f(C.adler,q.pending_buf,q.pending-U,U)),Z===0&&(q.status=103)}else q.status=103;if(q.status===103&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&M(C),q.pending+2<=q.pending_buf_size&&(J(q,255&C.adler),J(q,C.adler>>8&255),C.adler=0,q.status=W)):q.status=W),q.pending!==0){if(M(C),C.avail_out===0)return q.last_flush=-1,v}else if(C.avail_in===0&&X(ht)<=X(rt)&&ht!==x)return Y(C,-5);if(q.status===666&&C.avail_in!==0)return Y(C,-5);if(C.avail_in!==0||q.lookahead!==0||ht!==y&&q.status!==666){var yt=q.strategy===2?(function(it,bt){for(var wt;;){if(it.lookahead===0&&(_t(it),it.lookahead===0)){if(bt===y)return N;break}if(it.match_length=0,wt=c._tr_tally(it,0,it.window[it.strstart]),it.lookahead--,it.strstart++,wt&&(B(it,!1),it.strm.avail_out===0))return N}return it.insert=0,bt===x?(B(it,!0),it.strm.avail_out===0?G:O):it.last_lit&&(B(it,!1),it.strm.avail_out===0)?N:st})(q,ht):q.strategy===3?(function(it,bt){for(var wt,xt,Nt,ie,Vt=it.window;;){if(it.lookahead<=K){if(_t(it),it.lookahead<=K&&bt===y)return N;if(it.lookahead===0)break}if(it.match_length=0,it.lookahead>=I&&0<it.strstart&&(xt=Vt[Nt=it.strstart-1])===Vt[++Nt]&&xt===Vt[++Nt]&&xt===Vt[++Nt]){ie=it.strstart+K;do;while(xt===Vt[++Nt]&&xt===Vt[++Nt]&&xt===Vt[++Nt]&&xt===Vt[++Nt]&&xt===Vt[++Nt]&&xt===Vt[++Nt]&&xt===Vt[++Nt]&&xt===Vt[++Nt]&&Nt<ie);it.match_length=K-(ie-Nt),it.match_length>it.lookahead&&(it.match_length=it.lookahead)}if(it.match_length>=I?(wt=c._tr_tally(it,1,it.match_length-I),it.lookahead-=it.match_length,it.strstart+=it.match_length,it.match_length=0):(wt=c._tr_tally(it,0,it.window[it.strstart]),it.lookahead--,it.strstart++),wt&&(B(it,!1),it.strm.avail_out===0))return N}return it.insert=0,bt===x?(B(it,!0),it.strm.avail_out===0?G:O):it.last_lit&&(B(it,!1),it.strm.avail_out===0)?N:st})(q,ht):o[q.level].func(q,ht);if(yt!==G&&yt!==O||(q.status=666),yt===N||yt===G)return C.avail_out===0&&(q.last_flush=-1),v;if(yt===st&&(ht===1?c._tr_align(q):ht!==5&&(c._tr_stored_block(q,0,0,!1),ht===3&&(dt(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),M(C),C.avail_out===0))return q.last_flush=-1,v}return ht!==x?v:q.wrap<=0?1:(q.wrap===2?(J(q,255&C.adler),J(q,C.adler>>8&255),J(q,C.adler>>16&255),J(q,C.adler>>24&255),J(q,255&C.total_in),J(q,C.total_in>>8&255),J(q,C.total_in>>16&255),J(q,C.total_in>>24&255)):(ot(q,C.adler>>>16),ot(q,65535&C.adler)),M(C),0<q.wrap&&(q.wrap=-q.wrap),q.pending!==0?v:1)},r.deflateEnd=function(C){var ht;return C&&C.state?(ht=C.state.status)!==P&&ht!==69&&ht!==73&&ht!==91&&ht!==103&&ht!==W&&ht!==666?Y(C,_):(C.state=null,ht===W?Y(C,-3):v):_},r.deflateSetDictionary=function(C,ht){var rt,q,U,Z,mt,yt,it,bt,wt=ht.length;if(!C||!C.state||(Z=(rt=C.state).wrap)===2||Z===1&&rt.status!==P||rt.lookahead)return _;for(Z===1&&(C.adler=d(C.adler,ht,wt,0)),rt.wrap=0,wt>=rt.w_size&&(Z===0&&(dt(rt.head),rt.strstart=0,rt.block_start=0,rt.insert=0),bt=new l.Buf8(rt.w_size),l.arraySet(bt,ht,wt-rt.w_size,rt.w_size,0),ht=bt,wt=rt.w_size),mt=C.avail_in,yt=C.next_in,it=C.input,C.avail_in=wt,C.next_in=0,C.input=ht,_t(rt);rt.lookahead>=I;){for(q=rt.strstart,U=rt.lookahead-(I-1);rt.ins_h=(rt.ins_h<<rt.hash_shift^rt.window[q+I-1])&rt.hash_mask,rt.prev[q&rt.w_mask]=rt.head[rt.ins_h],rt.head[rt.ins_h]=q,q++,--U;);rt.strstart=q,rt.lookahead=I-1,_t(rt)}return rt.strstart+=rt.lookahead,rt.block_start=rt.strstart,rt.insert=rt.lookahead,rt.lookahead=0,rt.match_length=rt.prev_length=I-1,rt.match_available=0,C.next_in=yt,C.input=it,C.avail_in=mt,rt.wrap=Z,v},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(s,n,r){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(s,n,r){n.exports=function(o,l){var c,d,f,p,y,x,v,_,w,A,S,k,T,j,D,H,F,R,I,K,ct,P,W,N,st;c=o.state,d=o.next_in,N=o.input,f=d+(o.avail_in-5),p=o.next_out,st=o.output,y=p-(l-o.avail_out),x=p+(o.avail_out-257),v=c.dmax,_=c.wsize,w=c.whave,A=c.wnext,S=c.window,k=c.hold,T=c.bits,j=c.lencode,D=c.distcode,H=(1<<c.lenbits)-1,F=(1<<c.distbits)-1;t:do{T<15&&(k+=N[d++]<<T,T+=8,k+=N[d++]<<T,T+=8),R=j[k&H];e:for(;;){if(k>>>=I=R>>>24,T-=I,(I=R>>>16&255)===0)st[p++]=65535&R;else{if(!(16&I)){if((64&I)==0){R=j[(65535&R)+(k&(1<<I)-1)];continue e}if(32&I){c.mode=12;break t}o.msg="invalid literal/length code",c.mode=30;break t}K=65535&R,(I&=15)&&(T<I&&(k+=N[d++]<<T,T+=8),K+=k&(1<<I)-1,k>>>=I,T-=I),T<15&&(k+=N[d++]<<T,T+=8,k+=N[d++]<<T,T+=8),R=D[k&F];s:for(;;){if(k>>>=I=R>>>24,T-=I,!(16&(I=R>>>16&255))){if((64&I)==0){R=D[(65535&R)+(k&(1<<I)-1)];continue s}o.msg="invalid distance code",c.mode=30;break t}if(ct=65535&R,T<(I&=15)&&(k+=N[d++]<<T,(T+=8)<I&&(k+=N[d++]<<T,T+=8)),v<(ct+=k&(1<<I)-1)){o.msg="invalid distance too far back",c.mode=30;break t}if(k>>>=I,T-=I,(I=p-y)<ct){if(w<(I=ct-I)&&c.sane){o.msg="invalid distance too far back",c.mode=30;break t}if(W=S,(P=0)===A){if(P+=_-I,I<K){for(K-=I;st[p++]=S[P++],--I;);P=p-ct,W=st}}else if(A<I){if(P+=_+A-I,(I-=A)<K){for(K-=I;st[p++]=S[P++],--I;);if(P=0,A<K){for(K-=I=A;st[p++]=S[P++],--I;);P=p-ct,W=st}}}else if(P+=A-I,I<K){for(K-=I;st[p++]=S[P++],--I;);P=p-ct,W=st}for(;2<K;)st[p++]=W[P++],st[p++]=W[P++],st[p++]=W[P++],K-=3;K&&(st[p++]=W[P++],1<K&&(st[p++]=W[P++]))}else{for(P=p-ct;st[p++]=st[P++],st[p++]=st[P++],st[p++]=st[P++],2<(K-=3););K&&(st[p++]=st[P++],1<K&&(st[p++]=st[P++]))}break}}break}}while(d<f&&p<x);d-=K=T>>3,k&=(1<<(T-=K<<3))-1,o.next_in=d,o.next_out=p,o.avail_in=d<f?f-d+5:5-(d-f),o.avail_out=p<x?x-p+257:257-(p-x),c.hold=k,c.bits=T}},{}],49:[function(s,n,r){var o=s("../utils/common"),l=s("./adler32"),c=s("./crc32"),d=s("./inffast"),f=s("./inftrees"),p=1,y=2,x=0,v=-2,_=1,w=852,A=592;function S(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(P){var W;return P&&P.state?(W=P.state,P.total_in=P.total_out=W.total=0,P.msg="",W.wrap&&(P.adler=1&W.wrap),W.mode=_,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new o.Buf32(w),W.distcode=W.distdyn=new o.Buf32(A),W.sane=1,W.back=-1,x):v}function j(P){var W;return P&&P.state?((W=P.state).wsize=0,W.whave=0,W.wnext=0,T(P)):v}function D(P,W){var N,st;return P&&P.state?(st=P.state,W<0?(N=0,W=-W):(N=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?v:(st.window!==null&&st.wbits!==W&&(st.window=null),st.wrap=N,st.wbits=W,j(P))):v}function H(P,W){var N,st;return P?(st=new k,(P.state=st).window=null,(N=D(P,W))!==x&&(P.state=null),N):v}var F,R,I=!0;function K(P){if(I){var W;for(F=new o.Buf32(512),R=new o.Buf32(32),W=0;W<144;)P.lens[W++]=8;for(;W<256;)P.lens[W++]=9;for(;W<280;)P.lens[W++]=7;for(;W<288;)P.lens[W++]=8;for(f(p,P.lens,0,288,F,0,P.work,{bits:9}),W=0;W<32;)P.lens[W++]=5;f(y,P.lens,0,32,R,0,P.work,{bits:5}),I=!1}P.lencode=F,P.lenbits=9,P.distcode=R,P.distbits=5}function ct(P,W,N,st){var G,O=P.state;return O.window===null&&(O.wsize=1<<O.wbits,O.wnext=0,O.whave=0,O.window=new o.Buf8(O.wsize)),st>=O.wsize?(o.arraySet(O.window,W,N-O.wsize,O.wsize,0),O.wnext=0,O.whave=O.wsize):(st<(G=O.wsize-O.wnext)&&(G=st),o.arraySet(O.window,W,N-st,G,O.wnext),(st-=G)?(o.arraySet(O.window,W,N-st,st,0),O.wnext=st,O.whave=O.wsize):(O.wnext+=G,O.wnext===O.wsize&&(O.wnext=0),O.whave<O.wsize&&(O.whave+=G))),0}r.inflateReset=j,r.inflateReset2=D,r.inflateResetKeep=T,r.inflateInit=function(P){return H(P,15)},r.inflateInit2=H,r.inflate=function(P,W){var N,st,G,O,Y,X,dt,M,B,J,ot,at,_t,vt,Et,lt,St,Pt,Ft,It,C,ht,rt,q,U=0,Z=new o.Buf8(4),mt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return v;(N=P.state).mode===12&&(N.mode=13),Y=P.next_out,G=P.output,dt=P.avail_out,O=P.next_in,st=P.input,X=P.avail_in,M=N.hold,B=N.bits,J=X,ot=dt,ht=x;t:for(;;)switch(N.mode){case _:if(N.wrap===0){N.mode=13;break}for(;B<16;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}if(2&N.wrap&&M===35615){Z[N.check=0]=255&M,Z[1]=M>>>8&255,N.check=c(N.check,Z,2,0),B=M=0,N.mode=2;break}if(N.flags=0,N.head&&(N.head.done=!1),!(1&N.wrap)||(((255&M)<<8)+(M>>8))%31){P.msg="incorrect header check",N.mode=30;break}if((15&M)!=8){P.msg="unknown compression method",N.mode=30;break}if(B-=4,C=8+(15&(M>>>=4)),N.wbits===0)N.wbits=C;else if(C>N.wbits){P.msg="invalid window size",N.mode=30;break}N.dmax=1<<C,P.adler=N.check=1,N.mode=512&M?10:12,B=M=0;break;case 2:for(;B<16;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}if(N.flags=M,(255&N.flags)!=8){P.msg="unknown compression method",N.mode=30;break}if(57344&N.flags){P.msg="unknown header flags set",N.mode=30;break}N.head&&(N.head.text=M>>8&1),512&N.flags&&(Z[0]=255&M,Z[1]=M>>>8&255,N.check=c(N.check,Z,2,0)),B=M=0,N.mode=3;case 3:for(;B<32;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}N.head&&(N.head.time=M),512&N.flags&&(Z[0]=255&M,Z[1]=M>>>8&255,Z[2]=M>>>16&255,Z[3]=M>>>24&255,N.check=c(N.check,Z,4,0)),B=M=0,N.mode=4;case 4:for(;B<16;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}N.head&&(N.head.xflags=255&M,N.head.os=M>>8),512&N.flags&&(Z[0]=255&M,Z[1]=M>>>8&255,N.check=c(N.check,Z,2,0)),B=M=0,N.mode=5;case 5:if(1024&N.flags){for(;B<16;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}N.length=M,N.head&&(N.head.extra_len=M),512&N.flags&&(Z[0]=255&M,Z[1]=M>>>8&255,N.check=c(N.check,Z,2,0)),B=M=0}else N.head&&(N.head.extra=null);N.mode=6;case 6:if(1024&N.flags&&(X<(at=N.length)&&(at=X),at&&(N.head&&(C=N.head.extra_len-N.length,N.head.extra||(N.head.extra=new Array(N.head.extra_len)),o.arraySet(N.head.extra,st,O,at,C)),512&N.flags&&(N.check=c(N.check,st,at,O)),X-=at,O+=at,N.length-=at),N.length))break t;N.length=0,N.mode=7;case 7:if(2048&N.flags){if(X===0)break t;for(at=0;C=st[O+at++],N.head&&C&&N.length<65536&&(N.head.name+=String.fromCharCode(C)),C&&at<X;);if(512&N.flags&&(N.check=c(N.check,st,at,O)),X-=at,O+=at,C)break t}else N.head&&(N.head.name=null);N.length=0,N.mode=8;case 8:if(4096&N.flags){if(X===0)break t;for(at=0;C=st[O+at++],N.head&&C&&N.length<65536&&(N.head.comment+=String.fromCharCode(C)),C&&at<X;);if(512&N.flags&&(N.check=c(N.check,st,at,O)),X-=at,O+=at,C)break t}else N.head&&(N.head.comment=null);N.mode=9;case 9:if(512&N.flags){for(;B<16;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}if(M!==(65535&N.check)){P.msg="header crc mismatch",N.mode=30;break}B=M=0}N.head&&(N.head.hcrc=N.flags>>9&1,N.head.done=!0),P.adler=N.check=0,N.mode=12;break;case 10:for(;B<32;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}P.adler=N.check=S(M),B=M=0,N.mode=11;case 11:if(N.havedict===0)return P.next_out=Y,P.avail_out=dt,P.next_in=O,P.avail_in=X,N.hold=M,N.bits=B,2;P.adler=N.check=1,N.mode=12;case 12:if(W===5||W===6)break t;case 13:if(N.last){M>>>=7&B,B-=7&B,N.mode=27;break}for(;B<3;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}switch(N.last=1&M,B-=1,3&(M>>>=1)){case 0:N.mode=14;break;case 1:if(K(N),N.mode=20,W!==6)break;M>>>=2,B-=2;break t;case 2:N.mode=17;break;case 3:P.msg="invalid block type",N.mode=30}M>>>=2,B-=2;break;case 14:for(M>>>=7&B,B-=7&B;B<32;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}if((65535&M)!=(M>>>16^65535)){P.msg="invalid stored block lengths",N.mode=30;break}if(N.length=65535&M,B=M=0,N.mode=15,W===6)break t;case 15:N.mode=16;case 16:if(at=N.length){if(X<at&&(at=X),dt<at&&(at=dt),at===0)break t;o.arraySet(G,st,O,at,Y),X-=at,O+=at,dt-=at,Y+=at,N.length-=at;break}N.mode=12;break;case 17:for(;B<14;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}if(N.nlen=257+(31&M),M>>>=5,B-=5,N.ndist=1+(31&M),M>>>=5,B-=5,N.ncode=4+(15&M),M>>>=4,B-=4,286<N.nlen||30<N.ndist){P.msg="too many length or distance symbols",N.mode=30;break}N.have=0,N.mode=18;case 18:for(;N.have<N.ncode;){for(;B<3;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}N.lens[mt[N.have++]]=7&M,M>>>=3,B-=3}for(;N.have<19;)N.lens[mt[N.have++]]=0;if(N.lencode=N.lendyn,N.lenbits=7,rt={bits:N.lenbits},ht=f(0,N.lens,0,19,N.lencode,0,N.work,rt),N.lenbits=rt.bits,ht){P.msg="invalid code lengths set",N.mode=30;break}N.have=0,N.mode=19;case 19:for(;N.have<N.nlen+N.ndist;){for(;lt=(U=N.lencode[M&(1<<N.lenbits)-1])>>>16&255,St=65535&U,!((Et=U>>>24)<=B);){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}if(St<16)M>>>=Et,B-=Et,N.lens[N.have++]=St;else{if(St===16){for(q=Et+2;B<q;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}if(M>>>=Et,B-=Et,N.have===0){P.msg="invalid bit length repeat",N.mode=30;break}C=N.lens[N.have-1],at=3+(3&M),M>>>=2,B-=2}else if(St===17){for(q=Et+3;B<q;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}B-=Et,C=0,at=3+(7&(M>>>=Et)),M>>>=3,B-=3}else{for(q=Et+7;B<q;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}B-=Et,C=0,at=11+(127&(M>>>=Et)),M>>>=7,B-=7}if(N.have+at>N.nlen+N.ndist){P.msg="invalid bit length repeat",N.mode=30;break}for(;at--;)N.lens[N.have++]=C}}if(N.mode===30)break;if(N.lens[256]===0){P.msg="invalid code -- missing end-of-block",N.mode=30;break}if(N.lenbits=9,rt={bits:N.lenbits},ht=f(p,N.lens,0,N.nlen,N.lencode,0,N.work,rt),N.lenbits=rt.bits,ht){P.msg="invalid literal/lengths set",N.mode=30;break}if(N.distbits=6,N.distcode=N.distdyn,rt={bits:N.distbits},ht=f(y,N.lens,N.nlen,N.ndist,N.distcode,0,N.work,rt),N.distbits=rt.bits,ht){P.msg="invalid distances set",N.mode=30;break}if(N.mode=20,W===6)break t;case 20:N.mode=21;case 21:if(6<=X&&258<=dt){P.next_out=Y,P.avail_out=dt,P.next_in=O,P.avail_in=X,N.hold=M,N.bits=B,d(P,ot),Y=P.next_out,G=P.output,dt=P.avail_out,O=P.next_in,st=P.input,X=P.avail_in,M=N.hold,B=N.bits,N.mode===12&&(N.back=-1);break}for(N.back=0;lt=(U=N.lencode[M&(1<<N.lenbits)-1])>>>16&255,St=65535&U,!((Et=U>>>24)<=B);){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}if(lt&&(240&lt)==0){for(Pt=Et,Ft=lt,It=St;lt=(U=N.lencode[It+((M&(1<<Pt+Ft)-1)>>Pt)])>>>16&255,St=65535&U,!(Pt+(Et=U>>>24)<=B);){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}M>>>=Pt,B-=Pt,N.back+=Pt}if(M>>>=Et,B-=Et,N.back+=Et,N.length=St,lt===0){N.mode=26;break}if(32&lt){N.back=-1,N.mode=12;break}if(64&lt){P.msg="invalid literal/length code",N.mode=30;break}N.extra=15&lt,N.mode=22;case 22:if(N.extra){for(q=N.extra;B<q;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}N.length+=M&(1<<N.extra)-1,M>>>=N.extra,B-=N.extra,N.back+=N.extra}N.was=N.length,N.mode=23;case 23:for(;lt=(U=N.distcode[M&(1<<N.distbits)-1])>>>16&255,St=65535&U,!((Et=U>>>24)<=B);){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}if((240&lt)==0){for(Pt=Et,Ft=lt,It=St;lt=(U=N.distcode[It+((M&(1<<Pt+Ft)-1)>>Pt)])>>>16&255,St=65535&U,!(Pt+(Et=U>>>24)<=B);){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}M>>>=Pt,B-=Pt,N.back+=Pt}if(M>>>=Et,B-=Et,N.back+=Et,64&lt){P.msg="invalid distance code",N.mode=30;break}N.offset=St,N.extra=15&lt,N.mode=24;case 24:if(N.extra){for(q=N.extra;B<q;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}N.offset+=M&(1<<N.extra)-1,M>>>=N.extra,B-=N.extra,N.back+=N.extra}if(N.offset>N.dmax){P.msg="invalid distance too far back",N.mode=30;break}N.mode=25;case 25:if(dt===0)break t;if(at=ot-dt,N.offset>at){if((at=N.offset-at)>N.whave&&N.sane){P.msg="invalid distance too far back",N.mode=30;break}_t=at>N.wnext?(at-=N.wnext,N.wsize-at):N.wnext-at,at>N.length&&(at=N.length),vt=N.window}else vt=G,_t=Y-N.offset,at=N.length;for(dt<at&&(at=dt),dt-=at,N.length-=at;G[Y++]=vt[_t++],--at;);N.length===0&&(N.mode=21);break;case 26:if(dt===0)break t;G[Y++]=N.length,dt--,N.mode=21;break;case 27:if(N.wrap){for(;B<32;){if(X===0)break t;X--,M|=st[O++]<<B,B+=8}if(ot-=dt,P.total_out+=ot,N.total+=ot,ot&&(P.adler=N.check=N.flags?c(N.check,G,ot,Y-ot):l(N.check,G,ot,Y-ot)),ot=dt,(N.flags?M:S(M))!==N.check){P.msg="incorrect data check",N.mode=30;break}B=M=0}N.mode=28;case 28:if(N.wrap&&N.flags){for(;B<32;){if(X===0)break t;X--,M+=st[O++]<<B,B+=8}if(M!==(4294967295&N.total)){P.msg="incorrect length check",N.mode=30;break}B=M=0}N.mode=29;case 29:ht=1;break t;case 30:ht=-3;break t;case 31:return-4;default:return v}return P.next_out=Y,P.avail_out=dt,P.next_in=O,P.avail_in=X,N.hold=M,N.bits=B,(N.wsize||ot!==P.avail_out&&N.mode<30&&(N.mode<27||W!==4))&&ct(P,P.output,P.next_out,ot-P.avail_out)?(N.mode=31,-4):(J-=P.avail_in,ot-=P.avail_out,P.total_in+=J,P.total_out+=ot,N.total+=ot,N.wrap&&ot&&(P.adler=N.check=N.flags?c(N.check,G,ot,P.next_out-ot):l(N.check,G,ot,P.next_out-ot)),P.data_type=N.bits+(N.last?64:0)+(N.mode===12?128:0)+(N.mode===20||N.mode===15?256:0),(J==0&&ot===0||W===4)&&ht===x&&(ht=-5),ht)},r.inflateEnd=function(P){if(!P||!P.state)return v;var W=P.state;return W.window&&(W.window=null),P.state=null,x},r.inflateGetHeader=function(P,W){var N;return P&&P.state?(2&(N=P.state).wrap)==0?v:((N.head=W).done=!1,x):v},r.inflateSetDictionary=function(P,W){var N,st=W.length;return P&&P.state?(N=P.state).wrap!==0&&N.mode!==11?v:N.mode===11&&l(1,W,st,0)!==N.check?-3:ct(P,W,st,st)?(N.mode=31,-4):(N.havedict=1,x):v},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(s,n,r){var o=s("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(p,y,x,v,_,w,A,S){var k,T,j,D,H,F,R,I,K,ct=S.bits,P=0,W=0,N=0,st=0,G=0,O=0,Y=0,X=0,dt=0,M=0,B=null,J=0,ot=new o.Buf16(16),at=new o.Buf16(16),_t=null,vt=0;for(P=0;P<=15;P++)ot[P]=0;for(W=0;W<v;W++)ot[y[x+W]]++;for(G=ct,st=15;1<=st&&ot[st]===0;st--);if(st<G&&(G=st),st===0)return _[w++]=20971520,_[w++]=20971520,S.bits=1,0;for(N=1;N<st&&ot[N]===0;N++);for(G<N&&(G=N),P=X=1;P<=15;P++)if(X<<=1,(X-=ot[P])<0)return-1;if(0<X&&(p===0||st!==1))return-1;for(at[1]=0,P=1;P<15;P++)at[P+1]=at[P]+ot[P];for(W=0;W<v;W++)y[x+W]!==0&&(A[at[y[x+W]]++]=W);if(F=p===0?(B=_t=A,19):p===1?(B=l,J-=257,_t=c,vt-=257,256):(B=d,_t=f,-1),P=N,H=w,Y=W=M=0,j=-1,D=(dt=1<<(O=G))-1,p===1&&852<dt||p===2&&592<dt)return 1;for(;;){for(R=P-Y,K=A[W]<F?(I=0,A[W]):A[W]>F?(I=_t[vt+A[W]],B[J+A[W]]):(I=96,0),k=1<<P-Y,N=T=1<<O;_[H+(M>>Y)+(T-=k)]=R<<24|I<<16|K|0,T!==0;);for(k=1<<P-1;M&k;)k>>=1;if(k!==0?(M&=k-1,M+=k):M=0,W++,--ot[P]==0){if(P===st)break;P=y[x+A[W]]}if(G<P&&(M&D)!==j){for(Y===0&&(Y=G),H+=N,X=1<<(O=P-Y);O+Y<st&&!((X-=ot[O+Y])<=0);)O++,X<<=1;if(dt+=1<<O,p===1&&852<dt||p===2&&592<dt)return 1;_[j=M&D]=G<<24|O<<16|H-w|0}}return M!==0&&(_[H+M]=P-Y<<24|64<<16|0),S.bits=G,0}},{"../utils/common":41}],51:[function(s,n,r){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(s,n,r){var o=s("../utils/common"),l=0,c=1;function d(U){for(var Z=U.length;0<=--Z;)U[Z]=0}var f=0,p=29,y=256,x=y+1+p,v=30,_=19,w=2*x+1,A=15,S=16,k=7,T=256,j=16,D=17,H=18,F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ct=new Array(2*(x+2));d(ct);var P=new Array(2*v);d(P);var W=new Array(512);d(W);var N=new Array(256);d(N);var st=new Array(p);d(st);var G,O,Y,X=new Array(v);function dt(U,Z,mt,yt,it){this.static_tree=U,this.extra_bits=Z,this.extra_base=mt,this.elems=yt,this.max_length=it,this.has_stree=U&&U.length}function M(U,Z){this.dyn_tree=U,this.max_code=0,this.stat_desc=Z}function B(U){return U<256?W[U]:W[256+(U>>>7)]}function J(U,Z){U.pending_buf[U.pending++]=255&Z,U.pending_buf[U.pending++]=Z>>>8&255}function ot(U,Z,mt){U.bi_valid>S-mt?(U.bi_buf|=Z<<U.bi_valid&65535,J(U,U.bi_buf),U.bi_buf=Z>>S-U.bi_valid,U.bi_valid+=mt-S):(U.bi_buf|=Z<<U.bi_valid&65535,U.bi_valid+=mt)}function at(U,Z,mt){ot(U,mt[2*Z],mt[2*Z+1])}function _t(U,Z){for(var mt=0;mt|=1&U,U>>>=1,mt<<=1,0<--Z;);return mt>>>1}function vt(U,Z,mt){var yt,it,bt=new Array(A+1),wt=0;for(yt=1;yt<=A;yt++)bt[yt]=wt=wt+mt[yt-1]<<1;for(it=0;it<=Z;it++){var xt=U[2*it+1];xt!==0&&(U[2*it]=_t(bt[xt]++,xt))}}function Et(U){var Z;for(Z=0;Z<x;Z++)U.dyn_ltree[2*Z]=0;for(Z=0;Z<v;Z++)U.dyn_dtree[2*Z]=0;for(Z=0;Z<_;Z++)U.bl_tree[2*Z]=0;U.dyn_ltree[2*T]=1,U.opt_len=U.static_len=0,U.last_lit=U.matches=0}function lt(U){8<U.bi_valid?J(U,U.bi_buf):0<U.bi_valid&&(U.pending_buf[U.pending++]=U.bi_buf),U.bi_buf=0,U.bi_valid=0}function St(U,Z,mt,yt){var it=2*Z,bt=2*mt;return U[it]<U[bt]||U[it]===U[bt]&&yt[Z]<=yt[mt]}function Pt(U,Z,mt){for(var yt=U.heap[mt],it=mt<<1;it<=U.heap_len&&(it<U.heap_len&&St(Z,U.heap[it+1],U.heap[it],U.depth)&&it++,!St(Z,yt,U.heap[it],U.depth));)U.heap[mt]=U.heap[it],mt=it,it<<=1;U.heap[mt]=yt}function Ft(U,Z,mt){var yt,it,bt,wt,xt=0;if(U.last_lit!==0)for(;yt=U.pending_buf[U.d_buf+2*xt]<<8|U.pending_buf[U.d_buf+2*xt+1],it=U.pending_buf[U.l_buf+xt],xt++,yt===0?at(U,it,Z):(at(U,(bt=N[it])+y+1,Z),(wt=F[bt])!==0&&ot(U,it-=st[bt],wt),at(U,bt=B(--yt),mt),(wt=R[bt])!==0&&ot(U,yt-=X[bt],wt)),xt<U.last_lit;);at(U,T,Z)}function It(U,Z){var mt,yt,it,bt=Z.dyn_tree,wt=Z.stat_desc.static_tree,xt=Z.stat_desc.has_stree,Nt=Z.stat_desc.elems,ie=-1;for(U.heap_len=0,U.heap_max=w,mt=0;mt<Nt;mt++)bt[2*mt]!==0?(U.heap[++U.heap_len]=ie=mt,U.depth[mt]=0):bt[2*mt+1]=0;for(;U.heap_len<2;)bt[2*(it=U.heap[++U.heap_len]=ie<2?++ie:0)]=1,U.depth[it]=0,U.opt_len--,xt&&(U.static_len-=wt[2*it+1]);for(Z.max_code=ie,mt=U.heap_len>>1;1<=mt;mt--)Pt(U,bt,mt);for(it=Nt;mt=U.heap[1],U.heap[1]=U.heap[U.heap_len--],Pt(U,bt,1),yt=U.heap[1],U.heap[--U.heap_max]=mt,U.heap[--U.heap_max]=yt,bt[2*it]=bt[2*mt]+bt[2*yt],U.depth[it]=(U.depth[mt]>=U.depth[yt]?U.depth[mt]:U.depth[yt])+1,bt[2*mt+1]=bt[2*yt+1]=it,U.heap[1]=it++,Pt(U,bt,1),2<=U.heap_len;);U.heap[--U.heap_max]=U.heap[1],(function(Vt,os){var ji,Ts,dn,ce,Pe,Ns,be=os.dyn_tree,Qr=os.max_code,ic=os.stat_desc.static_tree,nc=os.stat_desc.has_stree,Fn=os.stat_desc.extra_bits,hn=os.stat_desc.extra_base,Ws=os.stat_desc.max_length,js=0;for(ce=0;ce<=A;ce++)Vt.bl_count[ce]=0;for(be[2*Vt.heap[Vt.heap_max]+1]=0,ji=Vt.heap_max+1;ji<w;ji++)Ws<(ce=be[2*be[2*(Ts=Vt.heap[ji])+1]+1]+1)&&(ce=Ws,js++),be[2*Ts+1]=ce,Qr<Ts||(Vt.bl_count[ce]++,Pe=0,hn<=Ts&&(Pe=Fn[Ts-hn]),Ns=be[2*Ts],Vt.opt_len+=Ns*(ce+Pe),nc&&(Vt.static_len+=Ns*(ic[2*Ts+1]+Pe)));if(js!==0){do{for(ce=Ws-1;Vt.bl_count[ce]===0;)ce--;Vt.bl_count[ce]--,Vt.bl_count[ce+1]+=2,Vt.bl_count[Ws]--,js-=2}while(0<js);for(ce=Ws;ce!==0;ce--)for(Ts=Vt.bl_count[ce];Ts!==0;)Qr<(dn=Vt.heap[--ji])||(be[2*dn+1]!==ce&&(Vt.opt_len+=(ce-be[2*dn+1])*be[2*dn],be[2*dn+1]=ce),Ts--)}})(U,Z),vt(bt,ie,U.bl_count)}function C(U,Z,mt){var yt,it,bt=-1,wt=Z[1],xt=0,Nt=7,ie=4;for(wt===0&&(Nt=138,ie=3),Z[2*(mt+1)+1]=65535,yt=0;yt<=mt;yt++)it=wt,wt=Z[2*(yt+1)+1],++xt<Nt&&it===wt||(xt<ie?U.bl_tree[2*it]+=xt:it!==0?(it!==bt&&U.bl_tree[2*it]++,U.bl_tree[2*j]++):xt<=10?U.bl_tree[2*D]++:U.bl_tree[2*H]++,bt=it,ie=(xt=0)===wt?(Nt=138,3):it===wt?(Nt=6,3):(Nt=7,4))}function ht(U,Z,mt){var yt,it,bt=-1,wt=Z[1],xt=0,Nt=7,ie=4;for(wt===0&&(Nt=138,ie=3),yt=0;yt<=mt;yt++)if(it=wt,wt=Z[2*(yt+1)+1],!(++xt<Nt&&it===wt)){if(xt<ie)for(;at(U,it,U.bl_tree),--xt!=0;);else it!==0?(it!==bt&&(at(U,it,U.bl_tree),xt--),at(U,j,U.bl_tree),ot(U,xt-3,2)):xt<=10?(at(U,D,U.bl_tree),ot(U,xt-3,3)):(at(U,H,U.bl_tree),ot(U,xt-11,7));bt=it,ie=(xt=0)===wt?(Nt=138,3):it===wt?(Nt=6,3):(Nt=7,4)}}d(X);var rt=!1;function q(U,Z,mt,yt){ot(U,(f<<1)+(yt?1:0),3),(function(it,bt,wt,xt){lt(it),J(it,wt),J(it,~wt),o.arraySet(it.pending_buf,it.window,bt,wt,it.pending),it.pending+=wt})(U,Z,mt)}r._tr_init=function(U){rt||((function(){var Z,mt,yt,it,bt,wt=new Array(A+1);for(it=yt=0;it<p-1;it++)for(st[it]=yt,Z=0;Z<1<<F[it];Z++)N[yt++]=it;for(N[yt-1]=it,it=bt=0;it<16;it++)for(X[it]=bt,Z=0;Z<1<<R[it];Z++)W[bt++]=it;for(bt>>=7;it<v;it++)for(X[it]=bt<<7,Z=0;Z<1<<R[it]-7;Z++)W[256+bt++]=it;for(mt=0;mt<=A;mt++)wt[mt]=0;for(Z=0;Z<=143;)ct[2*Z+1]=8,Z++,wt[8]++;for(;Z<=255;)ct[2*Z+1]=9,Z++,wt[9]++;for(;Z<=279;)ct[2*Z+1]=7,Z++,wt[7]++;for(;Z<=287;)ct[2*Z+1]=8,Z++,wt[8]++;for(vt(ct,x+1,wt),Z=0;Z<v;Z++)P[2*Z+1]=5,P[2*Z]=_t(Z,5);G=new dt(ct,F,y+1,x,A),O=new dt(P,R,0,v,A),Y=new dt(new Array(0),I,0,_,k)})(),rt=!0),U.l_desc=new M(U.dyn_ltree,G),U.d_desc=new M(U.dyn_dtree,O),U.bl_desc=new M(U.bl_tree,Y),U.bi_buf=0,U.bi_valid=0,Et(U)},r._tr_stored_block=q,r._tr_flush_block=function(U,Z,mt,yt){var it,bt,wt=0;0<U.level?(U.strm.data_type===2&&(U.strm.data_type=(function(xt){var Nt,ie=4093624447;for(Nt=0;Nt<=31;Nt++,ie>>>=1)if(1&ie&&xt.dyn_ltree[2*Nt]!==0)return l;if(xt.dyn_ltree[18]!==0||xt.dyn_ltree[20]!==0||xt.dyn_ltree[26]!==0)return c;for(Nt=32;Nt<y;Nt++)if(xt.dyn_ltree[2*Nt]!==0)return c;return l})(U)),It(U,U.l_desc),It(U,U.d_desc),wt=(function(xt){var Nt;for(C(xt,xt.dyn_ltree,xt.l_desc.max_code),C(xt,xt.dyn_dtree,xt.d_desc.max_code),It(xt,xt.bl_desc),Nt=_-1;3<=Nt&&xt.bl_tree[2*K[Nt]+1]===0;Nt--);return xt.opt_len+=3*(Nt+1)+5+5+4,Nt})(U),it=U.opt_len+3+7>>>3,(bt=U.static_len+3+7>>>3)<=it&&(it=bt)):it=bt=mt+5,mt+4<=it&&Z!==-1?q(U,Z,mt,yt):U.strategy===4||bt===it?(ot(U,2+(yt?1:0),3),Ft(U,ct,P)):(ot(U,4+(yt?1:0),3),(function(xt,Nt,ie,Vt){var os;for(ot(xt,Nt-257,5),ot(xt,ie-1,5),ot(xt,Vt-4,4),os=0;os<Vt;os++)ot(xt,xt.bl_tree[2*K[os]+1],3);ht(xt,xt.dyn_ltree,Nt-1),ht(xt,xt.dyn_dtree,ie-1)})(U,U.l_desc.max_code+1,U.d_desc.max_code+1,wt+1),Ft(U,U.dyn_ltree,U.dyn_dtree)),Et(U),yt&&lt(U)},r._tr_tally=function(U,Z,mt){return U.pending_buf[U.d_buf+2*U.last_lit]=Z>>>8&255,U.pending_buf[U.d_buf+2*U.last_lit+1]=255&Z,U.pending_buf[U.l_buf+U.last_lit]=255&mt,U.last_lit++,Z===0?U.dyn_ltree[2*mt]++:(U.matches++,Z--,U.dyn_ltree[2*(N[mt]+y+1)]++,U.dyn_dtree[2*B(Z)]++),U.last_lit===U.lit_bufsize-1},r._tr_align=function(U){ot(U,2,3),at(U,T,ct),(function(Z){Z.bi_valid===16?(J(Z,Z.bi_buf),Z.bi_buf=0,Z.bi_valid=0):8<=Z.bi_valid&&(Z.pending_buf[Z.pending++]=255&Z.bi_buf,Z.bi_buf>>=8,Z.bi_valid-=8)})(U)}},{"../utils/common":41}],53:[function(s,n,r){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(s,n,r){(function(o){(function(l,c){if(!l.setImmediate){var d,f,p,y,x=1,v={},_=!1,w=l.document,A=Object.getPrototypeOf&&Object.getPrototypeOf(l);A=A&&A.setTimeout?A:l,d={}.toString.call(l.process)==="[object process]"?function(j){process.nextTick(function(){k(j)})}:(function(){if(l.postMessage&&!l.importScripts){var j=!0,D=l.onmessage;return l.onmessage=function(){j=!1},l.postMessage("","*"),l.onmessage=D,j}})()?(y="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",T,!1):l.attachEvent("onmessage",T),function(j){l.postMessage(y+j,"*")}):l.MessageChannel?((p=new MessageChannel).port1.onmessage=function(j){k(j.data)},function(j){p.port2.postMessage(j)}):w&&"onreadystatechange"in w.createElement("script")?(f=w.documentElement,function(j){var D=w.createElement("script");D.onreadystatechange=function(){k(j),D.onreadystatechange=null,f.removeChild(D),D=null},f.appendChild(D)}):function(j){setTimeout(k,0,j)},A.setImmediate=function(j){typeof j!="function"&&(j=new Function(""+j));for(var D=new Array(arguments.length-1),H=0;H<D.length;H++)D[H]=arguments[H+1];var F={callback:j,args:D};return v[x]=F,d(x),x++},A.clearImmediate=S}function S(j){delete v[j]}function k(j){if(_)setTimeout(k,0,j);else{var D=v[j];if(D){_=!0;try{(function(H){var F=H.callback,R=H.args;switch(R.length){case 0:F();break;case 1:F(R[0]);break;case 2:F(R[0],R[1]);break;case 3:F(R[0],R[1],R[2]);break;default:F.apply(c,R)}})(D)}finally{S(j),_=!1}}}}function T(j){j.source===l&&typeof j.data=="string"&&j.data.indexOf(y)===0&&k(+j.data.slice(y.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof nn<"u"?nn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ed)),Ed.exports}var S1=w1();const A1=Jd(S1);async function H0(h){const t=new Blob([h.bytes],{type:"application/pdf"});Nm.saveAs(t,h.name)}async function k1(h,t){const s=new A1;for(const r of h)s.file(r.name,r.bytes);const n=await s.generateAsync({type:"blob"});Nm.saveAs(n,t)}function ri(h){return h<1024?`${h} B`:h<1024*1024?`${(h/1024).toFixed(1)} KB`:`${(h/(1024*1024)).toFixed(1)} MB`}function es({onFilesLoaded:h,multiple:t=!1}){const[s,n]=z.useState(!1),[r,o]=z.useState(null),[l,c]=z.useState(!1),[d,f]=z.useState([]),[p,y]=z.useState(!1),[x,v]=z.useState(""),[_,w]=z.useState(null),[A,S]=z.useState(""),k=z.useRef(null),T=z.useId(),j=Hd(P=>P.recentFiles),D=Hd(P=>P.addToCache),H=!l&&!r&&!p,F=z.useCallback(async(P,W)=>{c(!0),o(null);try{const N=new Uint8Array(await P.arrayBuffer());if(new TextDecoder().decode(N.slice(0,5))!=="%PDF-"){o(Ie.INVALID_PDF),c(!1);return}N.length>50*1024*1024&&console.warn("Large file detected:",ri(N.length));let G=0,O=!1;try{const{PDFDocument:X}=await Gr(async()=>{const{PDFDocument:M}=await import("./index-BQwxa2k4.js");return{PDFDocument:M}},[]);G=(await X.load(N,{password:W,ignoreEncryption:!W})).getPageCount()}catch(X){const dt=X instanceof Error?X.message:"";if((dt.includes("password")||dt.includes("encrypted")||dt.includes("decrypt"))&&(O=!0,!W)){y(!0),w(N),S(P.name),c(!1);return}if(G===0)try{const{getPageCount:M}=await Gr(async()=>{const{getPageCount:B}=await Promise.resolve().then(()=>vS);return{getPageCount:B}},void 0);G=await M(N)}catch{}}const Y={id:crypto.randomUUID(),name:P.name,bytes:N,pageCount:G,fileSize:N.length,isEncrypted:O,password:W};D({id:Y.id,name:Y.name,bytes:N,pageCount:G,cachedAt:Date.now(),isEncrypted:O}),t?f(X=>{const dt=[...X,Y];return h(dt),dt}):(f([Y]),h([Y])),y(!1),w(null)}catch{o("Failed to process file.")}finally{c(!1)}},[t,h,D]),R=z.useCallback(P=>{const W=Array.from(P).filter(N=>N.type==="application/pdf"||N.name.endsWith(".pdf"));if(W.length===0){o("Please select PDF files.");return}!t&&W.length>1?F(W[0]):W.forEach(N=>F(N))},[t,F]),I=z.useCallback(P=>{P.preventDefault(),n(!1),R(P.dataTransfer.files)},[R]),K=()=>{if(_&&x){const P=new File([_],A,{type:"application/pdf"});F(P,x)}},ct=P=>{f(W=>{const N=W.filter(st=>st.id!==P);return h(N),N})};if(d.length>0&&!t){const P=d[0];return g.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(Ve,{size:20,className:"text-indigo-500 dark:text-indigo-400"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:P.name}),g.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[ri(P.fileSize),"  ",P.pageCount," page",P.pageCount!==1?"s":""]})]}),g.jsx("button",{onClick:()=>{f([]),h([])},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded","aria-label":"Remove file",children:g.jsx(rn,{size:16,className:"text-gray-400 dark:text-gray-500"})})]})})}return d.length>0&&t?g.jsxs("div",{className:"space-y-2",children:[d.map(P=>g.jsxs("div",{className:"flex items-center gap-3 border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:[g.jsx(Ve,{size:16,className:"text-indigo-500 dark:text-indigo-400"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:P.name}),g.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[P.pageCount," pages"]})]}),g.jsx("button",{onClick:()=>ct(P.id),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded","aria-label":"Remove file",children:g.jsx(rn,{size:14,className:"text-gray-400 dark:text-gray-500"})})]},P.id)),g.jsx("label",{htmlFor:T,className:"block w-full p-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-500 dark:text-gray-400 hover:border-indigo-300 dark:hover:border-indigo-700 hover:text-indigo-500 dark:hover:text-indigo-400 transition-colors text-center cursor-pointer",children:"+ Add more files"}),g.jsx("input",{id:T,ref:k,type:"file",accept:".pdf",multiple:!0,tabIndex:-1,className:"hidden",onChange:P=>P.target.files&&R(P.target.files)})]}):g.jsxs("div",{className:"space-y-4",children:[g.jsx("input",{id:T,ref:k,type:"file",accept:".pdf",multiple:t,tabIndex:-1,className:"hidden",onChange:P=>{P.target.files&&R(P.target.files),P.target.value=""}}),g.jsx("label",{htmlFor:H?T:void 0,className:`relative border-2 border-dashed rounded-xl min-h-[200px] flex flex-col items-center justify-center gap-3 p-8 transition-colors cursor-pointer ${s?"border-indigo-400 dark:border-indigo-600 bg-indigo-50 dark:bg-indigo-950":r?"border-red-300 dark:border-red-700 bg-red-50 dark:bg-red-950":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,onDragOver:P=>{P.preventDefault(),n(!0)},onDragLeave:()=>n(!1),onDrop:I,tabIndex:0,role:"button","aria-label":"Upload PDF file",children:l?g.jsx("div",{className:"w-8 h-8 border-2 border-gray-300 dark:border-gray-600 border-t-indigo-500 rounded-full animate-spin"}):r?g.jsxs(g.Fragment,{children:[g.jsx(eh,{size:32,className:"text-red-400"}),g.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r}),g.jsx("button",{onClick:P=>{P.preventDefault(),o(null)},className:"text-xs text-red-500 dark:text-red-400 underline",children:"Try again"})]}):p?g.jsxs("div",{className:"text-center",onClick:P=>P.preventDefault(),children:[g.jsx(Ti,{size:32,className:"text-amber-500 mx-auto mb-2"}),g.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3",children:Ie.ENCRYPTED_NEEDS_PASSWORD}),g.jsxs("div",{className:"flex gap-2 max-w-xs mx-auto",children:[g.jsx("input",{type:"password",value:x,onChange:P=>v(P.target.value),onKeyDown:P=>{P.key==="Enter"&&K()},placeholder:"Enter password",className:"flex-1 px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100",autoFocus:!0}),g.jsx("button",{onClick:K,className:"px-4 py-2 bg-indigo-600 dark:bg-indigo-500 text-white text-sm rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600",children:"Unlock"})]})]}):g.jsxs(g.Fragment,{children:[g.jsx(sh,{size:32,className:"text-gray-400 dark:text-gray-500"}),g.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Drop your PDF",t?"s":""," here or ",g.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium",children:"click to browse"})]})]})}),j.length>0&&d.length===0&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Recent files"}),g.jsx("div",{className:"flex gap-2 flex-wrap",children:j.map(P=>g.jsx("button",{onClick:()=>{const W={id:P.id,name:P.name,bytes:P.bytes,pageCount:P.pageCount,fileSize:P.bytes.length,isEncrypted:P.isEncrypted};f([W]),h([W])},className:"px-3 py-1.5 text-xs bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors truncate max-w-[200px]",children:P.name},P.id))})]})]})}function E1({pageCount:h,selectedCount:t,onSelectAll:s,onSelectEven:n,onSelectOdd:r,onInvert:o,onClear:l}){const c="px-2.5 py-1 text-xs font-medium rounded-md border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors focus-ring";return g.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[g.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 mr-2",children:[t," of ",h," selected"]}),g.jsx("button",{onClick:s,className:c,children:"All"}),g.jsx("button",{onClick:n,className:c,children:"Even"}),g.jsx("button",{onClick:r,className:c,children:"Odd"}),g.jsx("button",{onClick:o,className:c,children:"Invert"}),g.jsx("button",{onClick:l,className:c,children:"Clear"})]})}var Ir={};Ir.d=(h,t)=>{for(var s in t)Ir.o(t,s)&&!Ir.o(h,s)&&Object.defineProperty(h,s,{enumerable:!0,get:t[s]})};Ir.o=(h,t)=>Object.prototype.hasOwnProperty.call(h,t);var Bt=globalThis.pdfjsLib={};Ir.d(Bt,{AbortException:()=>on,AnnotationEditorLayer:()=>Ci,AnnotationEditorParamsType:()=>Jt,AnnotationEditorType:()=>qt,AnnotationEditorUIManager:()=>ln,AnnotationLayer:()=>ww,AnnotationMode:()=>en,ColorPicker:()=>Hs,DOMSVGFactory:()=>gh,DrawLayer:()=>ns,FeatureTest:()=>rs,GlobalWorkerOptions:()=>Ur,ImageKind:()=>Sl,InvalidPDFException:()=>qd,MissingPDFException:()=>qr,OPS:()=>Ys,OutputScale:()=>Xd,PDFDataRangeTransport:()=>$m,PDFDateString:()=>Rm,PDFWorker:()=>Ta,PasswordResponses:()=>j1,PermissionFlag:()=>N1,PixelsPerInch:()=>Oa,RenderingCancelledException:()=>ah,TextLayer:()=>as,TouchManager:()=>Wl,UnexpectedResponseException:()=>Ml,Util:()=>Tt,VerbosityLevel:()=>ql,XfaLayer:()=>Wm,build:()=>sw,createValidAbsoluteUrl:()=>O1,fetchData:()=>$l,getDocument:()=>Y_,getFilenameFromUrl:()=>G1,getPdfFilenameFromUrl:()=>q1,getXfaPageViewport:()=>X1,isDataScheme:()=>Kl,isPdfFile:()=>rh,noContextMenu:()=>Ks,normalizeUnicode:()=>I1,setLayerDimensions:()=>Dn,shadow:()=>Yt,stopEvent:()=>Cs,version:()=>ew});const ts=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),jm=[1,0,0,1,0,0],Gd=[.001,0,0,.001,0,0],C1=1e7,Cd=1.35,Es={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},en={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},T1="pdfjs_internal_editor_",qt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Jt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},N1={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Qe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Sl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Re={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Mr={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ql={ERRORS:0,WARNINGS:1,INFOS:5},Ys={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},j1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Xl=ql.WARNINGS;function M1(h){Number.isInteger(h)&&(Xl=h)}function R1(){return Xl}function Vl(h){Xl>=ql.INFOS&&console.log(`Info: ${h}`)}function Xt(h){Xl>=ql.WARNINGS&&console.log(`Warning: ${h}`)}function de(h){throw new Error(h)}function je(h,t){h||de(t)}function D1(h){switch(h?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function O1(h,t=null,s=null){if(!h)return null;try{if(s&&typeof h=="string"&&(s.addDefaultProtocol&&h.startsWith("www.")&&h.match(/\./g)?.length>=2&&(h=`http://${h}`),s.tryConvertEncoding))try{h=B1(h)}catch{}const n=t?new URL(h,t):new URL(h);if(D1(n))return n}catch{}return null}function Yt(h,t,s,n=!1){return Object.defineProperty(h,t,{value:s,enumerable:!n,configurable:!0,writable:!1}),s}const cn=(function(){function t(s,n){this.message=s,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class G0 extends cn{constructor(t,s){super(t,"PasswordException"),this.code=s}}class Td extends cn{constructor(t,s){super(t,"UnknownErrorException"),this.details=s}}class qd extends cn{constructor(t){super(t,"InvalidPDFException")}}class qr extends cn{constructor(t){super(t,"MissingPDFException")}}class Ml extends cn{constructor(t,s){super(t,"UnexpectedResponseException"),this.status=s}}class L1 extends cn{constructor(t){super(t,"FormatError")}}class on extends cn{constructor(t){super(t,"AbortException")}}function Mm(h){(typeof h!="object"||h?.length===void 0)&&de("Invalid argument for bytesToString");const t=h.length,s=8192;if(t<s)return String.fromCharCode.apply(null,h);const n=[];for(let r=0;r<t;r+=s){const o=Math.min(r+s,t),l=h.subarray(r,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function Yl(h){typeof h!="string"&&de("Invalid argument for stringToBytes");const t=h.length,s=new Uint8Array(t);for(let n=0;n<t;++n)s[n]=h.charCodeAt(n)&255;return s}function z1(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function ih(h){const t=Object.create(null);for(const[s,n]of h)t[s]=n;return t}function P1(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function F1(){try{return new Function(""),!0}catch{return!1}}class rs{static get isLittleEndian(){return Yt(this,"isLittleEndian",P1())}static get isEvalSupported(){return Yt(this,"isEvalSupported",F1())}static get isOffscreenCanvasSupported(){return Yt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Yt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?Yt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):Yt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return Yt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Nd=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));class Tt{static makeHexColor(t,s,n){return`#${Nd[t]}${Nd[s]}${Nd[n]}`}static scaleMinMax(t,s){let n;t[0]?(t[0]<0&&(n=s[0],s[0]=s[2],s[2]=n),s[0]*=t[0],s[2]*=t[0],t[3]<0&&(n=s[1],s[1]=s[3],s[3]=n),s[1]*=t[3],s[3]*=t[3]):(n=s[0],s[0]=s[1],s[1]=n,n=s[2],s[2]=s[3],s[3]=n,t[1]<0&&(n=s[1],s[1]=s[3],s[3]=n),s[1]*=t[1],s[3]*=t[1],t[2]<0&&(n=s[0],s[0]=s[2],s[2]=n),s[0]*=t[2],s[2]*=t[2]),s[0]+=t[4],s[1]+=t[5],s[2]+=t[4],s[3]+=t[5]}static transform(t,s){return[t[0]*s[0]+t[2]*s[1],t[1]*s[0]+t[3]*s[1],t[0]*s[2]+t[2]*s[3],t[1]*s[2]+t[3]*s[3],t[0]*s[4]+t[2]*s[5]+t[4],t[1]*s[4]+t[3]*s[5]+t[5]]}static applyTransform(t,s){const n=t[0]*s[0]+t[1]*s[2]+s[4],r=t[0]*s[1]+t[1]*s[3]+s[5];return[n,r]}static applyInverseTransform(t,s){const n=s[0]*s[3]-s[1]*s[2],r=(t[0]*s[3]-t[1]*s[2]+s[2]*s[5]-s[4]*s[3])/n,o=(-t[0]*s[1]+t[1]*s[0]+s[4]*s[1]-s[5]*s[0])/n;return[r,o]}static getAxialAlignedBoundingBox(t,s){const n=this.applyTransform(t,s),r=this.applyTransform(t.slice(2,4),s),o=this.applyTransform([t[0],t[3]],s),l=this.applyTransform([t[2],t[1]],s);return[Math.min(n[0],r[0],o[0],l[0]),Math.min(n[1],r[1],o[1],l[1]),Math.max(n[0],r[0],o[0],l[0]),Math.max(n[1],r[1],o[1],l[1])]}static inverseTransform(t){const s=t[0]*t[3]-t[1]*t[2];return[t[3]/s,-t[1]/s,-t[2]/s,t[0]/s,(t[2]*t[5]-t[4]*t[3])/s,(t[4]*t[1]-t[5]*t[0])/s]}static singularValueDecompose2dScale(t){const s=[t[0],t[2],t[1],t[3]],n=t[0]*s[0]+t[1]*s[2],r=t[0]*s[1]+t[1]*s[3],o=t[2]*s[0]+t[3]*s[2],l=t[2]*s[1]+t[3]*s[3],c=(n+l)/2,d=Math.sqrt((n+l)**2-4*(n*l-o*r))/2,f=c+d||1,p=c-d||1;return[Math.sqrt(f),Math.sqrt(p)]}static normalizeRect(t){const s=t.slice(0);return t[0]>t[2]&&(s[0]=t[2],s[2]=t[0]),t[1]>t[3]&&(s[1]=t[3],s[3]=t[1]),s}static intersect(t,s){const n=Math.max(Math.min(t[0],t[2]),Math.min(s[0],s[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(s[0],s[2]));if(n>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(s[1],s[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(s[1],s[3]));return o>l?null:[n,o,r,l]}static#t(t,s,n,r,o,l,c,d,f,p){if(f<=0||f>=1)return;const y=1-f,x=f*f,v=x*f,_=y*(y*(y*t+3*f*s)+3*x*n)+v*r,w=y*(y*(y*o+3*f*l)+3*x*c)+v*d;p[0]=Math.min(p[0],_),p[1]=Math.min(p[1],w),p[2]=Math.max(p[2],_),p[3]=Math.max(p[3],w)}static#e(t,s,n,r,o,l,c,d,f,p,y,x){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,s,n,r,o,l,c,d,-y/p,x);return}const v=p**2-4*y*f;if(v<0)return;const _=Math.sqrt(v),w=2*f;this.#t(t,s,n,r,o,l,c,d,(-p+_)/w,x),this.#t(t,s,n,r,o,l,c,d,(-p-_)/w,x)}static bezierBoundingBox(t,s,n,r,o,l,c,d,f){return f?(f[0]=Math.min(f[0],t,c),f[1]=Math.min(f[1],s,d),f[2]=Math.max(f[2],t,c),f[3]=Math.max(f[3],s,d)):f=[Math.min(t,c),Math.min(s,d),Math.max(t,c),Math.max(s,d)],this.#e(t,n,o,c,s,r,l,d,3*(-t+3*(n-o)+c),6*(t-2*n+o),3*(n-t),f),this.#e(t,n,o,c,s,r,l,d,3*(-s+3*(r-l)+d),6*(s-2*r+l),3*(r-s),f),f}}function B1(h){return decodeURIComponent(escape(h))}let jd=null,q0=null;function I1(h){return jd||(jd=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,q0=new Map([["","t"]])),h.replaceAll(jd,(t,s,n)=>s?s.normalize("NFKC"):q0.get(n))}function U1(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),Mm(h)}const nh="pdfjs_internal_id_";function H1(h){return Uint8Array.prototype.toBase64?h.toBase64():btoa(Mm(h))}typeof Promise.try!="function"&&(Promise.try=function(h,...t){return new Promise(s=>{s(h(...t))})});const Ei="http://www.w3.org/2000/svg";class Oa{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function $l(h,t="text"){if(Pr(h,document.baseURI)){const s=await fetch(h);if(!s.ok)throw new Error(s.statusText);switch(t){case"arraybuffer":return s.arrayBuffer();case"blob":return s.blob();case"json":return s.json()}return s.text()}return new Promise((s,n)=>{const r=new XMLHttpRequest;r.open("GET",h,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":s(r.response);return}s(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class $r{constructor({viewBox:t,userUnit:s,scale:n,rotation:r,offsetX:o=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=s,this.scale=n,this.rotation=r,this.offsetX=o,this.offsetY=l,n*=s;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,y,x,v;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,y=0,x=0,v=1;break;case 90:p=0,y=1,x=1,v=0;break;case 270:p=0,y=-1,x=-1,v=0;break;case 0:p=1,y=0,x=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(x=-x,v=-v);let _,w,A,S;p===0?(_=Math.abs(f-t[1])*n+o,w=Math.abs(d-t[0])*n+l,A=(t[3]-t[1])*n,S=(t[2]-t[0])*n):(_=Math.abs(d-t[0])*n+o,w=Math.abs(f-t[1])*n+l,A=(t[2]-t[0])*n,S=(t[3]-t[1])*n),this.transform=[p*n,y*n,x*n,v*n,_-p*n*d-x*n*f,w-y*n*d-v*n*f],this.width=A,this.height=S}get rawDims(){const{userUnit:t,viewBox:s}=this,n=s.map(r=>r*t);return Yt(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:t=this.scale,rotation:s=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new $r({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:s,offsetX:n,offsetY:r,dontFlip:o})}convertToViewportPoint(t,s){return Tt.applyTransform([t,s],this.transform)}convertToViewportRectangle(t){const s=Tt.applyTransform([t[0],t[1]],this.transform),n=Tt.applyTransform([t[2],t[3]],this.transform);return[s[0],s[1],n[0],n[1]]}convertToPdfPoint(t,s){return Tt.applyInverseTransform([t,s],this.transform)}}class ah extends cn{constructor(t,s=0){super(t,"RenderingCancelledException"),this.extraDelay=s}}function Kl(h){const t=h.length;let s=0;for(;s<t&&h[s].trim()==="";)s++;return h.substring(s,s+5).toLowerCase()==="data:"}function rh(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function G1(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function q1(h,t="document.pdf"){if(typeof h!="string")return t;if(Kl(h))return Xt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=s.exec(h);let o=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||t}class X0{started=Object.create(null);times=[];time(t){t in this.started&&Xt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Xt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let s=0;for(const{name:n}of this.times)s=Math.max(n.length,s);for(const{name:n,start:r,end:o}of this.times)t.push(`${n.padEnd(s)} ${o-r}ms
`);return t.join("")}}function Pr(h,t){try{const{protocol:s}=t?new URL(h,t):new URL(h);return s==="http:"||s==="https:"}catch{return!1}}function Ks(h){h.preventDefault()}function Cs(h){h.preventDefault(),h.stopPropagation()}class Rm{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const s=this.#t.exec(t);if(!s)return null;const n=parseInt(s[1],10);let r=parseInt(s[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(s[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(s[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(s[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(s[6],10);d=d>=0&&d<=59?d:0;const f=s[7]||"Z";let p=parseInt(s[8],10);p=p>=0&&p<=23?p:0;let y=parseInt(s[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(l+=p,c+=y):f==="+"&&(l-=p,c-=y),new Date(Date.UTC(n,r,o,l,c,d))}}function X1(h,{scale:t=1,rotation:s=0}){const{width:n,height:r}=h.attributes.style,o=[0,0,parseInt(n),parseInt(r)];return new $r({viewBox:o,userUnit:1,scale:t,rotation:s})}function oh(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Xt(`Not a valid color format: "${h}"`),[0,0,0])}function V1(h){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const s of h.keys()){t.style.color=s;const n=window.getComputedStyle(t).color;h.set(s,oh(n))}t.remove()}function ye(h){const{a:t,b:s,c:n,d:r,e:o,f:l}=h.getTransform();return[t,s,n,r,o,l]}function ei(h){const{a:t,b:s,c:n,d:r,e:o,f:l}=h.getTransform().invertSelf();return[t,s,n,r,o,l]}function Dn(h,t,s=!1,n=!0){if(t instanceof $r){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:l}=h,c=rs.isCSSRoundSupported,d=`var(--scale-factor) * ${r}px`,f=`var(--scale-factor) * ${o}px`,p=c?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,y=c?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!s||t.rotation%180===0?(l.width=p,l.height=y):(l.width=y,l.height=p)}n&&h.setAttribute("data-main-rotation",t.rotation)}class Xd{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}let Y1=class Al{#t=null;#e=null;#s;#i=null;#a=null;static#n=null;constructor(t){this.#s=t,Al.#n||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const s=this.#s._uiManager._signal;t.addEventListener("contextmenu",Ks,{signal:s}),t.addEventListener("pointerdown",Al.#l,{signal:s});const n=this.#i=document.createElement("div");n.className="buttons",t.append(n);const r=this.#s.toolbarPosition;if(r){const{style:o}=t,l=this.#s._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return this.#h(),t}get div(){return this.#t}static#l(t){t.stopPropagation()}#o(t){this.#s._focusEventsAllowed=!1,Cs(t)}#u(t){this.#s._focusEventsAllowed=!0,Cs(t)}#c(t){const s=this.#s._uiManager._signal;t.addEventListener("focusin",this.#o.bind(this),{capture:!0,signal:s}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:s}),t.addEventListener("contextmenu",Ks,{signal:s})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown()}#h(){const{editorType:t,_uiManager:s}=this.#s,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",Al.#n[t]),this.#c(n),n.addEventListener("click",r=>{s.delete()},{signal:s._signal}),this.#i.append(n)}get#d(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const s=await t.render();this.#c(s),this.#i.prepend(s,this.#d),this.#a=t}addColorPicker(t){this.#e=t;const s=t.renderButton();this.#c(s),this.#i.prepend(s,this.#d)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}};class $1{#t=null;#e=null;#s;constructor(t){this.#s=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ks,{signal:this.#s._signal});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#n(),t}#a(t,s){let n=0,r=0;for(const o of t){const l=o.y+o.height;if(l<n)continue;const c=o.x+(s?o.width:0);if(l>n){r=c,n=l;continue}s?c>r&&(r=c):c<r&&(r=c)}return[s?1-r:r,n]}show(t,s,n){const[r,o]=this.#a(s,n),{style:l}=this.#e||=this.#i();t.append(this.#e),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#n(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const s=document.createElement("span");t.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=this.#s._signal;t.addEventListener("contextmenu",Ks,{signal:n}),t.addEventListener("click",()=>{this.#s.highlightSelection("floating_button")},{signal:n}),this.#t.append(t)}}function Rl(h,t,s){for(const n of s)t.addEventListener(n,h[n].bind(h))}class K1{#t=0;get id(){return`${T1}${this.#t++}`}}class lh{#t=U1();#e=0;#s=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Yt(this,"_isSVGFittingCanvas",o)}async#i(t,s){this.#s||=new Map;let n=this.#s.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof s=="string"?(n.url=s,r=await $l(s,"blob")):s instanceof File?r=n.file=s:s instanceof Blob&&(r=s),r.type==="image/svg+xml"){const o=lh._isSVGFittingCanvas,l=new FileReader,c=new Image,d=new Promise((f,p)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,f()},l.onload=async()=>{const y=n.svgUrl=l.result;c.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},c.onerror=l.onerror=p});l.readAsDataURL(r),await d}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Xt(r),n=null}return this.#s.set(t,n),n&&this.#s.set(n.id,n),n}async getFromFile(t){const{lastModified:s,name:n,size:r,type:o}=t;return this.#i(`${s}_${n}_${r}_${o}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,s){const n=await s;return this.#i(t,n)}async getFromId(t){this.#s||=new Map;const s=this.#s.get(t);if(!s)return null;if(s.bitmap)return s.refCounter+=1,s;if(s.file)return this.getFromFile(s.file);if(s.blobPromise){const{blobPromise:n}=s;return delete s.blobPromise,this.getFromBlob(s.id,n)}return this.getFromUrl(s.url)}getFromCanvas(t,s){this.#s||=new Map;let n=this.#s.get(t);if(n?.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(s.width,s.height);return r.getContext("2d").drawImage(s,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#s.set(t,n),this.#s.set(n.id,n),n}getSvgUrl(t){const s=this.#s.get(t);return s?.isSvg?s.svgUrl:null}deleteId(t){this.#s||=new Map;const s=this.#s.get(t);if(!s||(s.refCounter-=1,s.refCounter!==0))return;const{bitmap:n}=s;if(!s.url&&!s.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),s.blobPromise=r.convertToBlob()}n.close?.(),s.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class W1{#t=[];#e=!1;#s;#i=-1;constructor(t=128){this.#s=t}add({cmd:t,undo:s,post:n,mustExec:r,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(r&&t(),this.#e)return;const d={cmd:t,undo:s,post:n,type:o};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(d);return}if(l&&this.#t[this.#i].type===o){c&&(d.undo=this.#t[this.#i].undo),this.#t[this.#i]=d;return}const f=this.#i+1;f===this.#s?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:s}=this.#t[this.#i];t(),s?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:s}=this.#t[this.#i];t(),s?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let s=this.#i;s>=0;s--)if(this.#t[s].type!==t){this.#t.splice(s+1,this.#i-s),this.#i=s;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Kr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:s}=rs.platform;for(const[n,r,o={}]of t)for(const l of n){const c=l.startsWith("mac+");s&&c?(this.callbacks.set(l.slice(4),{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1))):!s&&!c&&(this.callbacks.set(l,{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const s=this.buffer.join("+");return this.buffer.length=0,s}exec(t,s){if(!this.allKeys.has(s.key))return;const n=this.callbacks.get(this.#t(s));if(!n)return;const{callback:r,options:{bubbles:o=!1,args:l=[],checker:c=null}}=n;c&&!c(t,s)||(r.bind(t,...l,s)(),o||Cs(s))}}class ch{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return V1(t),Yt(this,"_colors",t)}convert(t){const s=oh(t);if(!window.matchMedia("(forced-colors: active)").matches)return s;for(const[n,r]of this._colors)if(r.every((o,l)=>o===s[l]))return ch._colorsMapping.get(n);return s}getHexCode(t){const s=this._colors.get(t);return s?Tt.makeHexColor(...s):t}}class ln{#t=new AbortController;#e=null;#s=new Map;#i=new Map;#a=null;#n=null;#l=null;#o=new W1;#u=null;#c=null;#h=0;#d=new Set;#f=null;#r=null;#g=new Set;_editorUndoBar=null;#m=!1;#p=!1;#y=!1;#v=null;#b=null;#_=null;#S=null;#k=!1;#C=null;#N=new K1;#w=!1;#T=!1;#E=null;#M=null;#O=null;#z=null;#A=qt.NONE;#x=new Set;#D=null;#U=null;#H=null;#G={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#P=[0,0];#L=null;#F=null;#q=null;#R=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=ln.prototype,s=l=>l.#F.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Yt(this,"_keyboardManager",new Kr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#F.contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#F.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:s}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:s}]]))}constructor(t,s,n,r,o,l,c,d,f,p,y,x,v){const _=this._signal=this.#t.signal;this.#F=t,this.#q=s,this.#a=n,this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:_}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),r._on("setpreference",this.onSetPreference.bind(this),{signal:_}),r._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:_}),this.#et(),this.#at(),this.#$(),this.#n=o.annotationStorage,this.#v=o.filterFactory,this.#U=l,this.#S=c||null,this.#m=d,this.#p=f,this.#y=p,this.#z=y||null,this.viewParameters={realScale:Oa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=v!==!1}destroy(){this.#R?.resolve(),this.#R=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#s.clear(),this.#g.clear(),this.#e=null,this.#x.clear(),this.#o.destroy(),this.#a?.destroy(),this.#C?.hide(),this.#C=null,this.#b&&(clearTimeout(this.#b),this.#b=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#z}get useNewAltTextFlow(){return this.#p}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Yt(this,"hcmFilter",this.#U?this.#v.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return Yt(this,"direction",getComputedStyle(this.#F).direction)}get highlightColors(){return Yt(this,"highlightColors",this.#S?new Map(this.#S.split(",").map(t=>t.split("=").map(s=>s.trim()))):null)}get highlightColorNames(){return Yt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#c=t}setMainHighlightColorPicker(t){this.#O=t}editAltText(t,s=!1){this.#a?.editAltText(this,t,s)}switchToMode(t,s){this._eventBus.on("annotationeditormodechanged",s,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,s){this._eventBus.dispatch("setpreference",{source:this,name:t,value:s})}onSetPreference({name:t,value:s}){t==="enableNewAltTextWhenAddingImage"&&(this.#y=s)}onPageChanging({pageNumber:t}){this.#h=t-1}focusMainContainer(){this.#F.focus()}findParent(t,s){for(const n of this.#i.values()){const{x:r,y:o,width:l,height:c}=n.div.getBoundingClientRect();if(t>=r&&t<=r+l&&s>=o&&s<=o+c)return n}return null}disableUserSelect(t=!1){this.#q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Oa.PDF_TO_CSS_UNITS;for(const s of this.#g)s.onScaleChanging();this.#c?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#B({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#Y(t){const{currentLayer:s}=this;if(s.hasTextLayer(t))return s;for(const n of this.#i.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t=""){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:l}=s,c=s.toString(),f=this.#B(s).closest(".textLayer"),p=this.getSelectionBoxes(f);if(!p)return;s.empty();const y=this.#Y(f),x=this.#A===qt.NONE,v=()=>{y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:l,text:c}),x&&this.showAllEditors("highlight",!0,!0)};if(x){this.switchToMode(qt.HIGHLIGHT,v);return}v()}#J(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#B(t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(this.#C||=new $1(this),this.#C.show(n,r,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#n&&!this.#n.has(t.id)&&this.#n.setValue(t.id,t)}#tt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#D&&(this.#C?.hide(),this.#D=null,this.#j({hasSelectedText:!1}));return}const{anchorNode:s}=t;if(s===this.#D)return;const r=this.#B(t).closest(".textLayer");if(!r){this.#D&&(this.#C?.hide(),this.#D=null,this.#j({hasSelectedText:!1}));return}if(this.#C?.hide(),this.#D=s,this.#j({hasSelectedText:!0}),!(this.#A!==qt.HIGHLIGHT&&this.#A!==qt.NONE)&&(this.#A===qt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#k=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#A===qt.HIGHLIGHT?this.#Y(r):null;o?.toggleDrawing();const l=new AbortController,c=this.combinedSignal(l),d=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#V("main_toolbar"))};window.addEventListener("pointerup",d,{signal:c}),window.addEventListener("blur",d,{signal:c})}}#V(t=""){this.#A===qt.HIGHLIGHT?this.highlightSelection(t):this.#m&&this.#J()}#et(){document.addEventListener("selectionchange",this.#tt.bind(this),{signal:this._signal})}#st(){if(this.#_)return;this.#_=new AbortController;const t=this.combinedSignal(this.#_);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#it(){this.#_?.abort(),this.#_=null}blur(){if(this.isShiftKeyDown=!1,this.#k&&(this.#k=!1,this.#V("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const s of this.#x)if(s.div.contains(t)){this.#M=[s,t],s._focusEventsAllowed=!1;break}}focus(){if(!this.#M)return;const[t,s]=this.#M;this.#M=null,s.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),s.focus()}#$(){if(this.#E)return;this.#E=new AbortController;const t=this.combinedSignal(this.#E);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#nt(){this.#E?.abort(),this.#E=null}#K(){if(this.#u)return;this.#u=new AbortController;const t=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#W(){this.#u?.abort(),this.#u=null}#at(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#$(),this.#K()}removeEditListeners(){this.#nt(),this.#W()}dragOver(t){for(const{type:s}of t.dataTransfer.items)for(const n of this.#r)if(n.isHandlingMimeForPasting(s)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const s of t.dataTransfer.items)for(const n of this.#r)if(n.isHandlingMimeForPasting(s.type)){n.paste(s,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const s=[];for(const n of this.#x){const r=n.serialize(!0);r&&s.push(r)}s.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(s))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:s}=t;for(const o of s.items)for(const l of this.#r)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=s.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Xt(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of n){const f=await r.deserialize(d);if(!f)return;o.push(f)}const l=()=>{for(const d of o)this.#Z(d);this.#Q(o)},c=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(o){Xt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#A!==qt.NONE&&!this.isEditorHandlingKeyboard&&ln._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#k&&(this.#k=!1,this.#V("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#j(t){Object.entries(t).some(([n,r])=>this.#G[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#G,t)}),this.#A===qt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#I([[Jt.HIGHLIGHT_FREE,!0]]))}#I(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#st(),this.#K(),this.#j({isEditing:this.#A!==qt.NONE,isEmpty:this.#X(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#it(),this.#W(),this.#j({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#r){this.#r=t;for(const s of this.#r)this.#I(s.defaultPropertiesToUpdate)}}getId(){return this.#N.id}get currentLayer(){return this.#i.get(this.#h)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#h}addLayer(t){this.#i.set(t.pageIndex,t),this.#w?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,s=null,n=!1){if(this.#A!==t&&!(this.#R&&(await this.#R.promise,!this.#R))){if(this.#R=Promise.withResolvers(),this.#A=t,t===qt.NONE){this.setEditingState(!1),this.#ot(),this._editorUndoBar?.hide(),this.#R.resolve();return}this.setEditingState(!0),await this.#rt(),this.unselectAll();for(const r of this.#i.values())r.updateMode(t);if(!s){n&&this.addNewEditorFromKeyboard(),this.#R.resolve();return}for(const r of this.#s.values())r.annotationElementId===s?(this.setSelected(r),r.enterInEditMode()):r.unselect();this.#R.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#A&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,s){if(this.#r){switch(t){case Jt.CREATE:this.currentLayer.addNewEditor();return;case Jt.HIGHLIGHT_DEFAULT_COLOR:this.#O?.updateColor(s);break;case Jt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#H||=new Map).set(t,s),this.showAllEditors("highlight",s);break}for(const n of this.#x)n.updateParams(t,s);for(const n of this.#r)n.updateDefaultParams(t,s)}}showAllEditors(t,s,n=!1){for(const o of this.#s.values())o.editorType===t&&o.show(s);(this.#H?.get(Jt.HIGHLIGHT_SHOW_ALL)??!0)!==s&&this.#I([[Jt.HIGHLIGHT_SHOW_ALL,s]])}enableWaiting(t=!1){if(this.#T!==t){this.#T=t;for(const s of this.#i.values())t?s.disableClick():s.enableClick(),s.div.classList.toggle("waiting",t)}}async#rt(){if(!this.#w){this.#w=!0;const t=[];for(const s of this.#i.values())t.push(s.enable());await Promise.all(t);for(const s of this.#s.values())s.enable()}}#ot(){if(this.unselectAll(),this.#w){this.#w=!1;for(const t of this.#i.values())t.disable();for(const t of this.#s.values())t.disable()}}getEditors(t){const s=[];for(const n of this.#s.values())n.pageIndex===t&&s.push(n);return s}getEditor(t){return this.#s.get(t)}addEditor(t){this.#s.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.focusMainContainer(),this.#b=null},0)),this.#s.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#d.has(t.annotationElementId))&&this.#n?.remove(t.id)}addDeletedAnnotationElement(t){this.#d.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#d.has(t)}removeDeletedAnnotationElement(t){this.#d.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#Z(t){const s=this.#i.get(t.pageIndex);s?s.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#I(t.propertiesToUpdate))}get#lt(){let t=null;for(t of this.#x);return t}updateUI(t){this.#lt===t&&this.#I(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#I(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#x.has(t)){this.#x.delete(t),t.unselect(),this.#j({hasSelectedEditor:this.hasSelection});return}this.#x.add(t),t.select(),this.#I(t.propertiesToUpdate),this.#j({hasSelectedEditor:!0})}setSelected(t){this.#c?.commitOrRemove();for(const s of this.#x)s!==t&&s.unselect();this.#x.clear(),this.#x.add(t),t.select(),this.#I(t.propertiesToUpdate),this.#j({hasSelectedEditor:!0})}isSelected(t){return this.#x.has(t)}get firstSelectedEditor(){return this.#x.values().next().value}unselect(t){t.unselect(),this.#x.delete(t),this.#j({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#x.size!==0}get isEnterHandled(){return this.#x.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#j({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#X()}),this._editorUndoBar?.hide()}redo(){this.#o.redo(),this.#j({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#X()})}addCommands(t){this.#o.add(t),this.#j({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#X()})}cleanUndoStack(t){this.#o.cleanType(t)}#X(){if(this.#s.size===0)return!0;if(this.#s.size===1)for(const t of this.#s.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const s=t?[t]:[...this.#x],n=()=>{this._editorUndoBar?.show(r,s.length===1?s[0].editorType:s.length);for(const o of s)o.remove()},r=()=>{for(const o of s)this.#Z(o)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#Q(t){for(const s of this.#x)s.unselect();this.#x.clear();for(const s of t)s.isEmpty()||(this.#x.add(s),s.select());this.#j({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#x)t.commit();this.#Q(this.#s.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#A!==qt.NONE))&&!this.#c?.commitOrRemove()&&this.hasSelection){for(const t of this.#x)t.unselect();this.#x.clear(),this.#j({hasSelectedEditor:!1})}}translateSelectedEditors(t,s,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#P[0]+=t,this.#P[1]+=s;const[r,o]=this.#P,l=[...this.#x],c=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#P[0]=this.#P[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#s.has(d.id)&&d.translateInPage(r,o)},undo:()=>{for(const d of l)this.#s.has(d.id)&&d.translateInPage(-r,-o)},mustExec:!1})},c);for(const d of l)d.translateInPage(t,s)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const t of this.#x)this.#f.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const t=this.#f;this.#f=null;let s=!1;for(const[{x:r,y:o,pageIndex:l},c]of t)c.newX=r,c.newY=o,c.newPageIndex=l,s||=r!==c.savedX||o!==c.savedY||l!==c.savedPageIndex;if(!s)return!1;const n=(r,o,l,c)=>{if(this.#s.has(r.id)){const d=this.#i.get(c);d?r._setParentAndPosition(d,o,l):(r.pageIndex=c,r.x=o,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:l,newPageIndex:c}]of t)n(r,o,l,c)},undo:()=>{for(const[r,{savedX:o,savedY:l,savedPageIndex:c}]of t)n(r,o,l,c)},mustExec:!0}),!0}dragSelectedEditors(t,s){if(this.#f)for(const n of this.#f.keys())n.drag(t,s)}rebuild(t){if(t.parent===null){const s=this.getLayer(t.pageIndex);s?(s.changeParent(t),s.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#x.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#A}get imageManager(){return Yt(this,"imageManager",new lh)}getSelectionBoxes(t){if(!t)return null;const s=document.getSelection();for(let f=0,p=s.rangeCount;f<p;f++)if(!t.contains(s.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:r,width:o,height:l}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(f,p,y,x)=>({x:(p-r)/l,y:1-(f+y-n)/o,width:x/l,height:y/o});break;case"180":c=(f,p,y,x)=>({x:1-(f+y-n)/o,y:1-(p+x-r)/l,width:y/o,height:x/l});break;case"270":c=(f,p,y,x)=>({x:1-(p+x-r)/l,y:(f-n)/o,width:x/l,height:y/o});break;default:c=(f,p,y,x)=>({x:(f-n)/o,y:(p-r)/l,width:y/o,height:x/l});break}const d=[];for(let f=0,p=s.rangeCount;f<p;f++){const y=s.getRangeAt(f);if(!y.collapsed)for(const{x,y:v,width:_,height:w}of y.getClientRects())_===0||w===0||d.push(c(x,v,_,w))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:s}){(this.#l||=new Map).set(t,s)}removeChangedExistingAnnotation({annotationElementId:t}){this.#l?.delete(t)}renderAnnotationElement(t){const s=this.#l?.get(t.data.id);if(!s)return;const n=this.#n.getRawValue(s);n&&(this.#A===qt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}}class ii{#t=null;#e=!1;#s=null;#i=null;#a=null;#n=null;#l=!1;#o=null;#u=null;#c=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(t){this.#u=t,this.#d=t._uiManager.useNewAltTextFlow,ii.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){ii._l10n??=t}async render(){const t=this.#s=document.createElement("button");t.className="altText",t.tabIndex="0";const s=this.#i=document.createElement("span");t.append(s),this.#d?(t.classList.add("new"),t.setAttribute("data-l10n-id",ii.#f.missing),s.setAttribute("data-l10n-id",ii.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),s.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#u._uiManager._signal;t.addEventListener("contextmenu",Ks,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#d&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#r}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#l=!0,r(o))},{signal:n}),await this.#g(),t}get#r(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#d?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#d?this.#t!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(t){this.#t===null&&(this.#c=t,this.#h=await ii._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#d||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const s=this.#o=document.createElement("div");s.className="noAltTextBadge",this.#u.div.append(s)}this.#o.classList.toggle("hidden",!t)}serialize(t){let s=this.#t;return!t&&this.#c===s&&(s=this.#h),{altText:s,decorative:this.#e,guessedText:this.#c,textWithDisclaimer:this.#h}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:s,guessedText:n,textWithDisclaimer:r,cancel:o=!1}){n&&(this.#c=n,this.#h=r),!(this.#t===t&&this.#e===s)&&(o||(this.#t=t,this.#e=s),this.#g())}toggle(t=!1){this.#s&&(!t&&this.#n&&(clearTimeout(this.#n),this.#n=null),this.#s.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#r}})}destroy(){this.#s?.remove(),this.#s=null,this.#i=null,this.#a=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#s;if(!t)return;if(this.#d){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",ii.#f[this.#r]),this.#i?.setAttribute("data-l10n-id",ii.#f[`${this.#r}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let s=this.#a;if(!s){this.#a=s=document.createElement("span"),s.className="tooltip",s.setAttribute("role","tooltip"),s.id=`alt-text-tooltip-${this.#u.id}`;const r=100,o=this.#u._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#n),this.#n=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#n=setTimeout(()=>{this.#n=null,this.#a.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#n&&(clearTimeout(this.#n),this.#n=null),this.#a?.classList.remove("show")},{signal:o})}this.#e?s.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(s.removeAttribute("data-l10n-id"),s.textContent=this.#t),s.parentNode||t.append(s),this.#u.getImageForAltText()?.setAttribute("aria-describedby",s.id)}}class Wl{#t;#e=!1;#s=null;#i;#a;#n;#l;#o;#u=null;#c;#h=null;constructor({container:t,isPinchingDisabled:s=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:l=null,signal:c}){this.#t=t,this.#s=n,this.#i=s,this.#a=r,this.#n=o,this.#l=l,this.#c=new AbortController,this.#o=AbortSignal.any([c,this.#c.signal]),t.addEventListener("touchstart",this.#d.bind(this),{passive:!1,signal:this.#o})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Yt(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}#d(t){if(this.#i?.()||t.touches.length<2)return;if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#o,this.#h.signal]),o=this.#t,l={signal:r,passive:!1};o.addEventListener("touchmove",this.#f.bind(this),l),o.addEventListener("touchend",this.#r.bind(this),l),o.addEventListener("touchcancel",this.#r.bind(this),l),this.#a?.()}if(Cs(t),t.touches.length!==2||this.#s?.()){this.#u=null;return}let[s,n]=t.touches;s.identifier>n.identifier&&([s,n]=[n,s]),this.#u={touch0X:s.screenX,touch0Y:s.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#f(t){if(!this.#u||t.touches.length!==2)return;let[s,n]=t.touches;s.identifier>n.identifier&&([s,n]=[n,s]);const{screenX:r,screenY:o}=s,{screenX:l,screenY:c}=n,d=this.#u,{touch0X:f,touch0Y:p,touch1X:y,touch1Y:x}=d,v=y-f,_=x-p,w=l-r,A=c-o,S=Math.hypot(w,A)||1,k=Math.hypot(v,_)||1;if(!this.#e&&Math.abs(k-S)<=Wl.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=o,d.touch1X=l,d.touch1Y=c,t.preventDefault(),!this.#e){this.#e=!0;return}const T=[(r+l)/2,(o+c)/2];this.#n?.(T,k,S)}#r(t){this.#h.abort(),this.#h=null,this.#l?.(),this.#u&&(t.preventDefault(),this.#u=null,this.#e=!1)}destroy(){this.#c?.abort(),this.#c=null}}class Lt{#t=null;#e=null;#s=null;#i=!1;#a=null;#n="";#l=!1;#o=null;#u=null;#c=null;#h=null;#d="";#f=!1;#r=null;#g=!1;#m=!1;#p=!1;#y=null;#v=0;#b=0;#_=null;#S=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#k=!1;#C=Lt._zIndex++;static _borderLineWidth=-1;static _colorManager=new ch;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=Lt.prototype._resizeWithKeyboard,s=ln.TRANSLATE_SMALL,n=ln.TRANSLATE_BIG;return Yt(this,"_resizerKeyboardManager",new Kr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-s,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[s,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-s]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,s]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Lt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:s,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=s,this.pageRotation=(360+s-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[o,l];const[c,d]=this.parentDimensions;this.x=t.x/c,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Yt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const s=new Z1({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});s.annotationElementId=t.annotationElementId,s.deleted=!0,s._uiManager.addToAnnotationStorage(s)}static initialize(t,s){if(Lt._l10n??=t,Lt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Lt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Lt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,s){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,s){de("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#k}set _isDraggable(t){this.#k=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,s]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*s/(t*2),this.y+=this.width*t/(s*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*s/(t*2),this.y-=this.width*t/(s*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#C}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#B(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,s,n,r){const[o,l]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/o,this.y=(s+r)/l,this.fixAndSetPosition()}#N([t,s],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/t,this.y+=r/s,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,s){this.#N(this.parentDimensions,t,s)}translateInPage(t,s){this.#r||=[this.x,this.y,this.width,this.height],this.#N(this.pageDimensions,t,s),this.div.scrollIntoView({block:"nearest"})}drag(t,s){this.#r||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=s/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:x}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,x)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[d,f]=this.getBaseTranslation();l+=d,c+=f;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),n.scrollIntoView({block:"nearest"})}_onTranslating(t,s){}_onTranslated(t,s){}get _hasBeenMoved(){return!!this.#r&&(this.#r[0]!==this.x||this.#r[1]!==this.y)}get _hasBeenResized(){return!!this.#r&&(this.#r[2]!==this.width||this.#r[3]!==this.height)}getBaseTranslation(){const[t,s]=this.parentDimensions,{_borderLineWidth:n}=Lt,r=n/t,o=n/s;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:s},pageDimensions:[n,r]}=this;let{x:o,y:l,width:c,height:d}=this;if(c*=n,d*=r,o*=n,l*=r,this._mustFixPosition)switch(t){case 0:o=Math.max(0,Math.min(n-c,o)),l=Math.max(0,Math.min(r-d,l));break;case 90:o=Math.max(0,Math.min(n-d,o)),l=Math.min(r,Math.max(c,l));break;case 180:o=Math.min(n,Math.max(c,o)),l=Math.min(r,Math.max(d,l));break;case 270:o=Math.min(n,Math.max(d,o)),l=Math.max(0,Math.min(r-c,l));break}this.x=o/=n,this.y=l/=r;const[f,p]=this.getBaseTranslation();o+=f,l+=p,s.left=`${(100*o).toFixed(2)}%`,s.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#w(t,s,n){switch(n){case 90:return[s,-t];case 180:return[-t,-s];case 270:return[-s,t];default:return[t,s]}}screenToPageTranslation(t,s){return Lt.#w(t,s,this.parentRotation)}pageTranslationToScreen(t,s){return Lt.#w(t,s,360-this.parentRotation)}#T(t){switch(t){case 90:{const[s,n]=this.pageDimensions;return[0,-s/n,n/s,0]}case 180:return[-1,0,0,-1];case 270:{const[s,n]=this.pageDimensions;return[0,s/n,-n/s,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[s,n]}=this;return[s*t,n*t]}setDims(t,s){const[n,r]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*t/n).toFixed(2)}%`,this.#l||(o.height=`${(100*s/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:s,width:n}=t,r=n.endsWith("%"),o=!this.#l&&s.endsWith("%");if(r&&o)return;const[l,c]=this.parentDimensions;r||(t.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!this.#l&&!o&&(t.height=`${(100*parseFloat(s)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#E(){if(this.#o)return;this.#o=document.createElement("div"),this.#o.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],s=this._uiManager._signal;for(const n of t){const r=document.createElement("div");this.#o.append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",this.#M.bind(this,n),{signal:s}),r.addEventListener("contextmenu",Ks,{signal:s}),r.tabIndex=-1}this.div.prepend(this.#o)}#M(t,s){s.preventDefault();const{isMac:n}=rs.platform;if(s.button!==0||s.ctrlKey&&n)return;this.#s?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#u=[s.screenX,s.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#A.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Cs,{passive:!1,signal:l}),window.addEventListener("contextmenu",Ks,{signal:l}),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(s.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=c,this.div.style.cursor=d,this.#z()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#O(t,s,n,r){this.width=n,this.height=r,this.x=t,this.y=s;const[o,l]=this.parentDimensions;this.setDims(o*n,l*r),this.fixAndSetPosition(),this._onResized()}_onResized(){}#z(){if(!this.#c)return;const{savedX:t,savedY:s,savedWidth:n,savedHeight:r}=this.#c;this.#c=null;const o=this.x,l=this.y,c=this.width,d=this.height;o===t&&l===s&&c===n&&d===r||this.addCommands({cmd:this.#O.bind(this,o,l,c,d),undo:this.#O.bind(this,t,s,n,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#A(t,s){const[n,r]=this.parentDimensions,o=this.x,l=this.y,c=this.width,d=this.height,f=Lt.MIN_SIZE/n,p=Lt.MIN_SIZE/r,y=this.#T(this.rotation),x=(G,O)=>[y[0]*G+y[2]*O,y[1]*G+y[3]*O],v=this.#T(360-this.rotation),_=(G,O)=>[v[0]*G+v[2]*O,v[1]*G+v[3]*O];let w,A,S=!1,k=!1;switch(t){case"topLeft":S=!0,w=(G,O)=>[0,0],A=(G,O)=>[G,O];break;case"topMiddle":w=(G,O)=>[G/2,0],A=(G,O)=>[G/2,O];break;case"topRight":S=!0,w=(G,O)=>[G,0],A=(G,O)=>[0,O];break;case"middleRight":k=!0,w=(G,O)=>[G,O/2],A=(G,O)=>[0,O/2];break;case"bottomRight":S=!0,w=(G,O)=>[G,O],A=(G,O)=>[0,0];break;case"bottomMiddle":w=(G,O)=>[G/2,O],A=(G,O)=>[G/2,0];break;case"bottomLeft":S=!0,w=(G,O)=>[0,O],A=(G,O)=>[G,0];break;case"middleLeft":k=!0,w=(G,O)=>[0,O/2],A=(G,O)=>[G,O/2];break}const T=w(c,d),j=A(c,d);let D=x(...j);const H=Lt._round(o+D[0]),F=Lt._round(l+D[1]);let R=1,I=1,K,ct;if(s.fromKeyboard)({deltaX:K,deltaY:ct}=s);else{const{screenX:G,screenY:O}=s,[Y,X]=this.#u;[K,ct]=this.screenToPageTranslation(G-Y,O-X),this.#u[0]=G,this.#u[1]=O}if([K,ct]=_(K/n,ct/r),S){const G=Math.hypot(c,d);R=I=Math.max(Math.min(Math.hypot(j[0]-T[0]-K,j[1]-T[1]-ct)/G,1/c,1/d),f/c,p/d)}else k?R=Math.max(f,Math.min(1,Math.abs(j[0]-T[0]-K)))/c:I=Math.max(p,Math.min(1,Math.abs(j[1]-T[1]-ct)))/d;const P=Lt._round(c*R),W=Lt._round(d*I);D=x(...A(P,W));const N=H-D[0],st=F-D[1];this.#r||=[this.x,this.y,this.width,this.height],this.width=P,this.height=W,this.x=N,this.y=st,this.setDims(n*P,r*W),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}async addEditToolbar(){return this._editToolbar||this.#m?this._editToolbar:(this._editToolbar=new Y1(this),this.div.append(this._editToolbar.render()),this.#s&&await this._editToolbar.addAltText(this.#s),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#s?.destroy())}addContainer(t){const s=this._editToolbar?.div;s?s.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#s||(ii.initialize(Lt._l10n),this.#s=new ii(this),this.#t&&(this.#s.data=this.#t,this.#t=null),await this.addEditToolbar())}get altTextData(){return this.#s?.data}set altTextData(t){this.#s&&(this.#s.data=t)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(t){await this.#s?.setGuessedText(t)}serializeAltText(t){return this.#s?.serialize(t)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#i?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#P();const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*s/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),Rl(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#S||=new Wl({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#x.bind(this),onPinching:this.#D.bind(this),onPinchEnd:this.#U.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),this.div}#x(){this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#D(t,s,n){let o=.7*(n/s)+1-.7;if(o===1)return;const l=this.#T(this.rotation),c=(H,F)=>[l[0]*H+l[2]*F,l[1]*H+l[3]*F],[d,f]=this.parentDimensions,p=this.x,y=this.y,x=this.width,v=this.height,_=Lt.MIN_SIZE/d,w=Lt.MIN_SIZE/f;o=Math.max(Math.min(o,1/x,1/v),_/x,w/v);const A=Lt._round(x*o),S=Lt._round(v*o);if(A===x&&S===v)return;this.#r||=[p,y,x,v];const k=c(x/2,v/2),T=Lt._round(p+k[0]),j=Lt._round(y+k[1]),D=c(A/2,S/2);this.x=T-D[0],this.y=j-D[1],this.width=A,this.height=S,this.setDims(d*A,f*S),this.fixAndSetPosition(),this._onResizing()}#U(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#z()}pointerdown(t){const{isMac:s}=rs.platform;if(t.button!==0||t.ctrlKey&&s){t.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#G(t);return}this.#H(t)}get isSelected(){return this._uiManager.isSelected(this)}#H(t){const{isMac:s}=rs.platform;t.ctrlKey&&!s||t.shiftKey||t.metaKey&&s?this.parent.toggleSelected(this):this.parent.setSelected(this)}#G(t){const{isSelected:s}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),l={capture:!0,passive:!1,signal:o},c=f=>{r.abort(),this.#a=null,this.#f=!1,this._uiManager.endDragSession()||this.#H(f),n&&this._onStopDragging()};s&&(this.#v=t.clientX,this.#b=t.clientY,this.#a=t.pointerId,this.#n=t.pointerType,window.addEventListener("pointermove",f=>{n||(n=!0,this._onStartDragging());const{clientX:p,clientY:y,pointerId:x}=f;if(x!==this.#a){Cs(f);return}const[v,_]=this.screenToPageTranslation(p-this.#v,y-this.#b);this.#v=p,this.#b=y,this._uiManager.dragSelectedEditors(v,_)},l),window.addEventListener("touchmove",Cs,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#n&&(this.#S||f.isPrimary)&&c(f),Cs(f)},l));const d=f=>{if(!this.#a||this.#a===f.pointerId){c(f);return}Cs(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,s,n){t.changeParent(this),this.x=s,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,s,n=this.rotation){const r=this.parentScale,[o,l]=this.pageDimensions,[c,d]=this.pageTranslation,f=t/r,p=s/r,y=this.x*o,x=this.y*l,v=this.width*o,_=this.height*l;switch(n){case 0:return[y+f+c,l-x-p-_+d,y+f+v+c,l-x-p+d];case 90:return[y+p+c,l-x+f+d,y+p+_+c,l-x+f+v+d];case 180:return[y-f-v+c,l-x+p+d,y-f+c,l-x+p+_+d];case 270:return[y-p-_+c,l-x-f-v+d,y-p+c,l-x-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,s){const[n,r,o,l]=t,c=o-n,d=l-r;switch(this.rotation){case 0:return[n,s-l,c,d];case 90:return[n,s-r,d,c];case 180:return[o,s-r,c,d];case 270:return[o,s-l,d,c];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){this.#m=!0}disableEditMode(){this.#m=!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:s,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return s<l&&r>0&&t<o&&n>0}#P(){if(this.#h||!this.div)return;this.#h=new AbortController;const t=this._uiManager.combinedSignal(this.#h);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#P()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,s=null){de("An editor must be serializable")}static async deserialize(t,s,n){const r=new this.prototype.constructor({parent:s,id:s.getNextId(),uiManager:n});r.rotation=t.rotation,r.#t=t.accessibilityData;const[o,l]=r.pageDimensions,[c,d,f,p]=r.getRectInCurrentCoords(t.rect,l);return r.x=c/o,r.y=d/l,r.width=f/o,r.height=p/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#h?.abort(),this.#h=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#B(),this.removeEditToolbar(),this.#_){for(const t of this.#_.values())clearTimeout(t);this.#_=null}this.parent=null,this.#S?.destroy(),this.#S=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#E(),this.#o.classList.remove("hidden"),Rl(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const s=this.#o.children;if(!this.#e){this.#e=Array.from(s);const l=this.#L.bind(this),c=this.#F.bind(this),d=this._uiManager._signal;for(const f of this.#e){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",c,{signal:d}),f.addEventListener("focus",this.#q.bind(this,p),{signal:d}),f.setAttribute("data-l10n-id",Lt._l10nResizer[p])}}const n=this.#e[0];let r=0;for(const l of s){if(l===n)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let c=0;c<r-o;c++)this.#o.append(this.#o.firstChild);else if(o>r)for(let c=0;c<o-r;c++)this.#o.firstChild.before(this.#o.lastChild);let l=0;for(const c of s){const f=this.#e[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Lt._l10nResizer[f])}}this.#R(0),this.#p=!0,this.#o.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#L(t){Lt._resizerKeyboardManager.exec(this,t)}#F(t){this.#p&&t.relatedTarget?.parentNode!==this.#o&&this.#B()}#q(t){this.#d=this.#p?t:""}#R(t){if(this.#e)for(const s of this.#e)s.tabIndex=t}_resizeWithKeyboard(t,s){this.#p&&this.#A(this.#d,{deltaX:t,deltaY:s,fromKeyboard:!0})}#B(){this.#p=!1,this.#R(-1),this.#z()}_stopResizingWithKeyboard(){this.#B(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}unselect(){this.#o?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0)}updateParams(t,s){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,s){this.#l=!0;const n=t/s,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,s=!1){if(s){this.#_||=new Map;const{action:n}=t;let r=this.#_.get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#_.delete(n),this.#_.size===0&&(this.#_=null)},Lt._telemetryTimeout),this.#_.set(n,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(t){let s=t.container.querySelector(".annotationContent");if(!s)s=document.createElement("div"),s.classList.add("annotationContent",this.editorType),t.container.prepend(s);else if(s.nodeName==="CANVAS"){const n=s;s=document.createElement("div"),s.classList.add("annotationContent",this.editorType),n.before(s)}return s}resetAnnotationElement(t){const{firstChild:s}=t.container;s?.nodeName==="DIV"&&s.classList.contains("annotationContent")&&s.remove()}}class Z1 extends Lt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const V0=3285377520,Us=4294901760,si=65535;class Dm{constructor(t){this.h1=t?t&4294967295:V0,this.h2=t?t&4294967295:V0}update(t){let s,n;if(typeof t=="string"){s=new Uint8Array(t.length*2),n=0;for(let w=0,A=t.length;w<A;w++){const S=t.charCodeAt(w);S<=255?s[n++]=S:(s[n++]=S>>>8,s[n++]=S&255)}}else if(ArrayBuffer.isView(t))s=t.slice(),n=s.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,o=n-r*4,l=new Uint32Array(s.buffer,0,r);let c=0,d=0,f=this.h1,p=this.h2;const y=3432918353,x=461845907,v=y&si,_=x&si;for(let w=0;w<r;w++)w&1?(c=l[w],c=c*y&Us|c*v&si,c=c<<15|c>>>17,c=c*x&Us|c*_&si,f^=c,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[w],d=d*y&Us|d*v&si,d=d<<15|d>>>17,d=d*x&Us|d*_&si,p^=d,p=p<<13|p>>>19,p=p*5+3864292196);switch(c=0,o){case 3:c^=s[r*4+2]<<16;case 2:c^=s[r*4+1]<<8;case 1:c^=s[r*4],c=c*y&Us|c*v&si,c=c<<15|c>>>17,c=c*x&Us|c*_&si,r&1?f^=c:p^=c}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,s=this.h2;return t^=s>>>1,t=t*3981806797&Us|t*36045&si,s=s*4283543511&Us|((s<<16|t>>>16)*2950163797&Us)>>>16,t^=s>>>1,t=t*444984403&Us|t*60499&si,s=s*3301882366&Us|((s<<16|t>>>16)*3120437893&Us)>>>16,t^=s>>>1,(t>>>0).toString(16).padStart(8,"0")+(s>>>0).toString(16).padStart(8,"0")}}const Vd=Object.freeze({map:null,hash:"",transfer:void 0});class uh{#t=!1;#e=null;#s=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,s){const n=this.#s.get(t);return n===void 0?s:Object.assign(s,n)}getRawValue(t){return this.#s.get(t)}remove(t){if(this.#s.delete(t),this.#s.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const s of this.#s.values())if(s instanceof Lt)return;this.onAnnotationEditor(null)}}setValue(t,s){const n=this.#s.get(t);let r=!1;if(n!==void 0)for(const[o,l]of Object.entries(s))n[o]!==l&&(r=!0,n[o]=l);else r=!0,this.#s.set(t,s);r&&this.#i(),s instanceof Lt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(s.constructor._type)}has(t){return this.#s.has(t)}getAll(){return this.#s.size>0?ih(this.#s):null}setAll(t){for(const[s,n]of Object.entries(t))this.setValue(s,n)}get size(){return this.#s.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Om(this)}get serializable(){if(this.#s.size===0)return Vd;const t=new Map,s=new Dm,n=[],r=Object.create(null);let o=!1;for(const[l,c]of this.#s){const d=c instanceof Lt?c.serialize(!1,r):c;d&&(t.set(l,d),s.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:s.hexdigest(),transfer:n}:Vd}get editorStats(){let t=null;const s=new Map;for(const n of this.#s.values()){if(!(n instanceof Lt))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:o}=r;s.has(o)||s.set(o,Object.getPrototypeOf(n).constructor),t||=Object.create(null);const l=t[o]||=new Map;for(const[c,d]of Object.entries(r)){if(c==="type")continue;let f=l.get(c);f||(f=new Map,l.set(c,f));const p=f.get(d)??0;f.set(d,p+1)}}for(const[n,r]of s)t[n]=r.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const s of this.#s.values())!(s instanceof Lt)||!s.annotationElementId||!s.serialize()||t.push(s.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}}class Om extends uh{#t;constructor(t){super();const{map:s,hash:n,transfer:r}=t.serializable,o=structuredClone(s,r?{transfer:r}:null);this.#t={map:o,hash:n,transfer:r}}get print(){de("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Yt(this,"modifiedIds",{ids:new Set,hash:""})}}class Q1{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:s=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const s=this.styleElement.sheet;s.insertRule(t,s.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(je(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:o}=t,l=new FontFace(n,r,o);this.addNativeFontFace(l);try{await l.load(),this.#t.add(n),s?.(t)}catch{Xt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}de("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Xt(`Failed to load font '${n.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const s=t.createFontFaceRule();if(s){if(this.insertRule(s),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Yt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(ts||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Yt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function s(){for(je(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:s,callback:t};return n.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Yt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,s){function n(j,D){return j.charCodeAt(D)<<24|j.charCodeAt(D+1)<<16|j.charCodeAt(D+2)<<8|j.charCodeAt(D+3)&255}function r(j,D,H,F){const R=j.substring(0,D),I=j.substring(D+H);return R+F+I}let o,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let f=0;function p(j,D){if(++f>30){Xt("Load test font never loaded."),D();return}if(d.font="30px "+j,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(p.bind(null,j,D))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=r(x,976,y.length,y);const _=16,w=1482184792;let A=n(x,_);for(o=0,l=y.length-3;o<l;o+=4)A=A-w+n(y,o)|0;o<y.length&&(A=A-w+n(y+"XXX",o)|0),x=r(x,_,4,z1(A));const S=`url(data:font/opentype;base64,${btoa(x)});`,k=`@font-face {font-family:"${y}";src:${S}}`;this.insertRule(k);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const j of[t.loadedName,y]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=j,T.append(D)}this._document.body.append(T),p(y,()=>{T.remove(),s.complete()})}}class J1{constructor(t,{disableFontFace:s=!1,fontExtraProperties:n=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const o in t)this[o]=t[o];this.disableFontFace=s===!0,this.fontExtraProperties=n===!0,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${H1(this.data)});`;let s;if(!this.cssFontInfo)s=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),s}getPathGenerator(t,s){if(this.compiledGlyphs[s]!==void 0)return this.compiledGlyphs[s];const n=this.loadedName+"_path_"+s;let r;try{r=t.get(n)}catch(l){Xt(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(r||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[s]=o}}const ml={DATA:1,ERROR:2},Ne={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Y0(){}function ms(h){if(h instanceof on||h instanceof qd||h instanceof qr||h instanceof G0||h instanceof Ml||h instanceof Td)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||de('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new on(h.message);case"InvalidPDFException":return new qd(h.message);case"MissingPDFException":return new qr(h.message);case"PasswordException":return new G0(h.message,h.code);case"UnexpectedResponseException":return new Ml(h.message,h.status);case"UnknownErrorException":return new Td(h.message,h.details)}return new Td(h.message,h.toString())}class Fr{#t=new AbortController;constructor(t,s,n){this.sourceName=t,this.targetName=s,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const n=t.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===ml.DATA)r.resolve(t.data);else if(t.callback===ml.ERROR)r.reject(ms(t.reason));else throw new Error("Unexpected callback case");return}const s=this.actionHandler[t.action];if(!s)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(s,t.data).then(function(l){o.postMessage({sourceName:n,targetName:r,callback:ml.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:r,callback:ml.ERROR,callbackId:t.callbackId,reason:ms(l)})});return}if(t.streamId){this.#s(t);return}s(t.data)}on(t,s){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=s}send(t,s,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:s},n)}sendWithPromise(t,s,n){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:s},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,s,n,r){const o=this.streamId++,l=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:c,action:t,streamId:o,data:s,desiredSize:f.desiredSize},r),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,d.postMessage({sourceName:l,targetName:c,stream:Ne.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{je(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:c,stream:Ne.CANCEL,streamId:o,reason:ms(f)}),p.promise}},n)}#s(t){const s=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,l=this,c=this.actionHandler[t.action],d={enqueue(f,p=1,y){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=p,x>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:Ne.ENQUEUE,streamId:s,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:Ne.CLOSE,streamId:s}),delete l.streamSinks[s])},error(f){je(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:Ne.ERROR,streamId:s,reason:ms(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[s]=d,Promise.try(c,t.data,d).then(function(){o.postMessage({sourceName:n,targetName:r,stream:Ne.START_COMPLETE,streamId:s,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:Ne.START_COMPLETE,streamId:s,reason:ms(f)})})}#i(t){const s=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,l=this.streamControllers[s],c=this.streamSinks[s];switch(t.stream){case Ne.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(ms(t.reason));break;case Ne.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(ms(t.reason));break;case Ne.PULL:if(!c){o.postMessage({sourceName:n,targetName:r,stream:Ne.PULL_COMPLETE,streamId:s,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||Y0).then(function(){o.postMessage({sourceName:n,targetName:r,stream:Ne.PULL_COMPLETE,streamId:s,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:Ne.PULL_COMPLETE,streamId:s,reason:ms(f)})});break;case Ne.ENQUEUE:if(je(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case Ne.CLOSE:if(je(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#a(l,s);break;case Ne.ERROR:je(l,"error should have stream controller"),l.controller.error(ms(t.reason)),this.#a(l,s);break;case Ne.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(ms(t.reason)),this.#a(l,s);break;case Ne.CANCEL:if(!c)break;const d=ms(t.reason);Promise.try(c.onCancel||Y0,d).then(function(){o.postMessage({sourceName:n,targetName:r,stream:Ne.CANCEL_COMPLETE,streamId:s,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:Ne.CANCEL_COMPLETE,streamId:s,reason:ms(f)})}),c.sinkCapability.reject(d),c.isCancelled=!0,delete this.streamSinks[s];break;default:throw new Error("Unexpected stream case")}}async#a(t,s){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[s]}destroy(){this.#t?.abort(),this.#t=null}}class Lm{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,s){if(t<=0||s<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,s);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,s,n){if(!t.canvas)throw new Error("Canvas is not specified");if(s<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=s,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,s){de("Abstract method `_createCanvas` called.")}}class t_ extends Lm{constructor({ownerDocument:t=globalThis.document,enableHWA:s=!1}){super({enableHWA:s}),this._document=t}_createCanvas(t,s){const n=this._document.createElement("canvas");return n.width=t,n.height=s,n}}class zm{constructor({baseUrl:t=null,isCompressed:s=!0}){this.baseUrl=t,this.isCompressed=s}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const s=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(s).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${s}`)})}async _fetch(t){de("Abstract method `_fetch` called.")}}class Pm extends zm{async _fetch(t){const s=await $l(t,this.isCompressed?"arraybuffer":"text");return s instanceof ArrayBuffer?new Uint8Array(s):Yl(s)}}class Fm{addFilter(t){return"none"}addHCMFilter(t,s){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,s,n,r,o){return"none"}destroy(t=!1){}}class e_ extends Fm{#t;#e;#s;#i;#a;#n;#l=0;constructor({docId:t,ownerDocument:s=globalThis.document}){super(),this.#i=t,this.#a=s}get#o(){return this.#e||=new Map}get#u(){return this.#n||=new Map}get#c(){if(!this.#s){const t=this.#a.createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const n=this.#a.createElementNS(Ei,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#s=this.#a.createElementNS(Ei,"defs"),t.append(n),n.append(this.#s),this.#a.body.append(t)}return this.#s}#h(t){if(t.length===1){const d=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=d[y]/255;const p=f.join(",");return[p,p,p]}const[s,n,r]=t,o=new Array(256),l=new Array(256),c=new Array(256);for(let d=0;d<256;d++)o[d]=s[d]/255,l[d]=n[d]/255,c[d]=r[d]/255;return[o.join(","),l.join(","),c.join(",")]}#d(t){if(this.#t===void 0){this.#t="";const s=this.#a.URL;s!==this.#a.baseURI&&(Kl(s)?Xt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=s.split("#",1)[0])}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let s=this.#o.get(t);if(s)return s;const[n,r,o]=this.#h(t),l=t.length===1?n:`${n}${r}${o}`;if(s=this.#o.get(l),s)return this.#o.set(t,s),s;const c=`g_${this.#i}_transfer_map_${this.#l++}`,d=this.#d(c);this.#o.set(t,d),this.#o.set(l,d);const f=this.#g(c);return this.#p(n,r,o,f),d}addHCMFilter(t,s){const n=`${t}-${s}`,r="base";let o=this.#u.get(r);if(o?.key===n||(o?(o.filter?.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},this.#u.set(r,o)),!t||!s))return o.url;const l=this.#v(t);t=Tt.makeHexColor(...l);const c=this.#v(s);if(s=Tt.makeHexColor(...c),this.#c.style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const d=new Array(256);for(let v=0;v<=255;v++){const _=v/255;d[v]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const f=d.join(","),p=`g_${this.#i}_hcm_filter`,y=o.filter=this.#g(p);this.#p(f,f,f,y),this.#r(y);const x=(v,_)=>{const w=l[v]/255,A=c[v]/255,S=new Array(_+1);for(let k=0;k<=_;k++)S[k]=w+k/_*(A-w);return S.join(",")};return this.#p(x(0,5),x(1,5),x(2,5),y),o.url=this.#d(p),o.url}addAlphaFilter(t){let s=this.#o.get(t);if(s)return s;const[n]=this.#h([t]),r=`alpha_${n}`;if(s=this.#o.get(r),s)return this.#o.set(t,s),s;const o=`g_${this.#i}_alpha_map_${this.#l++}`,l=this.#d(o);this.#o.set(t,l),this.#o.set(r,l);const c=this.#g(o);return this.#y(n,c),l}addLuminosityFilter(t){let s=this.#o.get(t||"luminosity");if(s)return s;let n,r;if(t?([n]=this.#h([t]),r=`luminosity_${n}`):r="luminosity",s=this.#o.get(r),s)return this.#o.set(t,s),s;const o=`g_${this.#i}_luminosity_map_${this.#l++}`,l=this.#d(o);this.#o.set(t,l),this.#o.set(r,l);const c=this.#g(o);return this.#f(c),t&&this.#y(n,c),l}addHighlightHCMFilter(t,s,n,r,o){const l=`${s}-${n}-${r}-${o}`;let c=this.#u.get(t);if(c?.key===l||(c?(c.filter?.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},this.#u.set(t,c)),!s||!n))return c.url;const[d,f]=[s,n].map(this.#v.bind(this));let p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[x,v]=[r,o].map(this.#v.bind(this));y<p&&([p,y,x,v]=[y,p,v,x]),this.#c.style.color="";const _=(S,k,T)=>{const j=new Array(256),D=(y-p)/T,H=S/255,F=(k-S)/(255*T);let R=0;for(let I=0;I<=T;I++){const K=Math.round(p+I*D),ct=H+I*F;for(let P=R;P<=K;P++)j[P]=ct;R=K+1}for(let I=R;I<256;I++)j[I]=j[R-1];return j.join(",")},w=`g_${this.#i}_hcm_${t}_filter`,A=c.filter=this.#g(w);return this.#r(A),this.#p(_(x[0],v[0],5),_(x[1],v[1],5),_(x[2],v[2],5),A),c.url=this.#d(w),c.url}destroy(t=!1){t&&this.#n?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#e?.clear(),this.#e=null,this.#n?.clear(),this.#n=null,this.#l=0)}#f(t){const s=this.#a.createElementNS(Ei,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)}#r(t){const s=this.#a.createElementNS(Ei,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)}#g(t){const s=this.#a.createElementNS(Ei,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),this.#c.append(s),s}#m(t,s,n){const r=this.#a.createElementNS(Ei,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),t.append(r)}#p(t,s,n,r){const o=this.#a.createElementNS(Ei,"feComponentTransfer");r.append(o),this.#m(o,"feFuncR",t),this.#m(o,"feFuncG",s),this.#m(o,"feFuncB",n)}#y(t,s){const n=this.#a.createElementNS(Ei,"feComponentTransfer");s.append(n),this.#m(n,"feFuncA",t)}#v(t){return this.#c.style.color=t,oh(getComputedStyle(this.#c).getPropertyValue("color"))}}class Bm{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const s=`${this.baseUrl}${t}`;return this._fetch(s).catch(n=>{throw new Error(`Unable to load font data at: ${s}`)})}async _fetch(t){de("Abstract method `_fetch` called.")}}class Im extends Bm{async _fetch(t){const s=await $l(t,"arraybuffer");return new Uint8Array(s)}}ts&&Xt("Please use the `legacy` build in Node.js environments.");async function Um(h){const s=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(s)}class s_ extends Fm{}class i_ extends Lm{_createCanvas(t,s){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,s)}}class n_ extends zm{async _fetch(t){return Um(t)}}class a_ extends Bm{async _fetch(t){return Um(t)}}const Je={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Yd(h,t){if(!t)return;const s=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],s,n),h.clip(r)}class dh{getPattern(){de("Abstract method `getPattern` called.")}}class r_ extends dh{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let s;this._type==="axial"?s=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(s=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)s.addColorStop(n[0],n[1]);return s}getPattern(t,s,n,r){let o;if(r===Je.STROKE||r===Je.FILL){const l=s.current.getClippedPathBoundingBox(r,ye(t))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=s.cachedCanvases.getCanvas("pattern",c,d),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=Tt.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...s.baseTransform),this.matrix&&p.transform(...this.matrix),Yd(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(n);o.setTransform(y)}else Yd(t,this._bbox),o=this._createGradient(t);return o}}function Md(h,t,s,n,r,o,l,c){const d=t.coords,f=t.colors,p=h.data,y=h.width*4;let x;d[s+1]>d[n+1]&&(x=s,s=n,n=x,x=o,o=l,l=x),d[n+1]>d[r+1]&&(x=n,n=r,r=x,x=l,l=c,c=x),d[s+1]>d[n+1]&&(x=s,s=n,n=x,x=o,o=l,l=x);const v=(d[s]+t.offsetX)*t.scaleX,_=(d[s+1]+t.offsetY)*t.scaleY,w=(d[n]+t.offsetX)*t.scaleX,A=(d[n+1]+t.offsetY)*t.scaleY,S=(d[r]+t.offsetX)*t.scaleX,k=(d[r+1]+t.offsetY)*t.scaleY;if(_>=k)return;const T=f[o],j=f[o+1],D=f[o+2],H=f[l],F=f[l+1],R=f[l+2],I=f[c],K=f[c+1],ct=f[c+2],P=Math.round(_),W=Math.round(k);let N,st,G,O,Y,X,dt,M;for(let B=P;B<=W;B++){if(B<A){const vt=B<_?0:(_-B)/(_-A);N=v-(v-w)*vt,st=T-(T-H)*vt,G=j-(j-F)*vt,O=D-(D-R)*vt}else{let vt;B>k?vt=1:A===k?vt=0:vt=(A-B)/(A-k),N=w-(w-S)*vt,st=H-(H-I)*vt,G=F-(F-K)*vt,O=R-(R-ct)*vt}let J;B<_?J=0:B>k?J=1:J=(_-B)/(_-k),Y=v-(v-S)*J,X=T-(T-I)*J,dt=j-(j-K)*J,M=D-(D-ct)*J;const ot=Math.round(Math.min(N,Y)),at=Math.round(Math.max(N,Y));let _t=y*B+ot*4;for(let vt=ot;vt<=at;vt++)J=(N-vt)/(N-Y),J<0?J=0:J>1&&(J=1),p[_t++]=st-(st-X)*J|0,p[_t++]=G-(G-dt)*J|0,p[_t++]=O-(O-M)*J|0,p[_t++]=255}}function o_(h,t,s){const n=t.coords,r=t.colors;let o,l;switch(t.type){case"lattice":const c=t.verticesPerRow,d=Math.floor(n.length/c)-1,f=c-1;for(o=0;o<d;o++){let p=o*c;for(let y=0;y<f;y++,p++)Md(h,s,n[p],n[p+1],n[p+c],r[p],r[p+1],r[p+c]),Md(h,s,n[p+c+1],n[p+1],n[p+c],r[p+c+1],r[p+1],r[p+c])}break;case"triangles":for(o=0,l=n.length;o<l;o+=3)Md(h,s,n[o],n[o+1],n[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class l_ extends dh{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,s,n){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-c,p=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),x=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),v=f/y,_=p/x,w={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/v,scaleY:1/_},A=y+4,S=x+4,k=n.getCanvas("mesh",A,S),T=k.context,j=T.createImageData(y,x);if(s){const H=j.data;for(let F=0,R=H.length;F<R;F+=4)H[F]=s[0],H[F+1]=s[1],H[F+2]=s[2],H[F+3]=255}for(const H of this._figures)o_(j,H,w);return T.putImageData(j,2,2),{canvas:k.canvas,offsetX:c-2*v,offsetY:d-2*_,scaleX:v,scaleY:_}}getPattern(t,s,n,r){Yd(t,this._bbox);let o;if(r===Je.SHADING)o=Tt.singularValueDecompose2dScale(ye(t));else if(o=Tt.singularValueDecompose2dScale(s.baseTransform),this.matrix){const c=Tt.singularValueDecompose2dScale(this.matrix);o=[o[0]*c[0],o[1]*c[1]]}const l=this._createMeshCanvas(o,r===Je.SHADING?null:this._background,s.cachedCanvases);return r!==Je.SHADING&&(t.setTransform(...s.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class c_ extends dh{getPattern(){return"hotpink"}}function u_(h){switch(h[0]){case"RadialAxial":return new r_(h);case"Mesh":return new l_(h);case"Dummy":return new c_}throw new Error(`Unknown IR type: ${h[0]}`)}const $0={COLORED:1,UNCOLORED:2};class hh{static MAX_PATTERN_SIZE=3e3;constructor(t,s,n,r,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=s,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(t){const{bbox:s,operatorList:n,paintType:r,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),Vl("TilingType: "+o);const p=s[0],y=s[1],x=s[2],v=s[3],_=x-p,w=v-y,A=Tt.singularValueDecompose2dScale(this.matrix),S=Tt.singularValueDecompose2dScale(this.baseTransform),k=A[0]*S[0],T=A[1]*S[1];let j=_,D=w,H=!1,F=!1;const R=Math.ceil(d*k),I=Math.ceil(f*T),K=Math.ceil(_*k),ct=Math.ceil(w*T);R>=K?j=d:H=!0,I>=ct?D=f:F=!0;const P=this.getSizeAndScale(j,this.ctx.canvas.width,k),W=this.getSizeAndScale(D,this.ctx.canvas.height,T),N=t.cachedCanvases.getCanvas("pattern",P.size,W.size),st=N.context,G=c.createCanvasGraphics(st);if(G.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(G,r,l),st.translate(-P.scale*p,-W.scale*y),G.transform(P.scale,0,0,W.scale,0,0),st.save(),this.clipBbox(G,p,y,x,v),G.baseTransform=ye(G.ctx),G.executeOperatorList(n),G.endDrawing(),st.restore(),H||F){const O=N.canvas;H&&(j=d),F&&(D=f);const Y=this.getSizeAndScale(j,this.ctx.canvas.width,k),X=this.getSizeAndScale(D,this.ctx.canvas.height,T),dt=Y.size,M=X.size,B=t.cachedCanvases.getCanvas("pattern-workaround",dt,M),J=B.context,ot=H?Math.floor(_/d):0,at=F?Math.floor(w/f):0;for(let _t=0;_t<=ot;_t++)for(let vt=0;vt<=at;vt++)J.drawImage(O,dt*_t,M*vt,dt,M,0,0,dt,M);return{canvas:B.canvas,scaleX:Y.scale,scaleY:X.scale,offsetX:p,offsetY:y}}return{canvas:N.canvas,scaleX:P.scale,scaleY:W.scale,offsetX:p,offsetY:y}}getSizeAndScale(t,s,n){const r=Math.max(hh.MAX_PATTERN_SIZE,s);let o=Math.ceil(t*n);return o>=r?o=r:n=o/t,{scale:n,size:o}}clipBbox(t,s,n,r,o){const l=r-s,c=o-n;t.ctx.rect(s,n,l,c),t.current.updateRectMinMax(ye(t.ctx),[s,n,r,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,s,n){const r=t.ctx,o=t.current;switch(s){case $0.COLORED:const l=this.ctx;r.fillStyle=l.fillStyle,r.strokeStyle=l.strokeStyle,o.fillColor=l.fillStyle,o.strokeColor=l.strokeStyle;break;case $0.UNCOLORED:const c=Tt.makeHexColor(n[0],n[1],n[2]);r.fillStyle=c,r.strokeStyle=c,o.fillColor=c,o.strokeColor=c;break;default:throw new L1(`Unsupported paint type: ${s}`)}}getPattern(t,s,n,r){let o=n;r!==Je.SHADING&&(o=Tt.transform(o,s.baseTransform),this.matrix&&(o=Tt.transform(o,this.matrix)));const l=this.createPatternCanvas(s);let c=new DOMMatrix(o);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const d=t.createPattern(l.canvas,"repeat");return d.setTransform(c),d}}function d_({src:h,srcPos:t=0,dest:s,width:n,height:r,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const c=rs.isLittleEndian?4278190080:255,[d,f]=l?[o,c]:[c,o],p=n>>3,y=n&7,x=h.length;s=new Uint32Array(s.buffer);let v=0;for(let _=0;_<r;_++){for(const A=t+p;t<A;t++){const S=t<x?h[t]:255;s[v++]=S&128?f:d,s[v++]=S&64?f:d,s[v++]=S&32?f:d,s[v++]=S&16?f:d,s[v++]=S&8?f:d,s[v++]=S&4?f:d,s[v++]=S&2?f:d,s[v++]=S&1?f:d}if(y===0)continue;const w=t<x?h[t++]:255;for(let A=0;A<y;A++)s[v++]=w&1<<7-A?f:d}return{srcPos:t,destPos:v}}const K0=16,W0=100,h_=15,Z0=10,Q0=1e3,ys=16;function f_(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(n,r){t.translate(n,r),this.__originalTranslate(n,r)},h.scale=function(n,r){t.scale(n,r),this.__originalScale(n,r)},h.transform=function(n,r,o,l,c,d){t.transform(n,r,o,l,c,d),this.__originalTransform(n,r,o,l,c,d)},h.setTransform=function(n,r,o,l,c,d){t.setTransform(n,r,o,l,c,d),this.__originalSetTransform(n,r,o,l,c,d)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(n){t.rotate(n),this.__originalRotate(n)},h.clip=function(n){t.clip(n),this.__originalClip(n)},h.moveTo=function(s,n){t.moveTo(s,n),this.__originalMoveTo(s,n)},h.lineTo=function(s,n){t.lineTo(s,n),this.__originalLineTo(s,n)},h.bezierCurveTo=function(s,n,r,o,l,c){t.bezierCurveTo(s,n,r,o,l,c),this.__originalBezierCurveTo(s,n,r,o,l,c)},h.rect=function(s,n,r,o){t.rect(s,n,r,o),this.__originalRect(s,n,r,o)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class g_{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,s,n){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,s,n)):(r=this.canvasFactory.create(s,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const s=this.cache[t];this.canvasFactory.destroy(s),delete this.cache[t]}}}function yl(h,t,s,n,r,o,l,c,d,f){const[p,y,x,v,_,w]=ye(h);if(y===0&&x===0){const k=l*p+_,T=Math.round(k),j=c*v+w,D=Math.round(j),H=(l+d)*p+_,F=Math.abs(Math.round(H)-T)||1,R=(c+f)*v+w,I=Math.abs(Math.round(R)-D)||1;return h.setTransform(Math.sign(p),0,0,Math.sign(v),T,D),h.drawImage(t,s,n,r,o,0,0,F,I),h.setTransform(p,y,x,v,_,w),[F,I]}if(p===0&&v===0){const k=c*x+_,T=Math.round(k),j=l*y+w,D=Math.round(j),H=(c+f)*x+_,F=Math.abs(Math.round(H)-T)||1,R=(l+d)*y+w,I=Math.abs(Math.round(R)-D)||1;return h.setTransform(0,Math.sign(y),Math.sign(x),0,T,D),h.drawImage(t,s,n,r,o,0,0,I,F),h.setTransform(p,y,x,v,_,w),[I,F]}h.drawImage(t,s,n,r,o,l,c,d,f);const A=Math.hypot(p,y),S=Math.hypot(x,v);return[A*d,S*f]}function p_(h){const{width:t,height:s}=h;if(t>Q0||s>Q0)return null;const n=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1;let l=new Uint8Array(o*(s+1)),c,d,f;const p=t+7&-8;let y=new Uint8Array(p*s),x=0;for(const S of h.data){let k=128;for(;k>0;)y[x++]=S&k?0:255,k>>=1}let v=0;for(x=0,y[x]!==0&&(l[0]=1,++v),d=1;d<t;d++)y[x]!==y[x+1]&&(l[d]=y[x]?2:1,++v),x++;for(y[x]!==0&&(l[d]=2,++v),c=1;c<s;c++){x=c*p,f=c*o,y[x-p]!==y[x]&&(l[f]=y[x]?1:8,++v);let S=(y[x]?4:0)+(y[x-p]?8:0);for(d=1;d<t;d++)S=(S>>2)+(y[x+1]?4:0)+(y[x-p+1]?8:0),r[S]&&(l[f+d]=r[S],++v),x++;if(y[x-p]!==y[x]&&(l[f+d]=y[x]?2:4,++v),v>n)return null}for(x=p*(s-1),f=c*o,y[x]!==0&&(l[f]=8,++v),d=1;d<t;d++)y[x]!==y[x+1]&&(l[f+d]=y[x]?4:8,++v),x++;if(y[x]!==0&&(l[f+d]=4,++v),v>n)return null;const _=new Int32Array([0,o,-1,0,-o,0,0,0,1]),w=new Path2D;for(c=0;v&&c<=s;c++){let S=c*o;const k=S+t;for(;S<k&&!l[S];)S++;if(S===k)continue;w.moveTo(S%o,c);const T=S;let j=l[S];do{const D=_[j];do S+=D;while(!l[S]);const H=l[S];H!==5&&H!==10?(j=H,l[S]=0):(j=H&51*j>>4,l[S]&=j>>2|j<<2),w.lineTo(S%o,S/o|0),l[S]||--v}while(T!==S);--c}return y=null,l=null,function(S){S.save(),S.scale(1/t,-1/s),S.translate(0,-s),S.fill(w),S.beginPath(),S.restore()}}class J0{constructor(t,s){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=jm,this.textMatrixScale=1,this.fontMatrix=Gd,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Qe.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,s])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,s){this.x=t,this.y=s}updatePathMinMax(t,s,n){[s,n]=Tt.applyTransform([s,n],t),this.minX=Math.min(this.minX,s),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,s),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,s){const n=Tt.applyTransform(s,t),r=Tt.applyTransform(s.slice(2),t),o=Tt.applyTransform([s[0],s[3]],t),l=Tt.applyTransform([s[2],s[1]],t);this.minX=Math.min(this.minX,n[0],r[0],o[0],l[0]),this.minY=Math.min(this.minY,n[1],r[1],o[1],l[1]),this.maxX=Math.max(this.maxX,n[0],r[0],o[0],l[0]),this.maxY=Math.max(this.maxY,n[1],r[1],o[1],l[1])}updateScalingPathMinMax(t,s){Tt.scaleMinMax(t,s),this.minX=Math.min(this.minX,s[0]),this.minY=Math.min(this.minY,s[1]),this.maxX=Math.max(this.maxX,s[2]),this.maxY=Math.max(this.maxY,s[3])}updateCurvePathMinMax(t,s,n,r,o,l,c,d,f,p){const y=Tt.bezierBoundingBox(s,n,r,o,l,c,d,f,p);p||this.updateRectMinMax(t,y)}getPathBoundingBox(t=Je.FILL,s=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Je.STROKE){s||de("Stroke bounding box must include transform.");const r=Tt.singularValueDecompose2dScale(s),o=r[0]*this.lineWidth/2,l=r[1]*this.lineWidth/2;n[0]-=o,n[1]-=l,n[2]+=o,n[3]+=l}return n}updateClipFromPath(){const t=Tt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Je.FILL,s=null){return Tt.intersect(this.clipBox,this.getPathBoundingBox(t,s))}}function tm(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const s=t.height,n=t.width,r=s%ys,o=(s-r)/ys,l=r===0?o:o+1,c=h.createImageData(n,ys);let d=0,f;const p=t.data,y=c.data;let x,v,_,w;if(t.kind===Sl.GRAYSCALE_1BPP){const A=p.byteLength,S=new Uint32Array(y.buffer,0,y.byteLength>>2),k=S.length,T=n+7>>3,j=4294967295,D=rs.isLittleEndian?4278190080:255;for(x=0;x<l;x++){for(_=x<o?ys:r,f=0,v=0;v<_;v++){const H=A-d;let F=0;const R=H>T?n:H*8-7,I=R&-8;let K=0,ct=0;for(;F<I;F+=8)ct=p[d++],S[f++]=ct&128?j:D,S[f++]=ct&64?j:D,S[f++]=ct&32?j:D,S[f++]=ct&16?j:D,S[f++]=ct&8?j:D,S[f++]=ct&4?j:D,S[f++]=ct&2?j:D,S[f++]=ct&1?j:D;for(;F<R;F++)K===0&&(ct=p[d++],K=128),S[f++]=ct&K?j:D,K>>=1}for(;f<k;)S[f++]=0;h.putImageData(c,0,x*ys)}}else if(t.kind===Sl.RGBA_32BPP){for(v=0,w=n*ys*4,x=0;x<o;x++)y.set(p.subarray(d,d+w)),d+=w,h.putImageData(c,0,v),v+=ys;x<l&&(w=n*r*4,y.set(p.subarray(d,d+w)),h.putImageData(c,0,v))}else if(t.kind===Sl.RGB_24BPP)for(_=ys,w=n*_,x=0;x<l;x++){for(x>=o&&(_=r,w=n*_),f=0,v=w;v--;)y[f++]=p[d++],y[f++]=p[d++],y[f++]=p[d++],y[f++]=255;h.putImageData(c,0,x*ys)}else throw new Error(`bad image kind: ${t.kind}`)}function em(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const s=t.height,n=t.width,r=s%ys,o=(s-r)/ys,l=r===0?o:o+1,c=h.createImageData(n,ys);let d=0;const f=t.data,p=c.data;for(let y=0;y<l;y++){const x=y<o?ys:r;({srcPos:d}=d_({src:f,srcPos:d,dest:p,width:n,height:x,nonBlackColor:0})),h.putImageData(c,0,y*ys)}}function Rr(h,t){const s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of s)h[n]!==void 0&&(t[n]=h[n]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function bl(h){if(h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0),!ts){const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}}function sm(h,t){if(t)return!0;const s=Tt.singularValueDecompose2dScale(h);s[0]=Math.fround(s[0]),s[1]=Math.fround(s[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Oa.PDF_TO_CSS_UNITS);return s[0]<=n&&s[1]<=n}const m_=["butt","round","square"],y_=["miter","round","bevel"],b_={},im={};class Ca{constructor(t,s,n,r,o,{optionalContentConfig:l,markedContentStack:c=null},d,f){this.ctx=t,this.current=new J0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=s,this.objs=n,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new g_(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,s=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):s}beginDrawing({transform:t,viewport:s,transparency:n=!1,background:r=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=c,n){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ye(this.compositeCtx))}this.ctx.save(),bl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...s.transform),this.viewportScale=s.scale,this.baseTransform=ye(this.ctx)}executeOperatorList(t,s,n,r){const o=t.argsArray,l=t.fnArray;let c=s||0;const d=o.length;if(d===c)return c;const f=d-c>Z0&&typeof n=="function",p=f?Date.now()+h_:0;let y=0;const x=this.commonObjs,v=this.objs;let _;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,n),c;if(_=l[c],_!==Ys.dependency)this[_].apply(this,o[c]);else for(const w of o[c]){const A=w.startsWith("g_")?x:v;if(!A.has(w))return A.get(w,n),c}if(c++,c===d)return c;if(f&&++y>Z0){if(Date.now()>p)return n(),c;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const s of t.values())typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&(s.width=s.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const s=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=s}}}_scaleImage(t,s){const n=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(s[0],s[1]),1),l=Math.max(Math.hypot(s[2],s[3]),1),c=n,d=r,f="prescale1",p,y;for(;o>2&&c>1||l>2&&d>1;){let x=c,v=d;o>2&&c>1&&(x=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),o/=c/x),l>2&&d>1&&(v=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/v),p=this.cachedCanvases.getCanvas(f,x,v),y=p.context,y.clearRect(0,0,x,v),y.drawImage(t,0,0,c,d,0,0,x,v),t=p.canvas,c=x,d=v,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:d}}_createMaskCanvas(t){const s=this.ctx,{width:n,height:r}=t,o=this.current.fillColor,l=this.current.patternFill,c=ye(s);let d,f,p,y;if((t.bitmap||t.data)&&t.count>1){const R=t.bitmap||t.data.buffer;f=JSON.stringify(l?c:[c.slice(0,4),o]),d=this._cachedBitmapsMap.get(R),d||(d=new Map,this._cachedBitmapsMap.set(R,d));const I=d.get(f);if(I&&!l){const K=Math.round(Math.min(c[0],c[2])+c[4]),ct=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:I,offsetX:K,offsetY:ct}}p=I}p||(y=this.cachedCanvases.getCanvas("maskCanvas",n,r),em(y.context,t));let x=Tt.transform(c,[1/n,0,0,-1/r,0,0]);x=Tt.transform(x,[1,0,0,1,0,-r]);const[v,_,w,A]=Tt.getAxialAlignedBoundingBox([0,0,n,r],x),S=Math.round(w-v)||1,k=Math.round(A-_)||1,T=this.cachedCanvases.getCanvas("fillCanvas",S,k),j=T.context,D=v,H=_;j.translate(-D,-H),j.transform(...x),p||(p=this._scaleImage(y.canvas,ei(j)),p=p.img,d&&l&&d.set(f,p)),j.imageSmoothingEnabled=sm(ye(j),t.interpolate),yl(j,p,0,0,p.width,p.height,0,0,n,r),j.globalCompositeOperation="source-in";const F=Tt.transform(ei(j),[1,0,0,1,-D,-H]);return j.fillStyle=l?o.getPattern(s,this,F,Je.FILL):o,j.fillRect(0,0,n,r),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,T.canvas)),{canvas:T.canvas,offsetX:Math.round(D),offsetY:Math.round(H)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=m_[t]}setLineJoin(t){this.ctx.lineJoin=y_[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,s){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=s)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[s,n]of t)switch(s){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,t,s);this.suspendedCtx=this.ctx,this.ctx=r.context;const o=this.ctx;o.setTransform(...ye(this.suspendedCtx)),Rr(this.suspendedCtx,o),f_(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Rr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const s=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,s,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,s,n,r){const o=r[0],l=r[1],c=r[2]-o,d=r[3]-l;c===0||d===0||(this.genericComposeSMask(s.context,n,c,d,s.subtype,s.backdrop,s.transferMap,o,l,s.offsetX,s.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,s,n,r,o,l,c,d,f,p,y){let x=t.canvas,v=d-p,_=f-y;if(l){const A=Tt.makeHexColor(...l);if(v<0||_<0||v+n>x.width||_+r>x.height){const S=this.cachedCanvases.getCanvas("maskExtension",n,r),k=S.context;k.drawImage(x,-v,-_),k.globalCompositeOperation="destination-atop",k.fillStyle=A,k.fillRect(0,0,n,r),k.globalCompositeOperation="source-over",x=S.canvas,v=_=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(v,_,n,r),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=A,t.fillRect(v,_,n,r),t.restore()}}s.save(),s.globalAlpha=1,s.setTransform(1,0,0,1,0,0),o==="Alpha"&&c?s.filter=this.filterFactory.addAlphaFilter(c):o==="Luminosity"&&(s.filter=this.filterFactory.addLuminosityFilter(c));const w=new Path2D;w.rect(d,f,n,r),s.clip(w),s.globalCompositeOperation="destination-in",s.drawImage(x,v,_,n,r,d,f,n,r),s.restore()}save(){this.inSMaskMode?(Rr(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Rr(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,s,n,r,o,l){this.ctx.transform(t,s,n,r,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,s,n){const r=this.ctx,o=this.current;let l=o.x,c=o.y,d,f;const p=ye(r),y=p[0]===0&&p[3]===0||p[1]===0&&p[2]===0,x=y?n.slice(0):null;for(let v=0,_=0,w=t.length;v<w;v++)switch(t[v]|0){case Ys.rectangle:l=s[_++],c=s[_++];const A=s[_++],S=s[_++],k=l+A,T=c+S;r.moveTo(l,c),A===0||S===0?r.lineTo(k,T):(r.lineTo(k,c),r.lineTo(k,T),r.lineTo(l,T)),y||o.updateRectMinMax(p,[l,c,k,T]),r.closePath();break;case Ys.moveTo:l=s[_++],c=s[_++],r.moveTo(l,c),y||o.updatePathMinMax(p,l,c);break;case Ys.lineTo:l=s[_++],c=s[_++],r.lineTo(l,c),y||o.updatePathMinMax(p,l,c);break;case Ys.curveTo:d=l,f=c,l=s[_+4],c=s[_+5],r.bezierCurveTo(s[_],s[_+1],s[_+2],s[_+3],l,c),o.updateCurvePathMinMax(p,d,f,s[_],s[_+1],s[_+2],s[_+3],l,c,x),_+=6;break;case Ys.curveTo2:d=l,f=c,r.bezierCurveTo(l,c,s[_],s[_+1],s[_+2],s[_+3]),o.updateCurvePathMinMax(p,d,f,l,c,s[_],s[_+1],s[_+2],s[_+3],x),l=s[_+2],c=s[_+3],_+=4;break;case Ys.curveTo3:d=l,f=c,l=s[_+2],c=s[_+3],r.bezierCurveTo(s[_],s[_+1],l,c,l,c),o.updateCurvePathMinMax(p,d,f,s[_],s[_+1],l,c,l,c,x),_+=4;break;case Ys.closePath:r.closePath();break}y&&o.updateScalingPathMinMax(p,x),o.setCurrentPoint(l,c)}closePath(){this.ctx.closePath()}stroke(t=!0){const s=this.ctx,n=this.current.strokeColor;s.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&n?.getPattern?(s.save(),s.strokeStyle=n.getPattern(s,this,ei(s),Je.STROKE),this.rescaleAndStroke(!1),s.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),s.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const s=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let o=!1;r&&(s.save(),s.fillStyle=n.getPattern(s,this,ei(s),Je.FILL),o=!0);const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(s.fill("evenodd"),this.pendingEOFill=!1):s.fill()),o&&s.restore(),t&&this.consumePath(l)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=b_}eoClip(){this.pendingClip=im}beginText(){this.current.textMatrix=jm,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,s=this.ctx;if(t===void 0){s.beginPath();return}const n=new Path2D,r=s.getTransform().invertSelf();for(const{transform:o,x:l,y:c,fontSize:d,path:f}of t)n.addPath(f,new DOMMatrix(o).preMultiplySelf(r).translate(l,c).scale(d,-d));s.clip(n),s.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,s){const n=this.commonObjs.get(t),r=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=n.fontMatrix||Gd,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Xt("Invalid font matrix for font "+t),s<0?(s=-s,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=s,n.isType3Font)return;const o=n.loadedName||"sans-serif",l=n.systemFontInfo?.css||`"${o}", ${n.fallbackName}`;let c="normal";n.black?c="900":n.bold&&(c="bold");const d=n.italic?"italic":"normal";let f=s;s<K0?f=K0:s>W0&&(f=W0),this.current.fontSizeScale=s/f,this.ctx.font=`${d} ${c} ${f}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,s){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,s){this.setLeading(-s),this.moveText(t,s)}setTextMatrix(t,s,n,r,o,l){this.current.textMatrix=[t,s,n,r,o,l],this.current.textMatrixScale=Math.hypot(t,s),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#s(t,s,n){const r=new Path2D;return r.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(s)),r}paintChar(t,s,n,r,o){const l=this.ctx,c=this.current,d=c.font,f=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,y=f&Qe.FILL_STROKE_MASK,x=!!(f&Qe.ADD_TO_PATH_FLAG),v=c.patternFill&&!d.missingFile,_=c.patternStroke&&!d.missingFile;let w;if((d.disableFontFace||x||v||_)&&(w=d.getPathGenerator(this.commonObjs,t)),d.disableFontFace||v||_){if(l.save(),l.translate(s,n),l.scale(p,-p),y===Qe.FILL||y===Qe.FILL_STROKE)if(r){const A=l.getTransform();l.setTransform(...r),l.fill(this.#s(w,A,r))}else l.fill(w);if(y===Qe.STROKE||y===Qe.FILL_STROKE)if(o){const A=l.getTransform();l.setTransform(...o),l.stroke(this.#s(w,A,o))}else l.lineWidth/=p,l.stroke(w);l.restore()}else(y===Qe.FILL||y===Qe.FILL_STROKE)&&l.fillText(t,s,n),(y===Qe.STROKE||y===Qe.FILL_STROKE)&&l.strokeText(t,s,n);x&&(this.pendingTextPaths||=[]).push({transform:ye(l),x:s,y:n,fontSize:p,path:w})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const s=t.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<s.length;r+=4)if(s[r]>0&&s[r]<255){n=!0;break}return Yt(this,"isFontSubpixelAAEnabled",n)}showText(t){const s=this.current,n=s.font;if(n.isType3Font)return this.showType3Text(t);const r=s.fontSize;if(r===0)return;const o=this.ctx,l=s.fontSizeScale,c=s.charSpacing,d=s.wordSpacing,f=s.fontDirection,p=s.textHScale*f,y=t.length,x=n.vertical,v=x?1:-1,_=n.defaultVMetrics,w=r*s.fontMatrix[0],A=s.textRenderingMode===Qe.FILL&&!n.disableFontFace&&!s.patternFill;o.save(),o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),f>0?o.scale(p,-1):o.scale(p,1);let S,k;if(s.patternFill){o.save();const F=s.fillColor.getPattern(o,this,ei(o),Je.FILL);S=ye(o),o.restore(),o.fillStyle=F}if(s.patternStroke){o.save();const F=s.strokeColor.getPattern(o,this,ei(o),Je.STROKE);k=ye(o),o.restore(),o.strokeStyle=F}let T=s.lineWidth;const j=s.textMatrixScale;if(j===0||T===0){const F=s.textRenderingMode&Qe.FILL_STROKE_MASK;(F===Qe.STROKE||F===Qe.FILL_STROKE)&&(T=this.getSinglePixelWidth())}else T/=j;if(l!==1&&(o.scale(l,l),T/=l),o.lineWidth=T,n.isInvalidPDFjsFont){const F=[];let R=0;for(const I of t)F.push(I.unicode),R+=I.width;o.fillText(F.join(""),0,0),s.x+=R*w*p,o.restore(),this.compose();return}let D=0,H;for(H=0;H<y;++H){const F=t[H];if(typeof F=="number"){D+=v*F*r/1e3;continue}let R=!1;const I=(F.isSpace?d:0)+c,K=F.fontChar,ct=F.accent;let P,W,N=F.width;if(x){const G=F.vmetric||_,O=-(F.vmetric?G[1]:N*.5)*w,Y=G[2]*w;N=G?-G[0]:N,P=O/l,W=(D+Y)/l}else P=D/l,W=0;if(n.remeasure&&N>0){const G=o.measureText(K).width*1e3/r*l;if(N<G&&this.isFontSubpixelAAEnabled){const O=N/G;R=!0,o.save(),o.scale(O,1),P/=O}else N!==G&&(P+=(N-G)/2e3*r/l)}if(this.contentVisible&&(F.isInFont||n.missingFile)){if(A&&!ct)o.fillText(K,P,W);else if(this.paintChar(K,P,W,S,k),ct){const G=P+r*ct.offset.x/l,O=W-r*ct.offset.y/l;this.paintChar(ct.fontChar,G,O,S,k)}}const st=x?N*w-I*f:N*w+I*f;D+=st,R&&o.restore()}x?s.y-=D:s.x+=D*p,o.restore(),this.compose()}showType3Text(t){const s=this.ctx,n=this.current,r=n.font,o=n.fontSize,l=n.fontDirection,c=r.vertical?1:-1,d=n.charSpacing,f=n.wordSpacing,p=n.textHScale*l,y=n.fontMatrix||Gd,x=t.length,v=n.textRenderingMode===Qe.INVISIBLE;let _,w,A,S;if(!(v||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),s.transform(...n.textMatrix),s.translate(n.x,n.y),s.scale(p,l),_=0;_<x;++_){if(w=t[_],typeof w=="number"){S=c*w*o/1e3,this.ctx.translate(S,0),n.x+=S*p;continue}const k=(w.isSpace?f:0)+d,T=r.charProcOperatorList[w.operatorListId];if(!T){Xt(`Type3 character "${w.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=w,this.save(),s.scale(o,o),s.transform(...y),this.executeOperatorList(T),this.restore()),A=Tt.applyTransform([w.width,0],y)[0]*o+k,s.translate(A,0),n.x+=A*p}s.restore(),this.processingType3=null}}setCharWidth(t,s){}setCharWidthAndBounds(t,s,n,r,o,l){this.ctx.rect(n,r,o-n,l-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let s;if(t[0]==="TilingPattern"){const n=t[1],r=this.baseTransform||ye(this.ctx),o={createCanvasGraphics:l=>new Ca(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};s=new hh(t,n,this.ctx,o,r)}else s=this._getPattern(t[1],t[2]);return s}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,s,n){this.ctx.strokeStyle=this.current.strokeColor=Tt.makeHexColor(t,s,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,s,n){this.ctx.fillStyle=this.current.fillColor=Tt.makeHexColor(t,s,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,s=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=u_(this.getObject(t)),this.cachedPatterns.set(t,n)),s&&(n.matrix=s),n}shadingFill(t){if(!this.contentVisible)return;const s=this.ctx;this.save();const n=this._getPattern(t);s.fillStyle=n.getPattern(s,this,ei(s),Je.SHADING);const r=ei(s);if(r){const{width:o,height:l}=s.canvas,[c,d,f,p]=Tt.getAxialAlignedBoundingBox([0,0,o,l],r);this.ctx.fillRect(c,d,f-c,p-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){de("Should not call beginInlineImage")}beginImageData(){de("Should not call beginImageData")}paintFormXObjectBegin(t,s){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=ye(this.ctx),s)){const n=s[2]-s[0],r=s[3]-s[1];this.ctx.rect(s[0],s[1],n,r),this.current.updateRectMinMax(ye(this.ctx),s),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||Vl("TODO: Support non-isolated groups."),t.knockout&&Xt("Knockout groups not supported.");const n=ye(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=Tt.getAxialAlignedBoundingBox(t.bbox,ye(s));const o=[0,0,s.canvas.width,s.canvas.height];r=Tt.intersect(r,o)||[0,0,0,0];const l=Math.floor(r[0]),c=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-l,1),f=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,f]);let p="groupAt"+this.groupLevel;t.smask&&(p+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(p,d,f),x=y.context;x.translate(-l,-c),x.transform(...n),t.smask?this.smaskStack.push({canvas:y.canvas,context:x,offsetX:l,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(s.setTransform(1,0,0,1,0,0),s.translate(l,c),s.save()),Rr(s,x),this.ctx=x,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=ye(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=Tt.getAxialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],r);this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,s,n,r,o){if(this.#t(),bl(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const l=s[2]-s[0],c=s[3]-s[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=s[0],n[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=l,s[3]=c;const[d,f]=Tt.singularValueDecompose2dScale(ye(this.ctx)),{viewportScale:p}=this,y=Math.ceil(l*this.outputScaleX*p),x=Math.ceil(c*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(y,x);const{canvas:v,context:_}=this.annotationCanvas;this.annotationCanvasMap.set(t,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=_,this.ctx.save(),this.ctx.setTransform(d,0,0,-f,0,c*f),bl(this.ctx)}else bl(this.ctx),this.endPath(),this.ctx.rect(s[0],s[1],l,c),this.ctx.clip(),this.ctx.beginPath()}this.current=new J0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const s=t.count;t=this.getObject(t.data,t),t.count=s;const n=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=p_(t)),r.compiled)){r.compiled(n);return}const o=this._createMaskCanvas(t),l=o.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,o.offsetX,o.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,s,n=0,r=0,o,l){if(!this.contentVisible)return;t=this.getObject(t.data,t);const c=this.ctx;c.save();const d=ye(c);c.transform(s,n,r,o,0,0);const f=this._createMaskCanvas(t);c.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]);for(let p=0,y=l.length;p<y;p+=2){const x=Tt.transform(d,[s,n,r,o,l[p],l[p+1]]),[v,_]=Tt.applyTransform([0,0],x);c.drawImage(f.canvas,v,_)}c.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const s=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const o of t){const{data:l,width:c,height:d,transform:f}=o,p=this.cachedCanvases.getCanvas("maskCanvas",c,d),y=p.context;y.save();const x=this.getObject(l,o);em(y,x),y.globalCompositeOperation="source-in",y.fillStyle=r?n.getPattern(y,this,ei(s),Je.FILL):n,y.fillRect(0,0,c,d),y.restore(),s.save(),s.transform(...f),s.scale(1,-1),yl(s,p.canvas,0,0,c,d,0,-1,1,1),s.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const s=this.getObject(t);if(!s){Xt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(s)}paintImageXObjectRepeat(t,s,n,r){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){Xt("Dependent image isn't ready yet");return}const l=o.width,c=o.height,d=[];for(let f=0,p=r.length;f<p;f+=2)d.push({transform:[s,0,0,n,r[f],r[f+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:s,width:n,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,r),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(s,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const s=t.width,n=t.height,r=this.ctx;if(this.save(),!ts){const{filter:c}=r;c!=="none"&&c!==""&&(r.filter="none")}r.scale(1/s,-1/n);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",s,n).context;tm(d,t),o=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(o,ei(r));r.imageSmoothingEnabled=sm(ye(r),t.interpolate),yl(r,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,s,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,s){if(!this.contentVisible)return;const n=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const o=t.width,l=t.height,d=this.cachedCanvases.getCanvas("inlineImage",o,l).context;tm(d,t),r=this.applyTransferMapsToCanvas(d)}for(const o of s)n.save(),n.transform(...o.transform),n.scale(1,-1),yl(n,r,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,s){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,s){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(s||(this.pendingClip===im?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ye(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const s=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/s}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:s,b:n,c:r,d:o}=this.ctx.getTransform();let l,c;if(n===0&&r===0){const d=Math.abs(s),f=Math.abs(o);if(d===f)if(t===0)l=c=1/d;else{const p=d*t;l=c=p<1?1/p:1}else if(t===0)l=1/d,c=1/f;else{const p=d*t,y=f*t;l=p<1?1/p:1,c=y<1?1/y:1}}else{const d=Math.abs(s*o-n*r),f=Math.hypot(s,n),p=Math.hypot(r,o);if(t===0)l=p/d,c=f/d;else{const y=t*d;l=p>y?p/y:1,c=f>y?f/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:s}=this,{lineWidth:n}=this.current,[r,o]=this.getScaleForStroking();if(s.lineWidth=n||1,r===1&&o===1){s.stroke();return}const l=s.getLineDash();if(t&&s.save(),s.scale(r,o),l.length>0){const c=Math.max(r,o);s.setLineDash(l.map(d=>d/c)),s.lineDashOffset/=c}s.stroke(),t&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const h in Ys)Ca.prototype[h]!==void 0&&(Ca.prototype[Ys[h]]=Ca.prototype[h]);class Ur{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class x_{#t;#e;constructor({parsedData:t,rawData:s}){this.#t=t,this.#e=s}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}getAll(){return ih(this.#t)}has(t){return this.#t.has(t)}}const Aa=Symbol("INTERNAL");class v_{#t=!1;#e=!1;#s=!1;#i=!0;constructor(t,{name:s,intent:n,usage:r,rbGroups:o}){this.#t=!!(t&Es.DISPLAY),this.#e=!!(t&Es.PRINT),this.name=s,this.intent=n,this.usage=r,this.rbGroups=o}get visible(){if(this.#s)return this.#i;if(!this.#i)return!1;const{print:t,view:s}=this.usage;return this.#t?s?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,s,n=!1){t!==Aa&&de("Internal method `_setVisible` called."),this.#s=n,this.#i=s}}class __{#t=null;#e=new Map;#s=null;#i=null;constructor(t,s=Es.DISPLAY){if(this.renderingIntent=s,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const n of t.groups)this.#e.set(n.id,new v_(s,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(Aa,!1);for(const n of t.on)this.#e.get(n)._setVisible(Aa,!0);for(const n of t.off)this.#e.get(n)._setVisible(Aa,!1);this.#s=this.getHash()}}#a(t){const s=t.length;if(s<2)return!0;const n=t[0];for(let r=1;r<s;r++){const o=t[r];let l;if(Array.isArray(o))l=this.#a(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return Xt(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Vl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Xt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const s of t.ids){if(!this.#e.has(s))return Xt(`Optional content group not found: ${s}`),!0;if(this.#e.get(s).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const s of t.ids){if(!this.#e.has(s))return Xt(`Optional content group not found: ${s}`),!0;if(!this.#e.get(s).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const s of t.ids){if(!this.#e.has(s))return Xt(`Optional content group not found: ${s}`),!0;if(!this.#e.get(s).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const s of t.ids){if(!this.#e.has(s))return Xt(`Optional content group not found: ${s}`),!0;if(this.#e.get(s).visible)return!1}return!0}return Xt(`Unknown optional content policy ${t.policy}.`),!0}return Xt(`Unknown group type ${t.type}.`),!0}setVisibility(t,s=!0,n=!0){const r=this.#e.get(t);if(!r){Xt(`Optional content group not found: ${t}`);return}if(n&&s&&r.rbGroups.length)for(const o of r.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(Aa,!1,!0);r._setVisible(Aa,!!s,!0),this.#t=null}setOCGState({state:t,preserveRB:s}){let n;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const o=this.#e.get(r);if(o)switch(n){case"ON":this.setVisibility(r,!0,s);break;case"OFF":this.setVisibility(r,!1,s);break;case"Toggle":this.setVisibility(r,!o.visible,s);break}}this.#t=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?ih(this.#e):null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Dm;for(const[s,n]of this.#e)t.update(`${s}:${n.visible}`);return this.#t=t.hexdigest()}}class w_{constructor(t,{disableRange:s=!1,disableStream:n=!1}){je(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:l,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=c,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!s,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:s}){const n=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});je(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const s=this._rangeReaders.indexOf(t);s>=0&&this._rangeReaders.splice(s,1)}getFullReader(){je(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new S_(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,s){if(s<=this._progressiveDataLength)return null;const n=new A_(this,t,s);return this._pdfDataRangeTransport.requestDataRange(t,s),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class S_{constructor(t,s,n=!1,r=null){this._stream=t,this._done=n||!1,this._filename=rh(r)?r:null,this._queuedChunks=s||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class A_{constructor(t,s,n){this._stream=t,this._begin=s,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function k_(h){let t=!0,s=n("filename\\*","i").exec(h);if(s){s=s[1];let p=c(s);return p=unescape(p),p=d(p),p=f(p),o(p)}if(s=l(h),s){const p=f(s);return o(p)}if(s=n("filename","i").exec(h),s){s=s[1];let p=c(s);return p=f(p),o(p)}function n(p,y){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(p,y){if(p){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const x=new TextDecoder(p,{fatal:!0}),v=Yl(y);y=x.decode(v),t=!1}catch{}}return y}function o(p){return t&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),t&&(p=r("iso-8859-1",p))),p}function l(p){const y=[];let x;const v=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(x=v.exec(p))!==null;){let[,w,A,S]=x;if(w=parseInt(w,10),w in y){if(w===0)break;continue}y[w]=[A,S]}const _=[];for(let w=0;w<y.length&&w in y;++w){let[A,S]=y[w];S=c(S),A&&(S=unescape(S),w===0&&(S=d(S))),_.push(S)}return _.join("")}function c(p){if(p.startsWith('"')){const y=p.slice(1).split('\\"');for(let x=0;x<y.length;++x){const v=y[x].indexOf('"');v!==-1&&(y[x]=y[x].slice(0,v),y.length=x+1),y[x]=y[x].replaceAll(/\\(.)/g,"$1")}p=y.join('"')}return p}function d(p){const y=p.indexOf("'");if(y===-1)return p;const x=p.slice(0,y),_=p.slice(y+1).replace(/^[^']*'/,"");return r(x,_)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,x,v,_){if(v==="q"||v==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,A){return String.fromCharCode(parseInt(A,16))}),r(x,_);try{_=atob(_)}catch{}return r(x,_)})}return""}function Hm(h,t){const s=new Headers;if(!h||!t||typeof t!="object")return s;for(const n in t){const r=t[n];r!==void 0&&s.append(n,r)}return s}function Zl(h){try{return new URL(h).origin}catch{}return null}function Gm({responseHeaders:h,isHttp:t,rangeChunkSize:s,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(h.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*s)||n||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function qm(h){const t=h.get("Content-Disposition");if(t){let s=k_(t);if(s.includes("%"))try{s=decodeURIComponent(s)}catch{}if(rh(s))return s}return null}function Ql(h,t){return h===404||h===0&&t.startsWith("file:")?new qr('Missing PDF "'+t+'".'):new Ml(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h)}function Xm(h){return h===200||h===206}function Vm(h,t,s){return{method:"GET",headers:h,signal:s.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Ym(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(Xt(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class nm{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Hm(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return je(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new E_(this),this._fullRequestReader}getRangeReader(t,s){if(s<=this._progressiveDataLength)return null;const n=new C_(this,t,s);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class E_{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const s=t.source;this._withCredentials=s.withCredentials||!1,this._contentLength=s.length,this._headersCapability=Promise.withResolvers(),this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange;const n=new Headers(t.headers),r=s.url;fetch(r,Vm(n,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Zl(o.url),!Xm(o.status))throw Ql(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:c,suggestedLength:d}=Gm({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=qm(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new on("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:s}=await this._reader.read();return s?{value:t,done:s}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Ym(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class C_{constructor(t,s,n){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${s}-${n-1}`);const l=r.url;fetch(l,Vm(o,this._withCredentials,this._abortController)).then(c=>{const d=Zl(c.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!Xm(c.status))throw Ql(c.status,l);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:s}=await this._reader.read();return s?{value:t,done:s}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Ym(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Rd=200,Dd=206;function T_(h){const t=h.response;return typeof t!="string"?t:Yl(t).buffer}class N_{_responseOrigin=null;constructor({url:t,httpHeaders:s,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Hm(this.isHttp,s),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const s=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:s};s.open("GET",this.url),s.withCredentials=this.withCredentials;for(const[o,l]of this.headers)s.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(s.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Dd):r.expectedStatus=Rd,s.responseType="arraybuffer",je(t.onError,"Expected `onError` callback to be provided."),s.onerror=()=>{t.onError(s.status)},s.onreadystatechange=this.onStateChange.bind(this,n),s.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,s.send(null),n}onProgress(t,s){const n=this.pendingRequests[t];n&&n.onProgress?.(s)}onStateChange(t,s){const n=this.pendingRequests[t];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){n.onError(r.status);return}const o=r.status||Rd;if(!(o===Rd&&n.expectedStatus===Dd)&&o!==n.expectedStatus){n.onError(r.status);return}const c=T_(r);if(o===Dd){const d=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?n.onDone({begin:parseInt(f[1],10),chunk:c}):(Xt('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const s=this.pendingRequests[t].xhr;delete this.pendingRequests[t],s.abort()}}class j_{constructor(t){this._source=t,this._manager=new N_(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const s=this._rangeRequestReaders.indexOf(t);s>=0&&this._rangeRequestReaders.splice(s,1)}getFullReader(){return je(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new M_(this._manager,this._source),this._fullRequestReader}getRangeReader(t,s){const n=new R_(this._manager,t,s);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class M_{constructor(t,s){this._manager=t,this._url=s.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=s.disableRange||!1,this._contentLength=s.length,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,s=this._manager.getRequestXhr(t);this._manager._responseOrigin=Zl(s.responseURL);const n=s.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[d,...f]=c.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=Gm({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=qm(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Ql(t,this._url),this._headersCapability.reject(this._storedError);for(const s of this._requests)s.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class R_{constructor(t,s,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:s,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Zl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const s=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:s,done:!1}):this._queuedChunk=s,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Ql(t,this._url);for(const s of this._requests)s.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const D_=/^[a-z][a-z0-9\-+.]+:/i;function O_(h){if(D_.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}class L_{constructor(t){this.source=t,this.url=O_(t.url),je(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return je(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new z_(this),this._fullRequestReader}getRangeReader(t,s){if(s<=this._progressiveDataLength)return null;const n=new P_(this,t,s);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class z_{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const s=t.source;this._contentLength=s.length,this._loaded=0,this._filename=null,this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new qr(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",s=>{this._error(s)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new on("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class P_{constructor(t,s,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:s,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",s=>{this._error(s)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const F_=1e5,ps=30,B_=.8;class as{#t=Promise.withResolvers();#e=null;#s=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#n=null;#l=0;#o=0;#u=null;#c=null;#h=0;#d=0;#f=Object.create(null);#r=[];#g=null;#m=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#_=new WeakMap;static#S=null;static#k=new Set;constructor({textContentSource:t,container:s,viewport:n}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#c=s,this.#d=n.scale*(globalThis.devicePixelRatio||1),this.#h=n.rotation,this.#n={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:l,pageY:c}=n.rawDims;this.#y=[1,0,0,-1,-l,c+o],this.#o=r,this.#l=o,as.#M(),Dn(s,n),this.#t.promise.finally(()=>{as.#k.delete(this),this.#n=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:s}=rs.platform;return Yt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&s?"Calibri, ":""}sans-serif`],["monospace",`${t&&s?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#u.read().then(({value:s,done:n})=>{if(n){this.#t.resolve();return}this.#a??=s.lang,Object.assign(this.#f,s.styles),this.#C(s.items),t()},this.#t.reject)};return this.#u=this.#g.getReader(),as.#k.add(this),t(),this.#t.promise}update({viewport:t,onBefore:s=null}){const n=t.scale*(globalThis.devicePixelRatio||1),r=t.rotation;if(r!==this.#h&&(s?.(),this.#h=r,Dn(this.#c,{rotation:r})),n!==this.#d){s?.(),this.#d=n;const o={div:null,properties:null,ctx:as.#T(this.#a)};for(const l of this.#m)o.properties=this.#p.get(l),o.div=l,this.#w(o)}}cancel(){const t=new on("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#t.reject(t)}get textDivs(){return this.#m}get textContentItemsStr(){return this.#r}#C(t){if(this.#s)return;this.#n.ctx??=as.#T(this.#a);const s=this.#m,n=this.#r;for(const r of t){if(s.length>F_){Xt("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id!==null&&this.#e.setAttribute("id",`${r.id}`),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(r.str),this.#N(r)}}#N(t){const s=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#m.push(s);const r=Tt.transform(this.#y,t.transform);let o=Math.atan2(r[1],r[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let c=this.#i&&l.fontSubstitution||l.fontFamily;c=as.fontFamilyMap.get(c)||c;const d=Math.hypot(r[2],r[3]),f=d*as.#O(c,this.#a);let p,y;o===0?(p=r[4],y=r[5]-f):(p=r[4]+f*Math.sin(o),y=r[5]-f*Math.cos(o));const x="calc(var(--scale-factor)*",v=s.style;this.#e===this.#c?(v.left=`${(100*p/this.#o).toFixed(2)}%`,v.top=`${(100*y/this.#l).toFixed(2)}%`):(v.left=`${x}${p.toFixed(2)}px)`,v.top=`${x}${y.toFixed(2)}px)`),v.fontSize=`${x}${(as.#S*d).toFixed(2)}px)`,v.fontFamily=c,n.fontSize=d,s.setAttribute("role","presentation"),s.textContent=t.str,s.dir=t.dir,this.#i&&(s.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let _=!1;if(t.str.length>1)_=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),A=Math.abs(t.transform[3]);w!==A&&Math.max(w,A)/Math.min(w,A)>1.5&&(_=!0)}if(_&&(n.canvasWidth=l.vertical?t.height:t.width),this.#p.set(s,n),this.#n.div=s,this.#n.properties=n,this.#w(this.#n),n.hasText&&this.#e.append(s),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#w(t){const{div:s,properties:n,ctx:r}=t,{style:o}=s;let l="";if(as.#S>1&&(l=`scale(${1/as.#S})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=o,{canvasWidth:d,fontSize:f}=n;as.#E(r,f*this.#d,c);const{width:p}=r.measureText(s.textContent);p>0&&(l=`scaleX(${d*this.#d/p}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#k.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#T(t=null){let s=this.#b.get(t||="");if(!s){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),s=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,s),this.#_.set(s,{size:0,family:""})}return s}static#E(t,s,n){const r=this.#_.get(t);s===r.size&&n===r.family||(t.font=`${s}px ${n}`,r.size=s,r.family=n)}static#M(){if(this.#S!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#S=t.getBoundingClientRect().height,t.remove()}static#O(t,s){const n=this.#v.get(t);if(n)return n;const r=this.#T(s);r.canvas.width=r.canvas.height=ps,this.#E(r,ps,t);const o=r.measureText("");let l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);if(l){const p=l/(l+c);return this.#v.set(t,p),r.canvas.width=r.canvas.height=0,p}r.strokeStyle="red",r.clearRect(0,0,ps,ps),r.strokeText("g",0,0);let d=r.getImageData(0,0,ps,ps).data;c=0;for(let p=d.length-1-3;p>=0;p-=4)if(d[p]>0){c=Math.ceil(p/4/ps);break}r.clearRect(0,0,ps,ps),r.strokeText("A",0,ps),d=r.getImageData(0,0,ps,ps).data,l=0;for(let p=0,y=d.length;p<y;p+=4)if(d[p]>0){l=ps-Math.floor(p/4/ps);break}r.canvas.width=r.canvas.height=0;const f=l?l/(l+c):B_;return this.#v.set(t,f),f}}class Xr{static textContent(t){const s=[],n={items:s,styles:Object.create(null)};function r(o){if(!o)return;let l=null;const c=o.name;if(c==="#text")l=o.value;else if(Xr.shouldBuildText(c))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&s.push({str:l}),!!o.children)for(const d of o.children)r(d)}return r(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const I_=65536,U_=100,H_=5e3,G_=ts?i_:t_,q_=ts?n_:Pm,X_=ts?s_:e_,V_=ts?a_:Im;function Y_(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new fh,{docId:s}=t,n=h.url?$_(h.url):null,r=h.data?K_(h.data):null,o=h.httpHeaders||null,l=h.withCredentials===!0,c=h.password??null,d=h.range instanceof $m?h.range:null,f=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:I_;let p=h.worker instanceof Ta?h.worker:null;const y=h.verbosity,x=typeof h.docBaseUrl=="string"&&!Kl(h.docBaseUrl)?h.docBaseUrl:null,v=typeof h.cMapUrl=="string"?h.cMapUrl:null,_=h.cMapPacked!==!1,w=h.CMapReaderFactory||q_,A=typeof h.standardFontDataUrl=="string"?h.standardFontDataUrl:null,S=h.StandardFontDataFactory||V_,k=h.stopAtErrors!==!0,T=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,j=h.isEvalSupported!==!1,D=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!ts,H=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!ts&&(rs.platform.isFirefox||!globalThis.chrome),F=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,R=typeof h.disableFontFace=="boolean"?h.disableFontFace:ts,I=h.fontExtraProperties===!0,K=h.enableXfa===!0,ct=h.ownerDocument||globalThis.document,P=h.disableRange===!0,W=h.disableStream===!0,N=h.disableAutoFetch===!0,st=h.pdfBug===!0,G=h.CanvasFactory||G_,O=h.FilterFactory||X_,Y=h.enableHWA===!0,X=d?d.length:h.length??NaN,dt=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!ts&&!R,M=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:w===Pm&&S===Im&&v&&A&&Pr(v,document.baseURI)&&Pr(A,document.baseURI),B=null;M1(y);const J={canvasFactory:new G({ownerDocument:ct,enableHWA:Y}),filterFactory:new O({docId:s,ownerDocument:ct}),cMapReaderFactory:M?null:new w({baseUrl:v,isCompressed:_}),standardFontDataFactory:M?null:new S({baseUrl:A})};if(!p){const _t={verbosity:y,port:Ur.workerPort};p=_t.port?Ta.fromPort(_t):new Ta(_t),t._worker=p}const ot={docId:s,apiVersion:"4.10.38",data:r,password:c,disableAutoFetch:N,rangeChunkSize:f,length:X,docBaseUrl:x,enableXfa:K,evaluatorOptions:{maxImageSize:T,disableFontFace:R,ignoreErrors:k,isEvalSupported:j,isOffscreenCanvasSupported:D,isImageDecoderSupported:H,canvasMaxAreaInBytes:F,fontExtraProperties:I,useSystemFonts:dt,cMapUrl:M?v:null,standardFontDataUrl:M?A:null}},at={disableFontFace:R,fontExtraProperties:I,ownerDocument:ct,pdfBug:st,styleElement:B,loadingParams:{disableAutoFetch:N,enableXfa:K}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const _t=p.messageHandler.sendWithPromise("GetDocRequest",ot,r?[r.buffer]:null);let vt;if(d)vt=new w_(d,{disableRange:P,disableStream:W});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Et;if(ts)if(Pr(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Et=nm}else Et=L_;else Et=Pr(n)?nm:j_;vt=new Et({url:n,length:X,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:P,disableStream:W})}return _t.then(Et=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const lt=new Fr(s,Et,p.port),St=new J_(lt,t,vt,at,J);t._transport=St,lt.send("Ready",null)})}).catch(t._capability.reject),t}function $_(h){if(h instanceof URL)return h.href;try{return new URL(h,window.location).href}catch{if(ts&&typeof h=="string")return h}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function K_(h){if(ts&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return Yl(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h?.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function am(h){return typeof h=="object"&&Number.isInteger(h?.num)&&h.num>=0&&Number.isInteger(h?.gen)&&h.gen>=0}class fh{static#t=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${fh.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}}class $m{constructor(t,s,n=!1,r=null){this.length=t,this.initialData=s,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,s){for(const n of this._rangeListeners)n(t,s)}onDataProgress(t,s){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,s)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const s of this._progressiveReadListeners)s(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,s){de("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class W_{constructor(t,s){this._pdfInfo=t,this._transport=s}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Yt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:s}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(s)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Z_{#t=null;#e=!1;constructor(t,s,n,r=!1){this._pageIndex=t,this._pageInfo=s,this._transport=n,this._stats=r?new X0:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new Km,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:s=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}={}){return new $r({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:s,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:s}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,s)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Yt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:s,intent:n="display",annotationMode:r=en.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:p=null,isEditing:y=!1}){this._stats?.time("Overall");const x=this._transport.getRenderingIntent(n,r,p,y),{renderingIntent:v,cacheKey:_}=x;this.#e=!1,this.#i(),c||=this._transport.getOptionalContentConfig(v);let w=this._intentStates.get(_);w||(w=Object.create(null),this._intentStates.set(_,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const A=!!(v&Es.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(x));const S=j=>{w.renderTasks.delete(k),(this._maybeCleanupAfterRender||A)&&(this.#e=!0),this.#s(!A),j?(k.capability.reject(j),this._abortOperatorList({intentState:w,reason:j instanceof Error?j:new Error(j)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new ka({callback:S,params:{canvasContext:t,viewport:s,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:f});(w.renderTasks||=new Set).add(k);const T=k.task;return Promise.all([w.displayReadyCapability.promise,c]).then(([j,D])=>{if(this.destroyed){S();return}if(this._stats?.time("Rendering"),!(D.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:j,optionalContentConfig:D}),k.operatorListChanged()}).catch(S),T}getOperatorList({intent:t="display",annotationMode:s=en.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){function o(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,s,n,r,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:s=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:s===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Xr.textContent(n));const s=this.streamTextContent(t);return new Promise(function(n,r){function o(){l.read().then(function({value:d,done:f}){if(f){n(c);return}c.lang??=d.lang,Object.assign(c.styles,d.styles),c.items.push(...d.items),o()},r)}const l=s.getReader(),c={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const s of this._intentStates.values())if(this._abortOperatorList({intentState:s,reason:new Error("Page was destroyed."),force:!0}),!s.opListReadCapability)for(const n of s.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,this.#i(),Promise.all(t)}cleanup(t=!1){this.#e=!0;const s=this.#s(!1);return t&&s&&(this._stats&&=new X0),s}#s(t=!1){if(this.#i(),!this.#e||this.destroyed)return!1;if(t)return this.#t=setTimeout(()=>{this.#t=null,this.#s(!1)},H_),!1;for(const{renderTasks:s,operatorList:n}of this._intentStates.values())if(s.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#i(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(t,s){const n=this._intentStates.get(s);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,s){for(let n=0,r=t.length;n<r;n++)s.operatorList.fnArray.push(t.fnArray[n]),s.operatorList.argsArray.push(t.argsArray[n]);s.operatorList.lastChunk=t.lastChunk,s.operatorList.separateAnnots=t.separateAnnots;for(const n of s.renderTasks)n.operatorListChanged();t.lastChunk&&this.#s(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:s,annotationStorageSerializable:n,modifiedIds:r}){const{map:o,transfer:l}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:s,annotationStorage:o,modifiedIds:r},l).getReader(),f=this._intentStates.get(s);f.streamReader=d;const p=()=>{d.read().then(({value:y,done:x})=>{if(x){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),p())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const x of f.renderTasks)x.operatorListChanged();this.#s(!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};p()}_abortOperatorList({intentState:t,reason:s,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(s instanceof ah){let r=U_;s.extraDelay>0&&s.extraDelay<1e3&&(r+=s.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:s,force:!0})},r);return}}if(t.streamReader.cancel(new on(s.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}class Q_{#t=new Map;#e=Promise.resolve();postMessage(t,s){const n={data:structuredClone(t,s?{transfer:s}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,n)})}addEventListener(t,s,n=null){let r=null;if(n?.signal instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Xt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,s);r=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(s,r)}removeEventListener(t,s){this.#t.get(s)?.(),this.#t.delete(s)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}var zl,Mn,Rn,Na,kl,ja,El;const me=class me{constructor({name:t=null,port:s=null,verbosity:n=R1()}={}){Sa(this,Na);if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,s){if(Vs(me,Rn)?.has(s))throw new Error("Cannot use more than one PDFWorker per port.");(Vs(me,Rn)||Tr(me,Rn,new WeakMap)).set(s,this),this._initializeFromPort(s);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Fr("main","worker",t),this._messageHandler.on("ready",function(){}),fl(this,Na,kl).call(this)}_initialize(){if(Vs(me,Mn)||Vs(me,ja,El)){this._setupFakeWorker();return}let{workerSrc:t}=me;try{me._isSameOrigin(window.location.href,t)||(t=me._createCDNWrapper(new URL(t,window.location).href));const s=new Worker(t,{type:"module"}),n=new Fr("main","worker",s),r=()=>{o.abort(),n.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;s.addEventListener("error",()=>{this._webWorker||r()},{signal:o.signal}),n.on("test",c=>{if(o.abort(),this.destroyed||!c){r();return}this._messageHandler=n,this._port=s,this._webWorker=s,fl(this,Na,kl).call(this)}),n.on("ready",c=>{if(o.abort(),this.destroyed){r();return}try{l()}catch{this._setupFakeWorker()}});const l=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};l();return}catch{Vl("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Vs(me,Mn)||(Xt("Setting up fake worker."),Tr(me,Mn,!0)),me._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const s=new Q_;this._port=s;const n=`fake${v0(me,zl)._++}`,r=new Fr(n+"_worker",n,s);t.setup(r,s),this._messageHandler=new Fr(n,n+"_worker",s),fl(this,Na,kl).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,Vs(me,Rn)?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const s=Vs(this,Rn)?.get(t.port);if(s){if(s._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return s}return new me(t)}static get workerSrc(){if(Ur.workerSrc)return Ur.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Yt(this,"_setupFakeWorkerGlobal",(async()=>Vs(this,ja,El)?Vs(this,ja,El):(await import(this.workerSrc)).WorkerMessageHandler)())}};zl=new WeakMap,Mn=new WeakMap,Rn=new WeakMap,Na=new WeakSet,kl=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},ja=new WeakSet,El=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Sa(me,ja),Sa(me,zl,0),Sa(me,Mn,!1),Sa(me,Rn),ts&&(Tr(me,Mn,!0),Ur.workerSrc||="./pdf.worker.mjs"),me._isSameOrigin=(t,s)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const r=new URL(s,n);return n.origin===r.origin},me._createCDNWrapper=t=>{const s=`await import("${t}");`;return URL.createObjectURL(new Blob([s],{type:"text/javascript"}))};let Ta=me;class J_{#t=new Map;#e=new Map;#s=new Map;#i=new Map;#a=null;constructor(t,s,n,r,o){this.messageHandler=t,this.loadingTask=s,this.commonObjs=new Km,this.fontLoader=new Q1({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#n(t,s=null){const n=this.#t.get(t);if(n)return n;const r=this.messageHandler.sendWithPromise(t,s);return this.#t.set(t,r),r}get annotationStorage(){return Yt(this,"annotationStorage",new uh)}getRenderingIntent(t,s=en.ENABLE,n=null,r=!1,o=!1){let l=Es.DISPLAY,c=Vd;switch(t){case"any":l=Es.ANY;break;case"display":break;case"print":l=Es.PRINT;break;default:Xt(`getRenderingIntent - invalid intent: ${t}`)}const d=l&Es.PRINT&&n instanceof Om?n:this.annotationStorage;switch(s){case en.DISABLE:l+=Es.ANNOTATIONS_DISABLE;break;case en.ENABLE:break;case en.ENABLE_FORMS:l+=Es.ANNOTATIONS_FORMS;break;case en.ENABLE_STORAGE:l+=Es.ANNOTATIONS_STORAGE,c=d.serializable;break;default:Xt(`getRenderingIntent - invalid annotationMode: ${s}`)}r&&(l+=Es.IS_EDITING),o&&(l+=Es.OPLIST);const{ids:f,hash:p}=d.modifiedIds,y=[l,c.hash,p];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:c,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#e.values())t.push(n._destroy());this.#e.clear(),this.#s.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const s=this.messageHandler.sendWithPromise("Terminate",null);return t.push(s),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),as.cleanup(),this._networkStream?.cancelAllRequests(new on("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:s}=this;t.on("GetReader",(n,r)=>{je(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){r.close();return}je(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:l}=this._fullReader;return(!r||!o)&&(this._lastProgress&&s.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{s.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(n,r)=>{je(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:l,done:c}){if(c){r.close();return}je(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{o.cancel(l),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,s._capability.resolve(new W_(n,this))}),t.on("DocException",n=>{s._capability.reject(ms(n))}),t.on("PasswordRequest",n=>{this.#a=Promise.withResolvers();try{if(!s.onPassword)throw ms(n);const r=o=>{o instanceof Error?this.#a.reject(o):this.#a.resolve({password:o})};s.onPassword(r,n.code)}catch(r){this.#a.reject(r)}return this.#a.promise}),t.on("DataLoaded",n=>{s.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#e.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,r,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":const{disableFontFace:l,fontExtraProperties:c,pdfBug:d}=this._params;if("error"in o){const x=o.error;Xt(`Error during font loading: ${x}`),this.commonObjs.resolve(n,x);break}const f=d&&globalThis.FontInspector?.enabled?(x,v)=>globalThis.FontInspector.fontAdded(x,v):null,p=new J1(o,{disableFontFace:l,fontExtraProperties:c,inspectFont:f});this.fontLoader.bind(p).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c&&p.data&&(p.data=null),this.commonObjs.resolve(n,p)});break;case"CopyLocalImage":const{imageRef:y}=o;je(y,"The imageRef must be defined.");for(const x of this.#e.values())for(const[,v]of x.objs)if(v?.ref===y)return v.dataLen?(this.commonObjs.resolve(n,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([n,r,o,l])=>{if(this.destroyed)return;const c=this.#e.get(r);if(!c.objs.has(n)){if(c._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":c.objs.resolve(n,l),l?.dataLen>C1&&(c._maybeCleanupAfterRender=!0);break;case"Pattern":c.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{this.destroyed||s.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Xt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:s}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},s).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const s=t-1,n=this.#s.get(s);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#i.set(o.refStr,t);const l=new Z_(s,o,this,this._params.pdfBug);return this.#e.set(s,l),l});return this.#s.set(s,r),r}getPageIndex(t){return am(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,s){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:s})}getFieldObjects(){return this.#n("GetFieldObjects")}hasJSActions(){return this.#n("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#n("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#n("GetOptionalContentConfig").then(s=>new __(s,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",s=this.#t.get(t);if(s)return s;const n=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new x_(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const s of this.#e.values())if(!s.cleanup())throw new Error(`startCleanup: Page ${s.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),as.cleanup()}}cachedPageNumber(t){if(!am(t))return null;const s=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(s)??null}}const Dr=Symbol("INITIAL_DATA");class Km{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Dr}}get(t,s=null){if(s){const r=this.#e(t);return r.promise.then(()=>s(r.data)),null}const n=this.#t[t];if(!n||n.data===Dr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const s=this.#t[t];return!!s&&s.data!==Dr}delete(t){const s=this.#t[t];return!s||s.data===Dr?!1:(delete this.#t[t],!0)}resolve(t,s=null){const n=this.#e(t);n.data=s,n.resolve()}clear(){for(const t in this.#t){const{data:s}=this.#t[t];s?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:s}=this.#t[t];s!==Dr&&(yield[t,s])}}}class tw{#t=null;constructor(t){this.#t=t,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:s}=this.#t;return t.form||t.canvas&&s?.size>0}}class ka{#t=null;static#e=new WeakSet;constructor({callback:t,params:s,objs:n,commonObjs:r,annotationCanvasMap:o,operatorList:l,pageIndex:c,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:y=!1,pageColors:x=null}){this.callback=t,this.params=s,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=x,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new tw(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=s.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:s}){if(this.cancelled)return;if(this._canvas){if(ka.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ka.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:o,background:l}=this.params;this.gfx=new Ca(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:s},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,s=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ka.#e.delete(this._canvas),this.callback(t||new ah(`Rendering cancelled, page ${this._pageIndex+1}`,s))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ka.#e.delete(this._canvas),this.callback())))}}const ew="4.10.38",sw="f9bea397f";function rm(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function Or(h){return Math.max(0,Math.min(255,255*h))}class om{static CMYK_G([t,s,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*s+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Or(t),[t,t,t]}static G_HTML([t]){const s=rm(t);return`#${s}${s}${s}`}static RGB_G([t,s,n]){return["G",.3*t+.59*s+.11*n]}static RGB_rgb(t){return t.map(Or)}static RGB_HTML(t){return`#${t.map(rm).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,s,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,s+r)]}static CMYK_rgb([t,s,n,r]){return[Or(1-Math.min(1,t+r)),Or(1-Math.min(1,n+r)),Or(1-Math.min(1,s+r))]}static CMYK_HTML(t){const s=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(s)}static RGB_CMYK([t,s,n]){const r=1-t,o=1-s,l=1-n,c=Math.min(r,o,l);return["CMYK",r,o,l,c]}}class iw{create(t,s,n=!1){if(t<=0||s<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${s}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${s}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){de("Abstract method `_createSVG` called.")}}class gh extends iw{_createSVG(t){return document.createElementNS(Ei,t)}}class Wm{static setupStorage(t,s,n,r,o){const l=r.getValue(s,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",c=>{r.setValue(s,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",c=>{r.setValue(s,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",c=>{r.setValue(s,{value:c.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const c of n.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const d=c.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(s,{value:f})});break}}static setAttributes({html:t,element:s,storage:n=null,intent:r,linkService:o}){const{attributes:l}=s,c=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!c||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}c&&o.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,s,n)}static render(t){const s=t.annotationStorage,n=t.linkService,r=t.xfaHtml,o=t.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:o,linkService:n});const c=o!=="richText",d=t.div;if(d.append(l),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}c&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);l.append(y),c&&Xr.shouldBuildText(r.name)&&f.push(y)}return{textDivs:f}}const p=[[r,-1,l]];for(;p.length>0;){const[y,x,v]=p.at(-1);if(x+1===y.children.length){p.pop();continue}const _=y.children[++p.at(-1)[1]];if(_===null)continue;const{name:w}=_;if(w==="#text"){const S=document.createTextNode(_.value);f.push(S),v.append(S);continue}const A=_?.attributes?.xmlns?document.createElementNS(_.attributes.xmlns,w):document.createElement(w);if(v.append(A),_.attributes&&this.setAttributes({html:A,element:_,storage:s,intent:o,linkService:n}),_.children?.length>0)p.push([_,-1,A]);else if(_.value){const S=document.createTextNode(_.value);c&&Xr.shouldBuildText(w)&&f.push(S),A.append(S)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const s=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=s,t.div.hidden=!1}}const Wr=1e3,nw=9,On=new WeakSet;function an(h){return{width:h[2]-h[0],height:h[3]-h[1]}}class aw{static create(t){switch(t.data.annotationType){case Re.LINK:return new Zm(t);case Re.TEXT:return new rw(t);case Re.WIDGET:switch(t.data.fieldType){case"Tx":return new ow(t);case"Btn":return t.data.radioButton?new Qm(t):t.data.checkBox?new cw(t):new uw(t);case"Ch":return new dw(t);case"Sig":return new lw(t)}return new zn(t);case Re.POPUP:return new $d(t);case Re.FREETEXT:return new Jm(t);case Re.LINE:return new fw(t);case Re.SQUARE:return new gw(t);case Re.CIRCLE:return new pw(t);case Re.POLYLINE:return new ty(t);case Re.CARET:return new yw(t);case Re.INK:return new ph(t);case Re.POLYGON:return new mw(t);case Re.HIGHLIGHT:return new ey(t);case Re.UNDERLINE:return new bw(t);case Re.SQUIGGLY:return new xw(t);case Re.STRIKEOUT:return new vw(t);case Re.STAMP:return new sy(t);case Re.FILEATTACHMENT:return new _w(t);default:return new Ae(t)}}}class Ae{#t=null;#e=!1;#s=null;constructor(t,{isRenderable:s=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=s,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,s&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:s,richText:n}){return!!(t?.str||s?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Ae._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:s}=t;s&&this.#i(s),this.#s?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#s?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:s},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:c,pageY:d}}}}=this;n?.splice(0,4,...t);const{width:f,height:p}=an(t);s.left=`${100*(t[0]-c)/o}%`,s.top=`${100*(l-t[3]+d)/l}%`,r===0?(s.width=`${100*f/o}%`,s.height=`${100*p/l}%`):this.setRotation(r)}_createContainer(t){const{data:s,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",s.id),this instanceof zn||(o.tabIndex=Wr);const{style:l}=o;if(l.zIndex=this.parent.zIndex++,s.alternativeText&&(o.title=s.alternativeText),s.noRotate&&o.classList.add("norotate"),!s.rect||this instanceof $d){const{rotation:w}=s;return!s.hasOwnCanvas&&w!==0&&this.setRotation(w,o),o}const{width:c,height:d}=an(s.rect);if(!t&&s.borderStyle.width>0){l.borderWidth=`${s.borderStyle.width}px`;const w=s.borderStyle.horizontalCornerRadius,A=s.borderStyle.verticalCornerRadius;if(w>0||A>0){const k=`calc(${w}px * var(--scale-factor)) / calc(${A}px * var(--scale-factor))`;l.borderRadius=k}else if(this instanceof Qm){const k=`calc(${c}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;l.borderRadius=k}switch(s.borderStyle.style){case Mr.SOLID:l.borderStyle="solid";break;case Mr.DASHED:l.borderStyle="dashed";break;case Mr.BEVELED:Xt("Unimplemented border style: beveled");break;case Mr.INSET:Xt("Unimplemented border style: inset");break;case Mr.UNDERLINE:l.borderBottomStyle="solid";break}const S=s.borderColor||null;S?(this.#e=!0,l.borderColor=Tt.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):l.borderWidth=0}const f=Tt.normalizeRect([s.rect[0],n.view[3]-s.rect[1]+n.view[1],s.rect[2],n.view[3]-s.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:y,pageX:x,pageY:v}=r.rawDims;l.left=`${100*(f[0]-x)/p}%`,l.top=`${100*(f[1]-v)/y}%`;const{rotation:_}=s;return s.hasOwnCanvas||_===0?(l.width=`${100*c/p}%`,l.height=`${100*d/y}%`):this.setRotation(_,o),o}setRotation(t,s=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:o,height:l}=an(this.data.rect);let c,d;t%180===0?(c=100*o/n,d=100*l/r):(c=100*l/n,d=100*o/r),s.style.width=`${c}%`,s.style.height=`${d}%`,s.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(s,n,r)=>{const o=r.detail[s],l=o[0],c=o.slice(1);r.target.style[n]=om[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:om[`${l}_rgb`](c)})};return Yt(this,"_commonActions",{display:s=>{const{display:n}=s.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:s=>{this.annotationStorage.setValue(this.data.id,{noPrint:!s.detail.print})},hidden:s=>{const{hidden:n}=s.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:s=>{setTimeout(()=>s.target.focus({preventScroll:!1}),0)},userName:s=>{s.target.title=s.detail.userName},readonly:s=>{s.target.disabled=s.detail.readonly},required:s=>{this._setRequired(s.target,s.detail.required)},bgColor:s=>{t("bgColor","backgroundColor",s)},fillColor:s=>{t("fillColor","backgroundColor",s)},fgColor:s=>{t("fgColor","color",s)},textColor:s=>{t("textColor","color",s)},borderColor:s=>{t("borderColor","borderColor",s)},strokeColor:s=>{t("strokeColor","borderColor",s)},rotation:s=>{const n=s.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,s){const n=this._commonActions;for(const r of Object.keys(s.detail))(t[r]||n[r])?.(s)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const s=this.annotationStorage.getRawValue(this.data.id);if(!s)return;const n=this._commonActions;for(const[r,o]of Object.entries(s)){const l=n[r];if(l){const c={detail:{[r]:o},target:t};l(c),delete s[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[s,n,r,o]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,A,S,k]=t.subarray(2,6);if(r===w&&o===A&&s===S&&n===k)return}const{style:l}=this.container;let c;if(this.#e){const{borderColor:w,borderWidth:A}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const d=r-s,f=o-n,{svgFactory:p}=this,y=p.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const x=p.createElement("defs");y.append(x);const v=p.createElement("clipPath"),_=`clippath_${this.data.id}`;v.setAttribute("id",_),v.setAttribute("clipPathUnits","objectBoundingBox"),x.append(v);for(let w=2,A=t.length;w<A;w+=8){const S=t[w],k=t[w+1],T=t[w+2],j=t[w+3],D=p.createElement("rect"),H=(T-s)/d,F=(o-k)/f,R=(S-T)/d,I=(k-j)/f;D.setAttribute("x",H),D.setAttribute("y",F),D.setAttribute("width",R),D.setAttribute("height",I),v.append(D),c?.push(`<rect vector-effect="non-scaling-stroke" x="${H}" y="${F}" width="${R}" height="${I}"/>`)}this.#e&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(y),this.container.style.clipPath=`url(#${_})`}_createPopup(){const{data:t}=this,s=this.#s=new $d({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(s.render())}render(){de("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,s=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:l,exportValues:c}of r){if(o===-1||l===s)continue;const d=typeof c=="string"?c:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!On.has(f)){Xt(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:d,domElement:f})}return n}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,l=r.getAttribute("data-element-id");l!==s&&On.has(r)&&n.push({id:l,exportValue:o,domElement:r})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const s of t)s.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:s}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:s})})}}class Zm extends Ae{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!s?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let r=!1;return t.url?(s.addLinkAttributes(n,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(n,t.action),r=!0):t.attachment?(this.#e(n,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(this.#s(n,t.setOCGState),r=!0):t.dest?(this._bindLink(n,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),r=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&this.#t()}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),this.#t()}#e(t,s,n=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(s.content,s.filename,n),!1),this.#t()}#s(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),this.#t()}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=n.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,s){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Xt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:r,refs:o,include:l}=s,c=[];if(r.length!==0||o.length!==0){const p=new Set(o);for(const y of r){const x=this._fieldObjects[y]||[];for(const{id:v}of x)p.add(v)}for(const y of Object.values(this._fieldObjects))for(const x of y)p.has(x.id)===l&&c.push(x)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const d=this.annotationStorage,f=[];for(const p of c){const{id:y}=p;switch(f.push(y),p.type){case"text":{const v=p.defaultValue||"";d.setValue(y,{value:v});break}case"checkbox":case"radiobutton":{const v=p.defaultValue===p.exportValues;d.setValue(y,{value:v});break}case"combobox":case"listbox":{const v=p.defaultValue||"";d.setValue(y,{value:v});break}default:continue}const x=document.querySelector(`[data-element-id="${y}"]`);if(x){if(!On.has(x)){Xt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class rw extends Ae{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class zn extends Ae{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return rs.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,s,n,r,o){n.includes("mouse")?t.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{if(n==="blur"){if(!s.focused||!l.relatedTarget)return;s.focused=!1}else if(n==="focus"){if(s.focused)return;s.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l)}})})}_setEventListeners(t,s,n,r){for(const[o,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(s||={focused:!1}),this._setEventListener(t,s,o,l,r),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,s,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,s,"focus","Focus",null))}_setBackgroundColor(t){const s=this.data.backgroundColor||null;t.style.backgroundColor=s===null?"transparent":Tt.makeHexColor(s[0],s[1],s[2])}_setTextStyle(t){const s=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||nw,o=t.style;let l;const c=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c),p=Math.round(f/(Cd*r))||1,y=f/p;l=Math.min(r,d(y/Cd))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(r,d(f/Cd))}o.fontSize=`calc(${l}px * var(--scale-factor))`,o.color=Tt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=s[this.data.textAlignment])}_setRequired(t,s){s?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",s)}}class ow extends zn{constructor(t){const s=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:s})}setPropertyOnSiblings(t,s,n,r){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[s]=n),o.setValue(l.id,{[r]:n})}render(){const t=this.annotationStorage,s=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const r=t.getValue(s,{value:this.data.fieldValue});let o=r.value||"";const l=t.getValue(s,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let c=r.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",c??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),On.add(n),n.setAttribute("data-element-id",s),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Wr,this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",p=>{t.setValue(s,{value:p.target.value}),this.setPropertyOnSiblings(n,"value",p.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",p=>{const y=this.data.defaultFieldValue??"";n.value=d.userValue=y,d.formattedValue=null});let f=p=>{const{formattedValue:y}=d;y!=null&&(p.target.value=y),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",y=>{if(d.focused)return;const{target:x}=y;d.userValue&&(x.value=d.userValue),d.lastCommittedValue=x.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const x={value(v){d.userValue=v.detail.value??"",t.setValue(s,{value:d.userValue.toString()}),v.target.value=d.userValue},formattedValue(v){const{formattedValue:_}=v.detail;d.formattedValue=_,_!=null&&v.target!==document.activeElement&&(v.target.value=_),t.setValue(s,{formattedValue:_})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{const{charLimit:_}=v.detail,{target:w}=v;if(_===0){w.removeAttribute("maxLength");return}w.setAttribute("maxLength",_);let A=d.userValue;!A||A.length<=_||(A=A.slice(0,_),w.value=d.userValue=A,t.setValue(s,{value:A}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:w.selectionStart,selEnd:w.selectionEnd}}))}};this._dispatchEventFromSandbox(x,y)}),n.addEventListener("keydown",y=>{d.commitKey=1;let x=-1;if(y.key==="Escape"?x=0:y.key==="Enter"&&!this.data.multiLine?x=2:y.key==="Tab"&&(d.commitKey=3),x===-1)return;const{value:v}=y.target;d.lastCommittedValue!==v&&(d.lastCommittedValue=v,d.userValue=v,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:v,willCommit:!0,commitKey:x,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const p=f;f=null,n.addEventListener("blur",y=>{if(!d.focused||!y.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{value:x}=y.target;d.userValue=x,d.lastCommittedValue!==x&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:x,willCommit:!0,commitKey:d.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}),p(y)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",y=>{d.lastCommittedValue=null;const{data:x,target:v}=y,{value:_,selectionStart:w,selectionEnd:A}=v;let S=w,k=A;switch(y.inputType){case"deleteWordBackward":{const T=_.substring(0,w).match(/\w*[^\w]*$/);T&&(S-=T[0].length);break}case"deleteWordForward":{const T=_.substring(w).match(/^[^\w]*\w*/);T&&(k+=T[0].length);break}case"deleteContentBackward":w===A&&(S-=1);break;case"deleteContentForward":w===A&&(k+=1);break}y.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:_,change:x||"",willCommit:!1,selStart:S,selEnd:k}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(f&&n.addEventListener("blur",f),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${y}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class lw extends zn{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class cw extends zn{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,s=this.data,n=s.id;let r=t.getValue(n,{value:s.exportValue===s.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return On.add(o),o.setAttribute("data-element-id",n),o.disabled=s.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=s.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",s.exportValue),o.tabIndex=Wr,o.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const f of this._getElementsByName(c,n)){const p=d&&f.exportValue===s.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const c=s.defaultFieldValue||"Off";l.target.checked=c===s.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const c={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Qm extends zn{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,s=this.data,n=s.id;let r=t.getValue(n,{value:s.fieldValue===s.buttonValue}).value;if(typeof r=="string"&&(r=r!==s.buttonValue,t.setValue(n,{value:r})),r)for(const l of this._getElementsByName(s.fieldName,n))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(On.add(o),o.setAttribute("data-element-id",n),o.disabled=s.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=s.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=Wr,o.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const f of this._getElementsByName(c,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const c=s.defaultFieldValue;l.target.checked=c!=null&&c===s.buttonValue}),this.enableScripting&&this.hasJSActions){const l=s.buttonValue;o.addEventListener("updatefromsandbox",c=>{const d={value:f=>{const p=l===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const x=p&&y.id===n;y.domElement&&(y.domElement.checked=x),t.setValue(y.id,{value:x})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class uw extends Zm{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const s=t.lastChild;return this.enableScripting&&this.hasJSActions&&s&&(this._setDefaultPropertiesFromJS(s),s.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class dw extends zn{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,s=this.data.id,n=t.getValue(s,{value:this.data.fieldValue}),r=document.createElement("select");On.add(r),r.setAttribute("data-element-id",s),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Wr;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const y=this.data.defaultFieldValue;for(const x of r.options)x.selected=x.value===y});for(const p of this.data.options){const y=document.createElement("option");y.textContent=p.displayValue,y.value=p.exportValue,n.value.includes(p.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let l=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),l=()=>{p.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const c=p=>{const y=p?"value":"textContent",{options:x,multiple:v}=r;return v?Array.prototype.filter.call(x,_=>_.selected).map(_=>_[y]):x.selectedIndex===-1?null:x[x.selectedIndex][y]};let d=c(!1);const f=p=>{const y=p.target.options;return Array.prototype.map.call(y,x=>({displayValue:x.textContent,exportValue:x.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const y={value(x){l?.();const v=x.detail.value,_=new Set(Array.isArray(v)?v:[v]);for(const w of r.options)w.selected=_.has(w.value);t.setValue(s,{value:c(!0)}),d=c(!1)},multipleSelection(x){r.multiple=!0},remove(x){const v=r.options,_=x.detail.remove;v[_].selected=!1,r.remove(_),v.length>0&&Array.prototype.findIndex.call(v,A=>A.selected)===-1&&(v[0].selected=!0),t.setValue(s,{value:c(!0),items:f(x)}),d=c(!1)},clear(x){for(;r.length!==0;)r.remove(0);t.setValue(s,{value:null,items:[]}),d=c(!1)},insert(x){const{index:v,displayValue:_,exportValue:w}=x.detail.insert,A=r.children[v],S=document.createElement("option");S.textContent=_,S.value=w,A?A.before(S):r.append(S),t.setValue(s,{value:c(!0),items:f(x)}),d=c(!1)},items(x){const{items:v}=x.detail;for(;r.length!==0;)r.remove(0);for(const _ of v){const{displayValue:w,exportValue:A}=_,S=document.createElement("option");S.textContent=w,S.value=A,r.append(S)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(s,{value:c(!0),items:f(x)}),d=c(!1)},indices(x){const v=new Set(x.detail.indices);for(const _ of x.target.options)_.selected=v.has(_.index);t.setValue(s,{value:c(!0)}),d=c(!1)},editable(x){x.target.disabled=!x.detail.editable}};this._dispatchEventFromSandbox(y,p)}),r.addEventListener("input",p=>{const y=c(!0),x=c(!1);t.setValue(s,{value:y}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:d,change:x,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){t.setValue(s,{value:c(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class $d extends Ae{constructor(t){const{data:s,elements:n}=t;super(t,{isRenderable:Ae._hasPopupData(s)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new hw({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",s.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(n=>`${nh}${n}`).join(",")),this.container}}class hw{#t=this.#C.bind(this);#e=this.#E.bind(this);#s=this.#T.bind(this);#i=this.#w.bind(this);#a=null;#n=null;#l=null;#o=null;#u=null;#c=null;#h=null;#d=!1;#f=null;#r=null;#g=null;#m=null;#p=null;#y=null;#v=!1;constructor({container:t,color:s,elements:n,titleObj:r,modificationDate:o,contentsObj:l,richText:c,parent:d,rect:f,parentRect:p,open:y}){this.#n=t,this.#p=r,this.#l=l,this.#m=c,this.#c=d,this.#a=s,this.#g=f,this.#h=p,this.#u=n,this.#o=Rm.toDateObject(o),this.trigger=n.flatMap(x=>x.getElementsToTriggerPopup());for(const x of this.trigger)x.addEventListener("click",this.#i),x.addEventListener("mouseenter",this.#s),x.addEventListener("mouseleave",this.#e),x.classList.add("popupTriggerArea");for(const x of n)x.container?.addEventListener("keydown",this.#t);this.#n.hidden=!0,y&&this.#w()}render(){if(this.#f)return;const t=this.#f=document.createElement("div");if(t.className="popup",this.#a){const o=t.style.outlineColor=Tt.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:t.style.backgroundColor=Tt.makeHexColor(...this.#a.map(c=>Math.floor(.7*(255-c)+c)))}const s=document.createElement("span");s.className="header";const n=document.createElement("h1");if(s.append(n),{dir:n.dir,str:n.textContent}=this.#p,t.append(s),this.#o){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),s.append(o)}const r=this.#b;if(r)Wm.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(this.#l);t.append(o)}this.#n.append(t)}get#b(){const t=this.#m,s=this.#l;return t?.str&&(!s?.str||s.str===t.str)&&this.#m.html||null}get#_(){return this.#b?.attributes?.style?.fontSize||0}get#S(){return this.#b?.attributes?.style?.color||null}#k(t){const s=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:s}]}},r={style:{color:this.#S,fontSize:this.#_?`calc(${this.#_}px * var(--scale-factor))`:""}};for(const o of t.split(`
`))s.push({name:"span",value:o,attributes:r});return n}_formatContents({str:t,dir:s}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=s;const r=t.split(/(?:\r\n?|\n)/);for(let o=0,l=r.length;o<l;++o){const c=r[o];n.append(document.createTextNode(c)),o<l-1&&n.append(document.createElement("br"))}return n}#C(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#d)&&this.#w()}updateEdited({rect:t,popupContent:s}){this.#y||={contentsObj:this.#l,richText:this.#m},t&&(this.#r=null),s&&(this.#m=this.#k(s),this.#l=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#y&&({contentsObj:this.#l,richText:this.#m}=this.#y,this.#y=null,this.#f?.remove(),this.#f=null,this.#r=null)}#N(){if(this.#r!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:n,pageX:r,pageY:o}}}=this.#c;let l=!!this.#h,c=l?this.#h:this.#g;for(const _ of this.#u)if(!c||Tt.intersect(_.data.rect,c)!==null){c=_.data.rect,l=!0;break}const d=Tt.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),p=l?c[2]-c[0]+5:0,y=d[0]+p,x=d[1];this.#r=[100*(y-r)/s,100*(x-o)/n];const{style:v}=this.#n;v.left=`${this.#r[0]}%`,v.top=`${this.#r[1]}%`}#w(){this.#d=!this.#d,this.#d?(this.#T(),this.#n.addEventListener("click",this.#i),this.#n.addEventListener("keydown",this.#t)):(this.#E(),this.#n.removeEventListener("click",this.#i),this.#n.removeEventListener("keydown",this.#t))}#T(){this.#f||this.render(),this.isVisible?this.#d&&this.#n.classList.add("focused"):(this.#N(),this.#n.hidden=!1,this.#n.style.zIndex=parseInt(this.#n.style.zIndex)+1e3)}#E(){this.#n.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#n.hidden=!0,this.#n.style.zIndex=parseInt(this.#n.style.zIndex)-1e3)}forceHide(){this.#v=this.isVisible,this.#v&&(this.#n.hidden=!0)}maybeShow(){this.#v&&(this.#f||this.#T(),this.#v=!1,this.#n.hidden=!1)}get isVisible(){return this.#n.hidden===!1}}class Jm extends Ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=qt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const s of this.textContent){const n=document.createElement("span");n.textContent=s,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class fw extends Ae{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:s,height:n}=an(t.rect),r=this.svgFactory.create(s,n,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class gw extends Ae{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:s,height:n}=an(t.rect),r=this.svgFactory.create(s,n,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",s-o),l.setAttribute("height",n-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class pw extends Ae{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:s,height:n}=an(t.rect),r=this.svgFactory.create(s,n,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",s/2),l.setAttribute("cy",n/2),l.setAttribute("rx",s/2-o/2),l.setAttribute("ry",n/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ty extends Ae{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:n,popupRef:r}}=this;if(!s)return this.container;const{width:o,height:l}=an(t),c=this.svgFactory.create(o,l,!0);let d=[];for(let p=0,y=s.length;p<y;p+=2){const x=s[p]-t[0],v=t[3]-s[p+1];d.push(`${x},${v}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",n.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),c.append(f),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class mw extends ty{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class yw extends Ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ph extends Ae{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?qt.HIGHLIGHT:qt.INK}#s(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:n,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:d}=this.#s(s,t),f=this.svgFactory.create(c,d,!0),p=this.#t=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let y=0,x=n.length;y<x;y++){const v=this.svgFactory.createElement(this.svgElementName);this.#e.push(v),v.setAttribute("points",n[y].join(",")),p.append(v)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:n,rect:r}=t,o=this.#t;if(s>=0&&o.setAttribute("stroke-width",s||1),n)for(let l=0,c=this.#e.length;l<c;l++)this.#e[l].setAttribute("points",n[l].join(","));if(r){const{transform:l,width:c,height:d}=this.#s(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class ey extends Ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=qt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class bw extends Ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class xw extends Ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class vw extends Ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class sy extends Ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=qt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class _w extends Ae{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:s}=this.data;this.filename=s.filename,this.content=s.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let n;s.hasAppearance||s.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:r}=rs.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!s.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class ww{#t=null;#e=null;#s=new Map;#i=null;constructor({div:t,accessibilityManager:s,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:l,structTreeLayer:c}){this.div=t,this.#t=s,this.#e=n,this.#i=c||null,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#s.size>0}async#a(t,s){const n=t.firstChild||t,r=n.id=`${nh}${s}`,o=await this.#i?.getAriaAttributes(r);if(o)for(const[l,c]of o)n.setAttribute(l,c);this.div.append(t),this.#t?.moveElementInDOM(this.div,t,n,!1)}async render(t){const{annotations:s}=t,n=this.div;Dn(n,this.viewport);const r=new Map,o={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new gh,annotationStorage:t.annotationStorage||new uh,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of s){if(l.noHTML)continue;const c=l.annotationType===Re.POPUP;if(c){const p=r.get(l.id);if(!p)continue;o.elements=p}else{const{width:p,height:y}=an(l.rect);if(p<=0||y<=0)continue}o.data=l;const d=aw.create(o);if(!d.isRenderable)continue;if(!c&&l.popupRef){const p=r.get(l.popupRef);p?p.push(d):r.set(l.popupRef,[d])}const f=d.render();l.hidden&&(f.style.visibility="hidden"),await this.#a(f,l.id),d._isEditable&&(this.#s.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#n()}update({viewport:t}){const s=this.div;this.viewport=t,Dn(s,{rotation:t.rotation}),this.#n(),s.hidden=!1}#n(){if(!this.#e)return;const t=this.div;for(const[s,n]of this.#e){const r=t.querySelector(`[data-annotation-id="${s}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):r.append(n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#s.values())}getEditableAnnotation(t){return this.#s.get(t)}}const xl=/\r\n?|\n/g;class De extends Lt{#t;#e="";#s=`${this.id}-editor`;#i=null;#a;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=De.prototype,s=o=>o.isEmpty(),n=ln.TRANSLATE_SMALL,r=ln.TRANSLATE_BIG;return Yt(this,"_keyboardManager",new Kr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}]]))}static _type="freetext";static _editorType=qt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||De._defaultColor||Lt._defaultLineColor,this.#a=t.fontSize||De._defaultFontSize}static initialize(t,s){Lt.initialize(t,s);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case Jt.FREETEXT_SIZE:De._defaultFontSize=s;break;case Jt.FREETEXT_COLOR:De._defaultColor=s;break}}updateParams(t,s){switch(t){case Jt.FREETEXT_SIZE:this.#n(s);break;case Jt.FREETEXT_COLOR:this.#l(s);break}}static get defaultPropertiesToUpdate(){return[[Jt.FREETEXT_SIZE,De._defaultFontSize],[Jt.FREETEXT_COLOR,De._defaultColor||Lt._defaultLineColor]]}get propertiesToUpdate(){return[[Jt.FREETEXT_SIZE,this.#a],[Jt.FREETEXT_COLOR,this.#t]]}#n(t){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-this.#a)*this.parentScale),this.#a=r,this.#u()},n=this.#a;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(t){const s=r=>{this.#t=this.editorDiv.style.color=r},n=this.#t;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-De._internalPadding*t,-(De._internalPadding+this.#a)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(qt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#s),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const t=[];this.editorDiv.normalize();let s=null;for(const n of this.editorDiv.childNodes)s?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(De.#c(n)),s=n);return t.join(`
`)}#u(){const[t,s]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/s):(this.width=n.height/t,this.height=n.width/s),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,s=this.#e=this.#o().trimEnd();if(t===s)return;const n=r=>{if(this.#e=r,!r){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{n(s)},undo:()=>{n(t)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){De._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#s),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#a}px * var(--scale-factor))`,n.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Rl(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[f,p]=this.pageDimensions,[y,x]=this.pageTranslation;let v,_;switch(this.rotation){case 0:v=t+(l[0]-y)/f,_=s+this.height-(l[1]-x)/p;break;case 90:v=t+(l[0]-y)/f,_=s-(l[1]-x)/p,[c,d]=[d,-c];break;case 180:v=t-this.width+(l[0]-y)/f,_=s-(l[1]-x)/p,[c,d]=[-c,-d];break;case 270:v=t+(l[0]-y-this.height*p)/f,_=s+(l[1]-x-this.width*f)/p,[c,d]=[-d,c];break}this.setAt(v*r,_*o,c,d)}else this.setAt(t*r,s*o,this.width*r,this.height*o);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(xl,"")}editorDivPaste(t){const s=t.clipboardData||window.clipboardData,{types:n}=s;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const r=De.#f(s.getData("text")||"").replaceAll(xl,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:d}=l,f=[],p=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(p.push(c.nodeValue.slice(d).replaceAll(xl,"")),v!==this.editorDiv){let _=f;for(const w of this.editorDiv.childNodes){if(w===v){_=p;continue}_.push(De.#c(w))}}f.push(c.nodeValue.slice(0,d).replaceAll(xl,""))}else if(c===this.editorDiv){let v=f,_=0;for(const w of this.editorDiv.childNodes)_++===d&&(v=p),v.push(De.#c(w))}this.#e=`${f.join(`
`)}${r}${p.join(`
`)}`,this.#h();const y=new Range;let x=f.reduce((v,_)=>v+_.length,0);for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const _=v.nodeValue.length;if(x<=_){y.setStart(v,x),y.setEnd(v,x);break}x-=_}o.removeAllRanges(),o.addRange(y)}#h(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}}#d(){return this.#e.replaceAll(""," ")}static#f(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,s,n){let r=null;if(t instanceof Jm){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:d,rotation:f,id:p,popupRef:y},textContent:x,textPosition:v,parent:{page:{pageNumber:_}}}=t;if(!x||x.length===0)return null;r=t={annotationType:qt.FREETEXT,color:Array.from(c),fontSize:l,value:x.join(`
`),position:v,pageIndex:_-1,rect:d.slice(0),rotation:f,id:p,deleted:!1,popupRef:y}}const o=await super.deserialize(t,s,n);return o.#a=t.fontSize,o.#t=Tt.makeHexColor(...t.color),o.#e=De.#f(t.value),o.annotationElementId=t.id||null,o._initialData=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=De._internalPadding*this.parentScale,n=this.getRect(s,s),r=Lt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),o={annotationType:qt.FREETEXT,color:r,fontSize:this.#a,value:this.#d(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!this.#r(o)?null:(o.id=this.annotationElementId,o)}#r(t){const{value:s,fontSize:n,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==s||t.fontSize!==n||t.color.some((l,c)=>l!==r[c])||t.pageIndex!==o}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:n}=s;n.fontSize=`calc(${this.#a}px * var(--scale-factor))`,n.color=this.#t,s.replaceChildren();for(const o of this.#e.split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),s.append(l)}const r=De._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:this.#e}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class kt{static PRECISION=1e-4;toSVGPath(){de("Abstract method `toSVGPath` must be implemented.")}get box(){de("Abstract getter `box` must be implemented.")}serialize(t,s){de("Abstract method `serialize` must be implemented.")}static _rescale(t,s,n,r,o,l){l||=new Float32Array(t.length);for(let c=0,d=t.length;c<d;c+=2)l[c]=s+t[c]*r,l[c+1]=n+t[c+1]*o;return l}static _rescaleAndSwap(t,s,n,r,o,l){l||=new Float32Array(t.length);for(let c=0,d=t.length;c<d;c+=2)l[c]=s+t[c+1]*r,l[c+1]=n+t[c]*o;return l}static _translate(t,s,n,r){r||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)r[o]=s+t[o],r[o+1]=n+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,s,n,r,o){switch(o){case 90:return[1-s/n,t/r];case 180:return[1-t/n,1-s/r];case 270:return[s/n,1-t/r];default:return[t/n,s/r]}}static _normalizePagePoint(t,s,n){switch(n){case 90:return[1-s,t];case 180:return[1-t,1-s];case 270:return[s,1-t];default:return[t,s]}}static createBezierPoints(t,s,n,r,o,l){return[(t+5*n)/6,(s+5*r)/6,(5*n+o)/6,(5*r+l)/6,(n+o)/2,(r+l)/2]}}class jn{#t;#e=[];#s;#i;#a=[];#n=new Float32Array(18);#l;#o;#u;#c;#h;#d;#f=[];static#r=8;static#g=2;static#m=jn.#r+jn.#g;constructor({x:t,y:s},n,r,o,l,c=0){this.#t=n,this.#d=o*r,this.#i=l,this.#n.set([NaN,NaN,NaN,NaN,t,s],6),this.#s=c,this.#c=jn.#r*r,this.#u=jn.#m*r,this.#h=r,this.#f.push(t,s)}isEmpty(){return isNaN(this.#n[8])}#p(){const t=this.#n.subarray(4,6),s=this.#n.subarray(16,18),[n,r,o,l]=this.#t;return[(this.#l+(t[0]-s[0])/2-n)/o,(this.#o+(t[1]-s[1])/2-r)/l,(this.#l+(s[0]-t[0])/2-n)/o,(this.#o+(s[1]-t[1])/2-r)/l]}add({x:t,y:s}){this.#l=t,this.#o=s;const[n,r,o,l]=this.#t;let[c,d,f,p]=this.#n.subarray(8,12);const y=t-f,x=s-p,v=Math.hypot(y,x);if(v<this.#u)return!1;const _=v-this.#c,w=_/v,A=w*y,S=w*x;let k=c,T=d;c=f,d=p,f+=A,p+=S,this.#f?.push(t,s);const j=-S/_,D=A/_,H=j*this.#d,F=D*this.#d;return this.#n.set(this.#n.subarray(2,8),0),this.#n.set([f+H,p+F],4),this.#n.set(this.#n.subarray(14,18),12),this.#n.set([f-H,p-F],16),isNaN(this.#n[6])?(this.#a.length===0&&(this.#n.set([c+H,d+F],2),this.#a.push(NaN,NaN,NaN,NaN,(c+H-n)/o,(d+F-r)/l),this.#n.set([c-H,d-F],14),this.#e.push(NaN,NaN,NaN,NaN,(c-H-n)/o,(d-F-r)/l)),this.#n.set([k,T,c,d,f,p],6),!this.isEmpty()):(this.#n.set([k,T,c,d,f,p],6),Math.abs(Math.atan2(T-d,k-c)-Math.atan2(S,A))<Math.PI/2?([c,d,f,p]=this.#n.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((c+f)/2-n)/o,((d+p)/2-r)/l),[c,d,k,T]=this.#n.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((k+c)/2-n)/o,((T+d)/2-r)/l),!0):([k,T,c,d,f,p]=this.#n.subarray(0,6),this.#a.push(((k+5*c)/6-n)/o,((T+5*d)/6-r)/l,((5*c+f)/6-n)/o,((5*d+p)/6-r)/l,((c+f)/2-n)/o,((d+p)/2-r)/l),[f,p,c,d,k,T]=this.#n.subarray(12,18),this.#e.push(((k+5*c)/6-n)/o,((T+5*d)/6-r)/l,((5*c+f)/6-n)/o,((5*d+p)/6-r)/l,((c+f)/2-n)/o,((d+p)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,s=this.#e;if(isNaN(this.#n[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#b(n);for(let r=s.length-6;r>=6;r-=6)isNaN(s[r])?n.push(`L${s[r+4]} ${s[r+5]}`):n.push(`C${s[r]} ${s[r+1]} ${s[r+2]} ${s[r+3]} ${s[r+4]} ${s[r+5]}`);return this.#v(n),n.join(" ")}#y(){const[t,s,n,r]=this.#t,[o,l,c,d]=this.#p();return`M${(this.#n[2]-t)/n} ${(this.#n[3]-s)/r} L${(this.#n[4]-t)/n} ${(this.#n[5]-s)/r} L${o} ${l} L${c} ${d} L${(this.#n[16]-t)/n} ${(this.#n[17]-s)/r} L${(this.#n[14]-t)/n} ${(this.#n[15]-s)/r} Z`}#v(t){const s=this.#e;t.push(`L${s[4]} ${s[5]} Z`)}#b(t){const[s,n,r,o]=this.#t,l=this.#n.subarray(4,6),c=this.#n.subarray(16,18),[d,f,p,y]=this.#p();t.push(`L${(l[0]-s)/r} ${(l[1]-n)/o} L${d} ${f} L${p} ${y} L${(c[0]-s)/r} ${(c[1]-n)/o}`)}newFreeDrawOutline(t,s,n,r,o,l){return new iy(t,s,n,r,o,l)}getOutlines(){const t=this.#a,s=this.#e,n=this.#n,[r,o,l,c]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,x=d.length-2;y<x;y+=2)d[y]=(this.#f[y]-r)/l,d[y+1]=(this.#f[y+1]-o)/c;if(d[d.length-2]=(this.#l-r)/l,d[d.length-1]=(this.#o-o)/c,isNaN(n[6])&&!this.isEmpty())return this.#_(d);const f=new Float32Array(this.#a.length+24+this.#e.length);let p=t.length;for(let y=0;y<p;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}p=this.#k(f,p);for(let y=s.length-6;y>=6;y-=6)for(let x=0;x<6;x+=2){if(isNaN(s[y+x])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=s[y+x],f[p+1]=s[y+x+1],p+=2}return this.#S(f,p),this.newFreeDrawOutline(f,d,this.#t,this.#h,this.#s,this.#i)}#_(t){const s=this.#n,[n,r,o,l]=this.#t,[c,d,f,p]=this.#p(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(s[2]-n)/o,(s[3]-r)/l,NaN,NaN,NaN,NaN,(s[4]-n)/o,(s[5]-r)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(s[16]-n)/o,(s[17]-r)/l,NaN,NaN,NaN,NaN,(s[14]-n)/o,(s[15]-r)/l],0),this.newFreeDrawOutline(y,t,this.#t,this.#h,this.#s,this.#i)}#S(t,s){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],s),s+=6}#k(t,s){const n=this.#n.subarray(4,6),r=this.#n.subarray(16,18),[o,l,c,d]=this.#t,[f,p,y,x]=this.#p();return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/c,(n[1]-l)/d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,y,x,NaN,NaN,NaN,NaN,(r[0]-o)/c,(r[1]-l)/d],s),s+=24}}class iy extends kt{#t;#e=new Float32Array(4);#s;#i;#a;#n;#l;constructor(t,s,n,r,o,l){super(),this.#l=t,this.#a=s,this.#t=n,this.#n=r,this.#s=o,this.#i=l,this.lastPoint=[NaN,NaN],this.#o(l);const[c,d,f,p]=this.#e;for(let y=0,x=t.length;y<x;y+=2)t[y]=(t[y]-c)/f,t[y+1]=(t[y+1]-d)/p;for(let y=0,x=s.length;y<x;y+=2)s[y]=(s[y]-c)/f,s[y+1]=(s[y+1]-d)/p}toSVGPath(){const t=[`M${this.#l[4]} ${this.#l[5]}`];for(let s=6,n=this.#l.length;s<n;s+=6){if(isNaN(this.#l[s])){t.push(`L${this.#l[s+4]} ${this.#l[s+5]}`);continue}t.push(`C${this.#l[s]} ${this.#l[s+1]} ${this.#l[s+2]} ${this.#l[s+3]} ${this.#l[s+4]} ${this.#l[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,n,r],o){const l=n-t,c=r-s;let d,f;switch(o){case 0:d=kt._rescale(this.#l,t,r,l,-c),f=kt._rescale(this.#a,t,r,l,-c);break;case 90:d=kt._rescaleAndSwap(this.#l,t,s,l,c),f=kt._rescaleAndSwap(this.#a,t,s,l,c);break;case 180:d=kt._rescale(this.#l,n,s,-l,c),f=kt._rescale(this.#a,n,s,-l,c);break;case 270:d=kt._rescaleAndSwap(this.#l,n,r,-l,-c),f=kt._rescaleAndSwap(this.#a,n,r,-l,-c);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const s=this.#l;let n=s[4],r=s[5],o=n,l=r,c=n,d=r,f=n,p=r;const y=t?Math.max:Math.min;for(let v=6,_=s.length;v<_;v+=6){if(isNaN(s[v]))o=Math.min(o,s[v+4]),l=Math.min(l,s[v+5]),c=Math.max(c,s[v+4]),d=Math.max(d,s[v+5]),p<s[v+5]?(f=s[v+4],p=s[v+5]):p===s[v+5]&&(f=y(f,s[v+4]));else{const w=Tt.bezierBoundingBox(n,r,...s.slice(v,v+6));o=Math.min(o,w[0]),l=Math.min(l,w[1]),c=Math.max(c,w[2]),d=Math.max(d,w[3]),p<w[3]?(f=w[2],p=w[3]):p===w[3]&&(f=y(f,w[2]))}n=s[v+4],r=s[v+5]}const x=this.#e;x[0]=o-this.#s,x[1]=l-this.#s,x[2]=c-o+2*this.#s,x[3]=d-l+2*this.#s,this.lastPoint=[f,p]}get box(){return this.#e}newOutliner(t,s,n,r,o,l=0){return new jn(t,s,n,r,o,l)}getNewOutline(t,s){const[n,r,o,l]=this.#e,[c,d,f,p]=this.#t,y=o*f,x=l*p,v=n*f+c,_=r*p+d,w=this.newOutliner({x:this.#a[0]*y+v,y:this.#a[1]*x+_},this.#t,this.#n,t,this.#i,s??this.#s);for(let A=2;A<this.#a.length;A+=2)w.add({x:this.#a[A]*y+v,y:this.#a[A+1]*x+_});return w.getOutlines()}}class Kd{#t;#e;#s=[];#i=[];constructor(t,s=0,n=0,r=!0){let o=1/0,l=-1/0,c=1/0,d=-1/0;const f=10**-4;for(const{x:A,y:S,width:k,height:T}of t){const j=Math.floor((A-s)/f)*f,D=Math.ceil((A+k+s)/f)*f,H=Math.floor((S-s)/f)*f,F=Math.ceil((S+T+s)/f)*f,R=[j,H,F,!0],I=[D,H,F,!1];this.#s.push(R,I),o=Math.min(o,j),l=Math.max(l,D),c=Math.min(c,H),d=Math.max(d,F)}const p=l-o+2*n,y=d-c+2*n,x=o-n,v=c-n,_=this.#s.at(r?-1:-2),w=[_[0],_[2]];for(const A of this.#s){const[S,k,T]=A;A[0]=(S-x)/p,A[1]=(k-v)/y,A[2]=(T-v)/y}this.#t=new Float32Array([x,v,p,y]),this.#e=w}getOutlines(){this.#s.sort((s,n)=>s[0]-n[0]||s[1]-n[1]||s[2]-n[2]);const t=[];for(const s of this.#s)s[3]?(t.push(...this.#u(s)),this.#l(s)):(this.#o(s),t.push(...this.#u(s)));return this.#a(t)}#a(t){const s=[],n=new Set;for(const l of t){const[c,d,f]=l;s.push([c,d,l],[c,f,l])}s.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=s.length;l<c;l+=2){const d=s[l][2],f=s[l+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const r=[];let o;for(;n.size>0;){const l=n.values().next().value;let[c,d,f,p,y]=l;n.delete(l);let x=c,v=d;for(o=[c,f],r.push(o);;){let _;if(n.has(p))_=p;else if(n.has(y))_=y;else break;n.delete(_),[c,d,f,p,y]=_,x!==c&&(o.push(x,v,c,v===d?d:f),x=c),v=v===d?f:d}o.push(x,v)}return new Sw(r,this.#t,this.#e)}#n(t){const s=this.#i;let n=0,r=s.length-1;for(;n<=r;){const o=n+r>>1,l=s[o][0];if(l===t)return o;l<t?n=o+1:r=o-1}return r+1}#l([,t,s]){const n=this.#n(t);this.#i.splice(n,0,[t,s])}#o([,t,s]){const n=this.#n(t);for(let r=n;r<this.#i.length;r++){const[o,l]=this.#i[r];if(o!==t)break;if(o===t&&l===s){this.#i.splice(r,1);return}}for(let r=n-1;r>=0;r--){const[o,l]=this.#i[r];if(o!==t)break;if(o===t&&l===s){this.#i.splice(r,1);return}}}#u(t){const[s,n,r]=t,o=[[s,n,r]],l=this.#n(r);for(let c=0;c<l;c++){const[d,f]=this.#i[c];for(let p=0,y=o.length;p<y;p++){const[,x,v]=o[p];if(!(f<=x||v<=d)){if(x>=d){if(v>f)o[p][1]=f;else{if(y===1)return[];o.splice(p,1),p--,y--}continue}o[p][2]=d,v>f&&o.push([s,f,v])}}}return o}}class Sw extends kt{#t;#e;constructor(t,s,n){super(),this.#e=t,this.#t=s,this.lastPoint=n}toSVGPath(){const t=[];for(const s of this.#e){let[n,r]=s;t.push(`M${n} ${r}`);for(let o=2;o<s.length;o+=2){const l=s[o],c=s[o+1];l===n?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${l}`),n=l)}t.push("Z")}return t.join(" ")}serialize([t,s,n,r],o){const l=[],c=n-t,d=r-s;for(const f of this.#e){const p=new Array(f.length);for(let y=0;y<f.length;y+=2)p[y]=t+f[y]*c,p[y+1]=r-f[y+1]*d;l.push(p)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Wd extends jn{newFreeDrawOutline(t,s,n,r,o,l){return new Aw(t,s,n,r,o,l)}}class Aw extends iy{newOutliner(t,s,n,r,o,l=0){return new Wd(t,s,n,r,o,l)}}class Hs{#t=null;#e=null;#s;#i=null;#a=!1;#n=!1;#l=null;#o;#u=null;#c=null;#h;static#d=null;static get _keyboardManager(){return Yt(this,"_keyboardManager",new Kr([[["Escape","mac+Escape"],Hs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Hs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Hs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Hs.prototype._moveToPrevious],[["Home","mac+Home"],Hs.prototype._moveToBeginning],[["End","mac+End"],Hs.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:s=null}){t?(this.#n=!1,this.#h=Jt.HIGHLIGHT_COLOR,this.#l=t):(this.#n=!0,this.#h=Jt.HIGHLIGHT_DEFAULT_COLOR),this.#c=t?._uiManager||s,this.#o=this.#c._eventBus,this.#s=t?.color||this.#c?.highlightColors.values().next().value||"#FFFF98",Hs.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const s=this.#c._signal;t.addEventListener("click",this.#m.bind(this),{signal:s}),t.addEventListener("keydown",this.#g.bind(this),{signal:s});const n=this.#e=document.createElement("span");return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=this.#s,t.append(n),t}renderMainDropdown(){const t=this.#i=this.#f();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#f(){const t=document.createElement("div"),s=this.#c._signal;t.addEventListener("contextmenu",Ks,{signal:s}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,r]of this.#c.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=n,o.setAttribute("data-l10n-id",Hs.#d[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=r,o.setAttribute("aria-selected",r===this.#s),o.addEventListener("click",this.#r.bind(this,r),{signal:s}),t.append(o)}return t.addEventListener("keydown",this.#g.bind(this),{signal:s}),t}#r(t,s){s.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:this.#h,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#m(t);return}const s=t.target.getAttribute("data-color");s&&this.#r(s,t)}_moveToNext(t){if(!this.#y){this.#m(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#y&&this._hideDropdownFromKeyboard();return}this.#y||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#y){this.#m(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#y){this.#m(t);return}this.#i.lastChild?.focus()}#g(t){Hs._keyboardManager.exec(this,t)}#m(t){if(this.#y){this.hideDropdown();return}if(this.#a=t.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#p.bind(this),{signal:this.#c.combinedSignal(this.#u)})),this.#i){this.#i.classList.remove("hidden");return}const s=this.#i=this.#f();this.#t.append(s)}#p(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#y(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#n){if(!this.#y){this.#l?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const s=this.#c.highlightColors.values();for(const n of this.#i.children)n.setAttribute("aria-selected",s.next().value===t)}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class Se extends Lt{#t=null;#e=0;#s;#i=null;#a=null;#n=null;#l=null;#o=0;#u=null;#c=null;#h=null;#d=!1;#f=null;#r;#g=null;#m="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=qt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Se.prototype;return Yt(this,"_keyboardManager",new Kr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Se._defaultColor,this.#p=t.thickness||Se._defaultThickness,this.#r=t.opacity||Se._defaultOpacity,this.#s=t.boxes||null,this.#y=t.methodOfCreation||"",this.#m=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#d=!0,this.#b(t),this.#N()):this.#s&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#l=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#N(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Kd(this.#s,.001);this.#c=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const s=new Kd(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#n=s.getOutlines();const{lastPoint:n}=this.#n;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:s,clipPathId:n}){this.#c=t;const r=1.5;if(this.#n=t.getNewOutline(this.#p/2+r,.0025),s>=0)this.#h=s,this.#i=n,this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#n.box,path:{d:this.#n.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Se.#w(this.#c.box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:Se.#w(this.#n.box,p),path:{d:this.#n.toSVGPath()}})}const[o,l,c,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=d;break;case 90:{const[p,y]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*y/p,this.height=d*p/y;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=d;break;case 270:{const[p,y]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*y/p,this.height=d*p/y;break}}const{lastPoint:f}=this.#n;this.#f=[(f[0]-o)/c,(f[1]-l)/d]}static initialize(t,s){Lt.initialize(t,s),Se._defaultColor||=s.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,s){switch(t){case Jt.HIGHLIGHT_DEFAULT_COLOR:Se._defaultColor=s;break;case Jt.HIGHLIGHT_THICKNESS:Se._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return this.#f}updateParams(t,s){switch(t){case Jt.HIGHLIGHT_COLOR:this.#_(s);break;case Jt.HIGHLIGHT_THICKNESS:this.#S(s);break}}static get defaultPropertiesToUpdate(){return[[Jt.HIGHLIGHT_DEFAULT_COLOR,Se._defaultColor],[Jt.HIGHLIGHT_THICKNESS,Se._defaultThickness]]}get propertiesToUpdate(){return[[Jt.HIGHLIGHT_COLOR,this.color||Se._defaultColor],[Jt.HIGHLIGHT_THICKNESS,this.#p||Se._defaultThickness],[Jt.HIGHLIGHT_FREE,this.#d]]}#_(t){const s=(o,l)=>{this.color=o,this.#r=l,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:o,"fill-opacity":l}}),this.#a?.updateColor(o)},n=this.color,r=this.#r;this.addCommands({cmd:s.bind(this,t,Se._defaultOpacity),undo:s.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#S(t){const s=this.#p,n=r=>{this.#p=r,this.#k(r)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#a=new Hs({editor:this}),t.addColorPicker(this.#a)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#N(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let s=!1;this.parent&&!t?this.#C():t&&(this.#N(t),s=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),s&&this.select()}#k(t){if(!this.#d)return;this.#b({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)}#C(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#N(t=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#r},rootClass:{highlight:!0,free:this.#d},path:{d:this.#c.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#n.box,path:{d:this.#n.toSVGPath()}},this.#d),this.#u&&(this.#u.style.clipPath=this.#i))}static#w([t,s,n,r],o){switch(o){case 90:return[1-s-r,t,r,n];case 180:return[1-t-n,1-s-r,n,r];case 270:return[s,1-t-n,r,n]}return[t,s,n,r]}rotate(t){const{drawLayer:s}=this.parent;let n;this.#d?(t=(t-this.rotation+360)%360,n=Se.#w(this.#c.box,t)):n=Se.#w([this.x,this.y,this.width,this.height],t),s.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":t}}),s.updateProperties(this.#g,{bbox:Se.#w(this.#n.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#m&&(t.setAttribute("aria-label",this.#m),t.setAttribute("role","mark")),this.#d?t.classList.add("free"):this.div.addEventListener("keydown",this.#T.bind(this),{signal:this._uiManager._signal});const s=this.#u=document.createElement("div");t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=this.#i;const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),Rl(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#T(t){Se._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#E(!0);break;case 1:case 3:this.#E(!1);break}}#E(t){if(!this.#t)return;const s=window.getSelection();t?s.setPosition(this.#t,this.#e):s.setPosition(this.#l,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#d||this.#E(!1))}get _mustFixPosition(){return!this.#d}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#M(){return this.#d?this.rotation:0}#O(){if(this.#d)return null;const[t,s]=this.pageDimensions,[n,r]=this.pageTranslation,o=this.#s,l=new Float32Array(o.length*8);let c=0;for(const{x:d,y:f,width:p,height:y}of o){const x=d*t+n,v=(1-f)*s+r;l[c]=l[c+4]=x,l[c+1]=l[c+3]=v,l[c+2]=l[c+6]=x+p*t,l[c+5]=l[c+7]=v-y*s,c+=8}return l}#z(t){return this.#c.serialize(t,this.#M())}static startHighlighting(t,s,{target:n,x:r,y:o}){const{x:l,y:c,width:d,height:f}=n.getBoundingClientRect(),p=new AbortController,y=t.combinedSignal(p),x=v=>{p.abort(),this.#x(t,v)};window.addEventListener("blur",x,{signal:y}),window.addEventListener("pointerup",x,{signal:y}),window.addEventListener("pointerdown",Cs,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",Ks,{signal:y}),n.addEventListener("pointermove",this.#A.bind(this,t),{signal:y}),this._freeHighlight=new Wd({x:r,y:o},[l,c,d,f],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#A(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#x(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,s,n){let r=null;if(t instanceof ey){const{data:{quadPoints:_,rect:w,rotation:A,id:S,color:k,opacity:T,popupRef:j},parent:{page:{pageNumber:D}}}=t;r=t={annotationType:qt.HIGHLIGHT,color:Array.from(k),opacity:T,quadPoints:_,boxes:null,pageIndex:D-1,rect:w.slice(0),rotation:A,id:S,deleted:!1,popupRef:j}}else if(t instanceof ph){const{data:{inkLists:_,rect:w,rotation:A,id:S,color:k,borderStyle:{rawWidth:T},popupRef:j},parent:{page:{pageNumber:D}}}=t;r=t={annotationType:qt.HIGHLIGHT,color:Array.from(k),thickness:T,inkLists:_,boxes:null,pageIndex:D-1,rect:w.slice(0),rotation:A,id:S,deleted:!1,popupRef:j}}const{color:o,quadPoints:l,inkLists:c,opacity:d}=t,f=await super.deserialize(t,s,n);f.color=Tt.makeHexColor(...o),f.#r=d||1,c&&(f.#p=t.thickness),f.annotationElementId=t.id||null,f._initialData=r;const[p,y]=f.pageDimensions,[x,v]=f.pageTranslation;if(l){const _=f.#s=[];for(let w=0;w<l.length;w+=8)_.push({x:(l[w]-x)/p,y:1-(l[w+1]-v)/y,width:(l[w+2]-l[w])/p,height:(l[w+1]-l[w+5])/y});f.#v(),f.#N(),f.rotate(f.rotation)}else if(c){f.#d=!0;const _=c[0],w={x:_[0]-x,y:y-(_[1]-v)},A=new Wd(w,[0,0,p,y],1,f.#p/2,!0,.001);for(let T=0,j=_.length;T<j;T+=2)w.x=_[T]-x,w.y=y-(_[T+1]-v),A.add(w);const{id:S,clipPathId:k}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);f.#b({highlightOutlines:A.getOutlines(),highlightId:S,clipPathId:k}),f.#N()}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),n=Lt._colorManager.convert(this.color),r={annotationType:qt.HIGHLIGHT,color:n,opacity:this.#r,thickness:this.#p,quadPoints:this.#O(),outlines:this.#z(s),pageIndex:this.pageIndex,rect:s,rotation:this.#M(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#D(r)?null:(r.id=this.annotationElementId,r)}#D(t){const{color:s}=this._initialData;return t.color.some((n,r)=>n!==s[r])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class kw{#t=Object.create(null);updateProperty(t,s){this[t]=s,this.updateSVGProperty(t,s)}updateProperties(t){if(t)for(const[s,n]of Object.entries(t))this.updateProperty(s,n)}updateSVGProperty(t,s){this.#t[t]=s}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){de("Not implemented")}}class Ot extends Lt{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#i=null;static#a=null;static#n=NaN;static#l=null;static#o=null;static#u=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,t.drawOutlines&&(this.#c(t),this.#f())}#c({drawOutlines:t,drawId:s,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=this.#h(t,this.parent),this.#m(t.box)}#h(t,s){const{id:n}=s.drawLayer.draw(Ot._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,s){const n=new Set(Object.keys(t));for(const[r,o]of Object.entries(s))n.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){de("Not implemented")}static get typesMap(){de("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,s),this._currentParent&&(Ot.#s.updateProperty(n,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)t.push([n,s[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[n,r]of this.constructor.typesMap)t.push([n,s[r]]);return t}_updateProperty(t,s,n){const r=this._drawingOptions,o=r[s],l=c=>{r.updateProperty(s,c);const d=this.#t.updateProperty(s,c);d&&this.#m(d),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#g()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#g()),{bbox:this.#p()}))}_onTranslating(t,s){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p(t,s)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#g(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#m(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#d()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),s=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),s&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#t,t)}}#r([t,s,n,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[s,1-t,n*(l/o),r*(o/l)];case 180:return[1-t,1-s,n,r];case 270:return[1-s,t,n*(l/o),r*(o/l)];default:return[t,s,n,r]}}#g(){const{x:t,y:s,width:n,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-s,t,n*(o/l),r*(l/o)];case 180:return[1-t,1-s,n,r];case 270:return[s,1-t,n*(o/l),r*(l/o)];default:return[t,s,n,r]}}#m(t){if([this.x,this.y,this.width,this.height]=this.#r(t),this.div){this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)}this._onResized()}#p(){const{x:t,y:s,width:n,height:r,rotation:o,parentRotation:l,parentDimensions:[c,d]}=this;switch((o*4+l)/90){case 1:return[1-s-r,t,r,n];case 2:return[1-t-n,1-s-r,n,r];case 3:return[s,1-t-n,r,n];case 4:return[t,s-n*(c/d),r*(d/c),n*(c/d)];case 5:return[1-s,t,n*(c/d),r*(d/c)];case 6:return[1-t-r*(d/c),1-s,r*(d/c),n*(c/d)];case 7:return[s-n*(c/d),1-t-r*(d/c),n*(c/d),r*(d/c)];case 8:return[t-n,s-r,n,r];case 9:return[1-s,t-n,r,n];case 10:return[1-t,1-s,n,r];case 11:return[s-r,1-t,r,n];case 12:return[t-r*(d/c),s,r*(d/c),n*(c/d)];case 13:return[1-s-n*(c/d),t-r*(d/c),n*(c/d),r*(d/c)];case 14:return[1-t,1-s-n*(c/d),r*(d/c),n*(c/d)];case 15:return[s,1-t,n*(c/d),r*(d/c)];default:return[t,s,n,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties({bbox:this.#p()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#m(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const s=document.createElement("div");t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,s,n,r,o){de("Not implemented")}static startDrawing(t,s,n,r){const{target:o,offsetX:l,offsetY:c,pointerId:d,pointerType:f}=r;if(Ot.#l&&Ot.#l!==f)return;const{viewport:{rotation:p}}=t,{width:y,height:x}=o.getBoundingClientRect(),v=Ot.#i=new AbortController,_=t.combinedSignal(v);if(Ot.#n||=d,Ot.#l??=f,window.addEventListener("pointerup",w=>{Ot.#n===w.pointerId?this._endDraw(w):Ot.#o?.delete(w.pointerId)},{signal:_}),window.addEventListener("pointercancel",w=>{Ot.#n===w.pointerId?this._currentParent.endDrawingSession():Ot.#o?.delete(w.pointerId)},{signal:_}),window.addEventListener("pointerdown",w=>{Ot.#l===w.pointerType&&((Ot.#o||=new Set).add(w.pointerId),Ot.#s.isCancellable()&&(Ot.#s.removeLastElement(),Ot.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",Ks,{signal:_}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:_}),o.addEventListener("touchmove",w=>{w.timeStamp===Ot.#u&&Cs(w)},{signal:_}),t.toggleDrawing(),s._editorUndoBar?.hide(),Ot.#s){t.drawLayer.updateProperties(this._currentDrawId,Ot.#s.startNew(l,c,y,x,p));return}s.updateUIForDefaultProperties(this),Ot.#s=this.createDrawerInstance(l,c,y,x,p),Ot.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Ot.#a.toSVGProperties(),Ot.#s.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Ot.#u=-1,!Ot.#s)return;const{offsetX:s,offsetY:n,pointerId:r}=t;if(Ot.#n===r){if(Ot.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ot.#s.add(s,n)),Ot.#u=t.timeStamp,Cs(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Ot.#s=null,Ot.#a=null,Ot.#l=null,Ot.#u=NaN),Ot.#i&&(Ot.#i.abort(),Ot.#i=null,Ot.#n=NaN,Ot.#o=null)}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),t&&s.drawLayer.updateProperties(this._currentDrawId,Ot.#s.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=Ot.#s,r=this._currentDrawId,o=n.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,n.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(r,n.removeLastElement())},mustExec:!1,type:Jt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(Jt.DRAW_STEP),!Ot.#s.isEmpty()){const{pageDimensions:[n,r],scale:o}=s,l=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ot.#s.getOutlines(n*o,r*o,o,this._INNER_MARGIN),drawingOptions:Ot.#a,mustBeCommitted:!t});return this._cleanup(!0),l}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,n,r,o,l){de("Not implemented")}static async deserialize(t,s,n){const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=s.viewport,d=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,t),f=await super.deserialize(t,s,n);return f.createDrawingOptions(t),f.#c({drawOutlines:d}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[s,n]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#t.serialize([s,n,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class Ew{#t=new Float64Array(6);#e;#s;#i;#a;#n;#l="";#o=0;#u=new Jl;#c;#h;constructor(t,s,n,r,o,l){this.#c=n,this.#h=r,this.#i=o,this.#a=l,[t,s]=this.#d(t,s);const c=this.#e=[NaN,NaN,NaN,NaN,t,s];this.#n=[t,s],this.#s=[{line:c,points:this.#n}],this.#t.set(c,0)}updateProperty(t,s){t==="stroke-width"&&(this.#a=s)}#d(t,s){return kt._normalizePoint(t,s,this.#c,this.#h,this.#i)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#n.length<=10}add(t,s){[t,s]=this.#d(t,s);const[n,r,o,l]=this.#t.subarray(2,6),c=t-o,d=s-l;return Math.hypot(this.#c*c,this.#h*d)<=2?null:(this.#n.push(t,s),isNaN(n)?(this.#t.set([o,l,t,s],2),this.#e.push(NaN,NaN,NaN,NaN,t,s),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,r,o,l,t,s],0),this.#e.push(...kt.createBezierPoints(n,r,o,l,t,s)),{path:{d:this.toSVGPath()}}))}end(t,s){const n=this.add(t,s);return n||(this.#n.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,s,n,r,o){this.#c=n,this.#h=r,this.#i=o,[t,s]=this.#d(t,s);const l=this.#e=[NaN,NaN,NaN,NaN,t,s];this.#n=[t,s];const c=this.#s.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#s.push({line:l,points:this.#n}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(t){return this.#s?(this.#s.push(t),this.#e=t.line,this.#n=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(t)}removeLastElement(){if(!this.#s)return this.#u.removeLastElement();this.#s.pop(),this.#l="";for(let t=0,s=this.#s.length;t<s;t++){const{line:n,points:r}=this.#s[t];this.#e=n,this.#n=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#l}}}toSVGPath(){const t=kt.svgRound(this.#e[4]),s=kt.svgRound(this.#e[5]);if(this.#n.length===2)return this.#l=`${this.#l} M ${t} ${s} Z`,this.#l;if(this.#n.length<=6){const r=this.#l.lastIndexOf("M");this.#l=`${this.#l.slice(0,r)} M ${t} ${s}`,this.#o=6}if(this.#n.length===4){const r=kt.svgRound(this.#e[10]),o=kt.svgRound(this.#e[11]);return this.#l=`${this.#l} L ${r} ${o}`,this.#o=12,this.#l}const n=[];this.#o===0&&(n.push(`M ${t} ${s}`),this.#o=6);for(let r=this.#o,o=this.#e.length;r<o;r+=6){const[l,c,d,f,p,y]=this.#e.slice(r,r+6).map(kt.svgRound);n.push(`C${l} ${c} ${d} ${f} ${p} ${y}`)}return this.#l+=n.join(" "),this.#o=this.#e.length,this.#l}getOutlines(t,s,n,r){const o=this.#s.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#u.build(this.#s,t,s,n,this.#i,this.#a,r),this.#t=null,this.#e=null,this.#s=null,this.#l=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Jl extends kt{#t;#e=0;#s;#i;#a;#n;#l;#o;#u;build(t,s,n,r,o,l,c){this.#a=s,this.#n=n,this.#l=r,this.#o=o,this.#u=l,this.#s=c??0,this.#i=t,this.#d()}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of this.#i){if(t.push(`M${kt.svgRound(s[4])} ${kt.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12){t.push(`L${kt.svgRound(s[10])} ${kt.svgRound(s[11])}`);continue}for(let n=6,r=s.length;n<r;n+=6){const[o,l,c,d,f,p]=s.subarray(n,n+6).map(kt.svgRound);t.push(`C${o} ${l} ${c} ${d} ${f} ${p}`)}}return t.join("")}serialize([t,s,n,r],o){const l=[],c=[],[d,f,p,y]=this.#h();let x,v,_,w,A,S,k,T,j;switch(this.#o){case 0:j=kt._rescale,x=t,v=s+r,_=n,w=-r,A=t+d*n,S=s+(1-f-y)*r,k=t+(d+p)*n,T=s+(1-f)*r;break;case 90:j=kt._rescaleAndSwap,x=t,v=s,_=n,w=r,A=t+f*n,S=s+d*r,k=t+(f+y)*n,T=s+(d+p)*r;break;case 180:j=kt._rescale,x=t+n,v=s,_=-n,w=r,A=t+(1-d-p)*n,S=s+f*r,k=t+(1-d)*n,T=s+(f+y)*r;break;case 270:j=kt._rescaleAndSwap,x=t+n,v=s+r,_=-n,w=-r,A=t+(1-f-y)*n,S=s+(1-d-p)*r,k=t+(1-f)*n,T=s+(1-d)*r;break}for(const{line:D,points:H}of this.#i)l.push(j(D,x,v,_,w,o?new Array(D.length):null)),c.push(j(H,x,v,_,w,o?new Array(H.length):null));return{lines:l,points:c,rect:[A,S,k,T]}}static deserialize(t,s,n,r,o,{paths:{lines:l,points:c},rotation:d,thickness:f}){const p=[];let y,x,v,_,w;switch(d){case 0:w=kt._rescale,y=-t/n,x=s/r+1,v=1/n,_=-1/r;break;case 90:w=kt._rescaleAndSwap,y=-s/r,x=-t/n,v=1/r,_=1/n;break;case 180:w=kt._rescale,y=t/n+1,x=-s/r,v=-1/n,_=1/r;break;case 270:w=kt._rescaleAndSwap,y=s/r+1,x=t/n+1,v=-1/r,_=-1/n;break}if(!l){l=[];for(const S of c){const k=S.length;if(k===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1]]));continue}if(k===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1],NaN,NaN,NaN,NaN,S[2],S[3]]));continue}const T=new Float32Array(3*(k-2));l.push(T);let[j,D,H,F]=S.subarray(0,4);T.set([NaN,NaN,NaN,NaN,j,D],0);for(let R=4;R<k;R+=2){const I=S[R],K=S[R+1];T.set(kt.createBezierPoints(j,D,H,F,I,K),(R-2)*3),[j,D,H,F]=[H,F,I,K]}}}for(let S=0,k=l.length;S<k;S++)p.push({line:w(l[S].map(T=>T??NaN),y,x,v,_),points:w(c[S].map(T=>T??NaN),y,x,v,_)});const A=new Jl;return A.build(p,n,r,1,d,f,o),A}#c(t=this.#u){const s=this.#s+t/2*this.#l;return this.#o%180===0?[s/this.#a,s/this.#n]:[s/this.#n,s/this.#a]}#h(){const[t,s,n,r]=this.#t,[o,l]=this.#c(0);return[t+o,s+l,n-2*o,r-2*l]}#d(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let c=4,d=r.length;c<d;c+=6){const[f,p]=r.subarray(c,c+2);t[0]=Math.min(t[0],f),t[1]=Math.min(t[1],p),t[2]=Math.max(t[2],f),t[3]=Math.max(t[3],p)}continue}let o=r[4],l=r[5];for(let c=6,d=r.length;c<d;c+=6){const[f,p,y,x,v,_]=r.subarray(c,c+6);Tt.bezierBoundingBox(o,l,f,p,y,x,v,_,t),o=v,l=_}}const[s,n]=this.#c();t[0]=Math.min(1,Math.max(0,t[0]-s)),t[1]=Math.min(1,Math.max(0,t[1]-n)),t[2]=Math.min(1,Math.max(0,t[2]+s)),t[3]=Math.min(1,Math.max(0,t[3]+n)),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,s){return t==="stroke-width"?this.#f(s):null}#f(t){const[s,n]=this.#c();this.#u=t;const[r,o]=this.#c(),[l,c]=[r-s,o-n],d=this.#t;return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d}updateParentDimensions([t,s],n){const[r,o]=this.#c();this.#a=t,this.#n=s,this.#l=n;const[l,c]=this.#c(),d=l-r,f=c-o,p=this.#t;return p[0]-=d,p[1]-=f,p[2]+=2*d,p[3]+=2*f,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(kt.svgRound).join(" ")}get defaultProperties(){const[t,s]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${kt.svgRound(t)} ${kt.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=this.#t;let n=0,r=0,o=0,l=0,c=0,d=0;switch(this.#e){case 90:r=s/t,o=-t/s,c=t;break;case 180:n=-1,l=-1,c=t,d=s;break;case 270:r=-s/t,o=t/s,d=s;break;default:return""}return`matrix(${n} ${r} ${o} ${l} ${kt.svgRound(c)} ${kt.svgRound(d)})`}getPathResizingSVGProperties([t,s,n,r]){const[o,l]=this.#c(),[c,d,f,p]=this.#t;if(Math.abs(f-o)<=kt.PRECISION||Math.abs(p-l)<=kt.PRECISION){const w=t+n/2-(c+f/2),A=s+r/2-(d+p/2);return{path:{"transform-origin":`${kt.svgRound(t)} ${kt.svgRound(s)}`,transform:`${this.rotationTransform} translate(${w} ${A})`}}}const y=(n-2*o)/(f-2*o),x=(r-2*l)/(p-2*l),v=f/n,_=p/r;return{path:{"transform-origin":`${kt.svgRound(c)} ${kt.svgRound(d)}`,transform:`${this.rotationTransform} scale(${v} ${_}) translate(${kt.svgRound(o)} ${kt.svgRound(l)}) scale(${y} ${x}) translate(${kt.svgRound(-o)} ${kt.svgRound(-l)})`}}}getPathResizedSVGProperties([t,s,n,r]){const[o,l]=this.#c(),c=this.#t,[d,f,p,y]=c;if(c[0]=t,c[1]=s,c[2]=n,c[3]=r,Math.abs(p-o)<=kt.PRECISION||Math.abs(y-l)<=kt.PRECISION){const A=t+n/2-(d+p/2),S=s+r/2-(f+y/2);for(const{line:k,points:T}of this.#i)kt._translate(k,A,S,k),kt._translate(T,A,S,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${kt.svgRound(t)} ${kt.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const x=(n-2*o)/(p-2*o),v=(r-2*l)/(y-2*l),_=-x*(d+o)+t+o,w=-v*(f+l)+s+l;if(x!==1||v!==1||_!==0||w!==0)for(const{line:A,points:S}of this.#i)kt._rescale(A,_,w,x,v,A),kt._rescale(S,_,w,x,v,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${kt.svgRound(t)} ${kt.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],n){const[r,o]=n,l=this.#t,c=t-l[0],d=s-l[1];if(this.#a===r&&this.#n===o)for(const{line:f,points:p}of this.#i)kt._translate(f,c,d,f),kt._translate(p,c,d,p);else{const f=this.#a/r,p=this.#n/o;this.#a=r,this.#n=o;for(const{line:y,points:x}of this.#i)kt._rescale(y,c,d,f,p,y),kt._rescale(x,c,d,f,p,x);l[2]*=f,l[3]*=p}return l[0]=t,l[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${kt.svgRound(t)} ${kt.svgRound(s)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${kt.svgRound(t[0])} ${kt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class mh extends kw{#t;constructor(t){super(),this.#t=t,super.updateProperties({fill:"none",stroke:Lt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,s){t==="stroke-width"&&(s??=this["stroke-width"],s*=this.#t.realScale),super.updateSVGProperty(t,s)}clone(){const t=new mh(this.#t);return t.updateAll(this),t}}class yh extends Ot{static _type="ink";static _editorType=qt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0}static initialize(t,s){Lt.initialize(t,s),this._defaultDrawingOptions=new mh(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return Yt(this,"typesMap",new Map([[Jt.INK_THICKNESS,"stroke-width"],[Jt.INK_COLOR,"stroke"],[Jt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,n,r,o){return new Ew(t,s,n,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,n,r,o,l){return Jl.deserialize(t,s,n,r,o,l)}static async deserialize(t,s,n){let r=null;if(t instanceof ph){const{data:{inkLists:l,rect:c,rotation:d,id:f,color:p,opacity:y,borderStyle:{rawWidth:x},popupRef:v},parent:{page:{pageNumber:_}}}=t;r=t={annotationType:qt.INK,color:Array.from(p),thickness:x,opacity:y,paths:{points:l},boxes:null,pageIndex:_-1,rect:c.slice(0),rotation:d,id:f,deleted:!1,popupRef:v}}const o=await super.deserialize(t,s,n);return o.annotationElementId=t.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:n}=this;s.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:n}){this._drawingOptions=yh.getDefaultDrawingOptions({stroke:Tt.makeHexColor(...t),"stroke-width":s,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:n,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":c}}=this,d={annotationType:qt.INK,color:Lt._colorManager.convert(o),opacity:l,thickness:c,paths:{lines:s,points:n},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?d:this.annotationElementId&&!this.#t(d)?null:(d.id=this.annotationElementId,d)}#t(t){const{color:s,thickness:n,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==s[c])||t.thickness!==n||t.opacity!==r||t.pageIndex!==o}renderAnnotationElement(t){const{points:s,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:s}),null}}class bh extends Lt{#t=null;#e=null;#s=null;#i=null;#a=null;#n="";#l=null;#o=null;#u=!1;#c=!1;static _type="stamp";static _editorType=qt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile}static initialize(t,s){Lt.initialize(t,s)}static get supportedTypes(){return Yt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return Yt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,s){s.pasteEditor(qt.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}#h(t,s=!1){if(!t){this.remove();return}this.#t=t.bitmap,s||(this.#e=t.id,this.#u=t.isSvg),t.file&&(this.#n=t.file.name),this.#r()}#d(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),s&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#f(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#h(n,!0)).finally(()=>this.#d());return}if(this.#i){const n=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(n).then(r=>this.#h(r)).finally(()=>this.#d());return}if(this.#a){const n=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(n).then(r=>this.#h(r)).finally(()=>this.#d());return}const t=document.createElement("input");t.type="file",t.accept=bh.supportedTypesStr;const s=this._uiManager._signal;this.#s=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}n()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:s})}).finally(()=>this.#d()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#l?.remove(),this.#l=null,this.#o&&(clearTimeout(this.#o),this.#o=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#f();return}super.rebuild(),this.div!==null&&(this.#e&&this.#l===null&&this.#f(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#s||this.#t||this.#i||this.#a||this.#e)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;if(this.width&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#t?this.#r():this.#f(),this.width&&!this.annotationElementId){const[n,r]=this.parentDimensions;this.setAt(t*n,s*r,this.width*n,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#o!==null&&clearTimeout(this.#o);const t=200;this.#o=setTimeout(()=>{this.#o=null,this.#m()},t)}#r(){const{div:t}=this;let{width:s,height:n}=this.#t;const[r,o]=this.pageDimensions,l=.75;if(this.width)s=this.width*r,n=this.height*o;else if(s>l*r||n>l*o){const p=Math.min(l*r/s,l*o/n);s*=p,n*=p}const[c,d]=this.parentDimensions;this.setDims(s*c/r,n*d/o),this._uiManager.enableWaiting(!1);const f=this.#l=document.createElement("canvas");f.setAttribute("role","img"),this.addContainer(f),this.width=s/r,this.height=n/o,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#c||(this.parent.addUndoableEditor(this),this.#c=!0),this._reportTelemetry({action:"inserted_image"}),this.#n&&f.setAttribute("aria-label",this.#n)}copyCanvas(t,s,n=!1){t||(t=224);const{width:r,height:o}=this.#t,l=new Xd;let c=this.#t,d=r,f=o,p=null;if(s){if(r>s||o>s){const H=Math.min(s/r,s/o);d=Math.floor(r*H),f=Math.floor(o*H)}p=document.createElement("canvas");const x=p.width=Math.ceil(d*l.sx),v=p.height=Math.ceil(f*l.sy);this.#u||(c=this.#g(x,v));const _=p.getContext("2d");_.filter=this._uiManager.hcmFilter;let w="white",A="#cfcfd8";this._uiManager.hcmFilter!=="none"?A="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",A="#42414d");const S=15,k=S*l.sx,T=S*l.sy,j=new OffscreenCanvas(k*2,T*2),D=j.getContext("2d");D.fillStyle=w,D.fillRect(0,0,k*2,T*2),D.fillStyle=A,D.fillRect(0,0,k,T),D.fillRect(k,T,k,T),_.fillStyle=_.createPattern(j,"repeat"),_.fillRect(0,0,x,v),_.drawImage(c,0,0,c.width,c.height,0,0,x,v)}let y=null;if(n){let x,v;if(l.symmetric&&c.width<t&&c.height<t)x=c.width,v=c.height;else if(c=this.#t,r>t||o>t){const A=Math.min(t/r,t/o);x=Math.floor(r*A),v=Math.floor(o*A),this.#u||(c=this.#g(x,v))}const w=new OffscreenCanvas(x,v).getContext("2d",{willReadFrequently:!0});w.drawImage(c,0,0,c.width,c.height,0,0,x,v),y={width:x,height:v,data:w.getImageData(0,0,x,v).data}}return{canvas:p,width:d,height:f,imageData:y}}#g(t,s){const{width:n,height:r}=this.#t;let o=n,l=r,c=this.#t;for(;o>2*t||l>2*s;){const d=o,f=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*s&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(o,l);p.getContext("2d").drawImage(c,0,0,d,f,0,0,o,l),c=p.transferToImageBitmap()}return c}#m(){const[t,s]=this.parentDimensions,{width:n,height:r}=this,o=new Xd,l=Math.ceil(n*t*o.sx),c=Math.ceil(r*s*o.sy),d=this.#l;if(!d||d.width===l&&d.height===c)return;d.width=l,d.height=c;const f=this.#u?this.#t:this.#g(l,c),p=d.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,l,c)}getImageForAltText(){return this.#l}#p(t){if(t){if(this.#u){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=this.#t,s.getContext("2d").drawImage(this.#t,0,0),s.toDataURL()}if(this.#u){const[s,n]=this.pageDimensions,r=Math.round(this.width*s*Oa.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*Oa.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,s,n){let r=null;if(t instanceof sy){const{data:{rect:_,rotation:w,id:A,structParent:S,popupRef:k},container:T,parent:{page:{pageNumber:j}}}=t,D=T.querySelector("canvas"),H=n.imageManager.getFromCanvas(T.id,D);D.remove();const F=(await s._structTree.getAriaAttributes(`${nh}${A}`))?.get("aria-label")||"";r=t={annotationType:qt.STAMP,bitmapId:H.id,bitmap:H.bitmap,pageIndex:j-1,rect:_.slice(0),rotation:w,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:F},isSvg:!1,structParent:S,popupRef:k}}const o=await super.deserialize(t,s,n),{rect:l,bitmap:c,bitmapUrl:d,bitmapId:f,isSvg:p,accessibilityData:y}=t;f&&n.imageManager.isValidId(f)?(o.#e=f,c&&(o.#t=c)):o.#i=d,o.#u=p;const[x,v]=o.pageDimensions;return o.width=(l[2]-l[0])/x,o.height=(l[3]-l[1])/v,o.annotationElementId=t.id||null,y&&(o.altTextData=y),o._initialData=r,o.#c=!!r,o}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:qt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#u,structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=this.#p(!0),n.accessibilityData=this.serializeAltText(!0),n;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=this.#y(n);if(c.isSame)return null;c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,s===null)return n;s.stamps||=new Map;const l=this.#u?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!s.stamps.has(this.#e))s.stamps.set(this.#e,{area:l,serialized:n}),n.bitmap=this.#p(!1);else if(this.#u){const c=s.stamps.get(this.#e);l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=this.#p(!1))}return n}#y(t){const{pageIndex:s,accessibilityData:{altText:n}}=this._initialData,r=t.pageIndex===s,o=(t.accessibilityData?.alt||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class Ci{#t;#e=!1;#s=null;#i=null;#a=null;#n=new Map;#l=!1;#o=!1;#u=!1;#c=null;#h=null;#d=null;#f=null;#r;static _initialized=!1;static#g=new Map([De,yh,bh,Se].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:s,div:n,structTreeLayer:r,accessibilityManager:o,annotationLayer:l,drawLayer:c,textLayer:d,viewport:f,l10n:p}){const y=[...Ci.#g.values()];if(!Ci._initialized){Ci._initialized=!0;for(const x of y)x.initialize(p,t)}t.registerEditorTypes(y),this.#r=t,this.pageIndex=s,this.div=n,this.#t=o,this.#s=l,this.viewport=f,this.#d=d,this.drawLayer=c,this._structTree=r,this.#r.addLayer(this)}get isEmpty(){return this.#n.size===0}get isInvisible(){return this.isEmpty&&this.#r.getMode()===qt.NONE}updateToolbar(t){this.#r.updateToolbar(t)}updateMode(t=this.#r.getMode()){switch(this.#b(),t){case qt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case qt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case qt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:s}=this.div;for(const n of Ci.#g.values())s.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#d?.div}setEditingState(t){this.#r.setEditingState(t)}addCommands(t){this.#r.addCommands(t)}cleanUndoStack(t){this.#r.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#s?.div.classList.toggle("disabled",!t)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of this.#n.values())n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#r.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!this.#s){this.#u=!1;return}const s=this.#s.getEditableAnnotations();for(const n of s){if(n.hide(),this.#r.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}this.#u=!1}disable(){this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,s=new Map;for(const r of this.#n.values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else s.set(r.annotationElementId,r);this.getEditableAnnotation(r.annotationElementId)?.show(),r.remove()}if(this.#s){const r=this.#s.getEditableAnnotations();for(const o of r){const{id:l}=o.data;if(this.#r.isDeletedAnnotationElement(l))continue;let c=s.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(l),c&&(this.#r.addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}this.#b(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of Ci.#g.values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#s?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#r.getActive()!==t&&this.#r.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const t=this.#r.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#m.bind(this),{signal:t}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#m(t){this.#r.unselectAll();const{target:s}=t;if(s===this.#d.div||(s.getAttribute("role")==="img"||s.classList.contains("endOfContent"))&&this.#d.div.contains(s)){const{isMac:n}=rs.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#r.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),Se.startHighlighting(this,this.#r.direction==="ltr",{target:this.#d.div,x:t.x,y:t.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#r._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#r.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const s=this.pointerup.bind(this);this.div.addEventListener("pointerup",s,{signal:t}),this.div.addEventListener("pointercancel",s,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#n.set(t.id,t);const{annotationElementId:s}=t;s&&this.#r.isDeletedAnnotationElement(s)&&this.#r.removeDeletedAnnotationElement(t)}detach(t){this.#n.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#r.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#r.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#r.addDeletedAnnotationElement(t.annotationElementId),Lt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#r.addEditor(t),this.attach(t),!t.isAttachedToDOM){const s=t.render();this.div.append(s),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#u),this.#r.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:s}=document;t.div.contains(s)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#r._signal}),s.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const s=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:s,undo:n,mustExec:!1})}getNextId(){return this.#r.getId()}get#p(){return Ci.#g.get(this.#r.getMode())}combinedSignal(t){return this.#r.combinedSignal(t)}#y(t){const s=this.#p;return s?new s.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#p?.canCreateNewEmptyEditor()}pasteEditor(t,s){this.#r.updateToolbar(t),this.#r.updateMode(t);const{offsetX:n,offsetY:r}=this.#v(),o=this.getNextId(),l=this.#y({parent:this,id:o,x:n,y:r,uiManager:this.#r,isCentered:!0,...s});l&&this.add(l)}async deserialize(t){return await Ci.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#r)||null}createAndAddNewEditor(t,s,n={}){const r=this.getNextId(),o=this.#y({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#r,isCentered:s,...n});return o&&this.add(o),o}#v(){const{x:t,y:s,width:n,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,t),l=Math.max(0,s),c=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,s+r),f=(o+c)/2-t,p=(l+d)/2-s,[y,x]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:y,offsetY:x}}addNewEditor(){this.createAndAddNewEditor(this.#v(),!0)}setSelected(t){this.#r.setSelected(t)}toggleSelected(t){this.#r.toggleSelected(t)}unselect(t){this.#r.unselect(t)}pointerup(t){const{isMac:s}=rs.platform;if(!(t.button!==0||t.ctrlKey&&s)&&t.target===this.div&&this.#l&&(this.#l=!1,!(this.#p?.isDrawer&&this.#p.supportMultipleDrawings))){if(!this.#e){this.#e=!0;return}if(this.#r.getMode()===qt.STAMP){this.#r.unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#r.getMode()===qt.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:s}=rs.platform;if(t.button!==0||t.ctrlKey&&s||t.target!==this.div)return;if(this.#l=!0,this.#p?.isDrawer){this.startDrawingSession(t);return}const n=this.#r.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus(),this.#c){this.#p.startDrawing(this,this.#r,!1,t);return}this.#r.setCurrentDrawingSession(this),this.#c=new AbortController;const s=this.#r.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#h=null,this.commitOrRemove())},{signal:s}),this.#p.startDrawing(this,this.#r,!1,t)}pause(t){if(t){const{activeElement:s}=document;this.div.contains(s)&&(this.#h=s);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(t=!1){return this.#c?(this.#r.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#h=null,this.#p.endDrawing(t)):null}findNewParent(t,s,n){const r=this.#r.findParent(s,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#p.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#r.getActive()?.parent===this&&(this.#r.commitOrRemove(),this.#r.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#n.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#n.clear(),this.#r.removeLayer(this)}#b(){for(const t of this.#n.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Dn(this.div,t);for(const s of this.#r.getEditors(this.pageIndex))this.add(s),s.rebuild();this.updateMode()}update({viewport:t}){this.#r.commitOrRemove(),this.#b();const s=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Dn(this.div,{rotation:n}),s!==n)for(const r of this.#n.values())r.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:s}=this.viewport.rawDims;return[t,s]}get scale(){return this.#r.viewParameters.realScale}}class ns{#t=null;#e=0;#s=new Map;#i=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#s.size>0)for(const s of this.#s.values())s.remove(),t.append(s);this.#t=t}}static get _svgFactory(){return Yt(this,"_svgFactory",new gh)}static#a(t,[s,n,r,o]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*s}%`,l.width=`${100*r}%`,l.height=`${100*o}%`}#n(){const t=ns._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#l(t,s){const n=ns._svgFactory.createElement("clipPath");t.append(n);const r=`clip_${s}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const o=ns._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${s}`),o.classList.add("clip"),r}#o(t,s){for(const[n,r]of Object.entries(s))r===null?t.removeAttribute(n):t.setAttribute(n,r)}draw(t,s=!1,n=!1){const r=this.#e++,o=this.#n(),l=ns._svgFactory.createElement("defs");o.append(l);const c=ns._svgFactory.createElement("path");l.append(c);const d=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke"),s&&this.#i.set(r,c);const f=n?this.#l(l,d):null,p=ns._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#s.set(r,o),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,s){const n=this.#e++,r=this.#n(),o=ns._svgFactory.createElement("defs");r.append(o);const l=ns._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(s){const y=ns._svgFactory.createElement("mask");o.append(y),d=`mask_p${this.pageIndex}_${n}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const x=ns._svgFactory.createElement("rect");y.append(x),x.setAttribute("width","1"),x.setAttribute("height","1"),x.setAttribute("fill","white");const v=ns._svgFactory.createElement("use");y.append(v),v.setAttribute("href",`#${c}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const f=ns._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${c}`),d&&f.setAttribute("mask",`url(#${d})`);const p=f.cloneNode();return r.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#s.set(n,r),n}finalizeDraw(t,s){this.#i.delete(t),this.updateProperties(t,s)}updateProperties(t,s){if(!s)return;const{root:n,bbox:r,rootClass:o,path:l}=s,c=typeof t=="number"?this.#s.get(t):t;if(c){if(n&&this.#o(c,n),r&&ns.#a(c,r),o){const{classList:d}=c;for(const[f,p]of Object.entries(o))d.toggle(f,p)}if(l){const f=c.firstChild.firstChild;this.#o(f,l)}}}updateParent(t,s){if(s===this)return;const n=this.#s.get(t);n&&(s.#t.append(n),this.#s.delete(t),s.#s.set(t,n))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#s.get(t).remove(),this.#s.delete(t))}destroy(){this.#t=null;for(const t of this.#s.values())t.remove();this.#s.clear(),this.#i.clear()}}globalThis.pdfjsTestingUtils={HighlightOutliner:Kd};var Cw=Bt.AbortException,Tw=Bt.AnnotationEditorLayer,Nw=Bt.AnnotationEditorParamsType,jw=Bt.AnnotationEditorType,Mw=Bt.AnnotationEditorUIManager,Rw=Bt.AnnotationLayer,Dw=Bt.AnnotationMode,Ow=Bt.ColorPicker,Lw=Bt.DOMSVGFactory,zw=Bt.DrawLayer,Pw=Bt.FeatureTest,ny=Bt.GlobalWorkerOptions,Fw=Bt.ImageKind,Bw=Bt.InvalidPDFException,Iw=Bt.MissingPDFException,Uw=Bt.OPS,Hw=Bt.OutputScale,Gw=Bt.PDFDataRangeTransport,qw=Bt.PDFDateString,Xw=Bt.PDFWorker,Vw=Bt.PasswordResponses,Yw=Bt.PermissionFlag,$w=Bt.PixelsPerInch,Kw=Bt.RenderingCancelledException,Ww=Bt.TextLayer,Zw=Bt.TouchManager,Qw=Bt.UnexpectedResponseException,Jw=Bt.Util,tS=Bt.VerbosityLevel,eS=Bt.XfaLayer,sS=Bt.build,iS=Bt.createValidAbsoluteUrl,nS=Bt.fetchData,xh=Bt.getDocument,aS=Bt.getFilenameFromUrl,rS=Bt.getPdfFilenameFromUrl,oS=Bt.getXfaPageViewport,lS=Bt.isDataScheme,cS=Bt.isPdfFile,uS=Bt.noContextMenu,dS=Bt.normalizeUnicode,hS=Bt.setLayerDimensions,fS=Bt.shadow,gS=Bt.stopEvent,pS=Bt.version;const ay=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Cw,AnnotationEditorLayer:Tw,AnnotationEditorParamsType:Nw,AnnotationEditorType:jw,AnnotationEditorUIManager:Mw,AnnotationLayer:Rw,AnnotationMode:Dw,ColorPicker:Ow,DOMSVGFactory:Lw,DrawLayer:zw,FeatureTest:Pw,GlobalWorkerOptions:ny,ImageKind:Fw,InvalidPDFException:Bw,MissingPDFException:Iw,OPS:Uw,OutputScale:Hw,PDFDataRangeTransport:Gw,PDFDateString:qw,PDFWorker:Xw,PasswordResponses:Vw,PermissionFlag:Yw,PixelsPerInch:$w,RenderingCancelledException:Kw,TextLayer:Ww,TouchManager:Zw,UnexpectedResponseException:Qw,Util:Jw,VerbosityLevel:tS,XfaLayer:eS,build:sS,createValidAbsoluteUrl:iS,fetchData:nS,getDocument:xh,getFilenameFromUrl:aS,getPdfFilenameFromUrl:rS,getXfaPageViewport:oS,isDataScheme:lS,isPdfFile:cS,noContextMenu:uS,normalizeUnicode:dS,setLayerDimensions:hS,shadow:fS,stopEvent:gS,version:pS},Symbol.toStringTag,{value:"Module"})),mS="/projects/quire/assets/pdf.worker.min-yatZIOMy.mjs";ny.workerSrc=mS;const Dl=new Map;function yS(h){const t=h.length,s=h.slice(0,16),n=h.slice(-16);return`${t}-${Array.from(s).join(",")}-${Array.from(n).join(",")}`}async function za(h,t,s=.5){try{const n=yS(h);let r=Dl.get(n);r||(r=await xh({data:h.slice()}).promise,Dl.set(n,r));const o=await r.getPage(t+1),l=o.getViewport({scale:s}),c=document.createElement("canvas");c.width=l.width,c.height=l.height;const d=c.getContext("2d");return d?(await o.render({canvasContext:d,viewport:l}).promise,c.toDataURL("image/jpeg",.7)):null}catch{return null}}async function bS(h){try{return(await xh({data:h.slice()}).promise).numPages}catch{return 0}}function xS(){for(const h of Dl.values())h.destroy();Dl.clear()}const vS=Object.freeze(Object.defineProperty({__proto__:null,clearDocumentCache:xS,getPageCount:bS,renderPageThumbnail:za},Symbol.toStringTag,{value:"Module"}));class _S{queue=[];active=0;maxConcurrent=3;cancelledSet=new Set;enqueue(t,s,n){return this.cancelledSet.delete(t),this.queue=this.queue.filter(r=>r.pageIndex!==t),new Promise(r=>{const o={pageIndex:t,priority:s,renderFn:n,resolve:r};s==="high"?this.queue.unshift(o):this.queue.push(o),this.processNext()})}cancel(t){this.cancelledSet.add(t),this.queue=this.queue.filter(s=>s.pageIndex===t?(s.resolve(null),!1):!0)}cancelAll(){for(const t of this.queue)this.cancelledSet.add(t.pageIndex),t.resolve(null);this.queue=[]}async processNext(){if(this.active>=this.maxConcurrent||this.queue.length===0)return;const t=this.queue.shift();if(t){if(this.cancelledSet.has(t.pageIndex)){t.resolve(null),this.processNext();return}this.active++;try{const s=await t.renderFn();this.cancelledSet.has(t.pageIndex)?t.resolve(null):t.resolve(s)}catch{t.resolve(null)}finally{this.active--,this.processNext()}}}}const Ea=new _S;function ry({pdfBytes:h,pageCount:t,selectedPages:s,onPageClick:n,overlayType:r="selected",rotations:o}){const[l,c]=z.useState(new Map),[d,f]=z.useState(new Map),[p,y]=z.useState(0),x=z.useRef(null),v=z.useRef(null),_=z.useCallback(A=>{f(S=>new Map(S).set(A,"loading")),Ea.enqueue(A,"high",()=>za(h,A)).then(S=>{S?(c(k=>new Map(k).set(A,S)),f(k=>new Map(k).set(A,"rendered"))):f(k=>new Map(k).set(A,"failed"))})},[h]);z.useEffect(()=>{Ea.cancelAll(),c(new Map),f(new Map)},[h]),z.useEffect(()=>{const A=new IntersectionObserver(k=>{for(const T of k){const j=Number(T.target.getAttribute("data-page"));isNaN(j)||T.isIntersecting&&!l.has(j)&&d.get(j)!=="loading"&&_(j)}},{rootMargin:"200px"});return v.current=A,x.current?.querySelectorAll("[data-page]")?.forEach(k=>A.observe(k)),()=>A.disconnect()},[t,_,l,d]);const w=A=>{const S=Math.floor((x.current?.clientWidth??600)/170);let k=p;if(A.key==="ArrowRight")k=Math.min(p+1,t-1);else if(A.key==="ArrowLeft")k=Math.max(p-1,0);else if(A.key==="ArrowDown")k=Math.min(p+S,t-1);else if(A.key==="ArrowUp")k=Math.max(p-S,0);else if(A.key===" "||A.key==="Enter"){A.preventDefault(),n?.(p);return}else return;A.preventDefault(),y(k)};return g.jsx("div",{ref:x,className:"grid gap-3",style:{gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))"},role:"grid",onKeyDown:w,tabIndex:0,children:Array.from({length:t},(A,S)=>{const k=d.get(S),T=l.get(S),j=s?.has(S),D=o?.[S]??0,H=p===S;return g.jsxs("div",{"data-page":S,role:"gridcell",className:`relative aspect-[3/4] rounded-lg overflow-hidden cursor-pointer border-2 transition-all ${j&&r==="selected"?"border-indigo-500 ring-2 ring-indigo-200 dark:ring-indigo-800":j&&r==="delete"?"border-red-500 ring-2 ring-red-200 dark:ring-red-800":"border-transparent hover:border-gray-300 dark:hover:border-gray-600"} ${H?"ring-2 ring-indigo-400 dark:ring-indigo-600 ring-offset-2 dark:ring-offset-gray-900":""}`,onClick:()=>n?.(S),tabIndex:-1,children:[k==="rendered"&&T?g.jsx("img",{src:T,alt:`Page ${S+1}`,className:"w-full h-full object-cover bg-white"}):k==="failed"?g.jsxs("div",{className:"w-full h-full bg-gray-100 dark:bg-gray-700 flex flex-col items-center justify-center",children:[g.jsx(Hr,{size:20,className:"text-amber-400 mb-1"}),g.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Page ",S+1]})]}):g.jsx("div",{className:"w-full h-full bg-gray-100 dark:bg-gray-700 animate-pulse flex items-center justify-center",children:g.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:S+1})}),g.jsx("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 text-[10px] bg-black/60 text-white px-1.5 py-0.5 rounded",children:S+1}),j&&r==="selected"&&g.jsx("div",{className:"absolute inset-0 bg-indigo-500/10 dark:bg-indigo-400/20 flex items-center justify-center",children:g.jsx(sv,{size:24,className:"text-indigo-600 dark:text-indigo-400"})}),j&&r==="delete"&&g.jsx("div",{className:"absolute inset-0 bg-red-500/20 dark:bg-red-400/30 flex items-center justify-center",children:g.jsx(Ln,{size:24,className:"text-red-600 dark:text-red-400"})}),D>0&&g.jsxs("span",{className:"absolute top-1 right-1 bg-amber-500 text-white text-[10px] px-1 rounded flex items-center gap-0.5",children:[g.jsx($s,{size:10})," ",D,""]})]},S)})})}function tc({pageCount:h,pdfBytes:t,selectedPages:s,onSelectionChange:n,overlayType:r="selected"}){const[o,l]=z.useState(""),[c,d]=z.useState(null),f=z.useRef(void 0),p=z.useRef(!1);z.useEffect(()=>{if(p.current){p.current=!1;return}l(m1(Array.from(s).map(k=>k+1)))},[s]);const y=z.useCallback(k=>{l(k),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{if(!k.trim()){n(new Set),d(null);return}const T=Gl(k,h);T.error?d(T.error):(d(null),p.current=!0,n(new Set(T.pages.map(j=>j-1))))},300)},[h,n]),x=k=>{p.current=!0;const T=new Set(s);T.has(k)?T.delete(k):T.add(k),n(T)},v=()=>{p.current=!0,n(new Set(Array.from({length:h},(k,T)=>T)))},_=()=>{p.current=!0,n(new Set(Array.from({length:h},(k,T)=>T).filter(k=>(k+1)%2===0)))},w=()=>{p.current=!0,n(new Set(Array.from({length:h},(k,T)=>T).filter(k=>(k+1)%2===1)))},A=()=>{p.current=!0,n(new Set(Array.from({length:h},(k,T)=>T).filter(k=>!s.has(k))))},S=()=>{p.current=!0,n(new Set)};return g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"page-range",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Page range"}),g.jsx("input",{id:"page-range",type:"text",value:o,onChange:k=>y(k.target.value),placeholder:"e.g., 1-3, 5, 8-end",className:`w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none dark:bg-gray-800 dark:text-gray-100 ${c?"border-red-300 dark:border-red-700":"border-gray-300 dark:border-gray-600"}`}),c&&g.jsx("p",{className:"text-xs text-red-500 dark:text-red-400 mt-1",children:c})]}),g.jsx(E1,{pageCount:h,selectedCount:s.size,onSelectAll:v,onSelectEven:_,onSelectOdd:w,onInvert:A,onClear:S}),g.jsx(ry,{pdfBytes:t,pageCount:h,selectedPages:s,onPageClick:x,overlayType:r})]})}function ss(){const{status:h,progress:t,error:s}=Dt();if(h==="idle")return null;const n=t&&t.total>0?Math.round(t.current/t.total*100):null,r=h==="done",o=h==="error";return g.jsxs("div",{className:"mb-4",role:"progressbar","aria-valuenow":n??(r?100:0),"aria-valuemin":0,"aria-valuemax":100,"aria-label":r?"Processing complete":o?"Processing failed":"Processing",children:[g.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r?g.jsx("div",{className:"h-full bg-green-500 w-full transition-all duration-300"}):o?g.jsx("div",{className:"h-full bg-red-500 w-full"}):n!==null?g.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-300",style:{width:`${n}%`}}):g.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-full"})}),g.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[g.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r&&g.jsxs("span",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[g.jsx(Tl,{size:12})," Done"]}),o&&g.jsx("span",{className:"text-red-600 dark:text-red-400",children:s}),h==="processing"&&t&&`${t.step} ${t.current} of ${t.total}...`,h==="processing"&&!t&&"Processing...",h==="cancelled"&&"Cancelled"]}),h==="processing"&&g.jsxs("button",{onClick:()=>ze.cancelAll(),className:"text-xs text-gray-400 dark:text-gray-500 hover:text-red-500 dark:hover:text-red-400 flex items-center gap-1 transition-colors","aria-label":"Cancel processing",children:[g.jsx(rn,{size:12})," Cancel"]})]})]})}function wS(h){const t=h/1e3;return t<1?`${h}ms`:`${t.toFixed(1)}s`}function SS({pdfBytes:h,pageCount:t}){const[s,n]=z.useState(new Map),[r,o]=z.useState(new Set),l=z.useRef(null),c=z.useCallback(d=>{s.has(d)||r.has(d)||(o(f=>new Set(f).add(d)),za(h,d,1).then(f=>{f&&n(p=>new Map(p).set(d,f)),o(p=>{const y=new Set(p);return y.delete(d),y})}))},[h,s,r]);return z.useEffect(()=>{n(new Map),o(new Set)},[h]),z.useEffect(()=>{if(!l.current)return;const d=new IntersectionObserver(p=>{for(const y of p)if(y.isIntersecting){const x=Number(y.target.getAttribute("data-page-idx"));isNaN(x)||c(x)}},{rootMargin:"300px",root:null});return l.current.querySelectorAll("[data-page-idx]").forEach(p=>d.observe(p)),()=>d.disconnect()},[t,h,c]),g.jsx("div",{ref:l,className:"space-y-3 max-h-[600px] overflow-y-auto pr-1","data-testid":"page-renderer",children:Array.from({length:t},(d,f)=>{const p=s.get(f);return g.jsxs("div",{"data-page-idx":f,className:"relative",children:[p?g.jsx("img",{src:p,alt:`Page ${f+1}`,className:"w-full h-auto rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 shadow-sm"}):g.jsx("div",{className:"w-full aspect-[3/4] rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-700 animate-pulse flex items-center justify-center",children:g.jsxs("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:["Page ",f+1]})}),g.jsxs("span",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-[10px] px-2 py-0.5 rounded-full backdrop-blur-sm",children:[f+1," / ",t]})]},f)})})}function Ye({result:h,originalBytes:t,showOriginalToggle:s}){const[n,r]=z.useState(!1),[o,l]=z.useState(0),c=h.files.length>1,d=h.files[o],f=n&&t?t:d?.bytes,p=n&&t?h.files[0]?.pageCount??0:d?.pageCount??0,y=h.files.reduce((_,w)=>_+w.bytes.length,0),x=t?.length??0,v=x>0?(y-x)/x*100:0;return z.useEffect(()=>{l(0),r(!1)},[h]),g.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4 space-y-4",children:[g.jsxs("div",{className:"flex items-start justify-between gap-4",children:[g.jsxs("div",{className:"space-y-1",children:[!c&&d&&g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:d.name}),g.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[d.pageCount," page",d.pageCount!==1?"s":"","  ",ri(d.bytes.length)]})]}),c&&g.jsxs(g.Fragment,{children:[g.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[h.files.length," files"]}),g.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: ",ri(y)]})]}),x>0&&g.jsx("p",{className:`text-xs ${v<0?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:v<0?` ${Math.abs(v).toFixed(0)}% smaller`:v>5?` ${v.toFixed(0)}% larger`:"Similar size"}),g.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Completed in ",wS(h.processingTime)]})]}),s&&t&&g.jsxs("button",{onClick:()=>r(!n),className:"flex items-center gap-1.5 text-xs text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 shrink-0",children:[n?g.jsx(Nl,{size:12}):g.jsx(jl,{size:12}),n?"Show processed":"Show original"]})]}),c&&!n&&g.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1 border-b border-gray-200 dark:border-gray-700",children:h.files.map((_,w)=>g.jsxs("button",{onClick:()=>l(w),className:`flex items-center gap-1.5 px-3 py-1.5 text-xs rounded-t-lg border border-b-0 whitespace-nowrap transition-colors ${o===w?"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-indigo-700 dark:text-indigo-300 font-medium":"bg-transparent border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[g.jsx(Ve,{size:12}),_.name,g.jsxs("span",{className:"text-gray-400 dark:text-gray-500 ml-1",children:[_.pageCount,"p"]})]},w))}),f&&p>0&&g.jsx(SS,{pdfBytes:f,pageCount:p})]})}function $e({result:h,onReset:t}){const s=h.files.length===1;return g.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-4",children:[s?g.jsxs("button",{onClick:()=>H0(h.files[0]),className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors focus-ring",children:[g.jsx(O0,{size:16})," Download"]}):g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:()=>k1(h.files,"quire-output.zip"),className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors focus-ring",children:[g.jsx(O0,{size:16})," Download All as ZIP"]}),h.files.map((n,r)=>g.jsx("button",{onClick:()=>H0(n),className:"px-3 py-2 text-sm border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:n.name},r))]}),g.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2.5 text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors focus-ring",children:[g.jsx(Br,{size:16})," Process another file"]})]})}function AS(){const h=window.location.hash.replace("#","");return h==="pipeline"?{currentView:"pipeline",currentToolId:null,pipelineMode:!0}:h?{currentView:"tool",currentToolId:h,pipelineMode:!1}:{currentView:"grid",currentToolId:null,pipelineMode:!1}}const Pn=La(h=>({...AS(),pipelineSelection:[],setView:(s,n)=>{s==="tool"&&n?(window.location.hash=`#${n}`,h({currentView:"tool",currentToolId:n})):s==="pipeline"?(window.location.hash="#pipeline",h({currentView:"pipeline",currentToolId:null,pipelineMode:!0})):(window.location.hash="",h({currentView:"grid",currentToolId:null}))},togglePipelineMode:()=>h(s=>({pipelineMode:!s.pipelineMode,pipelineSelection:[]})),togglePipelineTool:s=>h(n=>n.pipelineSelection.indexOf(s)>=0?{pipelineSelection:n.pipelineSelection.filter(o=>o!==s)}:n.pipelineSelection.length>=5?n:{pipelineSelection:[...n.pipelineSelection,s]}),clearPipelineSelection:()=>h({pipelineSelection:[]}),setPipelineSelection:s=>h({pipelineSelection:s.slice(0,5)})}));function bs({analysis:h,currentToolId:t}){const[s,n]=z.useState(!1),r=Pn(p=>p.setView);if(!h||s)return null;let o=null,l=g.jsx(Il,{size:16}),c="bg-blue-50 dark:bg-blue-950 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800",d=null,f="";if(h.isEncrypted&&t!=="unlock")o="This PDF is password-protected. Try Unlock PDF first.",l=g.jsx(Hr,{size:16}),c="bg-amber-50 dark:bg-amber-950 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-800",d=()=>r("tool","unlock"),f="Go to Unlock";else if(h.pageCount>=50&&t!=="split")o=`Large document (${h.pageCount} pages). Split PDF can help extract what you need.`;else if(h.hasMixedPageSizes)o="This PDF has mixed page sizes. Page Numbers and Watermark will adapt to each page.",c="bg-gray-50 dark:bg-gray-800 text-gray-600 dark:text-gray-400 border-gray-200 dark:border-gray-700";else return null;return g.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm mb-4 ${c}`,children:[l,g.jsx("span",{className:"flex-1",children:o}),d&&g.jsx("button",{onClick:d,className:"font-medium underline",children:f}),g.jsx("button",{onClick:()=>n(!0),className:"p-0.5 hover:opacity-70","aria-label":"Dismiss",children:g.jsx(rn,{size:14})})]})}let kS={data:""},ES=h=>{if(typeof window=="object"){let t=(h?h.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(h||document.head).appendChild(t),t.firstChild}return h||kS},CS=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,TS=/\/\*[^]*?\*\/|  +/g,lm=/\n+/g,sn=(h,t)=>{let s="",n="",r="";for(let o in h){let l=h[o];o[0]=="@"?o[1]=="i"?s=o+" "+l+";":n+=o[1]=="f"?sn(l,o):o+"{"+sn(l,o[1]=="k"?"":t)+"}":typeof l=="object"?n+=sn(l,t?t.replace(/([^,])+/g,c=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,c):c?c+" "+d:d)):o):l!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=sn.p?sn.p(o,l):o+":"+l+";")}return s+(t&&r?t+"{"+r+"}":r)+n},ki={},oy=h=>{if(typeof h=="object"){let t="";for(let s in h)t+=s+oy(h[s]);return t}return h},NS=(h,t,s,n,r)=>{let o=oy(h),l=ki[o]||(ki[o]=(d=>{let f=0,p=11;for(;f<d.length;)p=101*p+d.charCodeAt(f++)>>>0;return"go"+p})(o));if(!ki[l]){let d=o!==h?h:(f=>{let p,y,x=[{}];for(;p=CS.exec(f.replace(TS,""));)p[4]?x.shift():p[3]?(y=p[3].replace(lm," ").trim(),x.unshift(x[0][y]=x[0][y]||{})):x[0][p[1]]=p[2].replace(lm," ").trim();return x[0]})(h);ki[l]=sn(r?{["@keyframes "+l]:d}:d,s?"":"."+l)}let c=s&&ki.g?ki.g:null;return s&&(ki.g=ki[l]),((d,f,p,y)=>{y?f.data=f.data.replace(y,d):f.data.indexOf(d)===-1&&(f.data=p?d+f.data:f.data+d)})(ki[l],t,n,c),l},jS=(h,t,s)=>h.reduce((n,r,o)=>{let l=t[o];if(l&&l.call){let c=l(s),d=c&&c.props&&c.props.className||/^go/.test(c)&&c;l=d?"."+d:c&&typeof c=="object"?c.props?"":sn(c,""):c===!1?"":c}return n+r+(l??"")},"");function ec(h){let t=this||{},s=h.call?h(t.p):h;return NS(s.unshift?s.raw?jS(s,[].slice.call(arguments,1),t.p):s.reduce((n,r)=>Object.assign(n,r&&r.call?r(t.p):r),{}):s,ES(t.target),t.g,t.o,t.k)}let ly,Zd,Qd;ec.bind({g:1});let Ni=ec.bind({k:1});function MS(h,t,s,n){sn.p=t,ly=h,Zd=s,Qd=n}function un(h,t){let s=this||{};return function(){let n=arguments;function r(o,l){let c=Object.assign({},o),d=c.className||r.className;s.p=Object.assign({theme:Zd&&Zd()},c),s.o=/ *go\d+/.test(d),c.className=ec.apply(s,n)+(d?" "+d:"");let f=h;return h[0]&&(f=c.as||h,delete c.as),Qd&&f[0]&&Qd(c),ly(f,c)}return r}}var RS=h=>typeof h=="function",Ol=(h,t)=>RS(h)?h(t):h,DS=(()=>{let h=0;return()=>(++h).toString()})(),cy=(()=>{let h;return()=>{if(h===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");h=!t||t.matches}return h}})(),OS=20,vh="default",uy=(h,t)=>{let{toastLimit:s}=h.settings;switch(t.type){case 0:return{...h,toasts:[t.toast,...h.toasts].slice(0,s)};case 1:return{...h,toasts:h.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:n}=t;return uy(h,{type:h.toasts.find(l=>l.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=t;return{...h,toasts:h.toasts.map(l=>l.id===r||r===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...h,toasts:[]}:{...h,toasts:h.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...h,pausedAt:t.time};case 6:let o=t.time-(h.pausedAt||0);return{...h,pausedAt:void 0,toasts:h.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+o}))}}},Cl=[],dy={toasts:[],pausedAt:void 0,settings:{toastLimit:OS}},ai={},hy=(h,t=vh)=>{ai[t]=uy(ai[t]||dy,h),Cl.forEach(([s,n])=>{s===t&&n(ai[t])})},fy=h=>Object.keys(ai).forEach(t=>hy(h,t)),LS=h=>Object.keys(ai).find(t=>ai[t].toasts.some(s=>s.id===h)),sc=(h=vh)=>t=>{hy(t,h)},zS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},PS=(h={},t=vh)=>{let[s,n]=z.useState(ai[t]||dy),r=z.useRef(ai[t]);z.useEffect(()=>(r.current!==ai[t]&&n(ai[t]),Cl.push([t,n]),()=>{let l=Cl.findIndex(([c])=>c===t);l>-1&&Cl.splice(l,1)}),[t]);let o=s.toasts.map(l=>{var c,d,f;return{...h,...h[l.type],...l,removeDelay:l.removeDelay||((c=h[l.type])==null?void 0:c.removeDelay)||h?.removeDelay,duration:l.duration||((d=h[l.type])==null?void 0:d.duration)||h?.duration||zS[l.type],style:{...h.style,...(f=h[l.type])==null?void 0:f.style,...l.style}}});return{...s,toasts:o}},FS=(h,t="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:h,pauseDuration:0,...s,id:s?.id||DS()}),Zr=h=>(t,s)=>{let n=FS(t,h,s);return sc(n.toasterId||LS(n.id))({type:2,toast:n}),n.id},Le=(h,t)=>Zr("blank")(h,t);Le.error=Zr("error");Le.success=Zr("success");Le.loading=Zr("loading");Le.custom=Zr("custom");Le.dismiss=(h,t)=>{let s={type:3,toastId:h};t?sc(t)(s):fy(s)};Le.dismissAll=h=>Le.dismiss(void 0,h);Le.remove=(h,t)=>{let s={type:4,toastId:h};t?sc(t)(s):fy(s)};Le.removeAll=h=>Le.remove(void 0,h);Le.promise=(h,t,s)=>{let n=Le.loading(t.loading,{...s,...s?.loading});return typeof h=="function"&&(h=h()),h.then(r=>{let o=t.success?Ol(t.success,r):void 0;return o?Le.success(o,{id:n,...s,...s?.success}):Le.dismiss(n),r}).catch(r=>{let o=t.error?Ol(t.error,r):void 0;o?Le.error(o,{id:n,...s,...s?.error}):Le.dismiss(n)}),h};var BS=1e3,IS=(h,t="default")=>{let{toasts:s,pausedAt:n}=PS(h,t),r=z.useRef(new Map).current,o=z.useCallback((y,x=BS)=>{if(r.has(y))return;let v=setTimeout(()=>{r.delete(y),l({type:4,toastId:y})},x);r.set(y,v)},[]);z.useEffect(()=>{if(n)return;let y=Date.now(),x=s.map(v=>{if(v.duration===1/0)return;let _=(v.duration||0)+v.pauseDuration-(y-v.createdAt);if(_<0){v.visible&&Le.dismiss(v.id);return}return setTimeout(()=>Le.dismiss(v.id,t),_)});return()=>{x.forEach(v=>v&&clearTimeout(v))}},[s,n,t]);let l=z.useCallback(sc(t),[t]),c=z.useCallback(()=>{l({type:5,time:Date.now()})},[l]),d=z.useCallback((y,x)=>{l({type:1,toast:{id:y,height:x}})},[l]),f=z.useCallback(()=>{n&&l({type:6,time:Date.now()})},[n,l]),p=z.useCallback((y,x)=>{let{reverseOrder:v=!1,gutter:_=8,defaultPosition:w}=x||{},A=s.filter(T=>(T.position||w)===(y.position||w)&&T.height),S=A.findIndex(T=>T.id===y.id),k=A.filter((T,j)=>j<S&&T.visible).length;return A.filter(T=>T.visible).slice(...v?[k+1]:[0,k]).reduce((T,j)=>T+(j.height||0)+_,0)},[s]);return z.useEffect(()=>{s.forEach(y=>{if(y.dismissed)o(y.id,y.removeDelay);else{let x=r.get(y.id);x&&(clearTimeout(x),r.delete(y.id))}})},[s,o]),{toasts:s,handlers:{updateHeight:d,startPause:c,endPause:f,calculateOffset:p}}},US=Ni`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,HS=Ni`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,GS=Ni`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,qS=un("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${h=>h.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${US} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${HS} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${h=>h.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${GS} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,XS=Ni`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,VS=un("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${h=>h.secondary||"#e0e0e0"};
  border-right-color: ${h=>h.primary||"#616161"};
  animation: ${XS} 1s linear infinite;
`,YS=Ni`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,$S=Ni`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,KS=un("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${h=>h.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${YS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${$S} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${h=>h.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,WS=un("div")`
  position: absolute;
`,ZS=un("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,QS=Ni`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,JS=un("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${QS} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,tA=({toast:h})=>{let{icon:t,type:s,iconTheme:n}=h;return t!==void 0?typeof t=="string"?z.createElement(JS,null,t):t:s==="blank"?null:z.createElement(ZS,null,z.createElement(VS,{...n}),s!=="loading"&&z.createElement(WS,null,s==="error"?z.createElement(qS,{...n}):z.createElement(KS,{...n})))},eA=h=>`
0% {transform: translate3d(0,${h*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,sA=h=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${h*-150}%,-1px) scale(.6); opacity:0;}
`,iA="0%{opacity:0;} 100%{opacity:1;}",nA="0%{opacity:1;} 100%{opacity:0;}",aA=un("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,rA=un("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,oA=(h,t)=>{let s=h.includes("top")?1:-1,[n,r]=cy()?[iA,nA]:[eA(s),sA(s)];return{animation:t?`${Ni(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ni(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},lA=z.memo(({toast:h,position:t,style:s,children:n})=>{let r=h.height?oA(h.position||t||"top-center",h.visible):{opacity:0},o=z.createElement(tA,{toast:h}),l=z.createElement(rA,{...h.ariaProps},Ol(h.message,h));return z.createElement(aA,{className:h.className,style:{...r,...s,...h.style}},typeof n=="function"?n({icon:o,message:l}):z.createElement(z.Fragment,null,o,l))});MS(z.createElement);var cA=({id:h,className:t,style:s,onHeightUpdate:n,children:r})=>{let o=z.useCallback(l=>{if(l){let c=()=>{let d=l.getBoundingClientRect().height;n(h,d)};c(),new MutationObserver(c).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[h,n]);return z.createElement("div",{ref:o,className:t,style:s},r)},uA=(h,t)=>{let s=h.includes("top"),n=s?{top:0}:{bottom:0},r=h.includes("center")?{justifyContent:"center"}:h.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:cy()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(s?1:-1)}px)`,...n,...r}},dA=ec`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,vl=16,hA=({reverseOrder:h,position:t="top-center",toastOptions:s,gutter:n,children:r,toasterId:o,containerStyle:l,containerClassName:c})=>{let{toasts:d,handlers:f}=IS(s,o);return z.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:vl,left:vl,right:vl,bottom:vl,pointerEvents:"none",...l},className:c,onMouseEnter:f.startPause,onMouseLeave:f.endPause},d.map(p=>{let y=p.position||t,x=f.calculateOffset(p,{reverseOrder:h,gutter:n,defaultPosition:t}),v=uA(y,x);return z.createElement(cA,{id:p.id,key:p.id,onHeightUpdate:f.updateHeight,className:p.visible?dA:"",style:v},p.type==="custom"?Ol(p.message,p):r?r(p):z.createElement(lA,{toast:p,position:y}))}))},ge=Le;function fA(){const[h,t]=z.useState([]),[s,n]=z.useState(new Set),[r,o]=z.useState("single"),[l,c]=z.useState(""),[d,f]=z.useState(null),p=Dt(k=>k.status),y=h[0]??null,x=z.useMemo(()=>y?{isEncrypted:y.isEncrypted,pageCount:y.pageCount,hasMixedPageSizes:!1}:null,[y]),v=z.useMemo(()=>{if(r!=="separate"||!y||!l.trim())return null;const k=l.split(",").map(j=>j.trim()).filter(Boolean),T=[];for(const j of k){const D=Gl(j,y.pageCount);if(D.error)return{error:D.error,ranges:[]};T.push(D.pages.map(H=>H-1))}return{error:null,ranges:T}},[r,l,y]),_=z.useMemo(()=>y?r==="single"?s.size>0:r==="separate"?v!==null&&!v.error&&v.ranges.length>0:!1:!1,[y,r,s,v]),w=z.useCallback(k=>{t(k),n(new Set),c(""),f(null),Dt.getState().reset()},[]),A=z.useCallback(async()=>{if(!y||!_)return;let k;if(r==="single")k=[Array.from(s).sort((T,j)=>T-j)];else{if(!v||v.error)return;k=v.ranges}try{const T=await ze.process("split",[y.bytes],{mode:r,ranges:k});f(T)}catch(T){const j=T instanceof Error?T.message:String(T);ge.error(j)}},[y,_,r,s,v]),S=z.useCallback(()=>{t([]),n(new Set),o("single"),c(""),f(null),Dt.getState().reset()},[]);return d?g.jsxs("div",{className:"space-y-4",children:[g.jsx(Ye,{result:d}),g.jsx($e,{result:d,onReset:S})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsx(es,{onFilesLoaded:w}),y&&g.jsxs(g.Fragment,{children:[g.jsx(bs,{analysis:x,currentToolId:"split"}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[y.pageCount," page",y.pageCount!==1?"s":"",r==="single"&&s.size>0&&`  ${s.size} selected`]}),g.jsxs("div",{className:"flex items-center gap-2",children:[r==="single"&&s.size>0&&g.jsx("button",{onClick:()=>n(new Set),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:"Reset Selection"}),g.jsxs("button",{onClick:A,disabled:!_||p==="processing",className:"flex items-center gap-1.5 px-4 py-1.5 text-sm font-medium bg-indigo-600 dark:bg-indigo-500 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(Da,{size:14}),p==="processing"?"Processing...":"Split PDF"]})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Split mode"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>o("single"),className:`px-4 py-2 text-sm rounded-lg border transition-colors ${r==="single"?"bg-indigo-50 border-indigo-300 text-indigo-700 font-medium dark:bg-indigo-950 dark:border-indigo-700 dark:text-indigo-300":"border-gray-200 text-gray-600 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-800"}`,children:"Extract pages"}),g.jsx("button",{onClick:()=>o("separate"),className:`px-4 py-2 text-sm rounded-lg border transition-colors ${r==="separate"?"bg-indigo-50 border-indigo-300 text-indigo-700 font-medium dark:bg-indigo-950 dark:border-indigo-700 dark:text-indigo-300":"border-gray-200 text-gray-600 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-800"}`,children:"Split into ranges"})]})]}),r==="single"&&g.jsx(tc,{pageCount:y.pageCount,pdfBytes:y.bytes,selectedPages:s,onSelectionChange:n,overlayType:"selected"}),r==="separate"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"split-ranges",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Page ranges (comma-separated)"}),g.jsx("input",{id:"split-ranges",type:"text",value:l,onChange:k=>c(k.target.value),placeholder:"e.g., 1-3, 4-7, 8-end",className:`w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none ${v?.error?"border-red-300 dark:border-red-700":"border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100"}`}),v?.error&&g.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:v.error}),g.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:'Each comma-separated range will become a separate PDF file. Use "end" for the last page.'})]}),g.jsx(ss,{}),g.jsxs("button",{onClick:A,disabled:!_||p==="processing",className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring",children:[g.jsx(Da,{size:16}),p==="processing"?"Processing...":"Split PDF"]}),"      "]})]})}function gA(){const[h,t]=z.useState([]),[s,n]=z.useState(null),r=Dt(v=>v.status),o=z.useMemo(()=>h.reduce((v,_)=>v+_.pageCount,0),[h]),l=z.useMemo(()=>h.length===0?null:{isEncrypted:h.some(v=>v.isEncrypted),pageCount:o,hasMixedPageSizes:!1},[h,o]),c=h.length>=2,d=z.useCallback(v=>{t(v),n(null),Dt.getState().reset()},[]),f=z.useCallback((v,_)=>{t(w=>{const A=[...w],S=_==="up"?v-1:v+1;return S<0||S>=A.length?w:([A[v],A[S]]=[A[S],A[v]],A)})},[]),p=z.useCallback(v=>{t(_=>_.filter((A,S)=>S!==v))},[]),y=z.useCallback(async()=>{if(h.length<2){ge.error(Ie.MERGE_MIN_FILES);return}try{const v=await ze.process("merge",h.map(_=>_.bytes),{order:h.map((_,w)=>w)});n(v)}catch(v){const _=v instanceof Error?v.message:String(v);ge.error(_)}},[h]),x=z.useCallback(()=>{t([]),n(null),Dt.getState().reset()},[]);return s?g.jsxs("div",{className:"space-y-4",children:[g.jsx(Ye,{result:s}),g.jsx($e,{result:s,onReset:x})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsx(es,{onFilesLoaded:d,multiple:!0}),h.length>0&&g.jsxs(g.Fragment,{children:[g.jsx(bs,{analysis:l,currentToolId:"merge"}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[h.length," file",h.length!==1?"s":"","  ",o," total page",o!==1?"s":""]}),g.jsxs("button",{onClick:y,disabled:!c||r==="processing",className:"flex items-center gap-1.5 px-4 py-1.5 text-sm font-medium bg-indigo-600 dark:bg-indigo-500 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(D0,{size:14}),r==="processing"?"Processing...":"Merge PDFs"]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["File order (",h.length," file",h.length!==1?"s":"",")"]}),g.jsx("div",{className:"space-y-1",children:h.map((v,_)=>g.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 dark:border-gray-700 rounded-lg p-3 bg-white dark:bg-gray-800",children:[g.jsx("span",{className:"text-xs font-mono text-gray-400 dark:text-gray-500 w-6 text-center shrink-0",children:_+1}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:v.name}),g.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[v.pageCount," page",v.pageCount!==1?"s":"","  ",ri(v.fileSize)]})]}),g.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[g.jsx("button",{onClick:()=>f(_,"up"),disabled:_===0,className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-30 disabled:cursor-not-allowed transition-colors","aria-label":`Move ${v.name} up`,children:g.jsx(wm,{size:16,className:"text-gray-500 dark:text-gray-400"})}),g.jsx("button",{onClick:()=>f(_,"down"),disabled:_===h.length-1,className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-30 disabled:cursor-not-allowed transition-colors","aria-label":`Move ${v.name} down`,children:g.jsx(_m,{size:16,className:"text-gray-500 dark:text-gray-400"})}),g.jsx("button",{onClick:()=>p(_),className:"p-1 rounded hover:bg-red-50 dark:hover:bg-red-950 transition-colors","aria-label":`Remove ${v.name}`,children:g.jsx(Ln,{size:16,className:"text-gray-400 dark:text-gray-500 hover:text-red-500 dark:hover:text-red-400"})})]})]},v.id))}),g.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Total: ",o," page",o!==1?"s":""]})]}),g.jsx(ss,{}),g.jsxs("button",{onClick:y,disabled:!c||r==="processing",className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring",children:[g.jsx(D0,{size:16}),r==="processing"?"Processing...":"Merge PDFs"]}),"      "]})]})}function pA(){const[h,t]=z.useState([]),[s,n]=z.useState({}),[r,o]=z.useState(null),l=Dt(S=>S.status),c=h[0]??null,d=z.useMemo(()=>c?{isEncrypted:c.isEncrypted,pageCount:c.pageCount,hasMixedPageSizes:!1}:null,[c]),f=z.useMemo(()=>Object.values(s).some(S=>S!==0),[s]),p=z.useCallback(S=>{t(S),n({}),o(null),Dt.getState().reset()},[]),y=z.useCallback(S=>{n(k=>{const j=((k[S]??0)+90)%360;if(j===0){const D={...k};return delete D[S],D}return{...k,[S]:j}})},[]),x=z.useCallback(S=>{c&&n(k=>{const T={};for(let j=0;j<c.pageCount;j++){const H=(((k[j]??0)+S)%360+360)%360;H!==0&&(T[j]=H)}return T})},[c]),v=z.useCallback((S,k)=>{c&&n(T=>{const j={...T};for(let D=0;D<c.pageCount;D++){const H=D+1;if(S==="even"?H%2===0:H%2===1){const I=(((j[D]??0)+k)%360+360)%360;I===0?delete j[D]:j[D]=I}}return j})},[c]),_=z.useCallback(()=>{n({})},[]),w=z.useCallback(async()=>{if(!(!c||!f))try{const S=await ze.process("rotate",[c.bytes],{rotations:s});o(S)}catch(S){const k=S instanceof Error?S.message:String(S);ge.error(k)}},[c,f,s]),A=z.useCallback(()=>{t([]),n({}),o(null),Dt.getState().reset()},[]);return r?g.jsxs("div",{className:"space-y-4",children:[g.jsx(Ye,{result:r,originalBytes:c?.bytes,showOriginalToggle:!0}),g.jsx($e,{result:r,onReset:A})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsx(es,{onFilesLoaded:p}),c&&g.jsxs(g.Fragment,{children:[g.jsx(bs,{analysis:d,currentToolId:"rotate"}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[c.pageCount," page",c.pageCount!==1?"s":"",f&&`  ${Object.keys(s).length} rotated`]}),g.jsxs("button",{onClick:w,disabled:!f||l==="processing",className:"flex items-center gap-1.5 px-4 py-1.5 text-sm font-medium bg-indigo-600 dark:bg-indigo-500 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx($s,{size:14}),l==="processing"?"Processing...":"Rotate Pages"]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Bulk actions"}),g.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.jsxs("button",{onClick:()=>x(90),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[g.jsx($s,{size:14})," Rotate All 90 CW"]}),g.jsxs("button",{onClick:()=>x(-90),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[g.jsx(Em,{size:14})," Rotate All 90 CCW"]}),g.jsxs("button",{onClick:()=>x(180),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[g.jsx($s,{size:14})," Rotate All 180"]}),g.jsxs("button",{onClick:()=>v("even",90),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[g.jsx($s,{size:14})," Rotate Even 90 CW"]}),g.jsxs("button",{onClick:()=>v("odd",90),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[g.jsx($s,{size:14})," Rotate Odd 90 CW"]}),f&&g.jsxs("button",{onClick:_,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-50 dark:hover:bg-red-950 transition-colors",children:[g.jsx(Br,{size:14})," Reset all"]})]}),g.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Click individual thumbnails to cycle rotation (90 increments).",f&&g.jsxs("span",{className:"ml-1 text-amber-600",children:[Object.keys(s).length," page",Object.keys(s).length!==1?"s":""," rotated"]})]})]}),g.jsx(ry,{pdfBytes:c.bytes,pageCount:c.pageCount,onPageClick:y,overlayType:"rotate",rotations:s}),g.jsx(ss,{}),g.jsxs("button",{onClick:w,disabled:!f||l==="processing",className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring",children:[g.jsx($s,{size:16}),l==="processing"?"Processing...":"Rotate Pages"]}),"      "]})]})}function mA(){const[h,t]=z.useState([]),[s,n]=z.useState([]),[r,o]=z.useState(null),[l,c]=z.useState(new Map),[d,f]=z.useState(new Map),[p,y]=z.useState(null),[x,v]=z.useState(null),_=z.useRef(null),w=Dt(O=>O.status),A=h[0]??null,S=A?Array.from({length:A.pageCount},(O,Y)=>Y):[],k=s.length>0&&s.some((O,Y)=>O!==Y),T=z.useCallback(O=>{t(O),o(null),c(new Map),f(new Map),Ea.cancelAll(),O.length>0?n(Array.from({length:O[0].pageCount},(Y,X)=>X)):n([])},[]),j=z.useCallback(O=>{A&&(f(Y=>new Map(Y).set(O,"loading")),Ea.enqueue(O,"high",()=>za(A.bytes,O)).then(Y=>{Y?(c(X=>new Map(X).set(O,Y)),f(X=>new Map(X).set(O,"rendered"))):f(X=>new Map(X).set(O,"failed"))}))},[A]);z.useEffect(()=>{!A||s.length===0||(Ea.cancelAll(),c(new Map),f(new Map))},[A]),z.useEffect(()=>{if(!A||s.length===0)return;const O=new IntersectionObserver(X=>{for(const dt of X){const M=Number(dt.target.getAttribute("data-page"));isNaN(M)||dt.isIntersecting&&!l.has(M)&&d.get(M)!=="loading"&&j(M)}},{rootMargin:"200px"});return _.current?.querySelectorAll("[data-page]")?.forEach(X=>O.observe(X)),()=>O.disconnect()},[s,A,j,l,d]);const D=O=>{O<=0||n(Y=>{const X=[...Y];return[X[O-1],X[O]]=[X[O],X[O-1]],X})},H=O=>{O>=s.length-1||n(Y=>{const X=[...Y];return[X[O],X[O+1]]=[X[O+1],X[O]],X})},F=()=>{n([...S])},R=(O,Y)=>{y(Y),O.dataTransfer.effectAllowed="move",O.dataTransfer.setData("text/plain",String(Y)),O.currentTarget instanceof HTMLElement&&(O.currentTarget.style.opacity="0.5")},I=O=>{O.currentTarget instanceof HTMLElement&&(O.currentTarget.style.opacity="1"),y(null),v(null)},K=(O,Y)=>{O.preventDefault(),O.dataTransfer.dropEffect="move";const X=O.currentTarget.getBoundingClientRect(),dt=X.left+X.width/2,M=O.clientX<dt?Y:Y+1;v(M)},ct=()=>{},P=O=>{_.current&&!_.current.contains(O.relatedTarget)&&v(null)},W=O=>{O.preventDefault();const Y=p;if(Y===null||x===null){y(null),v(null);return}let X=x;if(Y<X&&(X-=1),Y===X){y(null),v(null);return}n(dt=>{const M=[...dt],[B]=M.splice(Y,1);return M.splice(X,0,B),M}),y(null),v(null)},N=async()=>{if(A)try{const O=await ze.process("reorder",[A.bytes],{newOrder:s});o(O)}catch(O){ge.error(O instanceof Error?O.message:String(O))}},st=()=>{t([]),n([]),o(null),c(new Map),f(new Map),Ea.cancelAll(),Dt.getState().reset()},G=A?{isEncrypted:A.isEncrypted,pageCount:A.pageCount,hasMixedPageSizes:!1}:null;return r?g.jsxs("div",{className:"space-y-6",children:[g.jsx(Ye,{result:r,originalBytes:A?.bytes,showOriginalToggle:!0}),g.jsx($e,{result:r,onReset:st})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsx(es,{onFilesLoaded:T}),A&&g.jsx(bs,{analysis:G,currentToolId:"reorder"}),w==="processing"&&g.jsx(ss,{}),A&&s.length>0&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[A.pageCount," page",A.pageCount!==1?"s":"","  drag or use arrows to reorder"]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:F,disabled:!k,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[g.jsx(Em,{size:14}),"Reset Order"]}),g.jsx("button",{onClick:N,disabled:!k||w==="processing",className:"flex items-center gap-1.5 px-4 py-1.5 text-sm font-medium bg-indigo-600 dark:bg-indigo-500 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w==="processing"?"Processing...":"Reorder Pages"})]})]}),g.jsx("div",{ref:_,className:"grid gap-3",style:{gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))"},onDragLeave:P,children:s.map((O,Y)=>{const X=l.get(O),dt=d.get(O),M=O!==Y,B=p===Y,J=x===Y&&p!==null&&p!==Y&&p!==Y-1,ot=Y===s.length-1&&x===s.length&&p!==null&&p!==Y;return g.jsxs("div",{"data-page":O,draggable:!0,onDragStart:at=>R(at,Y),onDragEnd:I,onDragOver:at=>K(at,Y),onDragLeave:ct,onDrop:W,className:`relative aspect-[3/4] rounded-lg border-2 transition-all cursor-grab active:cursor-grabbing ${B?"border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-800 opacity-50":M?"border-indigo-300 dark:border-indigo-700 bg-indigo-50 dark:bg-indigo-950":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"}`,children:[J&&g.jsxs("div",{className:"absolute -left-[7px] top-0 bottom-0 w-[3px] bg-indigo-500 rounded-full z-20","data-testid":"insertion-line",children:[g.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-indigo-500 rounded-full"}),g.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-indigo-500 rounded-full"})]}),ot&&g.jsxs("div",{className:"absolute -right-[7px] top-0 bottom-0 w-[3px] bg-indigo-500 rounded-full z-20","data-testid":"insertion-line",children:[g.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-indigo-500 rounded-full"}),g.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-indigo-500 rounded-full"})]}),g.jsx("div",{className:"absolute top-1 left-1/2 -translate-x-1/2 z-10",children:g.jsx(bv,{size:14,className:"text-gray-400 dark:text-gray-500"})}),g.jsx("div",{className:"w-full h-full overflow-hidden rounded-md",children:dt==="rendered"&&X?g.jsx("img",{src:X,alt:`Page ${O+1}`,className:"w-full h-full object-cover bg-white pointer-events-none",draggable:!1}):dt==="failed"?g.jsxs("div",{className:"w-full h-full bg-gray-100 dark:bg-gray-800 flex flex-col items-center justify-center",children:[g.jsx(Hr,{size:20,className:"text-amber-400 mb-1"}),g.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Page ",O+1]})]}):g.jsx("div",{className:"w-full h-full bg-gray-100 dark:bg-gray-800 animate-pulse flex items-center justify-center",children:g.jsx("span",{className:"text-lg font-bold text-gray-300 dark:text-gray-600",children:O+1})})}),g.jsx("span",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 text-[10px] bg-black/60 text-white px-1.5 py-0.5 rounded",children:O+1}),M&&g.jsxs("span",{className:"absolute top-1 right-1 text-[9px] bg-indigo-500 text-white px-1 rounded",children:["was ",O+1]}),g.jsxs("div",{className:"absolute bottom-1.5 left-0 right-0 flex justify-center gap-1",children:[g.jsx("button",{onClick:at=>{at.stopPropagation(),D(Y)},disabled:Y===0,className:"p-1 bg-white/90 dark:bg-gray-800/90 border border-gray-200 dark:border-gray-700 rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-30 disabled:cursor-not-allowed transition-colors","aria-label":`Move page ${O+1} left`,children:g.jsx(Pl,{size:12,className:"text-gray-600 dark:text-gray-400"})}),g.jsx("button",{onClick:at=>{at.stopPropagation(),H(Y)},disabled:Y===s.length-1,className:"p-1 bg-white/90 dark:bg-gray-800/90 border border-gray-200 dark:border-gray-700 rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-30 disabled:cursor-not-allowed transition-colors","aria-label":`Move page ${O+1} right`,children:g.jsx($x,{size:12,className:"text-gray-600 dark:text-gray-400"})})]})]},`${Y}-${O}`)})}),g.jsx("button",{onClick:N,disabled:!k||w==="processing",className:"w-full py-3 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring",children:w==="processing"?"Processing...":"Reorder Pages"})]})]})}function yA(){const[h,t]=z.useState([]),[s,n]=z.useState(new Set),[r,o]=z.useState(null),l=Dt(_=>_.status),c=h[0]??null,d=c!==null&&s.size===c.pageCount,f=s.size===0,p=z.useCallback(_=>{t(_),n(new Set),o(null)},[]),y=async()=>{if(!(!c||f||d))try{const _=await ze.process("delete",[c.bytes],{pagesToDelete:Array.from(s)});o(_)}catch(_){ge.error(_ instanceof Error?_.message:String(_))}},x=()=>{t([]),n(new Set),o(null),Dt.getState().reset()},v=c?{isEncrypted:c.isEncrypted,pageCount:c.pageCount,hasMixedPageSizes:!1}:null;return r?g.jsxs("div",{className:"space-y-6",children:[g.jsx(Ye,{result:r,originalBytes:c?.bytes,showOriginalToggle:!0}),g.jsx($e,{result:r,onReset:x})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsx(es,{onFilesLoaded:p}),c&&g.jsx(bs,{analysis:v,currentToolId:"delete-pages"}),l==="processing"&&g.jsx(ss,{}),c&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[c.pageCount," page",c.pageCount!==1?"s":"",s.size>0&&`  ${s.size} selected for deletion`]}),g.jsxs("div",{className:"flex items-center gap-2",children:[s.size>0&&g.jsx("button",{onClick:()=>n(new Set),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:"Reset Selection"}),g.jsx("button",{onClick:y,disabled:f||d||l==="processing",className:"flex items-center gap-1.5 px-4 py-1.5 text-sm font-medium bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l==="processing"?"Processing...":f?"Select pages":`Delete ${s.size} Page${s.size!==1?"s":""}`})]})]}),g.jsx(tc,{pageCount:c.pageCount,pdfBytes:c.bytes,selectedPages:s,onSelectionChange:n,overlayType:"delete"}),s.size>0&&g.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Delete"," ",g.jsx("span",{className:"font-semibold text-red-600 dark:text-red-400",children:s.size})," ","of"," ",g.jsx("span",{className:"font-semibold",children:c.pageCount})," ","page",s.size!==1?"s":"","?"]}),d&&g.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg px-3 py-2",children:Ie.CANNOT_DELETE_ALL}),g.jsx("button",{onClick:y,disabled:f||d||l==="processing",className:"w-full py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring",children:l==="processing"?"Processing...":f?"Select pages to delete":`Delete ${s.size} Page${s.size!==1?"s":""}`})]})]})}function bA(){const[h,t]=z.useState([]),[s,n]=z.useState(new Set),[r,o]=z.useState("single"),[l,c]=z.useState(null),d=Dt(w=>w.status),f=h[0]??null,p=s.size===0,y=z.useCallback(w=>{t(w),n(new Set),c(null)},[]),x=async()=>{if(!(!f||p))try{const w=await ze.process("extract",[f.bytes],{pages:Array.from(s).sort((A,S)=>A-S),mode:r});c(w)}catch(w){ge.error(w instanceof Error?w.message:String(w))}},v=()=>{t([]),n(new Set),o("single"),c(null),Dt.getState().reset()},_=f?{isEncrypted:f.isEncrypted,pageCount:f.pageCount,hasMixedPageSizes:!1}:null;return l?g.jsxs("div",{className:"space-y-6",children:[g.jsx(Ye,{result:l,originalBytes:f?.bytes,showOriginalToggle:!0}),g.jsx($e,{result:l,onReset:v})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsx(es,{onFilesLoaded:y}),f&&g.jsx(bs,{analysis:_,currentToolId:"extract-pages"}),d==="processing"&&g.jsx(ss,{}),f&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[f.pageCount," page",f.pageCount!==1?"s":"",s.size>0&&`  ${s.size} selected`]}),g.jsxs("div",{className:"flex items-center gap-2",children:[s.size>0&&g.jsx("button",{onClick:()=>n(new Set),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:"Reset Selection"}),g.jsx("button",{onClick:x,disabled:p||d==="processing",className:"flex items-center gap-1.5 px-4 py-1.5 text-sm font-medium bg-indigo-600 dark:bg-indigo-500 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d==="processing"?"Processing...":p?"Select pages":`Extract ${s.size} Page${s.size!==1?"s":""}`})]})]}),g.jsx(tc,{pageCount:f.pageCount,pdfBytes:f.bytes,selectedPages:s,onSelectionChange:n}),s.size>0&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Extract mode"}),g.jsxs("div",{className:"flex rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[g.jsx("button",{onClick:()=>o("single"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${r==="single"?"bg-indigo-600 dark:bg-indigo-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"As single PDF"}),g.jsx("button",{onClick:()=>o("individual"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors border-l border-gray-200 dark:border-gray-700 ${r==="individual"?"bg-indigo-600 dark:bg-indigo-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Each page as separate PDF"})]}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1.5",children:r==="single"?`${s.size} page${s.size!==1?"s":""} will be combined into one PDF.`:`${s.size} separate PDF file${s.size!==1?"s":""} will be created.`})]}),g.jsx("button",{onClick:x,disabled:p||d==="processing",className:"w-full py-3 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring",children:d==="processing"?"Processing...":p?"Select pages to extract":`Extract ${s.size} Page${s.size!==1?"s":""}`})]})]})}const xA={a4:{width:595.28,height:841.89},letter:{width:612,height:792},legal:{width:612,height:1008},a3:{width:841.89,height:1190.55},a5:{width:419.53,height:595.28}},vA=[{value:"match",label:"Match first page"},{value:"a4",label:"A4 (210x297mm)"},{value:"letter",label:"Letter (8.5x11in)"},{value:"legal",label:"Legal (8.5x14in)"},{value:"a3",label:"A3 (297x420mm)"},{value:"a5",label:"A5 (148x210mm)"},{value:"custom",label:"Custom"}];function _A(){const[h,t]=z.useState([]),[s,n]=z.useState("end"),[r,o]=z.useState(1),[l,c]=z.useState(1),[d,f]=z.useState("match"),[p,y]=z.useState(595.28),[x,v]=z.useState(841.89),[_,w]=z.useState(null),A=Dt(R=>R.status),S=h[0]??null,k=z.useMemo(()=>S?{isEncrypted:S.isEncrypted,pageCount:S.pageCount,hasMixedPageSizes:!1}:null,[S]),T=z.useMemo(()=>d==="custom"?{width:p,height:x}:d==="match"?{width:595.28,height:841.89}:xA[d]??{width:595.28,height:841.89},[d,p,x]),j=z.useMemo(()=>!(!S||l<1||l>100||d==="custom"&&(p<=0||x<=0)||(s==="before"||s==="after")&&(r<1||r>S.pageCount)),[S,l,d,p,x,s,r]),D=z.useCallback(R=>{t(R),w(null),o(1),Dt.getState().reset()},[]),H=z.useCallback(async()=>{if(!(!S||!j))try{const R=await ze.process("add-blank-pages",[S.bytes],{position:s,targetPage:r-1,count:l,width:T.width,height:T.height});w(R)}catch(R){const I=R instanceof Error?R.message:String(R);ge.error(I)}},[S,j,s,r,l,T]),F=z.useCallback(()=>{t([]),n("end"),o(1),c(1),f("match"),y(595.28),v(841.89),w(null),Dt.getState().reset()},[]);return _?g.jsxs("div",{className:"space-y-4",children:[g.jsx(Ye,{result:_,originalBytes:S?.bytes,showOriginalToggle:!0}),g.jsx($e,{result:_,onReset:F})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsx(es,{onFilesLoaded:D}),S&&g.jsxs(g.Fragment,{children:[g.jsx(bs,{analysis:k,currentToolId:"add-blank-pages"}),g.jsx("div",{className:"flex items-center justify-end",children:g.jsxs("button",{onClick:H,disabled:!j||A==="processing",className:"flex items-center gap-1.5 px-4 py-1.5 text-sm font-medium bg-indigo-600 dark:bg-indigo-500 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(Ma,{size:14}),A==="processing"?"Processing...":`Add ${l} Blank Page${l!==1?"s":""}`]})}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Insert position"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"beginning",label:"At beginning"},{value:"end",label:"At end"},{value:"before",label:"Before page"},{value:"after",label:"After page"}].map(R=>g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"position",value:R.value,checked:s===R.value,onChange:()=>n(R.value),className:"text-indigo-600 focus:ring-indigo-500"}),g.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:R.label})]},R.value))}),(s==="before"||s==="after")&&g.jsxs("div",{className:"mt-2",children:[g.jsxs("label",{htmlFor:"target-page",className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:["Page number (1-",S.pageCount,")"]}),g.jsx("input",{id:"target-page",type:"number",min:1,max:S.pageCount,value:r,onChange:R=>o(Math.max(1,Math.min(S.pageCount,parseInt(R.target.value,10)||1))),className:"w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"blank-count",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Number of blank pages"}),g.jsx("input",{id:"blank-count",type:"number",min:1,max:100,value:l,onChange:R=>c(Math.max(1,Math.min(100,parseInt(R.target.value,10)||1))),className:"w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"}),g.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Between 1 and 100 blank pages."})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"page-size",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Page size"}),g.jsx("select",{id:"page-size",value:d,onChange:R=>f(R.target.value),className:"w-64 px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none bg-white",children:vA.map(R=>g.jsx("option",{value:R.value,children:R.label},R.value))}),d==="custom"&&g.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"custom-width",className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Width (pt)"}),g.jsx("input",{id:"custom-width",type:"number",min:1,value:p,onChange:R=>y(parseFloat(R.target.value)||0),className:"w-28 px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"})]}),g.jsx("span",{className:"text-gray-400 dark:text-gray-500 mt-5",children:"x"}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"custom-height",className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Height (pt)"}),g.jsx("input",{id:"custom-height",type:"number",min:1,value:x,onChange:R=>v(parseFloat(R.target.value)||0),className:"w-28 px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"})]})]})]}),g.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 text-sm text-gray-600 dark:text-gray-400",children:["Adding ",g.jsx("span",{className:"font-semibold",children:l})," blank page",l!==1?"s":""," ",s==="beginning"&&"at the beginning",s==="end"&&"at the end",s==="before"&&`before page ${r}`,s==="after"&&`after page ${r}`," ","(",Math.round(T.width)," x ",Math.round(T.height)," pt). Result will have ",g.jsx("span",{className:"font-semibold",children:S.pageCount+l})," pages."]}),g.jsx(ss,{}),g.jsxs("button",{onClick:H,disabled:!j||A==="processing",className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring",children:[g.jsx(Ma,{size:16}),A==="processing"?"Processing...":`Add ${l} Blank Page${l!==1?"s":""}`]}),"      "]})]})}const wA=[[{label:"TL",value:"top-left"},{label:"TC",value:"top-center"},{label:"TR",value:"top-right"}],[{label:"ML",value:"middle-left"},{label:"MC",value:"middle-center"},{label:"MR",value:"middle-right"}],[{label:"BL",value:"bottom-left"},{label:"BC",value:"bottom-center"},{label:"BR",value:"bottom-right"}]],SA=[{value:"1",label:"1"},{value:"Page 1",label:"Page 1"},{value:"Page 1 of N",label:"Page 1 of N"},{value:"1/N",label:"1/N"},{value:"roman",label:"i, ii, iii"}];function AA(h){const t=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],s=["m","cm","d","cd","c","xc","l","xl","x","ix","v","iv","i"];let n="";for(let r=0;r<t.length;r++)for(;h>=t[r];)n+=s[r],h-=t[r];return n}function cm(h,t,s){switch(h){case"1":return`${t}`;case"Page 1":return`Page ${t}`;case"Page 1 of N":return`Page ${t} of ${s}`;case"1/N":return`${t}/${s}`;case"roman":return AA(t)}}function Od(h){return h.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function kA(h,t,s,n){const[r,o]=h.split("-");let l,c,d,f;return o==="left"?(l=n,d="left"):o==="right"?(l=t-n,d="right"):(l=t/2,d="center"),r==="top"?(c=n,f="top"):r==="bottom"?(c=s-n,f="bottom"):(c=s/2,f="middle"),{x:l,y:c,align:d,baseline:f}}function EA(){const[h,t]=z.useState([]),[s,n]=z.useState("bottom-center"),[r,o]=z.useState("1"),[l,c]=z.useState(1),[d,f]=z.useState(12),[p,y]=z.useState("#000000"),[x,v]=z.useState(40),[_,w]=z.useState("all"),[A,S]=z.useState(""),[k,T]=z.useState(null),[j,D]=z.useState(null),H=z.useRef(null),F=Dt(Y=>Y.status),R=h[0]??null,I=z.useMemo(()=>R?{isEncrypted:R.isEncrypted,pageCount:R.pageCount,hasMixedPageSizes:!1}:null,[R]),K=z.useMemo(()=>_!=="range"||!R||!A.trim()?null:Gl(A,R.pageCount),[_,R,A]),ct=z.useMemo(()=>{if(!(_==="all"||!K||K.error))return K.pages.map(Y=>Y-1)},[_,K]),P=z.useMemo(()=>!(!R||_==="range"&&(!K||K.error||K.pages.length===0)),[R,_,K]),W=z.useMemo(()=>R?cm(r,l,l+R.pageCount-1):"",[R,r,l]),N=z.useMemo(()=>{if(!R)return"";const Y=R.pageCount,X=Math.min(3,Y),dt=[];for(let M=0;M<X;M++)dt.push(cm(r,l+M,l+Y-1));return Y>3&&dt.push("..."),dt.join(", ")},[R,r,l]);z.useEffect(()=>{if(!R){D(null);return}let Y=!1;return za(R.bytes,0,1).then(X=>{!Y&&X&&D(X)}),()=>{Y=!0}},[R]),z.useEffect(()=>{const Y=H.current;if(!Y)return;const X=Y.getContext("2d");if(!X)return;const dt=Y.width,M=Y.height;X.clearRect(0,0,dt,M),X.fillStyle="#ffffff",X.fillRect(0,0,dt,M);const B=()=>{if(!W)return;const J=x*(dt/612),ot=Math.max(10,d*(dt/612)),at=kA(s,dt,M,J);X.font=`bold ${ot}px sans-serif`,X.textAlign=at.align,X.textBaseline=at.baseline;const vt=X.measureText(W).width,Et=ot;let lt=at.x;at.align==="center"?lt-=vt/2:at.align==="right"&&(lt-=vt);let St=at.y;at.baseline==="middle"?St-=Et/2:at.baseline==="bottom"&&(St-=Et);const Pt=5,Ft=lt-Pt,It=St-Pt/2,C=vt+Pt*2,ht=Et+Pt,rt=4;X.fillStyle="rgba(255, 255, 255, 0.85)",X.beginPath(),X.moveTo(Ft+rt,It),X.lineTo(Ft+C-rt,It),X.quadraticCurveTo(Ft+C,It,Ft+C,It+rt),X.lineTo(Ft+C,It+ht-rt),X.quadraticCurveTo(Ft+C,It+ht,Ft+C-rt,It+ht),X.lineTo(Ft+rt,It+ht),X.quadraticCurveTo(Ft,It+ht,Ft,It+ht-rt),X.lineTo(Ft,It+rt),X.quadraticCurveTo(Ft,It,Ft+rt,It),X.closePath(),X.fill(),X.fillStyle=p,X.font=`bold ${ot}px sans-serif`,X.textAlign=at.align,X.textBaseline=at.baseline,X.fillText(W,at.x,at.y)};if(j){const J=new Image;J.onload=()=>{X.drawImage(J,0,0,dt,M),B()},J.src=j}else{X.strokeStyle="#e5e7eb",X.lineWidth=1;for(let J=30;J<M-20;J+=14){const ot=J<50?dt*.4:dt*(.55+Math.random()*.3);X.beginPath(),X.moveTo(24,J),X.lineTo(Math.min(24+ot,dt-24),J),X.stroke()}B()}},[j,s,r,l,d,p,x,W]);const st=z.useCallback(Y=>{t(Y),T(null),S(""),D(null),Dt.getState().reset()},[]),G=z.useCallback(async()=>{if(!(!R||!P))try{const Y={position:s,format:r,startNumber:l,fontSize:d,color:p,margin:x};ct&&(Y.pageRange=ct);const X=await ze.process("add-page-numbers",[R.bytes],Y);T(X)}catch(Y){const X=Y instanceof Error?Y.message:String(Y);ge.error(X)}},[R,P,s,r,l,d,p,x,ct]),O=z.useCallback(()=>{t([]),n("bottom-center"),o("1"),c(1),f(12),y("#000000"),v(40),w("all"),S(""),T(null),D(null),Dt.getState().reset()},[]);return k?g.jsxs("div",{className:"space-y-4",children:[g.jsx(Ye,{result:k,originalBytes:R?.bytes,showOriginalToggle:!0}),g.jsx($e,{result:k,onReset:O})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsx(es,{onFilesLoaded:st}),R&&g.jsxs(g.Fragment,{children:[g.jsx(bs,{analysis:I,currentToolId:"page-numbers"}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[g.jsxs("div",{className:"space-y-5",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"num-format",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Number format"}),g.jsx("select",{id:"num-format",value:r,onChange:Y=>o(Y.target.value),className:"w-48 px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none bg-white",children:SA.map(Y=>g.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"start-number",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Starting number"}),g.jsx("input",{id:"start-number",type:"number",min:1,value:l,onChange:Y=>c(Math.max(1,parseInt(Y.target.value,10)||1)),className:"w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{htmlFor:"font-size",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Font size: ",g.jsxs("span",{className:"text-indigo-600 dark:text-indigo-400",children:[d,"pt"]})]}),g.jsx("input",{id:"font-size",type:"range",min:8,max:36,value:d,onChange:Y=>f(parseInt(Y.target.value,10)),className:"w-full accent-indigo-600"}),g.jsxs("div",{className:"flex justify-between text-xs text-gray-400 dark:text-gray-500",children:[g.jsx("span",{children:"8pt"}),g.jsx("span",{children:"36pt"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"num-color",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Color"}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("input",{id:"num-color",type:"color",value:p,onChange:Y=>y(Y.target.value),className:"w-10 h-10 rounded border border-gray-300 dark:border-gray-600 cursor-pointer"}),g.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono",children:p})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{htmlFor:"margin",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Margin from edge: ",g.jsxs("span",{className:"text-indigo-600 dark:text-indigo-400",children:[x,"pt"]})]}),g.jsx("input",{id:"margin",type:"range",min:20,max:100,value:x,onChange:Y=>v(parseInt(Y.target.value,10)),className:"w-full accent-indigo-600"}),g.jsxs("div",{className:"flex justify-between text-xs text-gray-400 dark:text-gray-500",children:[g.jsx("span",{children:"20pt"}),g.jsx("span",{children:"100pt"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Apply to"}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"applyTo",value:"all",checked:_==="all",onChange:()=>w("all"),className:"text-indigo-600 focus:ring-indigo-500"}),g.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"All pages"})]}),g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"applyTo",value:"range",checked:_==="range",onChange:()=>w("range"),className:"text-indigo-600 focus:ring-indigo-500"}),g.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Page range"})]})]}),_==="range"&&g.jsxs("div",{className:"mt-2",children:[g.jsx("input",{type:"text",value:A,onChange:Y=>S(Y.target.value),placeholder:"e.g., 1-5, 8, 10-end",className:`w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none dark:bg-gray-800 dark:text-gray-100 ${K?.error?"border-red-300 dark:border-red-700":"border-gray-300 dark:border-gray-600"}`}),K?.error&&g.jsx("p",{className:"text-xs text-red-500 dark:text-red-400 mt-1",children:K.error})]})]}),g.jsx(ss,{}),g.jsxs("button",{onClick:G,disabled:!P||F==="processing",className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring",children:[g.jsx(Vr,{size:16}),F==="processing"?"Processing...":"Add Page Numbers"]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Position & Preview",g.jsxs("span",{className:"ml-2 text-xs font-normal text-gray-400 dark:text-gray-500",children:["Click a zone to place the number  ",N]})]}),g.jsx("div",{className:"relative rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 p-4 shadow-inner",children:g.jsxs("div",{className:"relative mx-auto overflow-hidden rounded-lg shadow-md",style:{maxWidth:400},children:[g.jsx("canvas",{ref:H,width:400,height:566,className:"w-full h-auto block bg-white","data-testid":"pagenumber-preview-canvas"}),g.jsx("div",{className:"absolute inset-2 grid grid-cols-3 grid-rows-3 gap-0",children:wA.flat().map(Y=>{const X=s===Y.value;return g.jsx("button",{onClick:()=>n(Y.value),className:`relative rounded transition-all duration-150 border cursor-pointer ${X?"border-indigo-500 bg-indigo-500/10 border-2":"border-gray-300/60 border-dashed hover:bg-indigo-500/5 hover:border-indigo-400/60"}`,title:Od(Y.value),"aria-label":`Place number at ${Od(Y.value)}`,children:X&&g.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-sm",children:Od(Y.value)})})},Y.value)})}),g.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-[10px] px-2 py-0.5 rounded-full backdrop-blur-sm pointer-events-none",children:["Page 1 of ",R.pageCount]})]})})]})]})]})]})}function CA(){const[h,t]=z.useState([]),[s,n]=z.useState("CONFIDENTIAL"),[r,o]=z.useState(60),[l,c]=z.useState(45),[d,f]=z.useState(.15),[p,y]=z.useState("#808080"),[x,v]=z.useState("center"),[_,w]=z.useState("all"),[A,S]=z.useState(""),[k,T]=z.useState(null),[j,D]=z.useState(null),H=z.useRef(null),F=Dt(O=>O.status),R=h[0]??null,I=z.useMemo(()=>R?{isEncrypted:R.isEncrypted,pageCount:R.pageCount,hasMixedPageSizes:!1}:null,[R]),K=z.useMemo(()=>_!=="range"||!R||!A.trim()?null:Gl(A,R.pageCount),[_,R,A]),ct=z.useMemo(()=>{if(!(_==="all"||!K||K.error))return K.pages.map(O=>O-1)},[_,K]),P=z.useMemo(()=>!(!R||!s.trim()||_==="range"&&(!K||K.error||K.pages.length===0)),[R,s,_,K]);z.useEffect(()=>{if(!R){D(null);return}let O=!1;return za(R.bytes,0,1).then(Y=>{!O&&Y&&D(Y)}),()=>{O=!0}},[R]),z.useEffect(()=>{const O=H.current;if(!O)return;const Y=O.getContext("2d");if(!Y)return;const X=O.width,dt=O.height;if(Y.clearRect(0,0,X,dt),Y.fillStyle="#ffffff",Y.fillRect(0,0,X,dt),j){const M=new Image;M.onload=()=>{Y.drawImage(M,0,0,X,dt),W(Y,X,dt)},M.src=j}else{Y.strokeStyle="#e5e7eb",Y.lineWidth=1;for(let M=30;M<dt-20;M+=16){const B=M<50?X*.5:X*(.6+Math.random()*.25);Y.beginPath(),Y.moveTo(20,M),Y.lineTo(Math.min(20+B,X-20),M),Y.stroke()}W(Y,X,dt)}},[j,s,r,l,d,p,x]);function W(O,Y,X){const dt=s.trim()||"Watermark";O.save(),O.globalAlpha=d,O.fillStyle=p;const M=Math.max(8,r*(Y/612));if(x==="center")O.font=`bold ${M}px sans-serif`,O.textAlign="center",O.textBaseline="middle",O.translate(Y/2,X/2),O.rotate(-l*Math.PI/180),O.fillText(dt,0,0);else{const B=Math.max(6,M*.5);O.font=`bold ${B}px sans-serif`,O.textAlign="center",O.textBaseline="middle";const ot=O.measureText(dt).width+40,at=B+30;for(let _t=-Y;_t<Y*2;_t+=ot)for(let vt=-X;vt<X*2;vt+=at)O.save(),O.translate(_t,vt),O.rotate(-l*Math.PI/180),O.fillText(dt,0,0),O.restore()}O.restore()}const N=z.useCallback(O=>{t(O),T(null),S(""),D(null),Dt.getState().reset()},[]),st=z.useCallback(async()=>{if(!(!R||!P))try{const O={text:s.trim(),fontSize:r,angle:l,opacity:d,color:p,mode:x};ct&&(O.pageRange=ct);const Y=await ze.process("add-watermark",[R.bytes],O);T(Y)}catch(O){const Y=O instanceof Error?O.message:String(O);ge.error(Y)}},[R,P,s,r,l,d,p,x,ct]),G=z.useCallback(()=>{t([]),n("CONFIDENTIAL"),o(60),c(45),f(.15),y("#808080"),v("center"),w("all"),S(""),T(null),D(null),Dt.getState().reset()},[]);return k?g.jsxs("div",{className:"space-y-4",children:[g.jsx(Ye,{result:k,originalBytes:R?.bytes,showOriginalToggle:!0}),g.jsx($e,{result:k,onReset:G})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsx(es,{onFilesLoaded:N}),R&&g.jsxs(g.Fragment,{children:[g.jsx(bs,{analysis:I,currentToolId:"text-watermark"}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[g.jsxs("div",{className:"space-y-5",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"watermark-text",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Watermark text"}),g.jsx("input",{id:"watermark-text",type:"text",value:s,onChange:O=>n(O.target.value),placeholder:"Enter watermark text",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{htmlFor:"wm-font-size",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Font size: ",g.jsxs("span",{className:"text-indigo-600 dark:text-indigo-400",children:[r,"pt"]})]}),g.jsx("input",{id:"wm-font-size",type:"range",min:20,max:120,value:r,onChange:O=>o(parseInt(O.target.value,10)),className:"w-full accent-indigo-600"}),g.jsxs("div",{className:"flex justify-between text-xs text-gray-400 dark:text-gray-500",children:[g.jsx("span",{children:"20pt"}),g.jsx("span",{children:"120pt"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{htmlFor:"wm-angle",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Rotation: ",g.jsxs("span",{className:"text-indigo-600 dark:text-indigo-400",children:[l,""]})]}),g.jsx("input",{id:"wm-angle",type:"range",min:-90,max:90,value:l,onChange:O=>c(parseInt(O.target.value,10)),className:"w-full accent-indigo-600"}),g.jsxs("div",{className:"flex justify-between text-xs text-gray-400 dark:text-gray-500",children:[g.jsx("span",{children:"-90"}),g.jsx("span",{children:"0"}),g.jsx("span",{children:"90"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{htmlFor:"wm-opacity",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Opacity: ",g.jsxs("span",{className:"text-indigo-600 dark:text-indigo-400",children:[Math.round(d*100),"%"]})]}),g.jsx("input",{id:"wm-opacity",type:"range",min:.05,max:1,step:.05,value:d,onChange:O=>f(parseFloat(O.target.value)),className:"w-full accent-indigo-600"}),g.jsxs("div",{className:"flex justify-between text-xs text-gray-400 dark:text-gray-500",children:[g.jsx("span",{children:"5%"}),g.jsx("span",{children:"100%"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"wm-color",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Color"}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("input",{id:"wm-color",type:"color",value:p,onChange:O=>y(O.target.value),className:"w-10 h-10 rounded border border-gray-300 dark:border-gray-600 cursor-pointer"}),g.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono",children:p})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Placement mode"}),g.jsxs("div",{className:"flex rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[g.jsx("button",{onClick:()=>v("center"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${x==="center"?"bg-indigo-600 dark:bg-indigo-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Center"}),g.jsx("button",{onClick:()=>v("tile"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors border-l border-gray-200 dark:border-gray-700 ${x==="tile"?"bg-indigo-600 dark:bg-indigo-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Tile"})]}),g.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:x==="center"?"Single watermark placed at the center of each page.":"Watermark repeated in a tiled pattern across each page."})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Apply to"}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"wm-applyTo",value:"all",checked:_==="all",onChange:()=>w("all"),className:"text-indigo-600 focus:ring-indigo-500"}),g.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"All pages"})]}),g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"wm-applyTo",value:"range",checked:_==="range",onChange:()=>w("range"),className:"text-indigo-600 focus:ring-indigo-500"}),g.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Page range"})]})]}),_==="range"&&g.jsxs("div",{className:"mt-2",children:[g.jsx("input",{type:"text",value:A,onChange:O=>S(O.target.value),placeholder:"e.g., 1-5, 8, 10-end",className:`w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none dark:bg-gray-800 dark:text-gray-100 ${K?.error?"border-red-300 dark:border-red-700":"border-gray-300 dark:border-gray-600"}`}),K?.error&&g.jsx("p",{className:"text-xs text-red-500 dark:text-red-400 mt-1",children:K.error})]})]}),g.jsx(ss,{}),g.jsxs("button",{onClick:st,disabled:!P||F==="processing",className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring",children:[g.jsx(cv,{size:16}),F==="processing"?"Processing...":"Add Watermark"]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Preview",g.jsx("span",{className:"ml-2 text-xs font-normal text-gray-400 dark:text-gray-500",children:"Page 1"})]}),g.jsx("div",{className:"relative rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 p-4 shadow-inner",children:g.jsxs("div",{className:"relative mx-auto overflow-hidden rounded-lg shadow-md",style:{maxWidth:400},children:[g.jsx("canvas",{ref:H,width:400,height:566,className:"w-full h-auto block bg-white","data-testid":"watermark-preview-canvas"}),g.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-[10px] px-2 py-0.5 rounded-full backdrop-blur-sm",children:["Page 1 of ",R.pageCount]})]})})]})]})]})]})}const um={A4:{width:595.28,height:841.89,label:"A4 (210x297mm)"},Letter:{width:612,height:792,label:"Letter (8.5x11in)"},Legal:{width:612,height:1008,label:"Legal (8.5x14in)"},A3:{width:841.89,height:1190.55,label:"A3"},A5:{width:419.53,height:595.28,label:"A5"},Custom:{width:0,height:0,label:"Custom"}};function TA(){const[h,t]=z.useState([]),[s,n]=z.useState("A4"),[r,o]=z.useState(595),[l,c]=z.useState(842),[d,f]=z.useState(!0),[p,y]=z.useState("all"),[x,v]=z.useState(new Set),[_,w]=z.useState(null),A=Dt(R=>R.status),S=h[0]??null,k=z.useMemo(()=>S?{isEncrypted:S.isEncrypted,pageCount:S.pageCount,hasMixedPageSizes:!1}:null,[S]),T=z.useMemo(()=>{if(s==="Custom")return{width:r,height:l};const R=um[s];return R?{width:R.width,height:R.height}:{width:595.28,height:841.89}},[s,r,l]),j=z.useMemo(()=>!(!S||T.width<=0||T.height<=0||p==="selected"&&x.size===0),[S,T,p,x]),D=z.useCallback(R=>{t(R),v(new Set),w(null),Dt.getState().reset()},[]),H=z.useCallback(async()=>{if(!(!S||!j))try{const R=await ze.process("scale",[S.bytes],{targetWidth:T.width,targetHeight:T.height,fitContent:d,pages:p==="all"?void 0:Array.from(x)});w(R)}catch(R){const I=R instanceof Error?R.message:String(R);ge.error(I)}},[S,j,T,d,p,x]),F=z.useCallback(()=>{t([]),n("A4"),o(595),c(842),f(!0),y("all"),v(new Set),w(null),Dt.getState().reset()},[]);return _?g.jsxs("div",{className:"space-y-4",children:[g.jsx(Ye,{result:_,originalBytes:S?.bytes,showOriginalToggle:!0}),g.jsx($e,{result:_,onReset:F})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsx(es,{onFilesLoaded:D}),S&&g.jsxs(g.Fragment,{children:[g.jsx(bs,{analysis:k,currentToolId:"scale"}),g.jsx("div",{className:"flex items-center justify-end",children:g.jsxs("button",{onClick:H,disabled:!j||A==="processing",className:"flex items-center gap-1.5 px-4 py-1.5 text-sm font-medium bg-indigo-600 dark:bg-indigo-500 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(L0,{size:14}),A==="processing"?"Processing...":"Resize PDF"]})}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"target-size",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Target page size"}),g.jsx("select",{id:"target-size",value:s,onChange:R=>n(R.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none bg-white",children:Object.entries(um).map(([R,I])=>g.jsx("option",{value:R,children:I.label},R))})]}),s==="Custom"&&g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{htmlFor:"custom-width",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Width (points)"}),g.jsx("input",{id:"custom-width",type:"number",min:1,value:r,onChange:R=>o(Number(R.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{htmlFor:"custom-height",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Height (points)"}),g.jsx("input",{id:"custom-height",type:"number",min:1,value:l,onChange:R=>c(Number(R.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"})]}),g.jsx("p",{className:"col-span-2 text-xs text-gray-400 dark:text-gray-500",children:"1 inch = 72 points, 1 mm = 2.835 points"})]}),g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("input",{id:"fit-content",type:"checkbox",checked:d,onChange:R=>f(R.target.checked),className:"mt-0.5 h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"fit-content",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fit content to new page size"}),g.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Scale existing content proportionally to fit within the new page dimensions. When unchecked, content retains its original size and may be cropped or have extra whitespace."})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Apply to"}),g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"apply-to",value:"all",checked:p==="all",onChange:()=>y("all"),className:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"All pages"]}),g.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"apply-to",value:"selected",checked:p==="selected",onChange:()=>y("selected"),className:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"Selected pages"]})]})]}),p==="selected"&&g.jsx(tc,{pageCount:S.pageCount,pdfBytes:S.bytes,selectedPages:x,onSelectionChange:v,overlayType:"selected"}),g.jsx(ss,{}),g.jsxs("button",{onClick:H,disabled:!j||A==="processing",className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring",children:[g.jsx(L0,{size:16}),A==="processing"?"Processing...":"Resize PDF"]}),"      "]})]})}function NA(h){if(h.length===0)return"empty";if(h.length<6)return"weak";const t=/[A-Z]/.test(h),s=/[a-z]/.test(h),n=/[0-9]/.test(h),r=/[^A-Za-z0-9]/.test(h),o=[t,s,n,r].filter(Boolean).length;return h.length>=10&&o>=3?"strong":o>=2?"medium":"weak"}const jA={empty:{color:"bg-gray-200 dark:bg-gray-700",label:"",width:"w-0"},weak:{color:"bg-red-500",label:"Weak",width:"w-1/3"},medium:{color:"bg-yellow-500",label:"Medium",width:"w-2/3"},strong:{color:"bg-green-500",label:"Strong",width:"w-full"}};function MA(){const[h,t]=z.useState([]),[s,n]=z.useState(""),[r,o]=z.useState(""),[l,c]=z.useState(!1),[d,f]=z.useState(!1),[p,y]=z.useState({printing:!0,copying:!0,modifying:!1}),[x,v]=z.useState(null),_=Dt(K=>K.status),w=h[0]??null,A=z.useMemo(()=>w?{isEncrypted:w.isEncrypted,pageCount:w.pageCount,hasMixedPageSizes:!1}:null,[w]),S=z.useMemo(()=>NA(s),[s]),k=jA[S],T=s===r,j=d&&!T&&r.length>0,D=z.useMemo(()=>!(!w||s.length===0||!T),[w,s,T]),H=z.useCallback(K=>{t(K),v(null),Dt.getState().reset()},[]),F=z.useCallback(K=>{y(ct=>({...ct,[K]:!ct[K]}))},[]),R=z.useCallback(async()=>{if(!(!w||!D))try{const K=await ze.process("encrypt",[w.bytes],{userPassword:s,ownerPassword:s,permissions:p});v(K)}catch(K){const ct=K instanceof Error?K.message:String(K);ge.error(ct)}},[w,D,s,p]),I=z.useCallback(()=>{t([]),n(""),o(""),c(!1),f(!1),y({printing:!0,copying:!0,modifying:!1}),v(null),Dt.getState().reset()},[]);return x?g.jsxs("div",{className:"space-y-4",children:[g.jsx(Ye,{result:x}),g.jsx($e,{result:x,onReset:I})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsx(es,{onFilesLoaded:H}),w&&g.jsxs(g.Fragment,{children:[g.jsx(bs,{analysis:A,currentToolId:"encrypt"}),g.jsx("div",{className:"flex items-center justify-end",children:g.jsxs("button",{onClick:R,disabled:!D||_==="processing",className:"flex items-center gap-1.5 px-4 py-1.5 text-sm font-medium bg-indigo-600 dark:bg-indigo-500 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(Ti,{size:14}),_==="processing"?"Processing...":"Encrypt PDF"]})}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"encrypt-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"encrypt-password",type:l?"text":"password",value:s,onChange:K=>n(K.target.value),placeholder:"Enter password",className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"}),g.jsx("button",{type:"button",onClick:()=>c(K=>!K),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":l?"Hide password":"Show password",children:l?g.jsx(Nl,{size:16}):g.jsx(jl,{size:16})})]}),s.length>0&&g.jsxs("div",{className:"space-y-1",children:[g.jsx("div",{className:"h-1.5 w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full ${k.color} ${k.width} rounded-full transition-all duration-300`})}),g.jsx("p",{className:`text-xs ${S==="weak"?"text-red-500 dark:text-red-400":S==="medium"?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"}`,children:k.label})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"encrypt-confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirm password"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"encrypt-confirm-password",type:l?"text":"password",value:r,onChange:K=>o(K.target.value),onBlur:()=>f(!0),placeholder:"Confirm password",className:`w-full px-3 py-2 pr-10 border rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none dark:bg-gray-800 dark:text-gray-100 ${j?"border-red-300 dark:border-red-700":"border-gray-300 dark:border-gray-600"}`}),g.jsx("button",{type:"button",onClick:()=>c(K=>!K),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":l?"Hide password":"Show password",children:l?g.jsx(Nl,{size:16}):g.jsx(jl,{size:16})})]}),j&&g.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:"Passwords do not match."})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Permissions"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{className:"flex items-center gap-3 text-sm text-gray-700 dark:text-gray-300 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:p.printing,onChange:()=>F("printing"),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"Allow printing"]}),g.jsxs("label",{className:"flex items-center gap-3 text-sm text-gray-700 dark:text-gray-300 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:p.copying,onChange:()=>F("copying"),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"Allow copying text"]}),g.jsxs("label",{className:"flex items-center gap-3 text-sm text-gray-700 dark:text-gray-300 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:p.modifying,onChange:()=>F("modifying"),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"Allow editing"]})]})]}),g.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"AES-128 encryption"}),g.jsx(ss,{}),g.jsxs("button",{onClick:R,disabled:!D||_==="processing",className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring",children:[g.jsx(Ti,{size:16}),_==="processing"?"Processing...":"Encrypt PDF"]}),"      "]})]})}function RA(){const[h,t]=z.useState([]),[s,n]=z.useState(""),[r,o]=z.useState(!1),[l,c]=z.useState(null),[d,f]=z.useState(null),[p,y]=z.useState(null),x=Dt(D=>D.status),v=Pn(D=>D.setView),_=h[0]??null,w=z.useMemo(()=>_?{isEncrypted:_.isEncrypted,pageCount:_.pageCount,hasMixedPageSizes:!1}:null,[_]),A=z.useMemo(()=>!(!_||!l||s.length===0),[_,l,s]),S=z.useCallback(D=>{t(D),n(""),f(null),y(null),Dt.getState().reset();const H=D[0]??null;c(H?H.isEncrypted:null)},[]),k=z.useCallback(async()=>{if(!(!_||!A)){f(null);try{const D=await ze.process("unlock",[_.bytes],{password:s});y(D)}catch(D){const H=D instanceof Error?D.message:String(D);H===Ie.WRONG_PASSWORD||H.toLowerCase().includes("password")?f(Ie.WRONG_PASSWORD):ge.error(H)}}},[_,A,s]),T=z.useCallback(()=>{t([]),n(""),o(!1),c(null),f(null),y(null),Dt.getState().reset()},[]),j=z.useCallback(()=>{v("grid")},[v]);return p?g.jsxs("div",{className:"space-y-4",children:[g.jsx(Ye,{result:p}),g.jsx($e,{result:p,onReset:T})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsx(es,{onFilesLoaded:S}),_&&l===!1&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg",children:[g.jsx(Il,{size:20,className:"text-blue-500 shrink-0 mt-0.5"}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:"This PDF is not password-protected. No action needed."}),g.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Upload a different file or go back to the tool grid."})]})]}),g.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 text-sm border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors text-gray-700 dark:text-gray-300",children:[g.jsx(Pl,{size:16}),"Back to tools"]})]}),_&&l&&g.jsxs(g.Fragment,{children:[g.jsx(bs,{analysis:w,currentToolId:"unlock"}),g.jsx("div",{className:"flex items-center justify-end",children:g.jsxs("button",{onClick:k,disabled:!A||x==="processing",className:"flex items-center gap-1.5 px-4 py-1.5 text-sm font-medium bg-indigo-600 dark:bg-indigo-500 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(Ra,{size:14}),x==="processing"?"Processing...":"Unlock PDF"]})}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"unlock-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"PDF Password"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"unlock-password",type:r?"text":"password",value:s,onChange:D=>{n(D.target.value),f(null)},onKeyDown:D=>{D.key==="Enter"&&A&&k()},placeholder:"Enter the PDF password",className:`w-full px-3 py-2 pr-10 border rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none dark:bg-gray-800 dark:text-gray-100 ${d?"border-red-300 dark:border-red-700":"border-gray-300 dark:border-gray-600"}`}),g.jsx("button",{type:"button",onClick:()=>o(D=>!D),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":r?"Hide password":"Show password",children:r?g.jsx(Nl,{size:16}):g.jsx(jl,{size:16})})]}),d&&g.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:d})]}),g.jsx(ss,{}),g.jsxs("button",{onClick:k,disabled:!A||x==="processing",className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring",children:[g.jsx(Ra,{size:16}),x==="processing"?"Processing...":"Unlock PDF"]})]})]})}const Ld={title:"",author:"",subject:"",keywords:"",creator:"",producer:""},DA=[{key:"title",label:"Title",placeholder:"Document title"},{key:"author",label:"Author",placeholder:"Author name"},{key:"subject",label:"Subject",placeholder:"Document subject"},{key:"keywords",label:"Keywords",placeholder:"Comma-separated keywords"},{key:"creator",label:"Creator",placeholder:"Application that created the document"},{key:"producer",label:"Producer",placeholder:"PDF producer"}];function OA(){const[h,t]=z.useState([]),[s,n]=z.useState({...Ld}),[r,o]=z.useState(null),l=Dt(_=>_.status),c=h[0]??null,d=z.useMemo(()=>c?{isEncrypted:c.isEncrypted,pageCount:c.pageCount,hasMixedPageSizes:!1}:null,[c]),f=z.useCallback(_=>{t(_),n({...Ld}),o(null),Dt.getState().reset()},[]),p=z.useCallback((_,w)=>{n(A=>({...A,[_]:w}))},[]),y=z.useCallback(async()=>{if(c)try{const _=await ze.process("edit-metadata",[c.bytes],{...s,clearAll:!1});o(_)}catch(_){const w=_ instanceof Error?_.message:String(_);ge.error(w)}},[c,s]),x=z.useCallback(async()=>{if(c)try{const _=await ze.process("edit-metadata",[c.bytes],{clearAll:!0});o(_)}catch(_){const w=_ instanceof Error?_.message:String(_);ge.error(w)}},[c]),v=z.useCallback(()=>{t([]),n({...Ld}),o(null),Dt.getState().reset()},[]);return r?g.jsxs("div",{className:"space-y-4",children:[g.jsx(Ye,{result:r}),g.jsx($e,{result:r,onReset:v})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsx(es,{onFilesLoaded:f}),c&&g.jsxs(g.Fragment,{children:[g.jsx(bs,{analysis:d,currentToolId:"edit-metadata"}),g.jsx("div",{className:"flex items-center justify-end",children:g.jsxs("button",{onClick:y,disabled:!c||l==="processing",className:"flex items-center gap-1.5 px-4 py-1.5 text-sm font-medium bg-indigo-600 dark:bg-indigo-500 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(Ve,{size:14}),l==="processing"?"Processing...":"Save Changes"]})}),g.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Enter the metadata you want to set. Existing metadata will be replaced."}),g.jsx("div",{className:"space-y-4",children:DA.map(({key:_,label:w,placeholder:A})=>g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{htmlFor:`metadata-${_}`,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:w}),g.jsx("input",{id:`metadata-${_}`,type:"text",value:s[_],onChange:S=>p(_,S.target.value),placeholder:A,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"})]},_))}),g.jsxs("button",{onClick:x,disabled:l==="processing",className:"flex items-center gap-2 px-4 py-2 text-sm border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-50 dark:hover:bg-red-950 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(Ln,{size:14}),"Clear all metadata"]}),g.jsx(ss,{}),g.jsxs("button",{onClick:y,disabled:!c||l==="processing",className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring",children:[g.jsx(Ve,{size:16}),l==="processing"?"Processing...":"Save Changes"]}),"      "]})]})}const LA=/[\u4E00-\u9FFF\u3000-\u303F\u3040-\u309F\u30A0-\u30FF\uAC00-\uD7AF\uFF00-\uFFEF]/,zA=/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/,PA=/[\u0900-\u097F\uA8E0-\uA8FF]/,FA=/[\u0400-\u04FF\u0500-\u052F]/,BA=/[\u0370-\u03FF\u1F00-\u1FFF]/;function IA(h){const t=new Set,s=LA.test(h);return zA.test(h)&&t.add("arabic"),PA.test(h)&&t.add("devanagari"),(FA.test(h)||BA.test(h))&&t.add("cyrillic"),h.length>0&&t.add("latin"),{scripts:Array.from(t),hasCJK:s}}function Lr(h){const t=[];function s(n,r,o,l){if(n.nodeType===Node.TEXT_NODE){const x=n.textContent??"";if(x.length===0)return;t.push({text:x,bold:r,italic:o,underline:l});return}if(n.nodeType!==Node.ELEMENT_NODE)return;const d=n.tagName.toLowerCase();let f=r,p=o,y=l;(d==="strong"||d==="b")&&(f=!0),(d==="em"||d==="i")&&(p=!0),d==="u"&&(y=!0);for(const x of Array.from(n.childNodes))s(x,f,p,y)}return s(h,!1,!1,!1),t}function UA(h){const s=new DOMParser().parseFromString(h,"text/html"),n=[];function r(o){if(o.nodeType!==Node.ELEMENT_NODE)return;const l=o,c=l.tagName.toLowerCase();if(c==="img"){const p=l.getAttribute("src")??"";n.push({type:"image",src:p});return}const d=l.querySelector("img");if(d&&c==="p"){const p=d.getAttribute("src")??"";n.push({type:"image",src:p});const y=[];for(const x of Array.from(l.childNodes))x.nodeType===Node.ELEMENT_NODE&&x.tagName.toLowerCase()==="img"||y.push(...Lr(x));y.length>0&&n.push({type:"paragraph",runs:y});return}if(/^h[1-6]$/.test(c)){const p=parseInt(c[1],10),y=Lr(l);y.length>0&&n.push({type:"heading",level:p,runs:y});return}if(c==="p"){const p=Lr(l);p.length>0&&n.push({type:"paragraph",runs:p});return}if(c==="li"){const p=Lr(l);p.length>0&&n.push({type:"list-item",runs:p});return}if(c==="ul"||c==="ol"||c==="div"||c==="body"||c==="html"||c==="section"||c==="article"){for(const p of Array.from(l.children))r(p);return}const f=Lr(l);f.length>0&&n.push({type:"paragraph",runs:f})}return r(s.body),n}const dm={imagePageSize:"A4",imageOrientation:"auto",imageFitMode:"contain",docPageSize:"A4",docOrientation:"portrait",textFontSize:12,textLineHeight:1.5,margin:36};function HA(h){return new Promise((t,s)=>{const n=new Image;n.onload=()=>t(n),n.onerror=()=>s(new Error(Ie.IMAGE_LOAD_FAILED)),n.src=h})}async function GA(h){const t=URL.createObjectURL(h);try{const s=await HA(t),n=s.naturalWidth,r=s.naturalHeight,o=h.name.split(".").pop()?.toLowerCase();let l,c;if(o==="webp"||o==="gif"){const d=document.createElement("canvas");d.width=n,d.height=r,d.getContext("2d").drawImage(s,0,0);const p=await new Promise(y=>d.toBlob(x=>y(x),"image/png"));l=new Uint8Array(await p.arrayBuffer()),c="image/png"}else l=new Uint8Array(await h.arrayBuffer()),c=h.type||"image/png";return{type:"image",name:h.name,bytes:l,mimeType:c,width:n,height:r}}finally{URL.revokeObjectURL(t)}}async function qA(h){if(h.name.toLowerCase().endsWith(".doc")&&!h.name.toLowerCase().endsWith(".docx"))throw new Error(Ie.DOC_NOT_SUPPORTED);const t=await Gr(()=>import("./index-DhKHVhDg.js").then(l=>l.i),[]),s=await h.arrayBuffer();let n;try{n=await t.convertToHtml({arrayBuffer:s})}catch{throw new Error(Ie.DOCX_PARSE_FAILED)}const r=n.value;if(!r||r.trim().length===0)throw new Error(Ie.EMPTY_DOCUMENT);const o=UA(r);if(o.length===0)throw new Error(Ie.EMPTY_DOCUMENT);return{type:"document",name:h.name,blocks:o}}async function XA(h){const t=await h.text();if(t.trim().length===0)throw new Error(Ie.EMPTY_DOCUMENT);const n=t.split(/\n\s*\n/).filter(r=>r.length>0).map(r=>({type:"paragraph",runs:[{text:r.trim(),bold:!1,italic:!1,underline:!1}]}));return{type:"text",name:h.name,blocks:n}}function VA(h){const t=h.name.split(".").pop()?.toLowerCase()??"";return["jpg","jpeg","png","webp","gif"].includes(t)?"image":t==="docx"||t==="doc"?"document":t==="txt"?"text":null}const YA=".jpg,.jpeg,.png,.webp,.gif,.docx,.txt",$A=50;function KA(){const[h,t]=z.useState([]),[s,n]=z.useState(new Set),[r,o]=z.useState(new Map),[l,c]=z.useState({...dm}),[d,f]=z.useState(null),[p,y]=z.useState(!1),[x,v]=z.useState(!1),_=z.useRef(null),w=Dt(R=>R.status),A=h.some(R=>R.type==="image"),S=h.some(R=>R.type==="document"||R.type==="text"),k=z.useCallback(async R=>{const I=Array.from(R);if(h.length+I.length>$A){ge.error(Ie.MAX_FILES_EXCEEDED);return}for(const K of I){const ct=VA(K);if(!ct){ge.error(`Unsupported file type: ${K.name}`);continue}const P=`${K.name}-${Date.now()}`;n(W=>new Set(W).add(P));try{let W;ct==="image"?W=await GA(K):ct==="document"?(W=await qA(K),x||(v(!0),ge(Ie.DOCX_LAYOUT_NOTE,{icon:"",duration:6e3}))):W=await XA(K),t(N=>[...N,W])}catch(W){const N=W instanceof Error?W.message:"Failed to process file";o(st=>new Map(st).set(K.name,N)),ge.error(`${K.name}: ${N}`)}finally{n(W=>{const N=new Set(W);return N.delete(P),N})}}},[h.length,x]),T=z.useCallback(R=>{R.preventDefault(),y(!1),k(R.dataTransfer.files)},[k]),j=z.useCallback(R=>{t(I=>I.filter((K,ct)=>ct!==R))},[]),D=z.useCallback(async()=>{if(h.length===0)return;for(const I of h)if(I.type==="document"||I.type==="text"){const K=I.blocks.map(P=>P.runs?.map(W=>W.text).join("")??"").join(""),{hasCJK:ct}=IA(K);if(ct){ge.error(Ie.CJK_NOT_SUPPORTED);return}}const R=h.map(I=>I.type==="image"?{type:I.type,name:I.name,bytes:I.bytes,mimeType:I.mimeType,width:I.width,height:I.height}:{type:I.type,name:I.name,blocks:I.blocks});try{const I=await ze.processConvert(R,l);f(I)}catch(I){const K=I instanceof Error?I.message:String(I);ge.error(K)}},[h,l]),H=z.useCallback(()=>{t([]),n(new Set),o(new Map),c({...dm}),f(null),v(!1),Dt.getState().reset()},[]);if(d)return g.jsxs("div",{className:"space-y-4",children:[g.jsx(Ye,{result:d}),g.jsx($e,{result:d,onReset:H})]});const F=h.length>0&&s.size===0&&w!=="processing";return g.jsxs("div",{className:"space-y-6",children:[g.jsx("input",{ref:_,type:"file",accept:YA,multiple:!0,className:"hidden",onChange:R=>{R.target.files&&k(R.target.files),R.target.value=""}}),h.length===0?g.jsxs("label",{className:`relative border-2 border-dashed rounded-xl min-h-[200px] flex flex-col items-center justify-center gap-3 p-8 transition-colors cursor-pointer ${p?"border-indigo-400 dark:border-indigo-600 bg-indigo-50 dark:bg-indigo-950":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,onDragOver:R=>{R.preventDefault(),y(!0)},onDragLeave:()=>y(!1),onDrop:T,onClick:()=>_.current?.click(),children:[g.jsx(sh,{size:32,className:"text-gray-400 dark:text-gray-500"}),g.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Drop your files here or ",g.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium",children:"click to browse"})]}),g.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Supports JPG, PNG, WebP, GIF, DOCX, and TXT"})]}):g.jsxs("div",{className:"space-y-2",children:[h.map((R,I)=>g.jsxs("div",{className:"flex items-center gap-3 border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:[R.type==="image"?g.jsx(_v,{size:16,className:"text-orange-500 shrink-0"}):g.jsx(Ve,{size:16,className:"text-teal-500 shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:R.name}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:R.type==="image"?`${R.width}${R.height}px`:`${R.blocks.length} blocks`})]}),g.jsx("button",{onClick:()=>j(I),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded","aria-label":"Remove file",children:g.jsx(rn,{size:14,className:"text-gray-400 dark:text-gray-500"})})]},`${R.name}-${I}`)),s.size>0&&g.jsxs("div",{className:"flex items-center gap-2 p-3 text-sm text-gray-500 dark:text-gray-400",children:[g.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 dark:border-gray-600 border-t-indigo-500 rounded-full animate-spin"}),"Processing ",s.size," file",s.size!==1?"s":"","..."]}),g.jsx("button",{onClick:()=>_.current?.click(),className:"w-full p-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-500 dark:text-gray-400 hover:border-indigo-300 dark:hover:border-indigo-700 hover:text-indigo-500 dark:hover:text-indigo-400 transition-colors",onDragOver:R=>{R.preventDefault(),y(!0)},onDragLeave:()=>y(!1),onDrop:T,children:"+ Add more files"})]}),r.size>0&&g.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg",children:[g.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 text-sm font-medium mb-1",children:[g.jsx(eh,{size:14}),"Some files could not be processed"]}),Array.from(r.entries()).map(([R,I])=>g.jsxs("p",{className:"text-xs text-red-500 dark:text-red-400 ml-5",children:[R,": ",I]},R))]}),h.length>0&&g.jsxs("div",{className:"space-y-4 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[g.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Conversion Options"}),A&&g.jsxs("div",{className:"space-y-3",children:[g.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Image Settings"}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Page Size"}),g.jsxs("select",{value:l.imagePageSize,onChange:R=>c(I=>({...I,imagePageSize:R.target.value})),className:"w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg",children:[g.jsx("option",{value:"A4",children:"A4"}),g.jsx("option",{value:"Letter",children:"Letter"}),g.jsx("option",{value:"fit",children:"Fit to Image"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Fit Mode"}),g.jsxs("select",{value:l.imageFitMode,onChange:R=>c(I=>({...I,imageFitMode:R.target.value})),className:"w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg",children:[g.jsx("option",{value:"contain",children:"Contain"}),g.jsx("option",{value:"cover",children:"Cover"}),g.jsx("option",{value:"stretch",children:"Stretch"}),g.jsx("option",{value:"original",children:"Original Size"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Orientation"}),g.jsxs("select",{value:l.imageOrientation,onChange:R=>c(I=>({...I,imageOrientation:R.target.value})),className:"w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg",children:[g.jsx("option",{value:"auto",children:"Auto"}),g.jsx("option",{value:"portrait",children:"Portrait"}),g.jsx("option",{value:"landscape",children:"Landscape"})]})]})]})]}),S&&g.jsxs("div",{className:"space-y-3",children:[g.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Document Settings"}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Page Size"}),g.jsxs("select",{value:l.docPageSize,onChange:R=>c(I=>({...I,docPageSize:R.target.value})),className:"w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg",children:[g.jsx("option",{value:"A4",children:"A4"}),g.jsx("option",{value:"Letter",children:"Letter"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Orientation"}),g.jsxs("select",{value:l.docOrientation,onChange:R=>c(I=>({...I,docOrientation:R.target.value})),className:"w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg",children:[g.jsx("option",{value:"portrait",children:"Portrait"}),g.jsx("option",{value:"landscape",children:"Landscape"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Font Size"}),g.jsx("input",{type:"number",min:8,max:24,value:l.textFontSize,onChange:R=>c(I=>({...I,textFontSize:Number(R.target.value)})),className:"w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Line Spacing"}),g.jsxs("select",{value:l.textLineHeight,onChange:R=>c(I=>({...I,textLineHeight:Number(R.target.value)})),className:"w-full px-2 py-1.5 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg",children:[g.jsx("option",{value:1,children:"Single"}),g.jsx("option",{value:1.15,children:"1.15"}),g.jsx("option",{value:1.5,children:"1.5"}),g.jsx("option",{value:2,children:"Double"})]})]})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:["Margin: ",l.margin,"pt"]}),g.jsx("input",{type:"range",min:0,max:72,value:l.margin,onChange:R=>c(I=>({...I,margin:Number(R.target.value)})),className:"w-full"})]})]}),x&&g.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg",children:[g.jsx(Il,{size:14,className:"text-blue-500 mt-0.5 shrink-0"}),g.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:Ie.DOCX_LAYOUT_NOTE})]}),g.jsx(ss,{}),g.jsxs("button",{onClick:D,disabled:!F,className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring",children:[g.jsx(Am,{size:16}),w==="processing"?"Converting...":"Convert to PDF"]})]})}const hm={fontFamily:"Helvetica",fontSize:14,color:"#000000",bold:!1,italic:!1};function WA(h){return Math.min(3,Math.max(.5,h))}function ZA(h){switch(h.type){case"addTextBox":return{type:"deleteTextBox",textBox:h.textBox};case"deleteTextBox":return{type:"addTextBox",textBox:h.textBox};case"moveTextBox":return{type:"moveTextBox",id:h.id,fromX:h.toX,fromY:h.toY,toX:h.fromX,toY:h.fromY};case"resizeTextBox":return{type:"resizeTextBox",id:h.id,fromY:h.toY,fromWidth:h.toWidth,fromHeight:h.toHeight,toY:h.fromY,toWidth:h.fromWidth,toHeight:h.fromHeight};case"editTextBox":return{type:"editTextBox",id:h.id,fromText:h.toText,toText:h.fromText};case"editTextBoxStyle":return{type:"editTextBoxStyle",id:h.id,fromStyle:h.toStyle,toStyle:h.fromStyle};case"addTextEdit":return{type:"deleteTextEdit",textEdit:h.textEdit};case"deleteTextEdit":return{type:"addTextEdit",textEdit:h.textEdit};case"modifyTextEdit":return{type:"modifyTextEdit",id:h.id,fromText:h.toText,toText:h.fromText}}}function fm(h,t){switch(t.type){case"addTextBox":return{textBoxes:[...h.textBoxes,t.textBox]};case"deleteTextBox":return{textBoxes:h.textBoxes.filter(s=>s.id!==t.textBox.id)};case"moveTextBox":return{textBoxes:h.textBoxes.map(s=>s.id===t.id?{...s,x:t.toX,y:t.toY}:s)};case"resizeTextBox":return{textBoxes:h.textBoxes.map(s=>s.id===t.id?{...s,y:t.toY,width:t.toWidth,height:t.toHeight}:s)};case"editTextBox":return{textBoxes:h.textBoxes.map(s=>s.id===t.id?{...s,text:t.toText}:s)};case"editTextBoxStyle":return{textBoxes:h.textBoxes.map(s=>s.id===t.id?{...s,style:t.toStyle}:s)};case"addTextEdit":return{textEdits:[...h.textEdits,t.textEdit]};case"deleteTextEdit":return{textEdits:h.textEdits.filter(s=>s.id!==t.textEdit.id)};case"modifyTextEdit":return{textEdits:h.textEdits.map(s=>s.id===t.id?{...s,newText:t.toText}:s)}}}const zt=La((h,t)=>({mode:"form-fill",currentPage:0,zoom:1,textBoxes:[],textEdits:[],hasFormFields:!1,isDirty:!1,selectedTextBoxId:null,textStyle:{...hm},undoStack:[],redoStack:[],extractedText:{},pageRotations:{},setMode:s=>h({mode:s,selectedTextBoxId:null}),setCurrentPage:s=>h({currentPage:s,selectedTextBoxId:null}),setZoom:s=>h({zoom:WA(s)}),setHasFormFields:s=>h({hasFormFields:s}),setSelectedTextBoxId:s=>h({selectedTextBoxId:s}),setTextStyle:s=>h(n=>({textStyle:{...n.textStyle,...s}})),setExtractedText:(s,n)=>h(r=>({extractedText:{...r.extractedText,[s]:n}})),setPageRotations:s=>h({pageRotations:s}),addTextBox:s=>{const n=t();h({textBoxes:[...n.textBoxes,s],isDirty:!0,undoStack:[...n.undoStack,{type:"addTextBox",textBox:s}],redoStack:[]})},removeTextBox:s=>{const n=t(),r=n.textBoxes.find(o=>o.id===s);r&&h({textBoxes:n.textBoxes.filter(o=>o.id!==s),isDirty:!0,selectedTextBoxId:n.selectedTextBoxId===s?null:n.selectedTextBoxId,undoStack:[...n.undoStack,{type:"deleteTextBox",textBox:r}],redoStack:[]})},updateTextBox:(s,n)=>{h(r=>({textBoxes:r.textBoxes.map(o=>o.id===s?{...o,...n}:o),isDirty:!0}))},addTextEdit:s=>{const n=t();h({textEdits:[...n.textEdits,s],isDirty:!0,undoStack:[...n.undoStack,{type:"addTextEdit",textEdit:s}],redoStack:[]})},removeTextEdit:s=>{const n=t(),r=n.textEdits.find(o=>o.id===s);r&&h({textEdits:n.textEdits.filter(o=>o.id!==s),isDirty:!0,undoStack:[...n.undoStack,{type:"deleteTextEdit",textEdit:r}],redoStack:[]})},updateTextEdit:(s,n)=>{h(r=>({textEdits:r.textEdits.map(o=>o.id===s?{...o,...n}:o),isDirty:!0}))},pushAction:s=>{h(n=>({undoStack:[...n.undoStack,s],redoStack:[],isDirty:!0}))},undo:()=>{const s=t();if(s.undoStack.length===0)return;const n=s.undoStack[s.undoStack.length-1],r=ZA(n),o=fm(s,r);h({...o,undoStack:s.undoStack.slice(0,-1),redoStack:[...s.redoStack,n],isDirty:!0})},redo:()=>{const s=t();if(s.redoStack.length===0)return;const n=s.redoStack[s.redoStack.length-1],r=fm(s,n);h({...r,redoStack:s.redoStack.slice(0,-1),undoStack:[...s.undoStack,n],isDirty:!0})},markDirty:()=>h({isDirty:!0}),reset:()=>h({mode:"form-fill",currentPage:0,zoom:1,textBoxes:[],textEdits:[],hasFormFields:!1,isDirty:!1,selectedTextBoxId:null,textStyle:{...hm},undoStack:[],redoStack:[],extractedText:{},pageRotations:{}})}));function QA({onBack:h,onSave:t,isSaving:s}){const n=zt(A=>A.mode),r=zt(A=>A.setMode),o=zt(A=>A.zoom),l=zt(A=>A.setZoom),c=zt(A=>A.hasFormFields),d=zt(A=>A.isDirty),f=zt(A=>A.undoStack),p=zt(A=>A.redoStack),y=zt(A=>A.undo),x=zt(A=>A.redo),v=zt(A=>A.textStyle),_=zt(A=>A.setTextStyle),w=[...c?[{id:"form-fill",label:"Form Fill"}]:[],{id:"add-text",label:"Add Text"},{id:"edit-text",label:"Edit Text"}];return g.jsx("div",{className:"flex-none bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:g.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[g.jsxs("button",{onClick:h,className:"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:[g.jsx(Pl,{size:16}),"Back"]}),g.jsx("div",{className:"w-px h-6 bg-gray-200 dark:bg-gray-700"}),g.jsx("div",{className:"flex rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:w.map(A=>g.jsx("button",{onClick:()=>r(A.id),className:`px-3 py-1.5 text-xs font-medium transition-colors ${n===A.id?"bg-indigo-600 text-white":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-750"}`,children:A.label},A.id))}),g.jsx("div",{className:"w-px h-6 bg-gray-200 dark:bg-gray-700"}),n==="add-text"&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{value:v.fontFamily,onChange:A=>_({fontFamily:A.target.value}),className:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded",children:[g.jsx("option",{value:"Helvetica",children:"Helvetica"}),g.jsx("option",{value:"Courier",children:"Courier"}),g.jsx("option",{value:"TimesRoman",children:"Times Roman"})]}),g.jsx("input",{type:"number",min:6,max:72,value:v.fontSize,onChange:A=>_({fontSize:Number(A.target.value)}),className:"w-14 px-1 py-1 text-xs border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded text-center"}),g.jsx("input",{type:"color",value:v.color,onChange:A=>_({color:A.target.value}),className:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 cursor-pointer"}),g.jsx("button",{onClick:()=>_({bold:!v.bold}),className:`w-7 h-7 flex items-center justify-center text-xs font-bold rounded border transition-colors ${v.bold?"bg-indigo-100 dark:bg-indigo-900 border-indigo-300 dark:border-indigo-700 text-indigo-700 dark:text-indigo-300":"border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:"B"}),g.jsx("button",{onClick:()=>_({italic:!v.italic}),className:`w-7 h-7 flex items-center justify-center text-xs italic rounded border transition-colors ${v.italic?"bg-indigo-100 dark:bg-indigo-900 border-indigo-300 dark:border-indigo-700 text-indigo-700 dark:text-indigo-300":"border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:"I"}),g.jsx("div",{className:"w-px h-6 bg-gray-200 dark:bg-gray-700"})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("button",{onClick:()=>l(o-.25),disabled:o<=.5,className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-30",children:g.jsx(c1,{size:14})}),g.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400 w-10 text-center",children:[Math.round(o*100),"%"]}),g.jsx("button",{onClick:()=>l(o+.25),disabled:o>=3,className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-30",children:g.jsx(o1,{size:14})})]}),g.jsx("div",{className:"w-px h-6 bg-gray-200 dark:bg-gray-700"}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("button",{onClick:y,disabled:f.length===0,className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-30",title:"Undo (Ctrl+Z)",children:g.jsx(i1,{size:14})}),g.jsx("button",{onClick:x,disabled:p.length===0,className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-30",title:"Redo (Ctrl+Shift+Z)",children:g.jsx(Uv,{size:14})})]}),g.jsx("div",{className:"flex-1"}),g.jsxs("button",{onClick:t,disabled:!d||s,className:"flex items-center gap-1.5 px-4 py-1.5 text-sm font-medium bg-indigo-600 dark:bg-indigo-500 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(Vv,{size:14}),s?"Saving...":"Save"]})]})})}function JA({pdfDoc:h,collapsed:t,onToggle:s}){const n=zt(c=>c.currentPage),r=zt(c=>c.setCurrentPage),o=z.useRef(new Map),l=z.useCallback(async(c,d)=>{if(h)try{const f=await h.getPage(c),p=f.getViewport({scale:.2});d.width=p.width,d.height=p.height;const y=d.getContext("2d");if(!y)return;await f.render({canvasContext:y,viewport:p}).promise}catch{}},[h]);return z.useEffect(()=>{!h||t||o.current.forEach((c,d)=>{l(d,c)})},[h,t,l]),t?g.jsx("button",{onClick:s,className:"flex-none w-8 bg-gray-50 dark:bg-gray-850 border-r border-gray-200 dark:border-gray-700 flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-800","aria-label":"Expand sidebar",children:g.jsx("span",{className:"text-xs text-gray-400 [writing-mode:vertical-lr]",children:"Pages"})}):g.jsxs("div",{className:"flex-none w-32 bg-gray-50 dark:bg-gray-850 border-r border-gray-200 dark:border-gray-700 overflow-y-auto",children:[g.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5 border-b border-gray-200 dark:border-gray-700",children:[g.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Pages"}),g.jsx("button",{onClick:s,className:"text-xs text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"Hide"})]}),g.jsx("div",{className:"p-2 space-y-2",children:h&&Array.from({length:h.numPages},(c,d)=>d+1).map(c=>g.jsxs("button",{onClick:()=>r(c-1),className:`w-full rounded-lg border-2 overflow-hidden transition-colors ${n===c-1?"border-indigo-500":"border-transparent hover:border-gray-300 dark:hover:border-gray-600"}`,children:[g.jsx("canvas",{ref:d=>{d&&o.current.set(c,d)},className:"w-full"}),g.jsx("div",{className:"text-[10px] text-gray-500 dark:text-gray-400 text-center py-0.5",children:c})]},c))})]})}function t2(h,t,s,n){const r=h-s.left,o=t-s.top,[l,c]=n.convertToPdfPoint(r,o);return{x:l,y:c}}function gm(h,t,s){const[n,r]=s.convertToViewportPoint(h,t);return{x:n,y:r}}function gy(h,t){const s=gm(h.x,h.y+h.height,t),n=gm(h.x+h.width,h.y,t);return{left:s.x,top:s.y,width:n.x-s.x,height:n.y-s.y}}function e2({viewport:h}){const t=zt(f=>f.currentPage),s=zt(f=>f.textBoxes),n=zt(f=>f.selectedTextBoxId),r=zt(f=>f.setSelectedTextBoxId),o=zt(f=>f.updateTextBox),l=zt(f=>f.removeTextBox),c=zt(f=>f.pushAction),d=s.filter(f=>f.pageIndex===t);return g.jsx(g.Fragment,{children:d.map(f=>g.jsx(s2,{textBox:f,viewport:h,isSelected:f.id===n,onSelect:()=>r(f.id),onUpdate:p=>o(f.id,p),onDelete:()=>l(f.id),onPushAction:c},f.id))})}function s2({textBox:h,viewport:t,isSelected:s,onSelect:n,onUpdate:r,onPushAction:o}){const[l,c]=z.useState(!1),[d,f]=z.useState(!1),p=z.useRef({x:0,y:0,tbX:0,tbY:0}),y=z.useRef(null),x=z.useRef(""),v=gy({x:h.x,y:h.y,width:h.width,height:h.height},t),_=z.useCallback(T=>{if(T.stopPropagation(),n(),d)return;c(!0),p.current={x:T.clientX,y:T.clientY,tbX:h.x,tbY:h.y};const j=H=>{const F=(H.clientX-p.current.x)/t.scale,R=-(H.clientY-p.current.y)/t.scale;r({x:p.current.tbX+F,y:p.current.tbY+R})},D=H=>{c(!1),window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",D);const F=(H.clientX-p.current.x)/t.scale,R=-(H.clientY-p.current.y)/t.scale;(Math.abs(F)>1||Math.abs(R)>1)&&o({type:"moveTextBox",id:h.id,fromX:p.current.tbX,fromY:p.current.tbY,toX:p.current.tbX+F,toY:p.current.tbY+R})};window.addEventListener("mousemove",j),window.addEventListener("mouseup",D)},[d,n,r,o,h.id,h.x,h.y,t.scale]),w=z.useCallback(T=>{T.stopPropagation(),x.current=h.text,f(!0),n(),setTimeout(()=>y.current?.focus(),0)},[n,h.text]),A=z.useCallback(T=>{r({text:T.target.value})},[r]),S=z.useCallback(()=>{f(!1),h.text!==x.current&&o({type:"editTextBox",id:h.id,fromText:x.current,toText:h.text})},[h.id,h.text,o]);z.useEffect(()=>{d&&y.current&&y.current.focus()},[d]);const k={fontFamily:h.style.fontFamily==="TimesRoman"?"Times New Roman, serif":h.style.fontFamily==="Courier"?"Courier New, monospace":"Helvetica, Arial, sans-serif",fontSize:h.style.fontSize*t.scale,fontWeight:h.style.bold?"bold":"normal",fontStyle:h.style.italic?"italic":"normal",color:h.style.color};return g.jsxs("div",{className:`absolute ${l?"cursor-grabbing":"cursor-grab"} ${s?"ring-2 ring-indigo-500 ring-offset-1":"hover:ring-2 hover:ring-indigo-300"}`,style:{left:v.left,top:v.top,width:v.width,height:v.height,minWidth:40,minHeight:20},onMouseDown:_,onDoubleClick:w,children:[d?g.jsx("textarea",{ref:y,value:h.text,onChange:A,onBlur:S,onKeyDown:T=>{T.stopPropagation(),T.key==="Escape"&&S()},className:"w-full h-full bg-white/80 dark:bg-gray-900/80 border-none outline-none resize-none p-1",style:k}):g.jsx("div",{className:"w-full h-full p-1 overflow-hidden bg-yellow-50/50 dark:bg-yellow-900/20 border border-yellow-300/50 dark:border-yellow-700/50 rounded-sm",style:k,children:h.text||g.jsx("span",{className:"text-gray-400 text-xs",children:"Click to add text"})}),s&&!d&&g.jsx("div",{className:"absolute -bottom-1.5 -right-1.5 w-3 h-3 bg-indigo-500 rounded-full cursor-se-resize",onMouseDown:T=>{T.stopPropagation();const j=T.clientX,D=T.clientY,H=h.width,F=h.height,R=h.y,I=ct=>{const P=(ct.clientX-j)/t.scale,W=(ct.clientY-D)/t.scale;r({y:R-W,width:Math.max(30,H+P),height:Math.max(15,F+W)})},K=ct=>{window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",K);const P=(ct.clientX-j)/t.scale,W=(ct.clientY-D)/t.scale;o({type:"resizeTextBox",id:h.id,fromY:R,fromWidth:H,fromHeight:F,toY:R-W,toWidth:Math.max(30,H+P),toHeight:Math.max(15,F+W)})};window.addEventListener("mousemove",I),window.addEventListener("mouseup",K)}})]})}function i2({viewport:h,pdfPage:t,coverColor:s}){const n=zt(S=>S.currentPage),r=zt(S=>S.extractedText),o=zt(S=>S.setExtractedText),l=zt(S=>S.textEdits),c=zt(S=>S.addTextEdit),[d,f]=z.useState(null),[p,y]=z.useState(""),x=z.useRef(null),v=r[n]??[];z.useEffect(()=>{if(r[n]||!t)return;(async()=>{try{const T=(await t.getTextContent()).items.filter(j=>j.str&&j.str.length>0).map(j=>{const D=Math.abs(j.transform[3])||12;return{str:j.str,x:j.transform[4],y:j.transform[5],width:j.width,height:j.height>0?j.height:D,fontName:j.fontName??"Helvetica",fontSize:D}});o(n,T)}catch{}})()},[n,t,r,o]);const _=z.useCallback(S=>{const k=v[S];l.find(j=>j.pageIndex===n&&j.x===k.x&&j.y===k.y)||(f(S),y(k.str),setTimeout(()=>x.current?.focus(),0))},[v,l,n]),w=z.useCallback(()=>{if(d===null)return;const S=v[d];p!==S.str&&c({id:crypto.randomUUID(),pageIndex:n,x:S.x,y:S.y,width:S.width,height:S.height,originalText:S.str,newText:p,originalFontName:S.fontName,fontSize:S.fontSize,coverColor:s}),f(null),y("")},[d,p,v,n,s,c]),A=z.useCallback(()=>{f(null),y("")},[]);return g.jsx(g.Fragment,{children:v.map((S,k)=>{const T=l.some(H=>H.pageIndex===n&&H.x===S.x&&H.y===S.y),j=d===k,D=gy({x:S.x,y:S.y,width:S.width,height:S.height},h);return D.width<2||D.height<2?null:g.jsx("div",{className:`absolute cursor-pointer transition-colors ${T?"bg-green-200/30 dark:bg-green-800/20 border border-green-400/50":j?"bg-yellow-200/50 dark:bg-yellow-800/30 border border-yellow-400":"hover:bg-blue-200/30 dark:hover:bg-blue-800/20"}`,style:{left:D.left,top:D.top,width:D.width,height:D.height},onClick:H=>{H.stopPropagation(),_(k)},children:j&&g.jsxs("div",{className:"absolute left-0 top-full mt-1 z-50 bg-white dark:bg-gray-800 shadow-lg rounded-lg border border-gray-200 dark:border-gray-700 p-2",onClick:H=>H.stopPropagation(),children:[g.jsx("input",{ref:x,type:"text",value:p,onChange:H=>y(H.target.value),onKeyDown:H=>{H.stopPropagation(),H.key==="Enter"&&w(),H.key==="Escape"&&A()},className:"px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 rounded w-60"}),g.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[g.jsx("button",{onClick:w,className:"px-2 py-0.5 text-xs bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Apply"}),g.jsx("button",{onClick:A,className:"px-2 py-0.5 text-xs text-gray-500 dark:text-gray-400 rounded hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cancel"})]})]})},`${k}-${S.x}-${S.y}`)})})}function n2({pdfDoc:h,coverColor:t}){const s=z.useRef(null),n=z.useRef(null),r=z.useRef(null),[o,l]=z.useState(null),[c,d]=z.useState(null),f=zt(j=>j.mode),p=zt(j=>j.currentPage),y=zt(j=>j.zoom),x=zt(j=>j.textStyle),v=zt(j=>j.addTextBox),_=zt(j=>j.setSelectedTextBoxId),w=zt(j=>j.markDirty);z.useEffect(()=>{if(!h||!s.current)return;let j=!1,D=null;return(async()=>{try{const F=await h.getPage(p+1);if(j)return;const R=F.getViewport({scale:y}),I=s.current;I.width=R.width,I.height=R.height;const K=I.getContext("2d");if(!K)return;if(await F.render({canvasContext:K,viewport:R}).promise,l(R),d(F),n.current)try{const ct=await F.getAnnotations();if(n.current.innerHTML="",ct.length>0){n.current.style.width=`${R.width}px`,n.current.style.height=`${R.height}px`;const W=(await Gr(()=>Promise.resolve().then(()=>ay),void 0)).AnnotationLayer;if(W){const N={viewport:R.clone({dontFlip:!0}),div:n.current,annotations:ct,page:F,annotationStorage:h.annotationStorage,linkService:null,downloadManager:null,renderForms:!0};W.render(N);const st=n.current,G=()=>w();st.addEventListener("input",G,{capture:!0}),D=()=>st.removeEventListener("input",G,{capture:!0})}}}catch{}}catch{}})(),()=>{j=!0,D?.()}},[h,p,y,w]);const A=z.useCallback(j=>{if(f!=="add-text"||!o||!s.current)return;const D=s.current.getBoundingClientRect(),{x:H,y:F}=t2(j.clientX,j.clientY,D,o),R=30,I={id:crypto.randomUUID(),pageIndex:p,x:H,y:F-R,width:200,height:R,text:"",style:{...x}};v(I),_(I.id),w()},[f,o,p,x,v,_,w]),S=z.useCallback(j=>{j.target===r.current&&_(null)},[_]),k=f==="form-fill"?"auto":"none",T=f==="form-fill"?"none":"auto";return g.jsx("div",{ref:r,className:"flex-1 overflow-auto bg-gray-200 dark:bg-gray-800 flex items-start justify-center p-4",onClick:S,children:g.jsxs("div",{className:"relative inline-block shadow-xl",children:[g.jsx("canvas",{ref:s,className:"block",style:{zIndex:10}}),g.jsx("div",{ref:n,className:"annotationLayer absolute inset-0",style:{zIndex:20,pointerEvents:k}}),o&&g.jsxs("div",{className:"absolute inset-0",style:{zIndex:30,pointerEvents:T},onClick:A,children:[f==="add-text"&&g.jsx(e2,{viewport:o}),f==="edit-text"&&c&&g.jsx(i2,{viewport:o,pdfPage:c,coverColor:t})]})]})})}function a2({totalPages:h}){const t=zt(n=>n.currentPage),s=zt(n=>n.setCurrentPage);return g.jsxs("div",{className:"flex-none bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 px-4 py-1.5 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>s(Math.max(0,t-1)),disabled:t===0,className:"px-2 py-0.5 text-xs rounded border border-gray-300 dark:border-gray-600 disabled:opacity-30 hover:bg-gray-50 dark:hover:bg-gray-800",children:"Prev"}),g.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Page ",t+1," of ",h]}),g.jsx("button",{onClick:()=>s(Math.min(h-1,t+1)),disabled:t>=h-1,className:"px-2 py-0.5 text-xs rounded border border-gray-300 dark:border-gray-600 disabled:opacity-30 hover:bg-gray-50 dark:hover:bg-gray-800",children:"Next"})]}),g.jsx("div",{className:"text-[10px] text-gray-400 dark:text-gray-500",children:"Ctrl+Z Undo | Ctrl+Shift+Z Redo | Del Delete selection | Esc Deselect"})]})}function r2(){const[,h]=z.useState(null),[t,s]=z.useState(null),[n,r]=z.useState(null),[o,l]=z.useState(!1),[c,d]=z.useState(!1),[f,p]=z.useState(null),[y,x]=z.useState(!1),[v,_]=z.useState("#FFFFFF"),w=z.useRef(null),A=zt(F=>F.isDirty),S=zt(F=>F.mode),k=zt(F=>F.reset),T=z.useCallback(async F=>{const R=F[0];if(R){h(R),r(R.bytes);try{const ct=await(await Gr(()=>Promise.resolve().then(()=>ay),void 0)).getDocument({data:new Uint8Array(R.bytes)}).promise;s(ct);const N=(await(await ct.getPage(1)).getAnnotations()).some(G=>G.subtype==="Widget"),st={};for(let G=1;G<=ct.numPages;G++){const O=await ct.getPage(G);st[G-1]=O.rotate}zt.getState().reset(),zt.getState().setHasFormFields(N),zt.getState().setPageRotations(st),N?zt.getState().setMode("form-fill"):zt.getState().setMode("add-text"),l(!0)}catch(I){ge.error("Failed to load PDF for editing"),console.error(I)}}},[]);z.useEffect(()=>{if(!o)return;const F=I=>{const K=I.metaKey||I.ctrlKey;if(K&&I.key==="z"&&!I.shiftKey){I.stopPropagation(),I.preventDefault(),zt.getState().undo();return}if(K&&(I.key==="z"&&I.shiftKey||I.key==="Z")){I.stopPropagation(),I.preventDefault(),zt.getState().redo();return}if(I.key==="Delete"||I.key==="Backspace"&&!(I.target instanceof HTMLInputElement||I.target instanceof HTMLTextAreaElement)){const ct=zt.getState();if(ct.mode==="add-text"&&ct.selectedTextBoxId){I.stopPropagation(),ct.removeTextBox(ct.selectedTextBoxId);return}}I.key==="Escape"&&(I.stopPropagation(),zt.getState().setSelectedTextBoxId(null))},R=w.current;return R?.addEventListener("keydown",F,!0),()=>R?.removeEventListener("keydown",F,!0)},[o]),z.useEffect(()=>{if(!A)return;const F=R=>{R.preventDefault()};return window.addEventListener("beforeunload",F),()=>window.removeEventListener("beforeunload",F)},[A]);const j=z.useCallback(async()=>{if(!(!n||!t)){d(!0);try{const F=zt.getState();let R=n;try{const I=t.annotationStorage;if(I&&I.size>0){const K=await t.saveDocument();R=new Uint8Array(K)}}catch{}if(F.textBoxes.length>0||F.textEdits.length>0||F.hasFormFields){const I=await ze.process("edit-pdf",[R],{textBoxes:F.textBoxes,textEdits:F.textEdits,flattenForm:!1});p(I)}else p({files:[{name:"edited.pdf",bytes:R,pageCount:t.numPages}],processingTime:0});zt.getState().reset(),l(!1)}catch(F){const R=F instanceof Error?F.message:String(F);ge.error(`Save failed: ${R}`)}finally{d(!1)}}},[n,t]),D=z.useCallback(()=>{A&&!window.confirm(Ie.UNSAVED_CHANGES)||(k(),l(!1),h(null),s(null),r(null))},[A,k]),H=z.useCallback(()=>{k(),h(null),s(null),r(null),l(!1),p(null),Dt.getState().reset()},[k]);return f?g.jsxs("div",{className:"space-y-4",children:[g.jsx(Ye,{result:f}),g.jsx($e,{result:f,onReset:H})]}):o&&t?g.jsxs("div",{ref:w,className:"fixed inset-0 z-50 bg-white dark:bg-gray-900 flex flex-col",tabIndex:-1,children:[g.jsx(QA,{onBack:D,onSave:j,isSaving:c}),S==="edit-text"&&g.jsxs("div",{className:"flex-none bg-gray-50 dark:bg-gray-850 border-b border-gray-200 dark:border-gray-700 px-4 py-1.5 flex items-center gap-2",children:[g.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Cover color:"}),g.jsx("input",{type:"color",value:v,onChange:F=>_(F.target.value),className:"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 cursor-pointer"}),g.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-500",children:v})]}),g.jsxs("div",{className:"flex flex-1 min-h-0",children:[g.jsx(JA,{pdfDoc:t,collapsed:y,onToggle:()=>x(F=>!F)}),g.jsx(n2,{pdfDoc:t,coverColor:v})]}),g.jsx(a2,{totalPages:t.numPages})]}):g.jsx("div",{className:"space-y-6",children:g.jsx(es,{onFilesLoaded:T})})}const o2={low:{label:"Low",description:"Fast. Re-saves with optimized structure."},medium:{label:"Medium",description:"Recompresses streams at max level, deduplicates content."},high:{label:"High",description:"Maximum. Downsamples images, strips metadata and non-essential data."},"extra-high":{label:"Extra High",description:"Extreme. Converts images to grayscale, aggressively downsizes. May reduce visual quality."}},l2={low:{minPct:5,maxPct:15},medium:{minPct:20,maxPct:50},high:{minPct:35,maxPct:70},"extra-high":{minPct:70,maxPct:90}};function c2(){const[h,t]=z.useState([]),[s,n]=z.useState("medium"),[r,o]=z.useState(!1),[l,c]=z.useState(!1),[d,f]=z.useState(null),p=Dt(k=>k.status),y=h[0]??null,x=z.useMemo(()=>y?{isEncrypted:y.isEncrypted,pageCount:y.pageCount,hasMixedPageSizes:!1}:null,[y]),v=z.useMemo(()=>{if(!y)return null;const{minPct:k,maxPct:T}=l2[s],j=y.bytes.length;return{minSize:ri(Math.round(j*(1-T/100))),maxSize:ri(Math.round(j*(1-k/100))),minPct:k,maxPct:T}},[y,s]),_=z.useMemo(()=>!!y,[y]),w=z.useCallback(k=>{t(k),f(null),Dt.getState().reset()},[]),A=z.useCallback(async()=>{if(!(!y||!_))try{const k=s==="high"||s==="extra-high",T=await ze.process("compress",[y.bytes],{level:s,stripMetadata:k?!0:r,flattenForms:k?!0:l});(T.files[0]?.bytes.length??0)>=y.bytes.length&&ge(Ie.COMPRESS_NO_SAVINGS,{icon:""}),f(T)}catch(k){const T=k instanceof Error?k.message:String(k);ge.error(T)}},[y,_,s,r,l]),S=z.useCallback(()=>{t([]),n("medium"),o(!1),c(!1),f(null),Dt.getState().reset()},[]);return d?g.jsxs("div",{className:"space-y-4",children:[g.jsx(Ye,{result:d,originalBytes:y?.bytes,showOriginalToggle:!0}),g.jsx($e,{result:d,onReset:S})]}):g.jsxs("div",{className:"space-y-6",children:[g.jsx(es,{onFilesLoaded:w}),y&&g.jsxs(g.Fragment,{children:[g.jsx(bs,{analysis:x,currentToolId:"compress"}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["File size: ",ri(y.bytes.length)]}),v&&g.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["Estimated after compression: ",v.minSize,"  ",v.maxSize,"  ( ",v.minPct,"",v.maxPct,"%)"]})]}),g.jsxs("button",{onClick:A,disabled:!_||p==="processing",className:"flex items-center gap-1.5 px-4 py-1.5 text-sm font-medium bg-indigo-600 dark:bg-indigo-500 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(z0,{size:14}),p==="processing"?"Processing...":"Compress PDF"]})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Compression level"}),g.jsx("div",{className:"space-y-2",children:Object.entries(o2).map(([k,{label:T,description:j}])=>g.jsxs("label",{className:"flex items-start gap-3 text-sm text-gray-700 dark:text-gray-300 cursor-pointer",children:[g.jsx("input",{type:"radio",name:"compression-level",value:k,checked:s===k,onChange:()=>n(k),className:"mt-0.5 h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500"}),g.jsxs("div",{children:[g.jsx("span",{className:"font-medium",children:T}),g.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:j})]})]},k))})]}),s==="extra-high"&&g.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:"Warning: Extra High compression converts all color images to grayscale and aggressively reduces quality. The output may not be suitable for print or archival use."}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Options"}),s==="high"||s==="extra-high"?g.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Metadata stripping and form flattening are included in ",s==="extra-high"?"Extra High":"High"," compression."]}):g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{className:"flex items-center gap-3 text-sm text-gray-700 dark:text-gray-300 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:r,onChange:k=>o(k.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"Strip metadata",g.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:" removes title, author, keywords, etc."})]}),g.jsxs("label",{className:"flex items-center gap-3 text-sm text-gray-700 dark:text-gray-300 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:l,onChange:k=>c(k.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"Flatten forms",g.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:" removes interactive form field overhead"})]})]})]}),g.jsx(ss,{}),g.jsxs("button",{onClick:A,disabled:!_||p==="processing",className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 dark:bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus-ring",children:[g.jsx(z0,{size:16}),p==="processing"?"Processing...":"Compress PDF"]}),"      "]})]})}const Ze={split:h=>.5+h*.01,merge:h=>.5+h*.02,rotate:h=>.3+h*.005,reorder:h=>.5+h*.01,"delete-pages":h=>.5+h*.01,"extract-pages":h=>.5+h*.01,"add-blank-pages":()=>.5,"add-page-numbers":h=>1+h*.05,"text-watermark":h=>1+h*.05,scale:h=>1+h*.03,encrypt:h=>.5+h*.02,unlock:()=>.5,"edit-metadata":()=>.3,"edit-pdf":h=>1+h*.03,"convert-to-pdf":()=>2,compress:h=>1+h*.02},py={organize:{label:"Organize",color:"blue-500"},transform:{label:"Transform",color:"amber-500"},stamp:{label:"Stamp",color:"purple-500"},security:{label:"Security",color:"red-500"},info:{label:"Info",color:"green-500"},edit:{label:"Edit",color:"teal-500"},convert:{label:"Convert",color:"orange-500"}},_h=[{id:"split",name:"Split PDF",description:"Split document into separate files",icon:"Scissors",category:"organize",categoryColor:"blue-500",acceptsMultipleFiles:!1,pipelineCompatible:!0,component:fA,estimateTime:Ze.split,generateFilename:(h,t)=>We("split",h,t)},{id:"merge",name:"Merge PDFs",description:"Combine multiple PDFs into one",icon:"Layers",category:"organize",categoryColor:"blue-500",acceptsMultipleFiles:!0,pipelineCompatible:!1,component:gA,estimateTime:Ze.merge,generateFilename:(h,t)=>We("merge",h,t)},{id:"reorder",name:"Reorder Pages",description:"Rearrange pages by dragging",icon:"ArrowUpDown",category:"organize",categoryColor:"blue-500",acceptsMultipleFiles:!1,pipelineCompatible:!0,component:mA,estimateTime:Ze.reorder,generateFilename:(h,t)=>We("reorder",h,t)},{id:"delete-pages",name:"Delete Pages",description:"Remove unwanted pages",icon:"Trash2",category:"organize",categoryColor:"blue-500",acceptsMultipleFiles:!1,pipelineCompatible:!0,component:yA,estimateTime:Ze["delete-pages"],generateFilename:(h,t)=>We("delete-pages",h,t)},{id:"extract-pages",name:"Extract Pages",description:"Pull specific pages into a new PDF",icon:"FileOutput",category:"organize",categoryColor:"blue-500",acceptsMultipleFiles:!1,pipelineCompatible:!0,component:bA,estimateTime:Ze["extract-pages"],generateFilename:(h,t)=>We("extract-pages",h,t)},{id:"add-blank-pages",name:"Add Blank Pages",description:"Insert blank pages at any position",icon:"FilePlus",category:"organize",categoryColor:"blue-500",acceptsMultipleFiles:!1,pipelineCompatible:!0,component:_A,estimateTime:Ze["add-blank-pages"],generateFilename:(h,t)=>We("add-blank-pages",h,t)},{id:"rotate",name:"Rotate Pages",description:"Rotate pages in any direction",icon:"RotateCw",category:"transform",categoryColor:"amber-500",acceptsMultipleFiles:!1,pipelineCompatible:!0,component:pA,estimateTime:Ze.rotate,generateFilename:(h,t)=>We("rotate",h,t)},{id:"scale",name:"Scale / Resize",description:"Change page dimensions",icon:"Maximize",category:"transform",categoryColor:"amber-500",acceptsMultipleFiles:!1,pipelineCompatible:!0,component:TA,estimateTime:Ze.scale,generateFilename:(h,t)=>We("scale",h,t)},{id:"compress",name:"Compress PDF",description:"Reduce file size",icon:"Minimize2",category:"transform",categoryColor:"amber-500",acceptsMultipleFiles:!1,pipelineCompatible:!0,component:c2,estimateTime:Ze.compress,generateFilename:(h,t)=>We("compress",h,t)},{id:"add-page-numbers",name:"Page Numbers",description:"Add page numbers to your document",icon:"Hash",category:"stamp",categoryColor:"purple-500",acceptsMultipleFiles:!1,pipelineCompatible:!0,component:EA,estimateTime:Ze["add-page-numbers"],generateFilename:(h,t)=>We("add-page-numbers",h,t)},{id:"text-watermark",name:"Text Watermark",description:"Add text watermark to pages",icon:"Type",category:"stamp",categoryColor:"purple-500",acceptsMultipleFiles:!1,pipelineCompatible:!0,component:CA,estimateTime:Ze["text-watermark"],generateFilename:(h,t)=>We("text-watermark",h,t)},{id:"encrypt",name:"Encrypt PDF",description:"Password-protect your PDF",icon:"Lock",category:"security",categoryColor:"red-500",acceptsMultipleFiles:!1,pipelineCompatible:!0,component:MA,estimateTime:Ze.encrypt,generateFilename:(h,t)=>We("encrypt",h,t)},{id:"unlock",name:"Unlock PDF",description:"Remove password protection",icon:"Unlock",category:"security",categoryColor:"red-500",acceptsMultipleFiles:!1,pipelineCompatible:!0,component:RA,estimateTime:Ze.unlock,generateFilename:(h,t)=>We("unlock",h,t)},{id:"edit-metadata",name:"Edit Metadata",description:"View and edit document properties",icon:"FileText",category:"info",categoryColor:"green-500",acceptsMultipleFiles:!1,pipelineCompatible:!0,component:OA,estimateTime:Ze["edit-metadata"],generateFilename:(h,t)=>We("edit-metadata",h,t)},{id:"edit-pdf",name:"Edit PDF",description:"Fill forms, add text, and edit content",icon:"PenLine",category:"edit",categoryColor:"teal-500",acceptsMultipleFiles:!1,pipelineCompatible:!1,component:r2,estimateTime:Ze["edit-pdf"],generateFilename:(h,t)=>We("edit-pdf",h,t)},{id:"convert-to-pdf",name:"Convert to PDF",description:"Convert images and documents to PDF",icon:"FileUp",category:"convert",categoryColor:"orange-500",acceptsMultipleFiles:!0,pipelineCompatible:!1,component:KA,estimateTime:Ze["convert-to-pdf"],generateFilename:(h,t)=>We("convert-to-pdf",h,t)}],ni=Object.fromEntries(_h.map(h=>[h.id,h]));function my(){return typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function pm(h){return h==="system"?my():h}function zd(h){typeof document>"u"||document.documentElement.classList.toggle("dark",h==="dark")}function u2(){if(typeof localStorage>"u")return"system";const h=localStorage.getItem("theme-preference");if(h==="light"||h==="dark")return h;const t=localStorage.getItem("quire-theme");return t==="light"||t==="dark"||t==="system"?t:"system"}const Ll=La(h=>{const t=u2(),s=pm(t);return zd(s),typeof window<"u"&&(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{if(Ll.getState().mode==="system"){const o=my();zd(o),h({resolved:o})}}),window.addEventListener("site-theme-change",()=>{const r=localStorage.getItem("theme-preference");(r==="light"||r==="dark")&&Ll.getState().setMode(r)})),{mode:t,resolved:s,setMode:n=>{const r=pm(n);zd(r);try{localStorage.setItem("quire-theme",n)}catch{}h({mode:n,resolved:r})}}}),d2={Scissors:Da,Layers:Yr,ArrowUpDown:Fl,Trash2:Ln,FileOutput:Bl,FilePlus:Ma,RotateCw:$s,Maximize:Ul,Hash:Vr,Type:Hl,Lock:Ti,Unlock:Ra,FileText:Ve},h2={"blue-500":"bg-blue-500","amber-500":"bg-amber-500","purple-500":"bg-purple-500","red-500":"bg-red-500","green-500":"bg-green-500","teal-500":"bg-teal-500","orange-500":"bg-orange-500"},f2={"blue-500":"text-blue-500","amber-500":"text-amber-500","purple-500":"text-purple-500","red-500":"text-red-500","green-500":"text-green-500","teal-500":"text-teal-500","orange-500":"text-orange-500"},g2=Object.entries(py).map(([h,t])=>({key:h,...t,tools:_h.filter(s=>s.category===h)})),p2={light:Qv,dark:zv,system:Ov},Pd=["system","light","dark"];function m2({onShowShortcuts:h}){const{currentToolId:t,setView:s}=Pn(),{mode:n,setMode:r}=Ll(),o=d=>{const f=Dt.getState().status,p=Hd.getState().currentFiles.length>0;if(f==="processing"){if(!window.confirm("You have work in progress. Leave this page?"))return}else if(p&&!window.confirm("You have a file loaded. Leave this tool?"))return;s("tool",d)},l=()=>{const d=Pd.indexOf(n);r(Pd[(d+1)%Pd.length])},c=p2[n];return g.jsxs("header",{className:"h-14 flex items-center justify-between px-4 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:[g.jsx("h1",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:"Quire"}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("nav",{className:"hidden md:flex items-center gap-1",children:g2.map(d=>g.jsxs("div",{className:"relative group",children:[g.jsxs("button",{className:"px-3 py-2 text-sm font-medium text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors flex items-center gap-1.5","aria-haspopup":"true",children:[g.jsx("span",{className:`w-2 h-2 rounded-full ${h2[d.color]}`}),d.label]}),g.jsx("div",{className:"absolute top-full right-0 hidden group-hover:block pt-1 z-50",children:g.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 py-2 min-w-[220px]",children:d.tools.map(f=>{const p=d2[f.icon],y=t===f.id;return g.jsxs("button",{onClick:()=>o(f.id),className:`w-full text-left px-3 py-2 rounded-lg flex items-center gap-3 transition-colors ${y?"bg-indigo-50 text-indigo-700 dark:bg-indigo-950 dark:text-indigo-300":"hover:bg-gray-50 text-gray-700 dark:hover:bg-gray-800 dark:text-gray-300"}`,children:[p&&g.jsx(p,{size:16,className:`shrink-0 ${y?"text-indigo-500 dark:text-indigo-400":f2[f.categoryColor]}`}),g.jsxs("div",{className:"min-w-0",children:[g.jsx("div",{className:"text-sm font-medium",children:f.name}),g.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500 truncate",children:f.description})]})]},f.id)})})})]},d.key))}),g.jsx("button",{onClick:l,className:"p-2 rounded-lg text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus-ring","aria-label":`Theme: ${n}`,children:g.jsx(c,{size:20})}),g.jsx("button",{onClick:h,className:"p-2 rounded-lg text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus-ring","aria-label":"Keyboard shortcuts",children:g.jsx(nv,{size:20})})]})]})}function y2(){return g.jsx("footer",{className:"py-4 text-center",children:g.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center justify-center gap-1.5",children:[g.jsx(Ti,{size:12}),"Your files never leave your browser. All processing happens locally."]})})}function _l(h){const t=[];h.length>5&&t.push({message:"Pipeline is limited to 5 steps to ensure reliable performance.",type:"error"}),h.indexOf("unlock")>0&&t.push({message:"Unlock PDF should be the first step so other tools can read the PDF content.",type:"warning"});const n=h.indexOf("encrypt");n>=0&&n<h.length-1&&t.push({message:"Encrypt should be the last step. Tools after it would need the password to process the PDF.",type:"warning"});const r=h.indexOf("delete-pages"),o=h.indexOf("add-page-numbers");r>=0&&o>=0&&r>o&&t.push({message:"Consider moving Delete Pages before Add Page Numbers so numbers are correct after deletion.",type:"suggestion"});const l=new Set;for(const d of h)l.has(d)&&t.push({message:`'${d}' appears twice in the pipeline. Is that intentional?`,type:"suggestion"}),l.add(d);return{valid:!t.some(d=>d.type==="error"),warnings:t}}const mm={valid:!0,warnings:[]},Oe=La()((h,t)=>({selectedTools:[],currentStep:-1,stepStatus:{},intermediateResults:{},originalInput:null,validation:mm,isExecuting:!1,stepErrors:{},addTool:s=>h(n=>{if(n.selectedTools.length>=5)return n;const r=[...n.selectedTools,s];return{selectedTools:r,validation:_l(r)}}),removeTool:s=>h(n=>{const r=n.selectedTools.filter((o,l)=>l!==s);return{selectedTools:r,validation:_l(r)}}),reorderTools:(s,n)=>h(r=>{const o=[...r.selectedTools],[l]=o.splice(s,1);return o.splice(n,0,l),{selectedTools:o,validation:_l(o)}}),loadPreset:s=>h(()=>{const n=s.tools.slice(0,5);return{selectedTools:n,validation:_l(n)}}),clearPipeline:()=>h({selectedTools:[],currentStep:-1,stepStatus:{},intermediateResults:{},originalInput:null,validation:mm,isExecuting:!1,stepErrors:{}}),startPipeline:()=>h(s=>{const n={};for(let r=1;r<=s.selectedTools.length;r++)n[r]="pending";return{isExecuting:!0,currentStep:0,stepStatus:n,intermediateResults:{},originalInput:null,stepErrors:{}}}),setOriginalInput:s=>h({originalInput:s}),advanceToStep:s=>h(n=>{const r={...n.stepStatus};return r[s]==="pending"&&(r[s]="configuring"),{currentStep:s,stepStatus:r}}),setStepConfiguring:s=>h(n=>({stepStatus:{...n.stepStatus,[s]:"configuring"}})),setStepProcessing:s=>h(n=>({stepStatus:{...n.stepStatus,[s]:"processing"}})),completeStep:(s,n)=>h(r=>{const o={...r.intermediateResults};for(const l of Object.keys(o)){const c=Number(l);c<s-1&&delete o[c]}return o[s]=n,{stepStatus:{...r.stepStatus,[s]:"done"},intermediateResults:o}}),failStep:(s,n)=>h(r=>({stepStatus:{...r.stepStatus,[s]:"failed"},stepErrors:{...r.stepErrors,[s]:n}})),skipStep:s=>h(n=>{const r=t().getStepInput(s),o={...n.intermediateResults};if(r){for(const l of Object.keys(o)){const c=Number(l);c<s-1&&delete o[c]}o[s]=r}return{stepStatus:{...n.stepStatus,[s]:"skipped"},intermediateResults:o}}),retryStep:s=>h(n=>({stepStatus:{...n.stepStatus,[s]:"configuring"},stepErrors:{...n.stepErrors,[s]:""}})),cancelPipeline:()=>h({isExecuting:!1,currentStep:-1}),resetPipeline:()=>h({currentStep:-1,stepStatus:{},intermediateResults:{},originalInput:null,isExecuting:!1,stepErrors:{}}),getStepInput:s=>{const n=t();if(s<=1)return n.originalInput;for(let r=s-1;r>=1;r--)if(n.intermediateResults[r])return n.intermediateResults[r];return n.originalInput},getLastSuccessfulOutput:()=>{const s=t(),n=Object.keys(s.intermediateResults).map(Number).sort((r,o)=>o-r);return n.length>0?s.intermediateResults[n[0]]:s.originalInput}}));function b2({children:h,onShowShortcuts:t}){return z.useEffect(()=>{const s=n=>{(Dt.getState().status==="processing"||Oe.getState().isExecuting)&&n.preventDefault()};return window.addEventListener("beforeunload",s),()=>window.removeEventListener("beforeunload",s)},[]),g.jsxs("div",{className:"min-h-screen flex flex-col",children:[g.jsx(m2,{onShowShortcuts:t}),g.jsx("main",{className:"flex-1 w-full max-w-[1200px] mx-auto px-4 py-6",children:h}),g.jsx(y2,{})]})}const x2={Scissors:Da,Layers:Yr,ArrowUpDown:Fl,Trash2:Ln,FileOutput:Bl,FilePlus:Ma,RotateCw:$s,Maximize:Ul,Hash:Vr,Type:Hl,Lock:Ti,Unlock:Ra,FileText:Ve,PenLine:Fv,FileUp:Am},v2={"blue-500":"border-l-blue-500","amber-500":"border-l-amber-500","purple-500":"border-l-purple-500","red-500":"border-l-red-500","green-500":"border-l-green-500","teal-500":"border-l-teal-500","orange-500":"border-l-orange-500"},_2={"blue-500":"bg-blue-500","amber-500":"bg-amber-500","purple-500":"bg-purple-500","red-500":"bg-red-500","green-500":"bg-green-500","teal-500":"bg-teal-500","orange-500":"bg-orange-500"},w2={"blue-500":"text-blue-500","amber-500":"text-amber-500","purple-500":"text-purple-500","red-500":"text-red-500","green-500":"text-green-500","teal-500":"text-teal-500","orange-500":"text-orange-500"};function Fd(){const{pipelineMode:h,setView:t,togglePipelineMode:s}=Pn(),n=Oe(c=>c.selectedTools),r=Object.entries(py).map(([c,d])=>({key:c,...d,tools:_h.filter(f=>f.category===c)})),o=c=>{if(h){if(!c.pipelineCompatible)return;const d=n.lastIndexOf(c.id);d>=0?Oe.getState().removeTool(d):Oe.getState().addTool(c.id)}else t("tool",c.id)},l=()=>{Oe.getState().startPipeline(),t("pipeline")};return g.jsxs("div",{children:[g.jsx("div",{className:"flex justify-center mb-6",children:g.jsxs("div",{className:"inline-flex rounded-lg border border-gray-200 dark:border-gray-700 p-1 bg-gray-50 dark:bg-gray-800",children:[g.jsx("button",{className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${h?"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300":"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-gray-100"}`,onClick:()=>{h&&(s(),Oe.getState().clearPipeline())},children:"Single Tool"}),g.jsx("button",{className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${h?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,onClick:()=>{h||s()},children:"Pipeline"})]})}),h&&n.length>0&&g.jsxs("div",{className:"mb-4 p-3 bg-indigo-50 dark:bg-indigo-950 rounded-lg flex items-center justify-between",children:[g.jsxs("span",{className:"text-sm text-indigo-700 dark:text-indigo-300",children:[n.length," tool",n.length!==1?"s":""," selected"]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>Oe.getState().clearPipeline(),className:"px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:"Clear"}),g.jsx("button",{onClick:()=>t("pipeline"),className:"px-4 py-1.5 text-sm text-indigo-600 dark:text-indigo-400 border border-indigo-300 dark:border-indigo-700 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900 transition-colors",children:"Configure"}),g.jsx("button",{onClick:l,className:"px-4 py-1.5 bg-indigo-600 dark:bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:n.length<2,children:"Start Pipeline"})]})]}),r.map(c=>g.jsxs("div",{className:"mb-8",children:[g.jsxs("h2",{className:"text-sm font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400 mb-3 flex items-center gap-2",children:[g.jsx("span",{className:`w-2.5 h-2.5 rounded-full ${_2[c.color]}`}),c.label]}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:c.tools.map(d=>{const f=x2[d.icon],p=n.indexOf(d.id),y=p>=0,x=h&&!d.pipelineCompatible,v=h&&n.length>=5&&!y;return g.jsxs("button",{onClick:()=>o(d),disabled:x||v,className:`
                    relative text-left p-5 bg-white dark:bg-gray-800 rounded-xl shadow-sm border-l-4
                    ${v2[d.categoryColor]}
                    transition-all duration-150
                    ${x||v?"opacity-50 cursor-not-allowed":"hover:-translate-y-0.5 hover:shadow-md cursor-pointer"}
                    ${y?"ring-2 ring-indigo-500":""}
                    focus-ring
                  `,"aria-label":`${d.name}${x?" (not available in pipeline)":""}`,title:x?"Not available in pipeline mode":v?"Pipeline is limited to 5 tools":"",children:[y&&g.jsx("span",{className:"absolute top-2 right-2 w-6 h-6 bg-indigo-600 text-white text-xs font-bold rounded-full flex items-center justify-center",children:p+1}),g.jsxs("div",{className:"flex items-start gap-3",children:[f&&g.jsx(f,{size:24,className:`${w2[d.categoryColor]} shrink-0 mt-0.5`}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:d.name}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:d.description})]})]})]},d.id)})})]},c.key))]})}const S2=[{key:"Escape",description:"Go back to tool grid",action:"navigate-back"},{key:"a",ctrl:!0,description:"Select all pages",action:"select-all"},{key:"a",ctrl:!0,shift:!0,description:"Deselect all pages",action:"deselect-all"},{key:"z",ctrl:!0,description:"Reset tool to original state",action:"reset-tool"},{key:"s",ctrl:!0,description:"Download result",action:"download"},{key:"?",description:"Show keyboard shortcuts",action:"show-shortcuts"}];function A2({isOpen:h,onClose:t}){const s=z.useRef(null);return z.useEffect(()=>{if(!h)return;const n=r=>{r.key==="Escape"&&t()};return window.addEventListener("keydown",n),s.current?.focus(),()=>window.removeEventListener("keydown",n)},[h,t]),h?g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t,children:g.jsxs("div",{ref:s,className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full mx-4 p-6",onClick:n=>n.stopPropagation(),tabIndex:-1,children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Keyboard Shortcuts"}),g.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded","aria-label":"Close",children:g.jsx(rn,{size:18})})]}),g.jsx("table",{className:"w-full text-sm",children:g.jsx("tbody",{children:S2.map(n=>g.jsxs("tr",{className:"border-t border-gray-100 dark:border-gray-700",children:[g.jsx("td",{className:"py-2 pr-4",children:g.jsxs("kbd",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded text-xs font-mono",children:[n.ctrl&&(navigator.platform.includes("Mac")?"":"Ctrl+"),n.shift?"Shift+":"",n.key]})}),g.jsx("td",{className:"py-2 text-gray-600 dark:text-gray-400",children:n.description})]},n.action))})})]})}):null}class Bd extends z.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){console.error("ErrorBoundary caught:",t,s)}render(){return this.state.hasError?g.jsxs("div",{className:"text-center py-16",children:[g.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:"Something went wrong."}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:this.state.error?.message}),g.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.hash=""},className:"px-4 py-2 bg-indigo-600 dark:bg-indigo-500 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600 transition-colors",children:"Go back to tools"})]}):this.props.children}}const k2=[{id:"scan-cleanup",name:"Scan Cleanup",description:"Remove password, delete blank pages, add page numbers",icon:"ScanLine",tools:["unlock","delete-pages","add-page-numbers"]},{id:"secure-stamp",name:"Secure & Stamp",description:"Add a watermark and password-protect",icon:"ShieldCheck",tools:["text-watermark","encrypt"]},{id:"document-prep",name:"Document Prep",description:"Reorder, clean up, number, and brand your document",icon:"FileCheck",tools:["reorder","delete-pages","add-page-numbers","text-watermark"]},{id:"number-lock",name:"Number & Lock",description:"Add page numbers and password-protect",icon:"Lock",tools:["add-page-numbers","encrypt"]}],E2={Scissors:Da,Layers:Yr,ArrowUpDown:Fl,Trash2:Ln,FileOutput:Bl,FilePlus:Ma,RotateCw:$s,Maximize:Ul,Hash:Vr,Type:Hl,Lock:Ti,Unlock:Ra,FileText:Ve,ScanLine:Cm,ShieldCheck:Tm,FileCheck:Sm},C2={ScanLine:Cm,ShieldCheck:Tm,FileCheck:Sm,Lock:Ti};function T2(h){return E2[h]??Ve}function N2(h){return C2[h]??Ve}function ym(h){switch(h){case"error":return"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-950 border-red-200 dark:border-red-800";case"warning":return"text-amber-600 dark:text-amber-300 bg-amber-50 dark:bg-amber-950 border-amber-200 dark:border-amber-800";case"suggestion":return"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800";default:return"text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}}function bm(h){switch(h){case"error":return g.jsx(Hr,{className:"h-3.5 w-3.5 flex-shrink-0"});case"warning":return g.jsx(Hr,{className:"h-3.5 w-3.5 flex-shrink-0"});case"suggestion":return g.jsx(Il,{className:"h-3.5 w-3.5 flex-shrink-0"});default:return null}}function j2(){const h=Oe(p=>p.selectedTools),t=Oe(p=>p.validation),s=Oe(p=>p.isExecuting),n=z.useCallback(p=>{Oe.getState().loadPreset(p)},[]),r=z.useCallback(p=>{Oe.getState().removeTool(p)},[]),o=z.useCallback(p=>{p>0&&Oe.getState().reorderTools(p,p-1)},[]),l=z.useCallback(p=>{p<Oe.getState().selectedTools.length-1&&Oe.getState().reorderTools(p,p+1)},[]),c=z.useCallback(()=>{Oe.getState().clearPipeline()},[]),d=z.useCallback(()=>{Oe.getState().startPipeline(),Pn.getState().setView("pipeline")},[]),f=h.length>=2&&t.valid&&!s;return g.jsxs("div",{className:"mx-auto max-w-3xl space-y-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"mb-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Quick Start Presets"}),g.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:k2.map(p=>{const y=N2(p.icon);return g.jsxs("button",{onClick:()=>n(p),className:"group flex flex-col items-start gap-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-3 text-left shadow-sm transition-all hover:border-indigo-300 dark:hover:border-indigo-700 hover:shadow-md",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(y,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400"}),g.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:p.name})]}),g.jsx("p",{className:"text-xs leading-relaxed text-gray-500 dark:text-gray-400",children:p.description}),g.jsx("div",{className:"flex flex-wrap gap-1",children:p.tools.map(x=>{const v=ni[x];return g.jsx("span",{className:"inline-block rounded-full bg-gray-100 dark:bg-gray-700 px-2 py-0.5 text-[10px] font-medium text-gray-600 dark:text-gray-400 group-hover:bg-indigo-50 dark:group-hover:bg-indigo-950 group-hover:text-indigo-700 dark:group-hover:text-indigo-300",children:v?.name??x},x)})})]},p.id)})})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"mb-3 text-sm font-semibold text-gray-700 dark:text-gray-300",children:["Pipeline Steps",h.length>0&&g.jsxs("span",{className:"ml-2 text-xs font-normal text-gray-400 dark:text-gray-500",children:["(",h.length," tool",h.length!==1?"s":"",")"]})]}),g.jsx("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 shadow-sm",children:h.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[g.jsx(Yr,{className:"mb-3 h-8 w-8 text-gray-300 dark:text-gray-600"}),g.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Select tools from the grid below to build your pipeline"})]}):g.jsx("ul",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:h.map((p,y)=>{const x=ni[p],v=x?T2(x.icon):Ve,_=t.warnings.filter(w=>w.message.toLowerCase().includes(x?.name?.toLowerCase()??""));return g.jsxs("li",{children:[g.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[g.jsx("span",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-indigo-100 dark:bg-indigo-900 text-xs font-semibold text-indigo-700 dark:text-indigo-300",children:y+1}),g.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[g.jsx(v,{className:"h-4 w-4 flex-shrink-0 text-gray-500 dark:text-gray-400"}),g.jsx("span",{className:"truncate text-sm font-medium text-gray-900 dark:text-gray-100",children:x?.name??p}),x?.category&&g.jsx("span",{className:"rounded-full px-2 py-0.5 text-[10px] font-medium",style:{backgroundColor:`${x.categoryColor}15`,color:x.categoryColor},children:x.category})]}),g.jsxs("div",{className:"flex flex-shrink-0 items-center gap-1",children:[g.jsx("button",{onClick:()=>o(y),disabled:y===0,className:"rounded p-1 text-gray-400 dark:text-gray-500 transition-colors hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-600 dark:hover:text-gray-300 disabled:cursor-not-allowed disabled:opacity-30","aria-label":"Move up",children:g.jsx(wm,{className:"h-4 w-4"})}),g.jsx("button",{onClick:()=>l(y),disabled:y===h.length-1,className:"rounded p-1 text-gray-400 dark:text-gray-500 transition-colors hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-600 dark:hover:text-gray-300 disabled:cursor-not-allowed disabled:opacity-30","aria-label":"Move down",children:g.jsx(_m,{className:"h-4 w-4"})}),g.jsx("button",{onClick:()=>r(y),className:"ml-1 rounded p-1 text-gray-400 dark:text-gray-500 transition-colors hover:bg-red-50 dark:hover:bg-red-950 hover:text-red-500 dark:hover:text-red-400","aria-label":"Remove",children:g.jsx(rn,{className:"h-4 w-4"})})]})]}),_.length>0&&g.jsx("div",{className:"space-y-1 px-4 pb-3",children:_.map((w,A)=>g.jsxs("div",{className:`flex items-center gap-1.5 rounded-lg border px-3 py-1.5 text-xs ${ym(w.type)}`,children:[bm(w.type),g.jsx("span",{children:w.message})]},A))})]},`${p}-${y}`)})})}),t.warnings.length>0&&h.length>0&&g.jsx("div",{className:"mt-3 space-y-1.5",children:t.warnings.filter(p=>!h.some(y=>{const x=ni[y];return x&&p.message.toLowerCase().includes(x.name.toLowerCase())})).map((p,y)=>g.jsxs("div",{className:`flex items-center gap-1.5 rounded-lg border px-3 py-2 text-xs ${ym(p.type)}`,children:[bm(p.type),g.jsx("span",{children:p.message})]},y))})]}),g.jsxs("div",{className:"flex items-center justify-end gap-3",children:[g.jsx("button",{onClick:c,disabled:h.length===0||s,className:"rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 shadow-sm transition-colors hover:bg-gray-50 dark:hover:bg-gray-700 disabled:cursor-not-allowed disabled:opacity-50",children:"Clear"}),g.jsxs("button",{onClick:d,disabled:!f,className:"inline-flex items-center gap-2 rounded-lg bg-indigo-600 dark:bg-indigo-500 px-5 py-2 text-sm font-medium text-white shadow-sm transition-colors hover:bg-indigo-700 dark:hover:bg-indigo-600 disabled:cursor-not-allowed disabled:bg-indigo-400 disabled:opacity-70",children:[g.jsx(km,{className:"h-4 w-4"}),"Start Pipeline"]})]})]})}const M2={Scissors:Da,Layers:Yr,ArrowUpDown:Fl,Trash2:Ln,FileOutput:Bl,FilePlus:Ma,RotateCw:$s,Maximize:Ul,Hash:Vr,Type:Hl,Lock:Ti,Unlock:Ra,FileText:Ve};function xm(h){return M2[h]??Ve}function Id({status:h}){switch(h){case"pending":return g.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:g.jsx("span",{className:"h-2 w-2 rounded-full bg-gray-300 dark:bg-gray-600"})});case"configuring":return g.jsxs("span",{className:"relative flex h-7 w-7 items-center justify-center rounded-full border-2 border-indigo-500 bg-indigo-50 dark:bg-indigo-950",children:[g.jsx("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-indigo-400 opacity-30"}),g.jsx("span",{className:"h-2 w-2 rounded-full bg-indigo-500"})]});case"processing":return g.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border-2 border-indigo-500 bg-indigo-50 dark:bg-indigo-950",children:g.jsx(kv,{className:"h-4 w-4 animate-spin text-indigo-600 dark:text-indigo-400"})});case"done":return g.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-green-500 text-white",children:g.jsx(Tl,{className:"h-4 w-4"})});case"failed":return g.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-red-500 text-white",children:g.jsx(rn,{className:"h-4 w-4"})});case"skipped":return g.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border-2 border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500",children:g.jsx(Rv,{className:"h-4 w-4"})})}}function R2({toolId:h,options:t,onChange:s}){const n=(d,f)=>s({...t,[d]:f}),r="block text-sm font-medium text-gray-700 dark:text-gray-300",o="w-full rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",l="text-xs text-gray-500 dark:text-gray-400",c="text-sm text-gray-500 dark:text-gray-400 italic";switch(h){case"rotate":return g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"Rotation Angle"}),g.jsxs("select",{className:o,value:t.angle??90,onChange:d=>n("angle",Number(d.target.value)),children:[g.jsx("option",{value:90,children:"90 degrees clockwise"}),g.jsx("option",{value:180,children:"180 degrees"}),g.jsx("option",{value:270,children:"270 degrees clockwise"})]})]});case"delete-pages":return g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"Pages to Delete"}),g.jsx("input",{type:"text",placeholder:"e.g. 1,3,5-8",className:o,value:t.pageRange??"",onChange:d=>n("pageRange",d.target.value)}),g.jsx("p",{className:l,children:"Comma-separated page numbers or ranges."})]});case"extract-pages":return g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"Pages to Extract"}),g.jsx("input",{type:"text",placeholder:"e.g. 1-3,5,7",className:o,value:t.pageRange??"",onChange:d=>n("pageRange",d.target.value)}),g.jsx("p",{className:l,children:"Comma-separated page numbers or ranges."})]});case"add-page-numbers":{const d=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"];return g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"Position"}),g.jsx("select",{className:o,value:t.position??"bottom-center",onChange:f=>n("position",f.target.value),children:d.map(f=>g.jsx("option",{value:f,children:f.replace("-"," ").replace(/\b\w/g,p=>p.toUpperCase())},f))})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"Format"}),g.jsxs("select",{className:o,value:t.format??"number",onChange:f=>n("format",f.target.value),children:[g.jsx("option",{value:"number",children:"1, 2, 3..."}),g.jsx("option",{value:"pageOfTotal",children:"Page 1 of N"}),g.jsx("option",{value:"dash",children:"- 1 -"})]})]})]})}case"text-watermark":return g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"Watermark Text"}),g.jsx("input",{type:"text",placeholder:"e.g. CONFIDENTIAL",className:o,value:t.text??"",onChange:d=>n("text",d.target.value)})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"Font Size"}),g.jsx("input",{type:"number",min:8,max:200,className:o,value:t.fontSize??48,onChange:d=>n("fontSize",Number(d.target.value))})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"Opacity"}),g.jsx("input",{type:"number",min:.05,max:1,step:.05,className:o,value:t.opacity??.3,onChange:d=>n("opacity",Number(d.target.value))})]})]})]});case"encrypt":return g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"User Password"}),g.jsx("input",{type:"password",placeholder:"Password to open the PDF",className:o,value:t.userPassword??"",onChange:d=>n("userPassword",d.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"Owner Password"}),g.jsx("input",{type:"password",placeholder:"Password for full access",className:o,value:t.ownerPassword??"",onChange:d=>n("ownerPassword",d.target.value)})]})]});case"unlock":return g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"Password"}),g.jsx("input",{type:"password",placeholder:"Enter PDF password",className:o,value:t.password??"",onChange:d=>n("password",d.target.value)})]});case"add-blank-pages":return g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"Position"}),g.jsxs("select",{className:o,value:t.position??"end",onChange:d=>n("position",d.target.value),children:[g.jsx("option",{value:"start",children:"Beginning"}),g.jsx("option",{value:"end",children:"End"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"Number of Pages"}),g.jsx("input",{type:"number",min:1,max:100,className:o,value:t.count??1,onChange:d=>n("count",Number(d.target.value))})]})]});case"scale":return g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"Target Size"}),g.jsxs("select",{className:o,value:t.targetSize??"A4",onChange:d=>n("targetSize",d.target.value),children:[g.jsx("option",{value:"A4",children:"A4 (210 x 297 mm)"}),g.jsx("option",{value:"Letter",children:"Letter (8.5 x 11 in)"}),g.jsx("option",{value:"Legal",children:"Legal (8.5 x 14 in)"}),g.jsx("option",{value:"A3",children:"A3 (297 x 420 mm)"}),g.jsx("option",{value:"A5",children:"A5 (148 x 210 mm)"})]})]});case"reorder":return g.jsx("p",{className:c,children:"Pages will be passed through in their current order. Reordering is best done in the standalone tool."});case"edit-metadata":return g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"Title"}),g.jsx("input",{type:"text",placeholder:"Document title",className:o,value:t.title??"",onChange:d=>n("title",d.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:r,children:"Author"}),g.jsx("input",{type:"text",placeholder:"Author name",className:o,value:t.author??"",onChange:d=>n("author",d.target.value)})]})]});default:return g.jsx("p",{className:c,children:"No additional configuration needed. Click Apply to process."})}}function Ud(h){try{const s=new TextDecoder("latin1").decode(h.slice(0,Math.min(h.length,512e3))).match(/\/Type\s*\/Page(?!s)/g);return s?s.length:1}catch{return 1}}function D2(){const{selectedTools:h,currentStep:t,stepStatus:s,intermediateResults:n,stepErrors:r,setOriginalInput:o,advanceToStep:l,setStepConfiguring:c,setStepProcessing:d,completeStep:f,failStep:p,skipStep:y,retryStep:x,cancelPipeline:v,resetPipeline:_,getStepInput:w,getLastSuccessfulOutput:A}=Oe(),S=Pn(lt=>lt.setView),[k,T]=z.useState({}),[j,D]=z.useState({}),[H,F]=z.useState({}),R=h.length,I=z.useMemo(()=>h.map((lt,St)=>{const Pt=ni[lt];return{index:St+1,toolId:lt,name:Pt?.name??lt,iconName:Pt?.icon}}),[h]);z.useEffect(()=>{if(t>=1){const lt=s[t];(!lt||lt==="pending")&&c(t)}},[t,s,c]);const K=z.useCallback(lt=>{lt.length!==0&&(o(lt[0].bytes),l(1))},[o,l]),ct=z.useCallback(async lt=>{const St=h[lt-1],Pt=w(lt);if(!Pt)return;const Ft=k[lt]??{};Dt.getState().reset(),d(lt);try{const It=await ze.process(St,[Pt],Ft);It.files.length>0?(f(lt,It.files[0].bytes),D(C=>({...C,[lt]:It}))):p(lt,"No output was produced.")}catch(It){p(lt,It instanceof Error?It.message:String(It))}},[h,k,w,d,f,p]),P=z.useCallback(lt=>{lt<R&&l(lt+1)},[R,l]),W=z.useCallback(lt=>{c(lt)},[c]),N=z.useCallback(lt=>{y(lt),lt<R&&l(lt+1)},[y,R,l]),st=z.useCallback(lt=>{x(lt)},[x]),G=z.useCallback(()=>{v(),S("pipeline")},[v,S]),O=z.useCallback(()=>{_(),T({}),D({}),F({})},[_]),Y=z.useCallback(lt=>{const St=s[lt];(St==="done"||St==="skipped"||St==="failed")&&l(lt)},[s,l]),X=z.useMemo(()=>{for(let lt=1;lt<=R;lt++){const St=s[lt];if(St!=="done"&&St!=="skipped")return!1}return R>0},[s,R]),dt=z.useMemo(()=>{if(!X)return null;for(let St=R;St>=1;St--)if(j[St])return j[St];const lt=A();return lt?{files:[{name:"pipeline-output.pdf",bytes:lt,pageCount:Ud(lt)}],processingTime:0}:null},[X,R,j,A]),M=()=>g.jsxs("aside",{className:"flex w-64 flex-shrink-0 flex-col border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[g.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 px-4 py-4",children:g.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Pipeline Steps"})}),g.jsx("nav",{className:"flex-1 overflow-y-auto px-3 py-3",children:g.jsxs("ol",{className:"space-y-1",children:[g.jsx("li",{children:g.jsxs("button",{type:"button",onClick:()=>Y(0),className:`flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-left text-sm transition-colors ${t===0?"bg-indigo-50 dark:bg-indigo-950 text-indigo-700 dark:text-indigo-300 font-medium":s[0]==="done"?"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer":"text-gray-400 dark:text-gray-500 cursor-default"}`,disabled:t===0,children:[g.jsx(Id,{status:s[0]??(t===0?"configuring":"pending")}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(sh,{className:"h-4 w-4"}),g.jsx("span",{children:"Upload File"})]})]})}),I.map(lt=>{const St=s[lt.index]??"pending",Pt=t===lt.index,Ft=lt.iconName?xm(lt.iconName):Ve;return g.jsx("li",{children:g.jsxs("button",{type:"button",onClick:()=>Y(lt.index),className:`flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-left text-sm transition-colors ${Pt?"bg-indigo-50 dark:bg-indigo-950 text-indigo-700 dark:text-indigo-300 font-medium":St==="done"||St==="skipped"||St==="failed"?"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer":"text-gray-400 dark:text-gray-500 cursor-default"}`,disabled:St==="pending"&&!Pt,children:[g.jsx(Id,{status:St}),g.jsxs("div",{className:"flex items-center gap-2 truncate",children:[g.jsx(Ft,{className:"h-4 w-4 flex-shrink-0"}),g.jsx("span",{className:"truncate",children:lt.name})]})]})},lt.index)})]})}),g.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-4",children:g.jsxs("button",{type:"button",onClick:G,className:"flex w-full items-center justify-center gap-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 shadow-sm transition-colors hover:bg-gray-50 dark:hover:bg-gray-700",children:[g.jsx(Ad,{className:"h-4 w-4"}),"Cancel Pipeline"]})})]}),B=()=>g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Upload Your PDF"}),g.jsxs("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:["Select a PDF file to process through your pipeline of ",R," step",R!==1?"s":"","."]})]}),g.jsx(es,{onFilesLoaded:K})]}),J=lt=>{const St=h[lt-1],Pt=ni[St],Ft=w(lt),It=Ft?Ud(Ft):0,C=Ft?Ft.byteLength:0,ht=k[lt]??{},rt=H[lt]??!0;return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:["Step ",lt," of ",R,": ",Pt?.name??St]}),g.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Configure this step and click Apply to process."})]}),g.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 px-4 py-3",children:[g.jsx(Ve,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"}),g.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[g.jsx("span",{className:"font-medium",children:"Input:"})," ","~",It," page",It!==1?"s":"",", ",ri(C)]})]}),g.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 shadow-sm",children:[g.jsxs("button",{type:"button",onClick:()=>F(q=>({...q,[lt]:!rt})),className:"flex w-full items-center justify-between px-5 py-4 text-left",children:[g.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Configuration"}),g.jsx(R0,{className:`h-4 w-4 text-gray-400 dark:text-gray-500 transition-transform ${rt?"rotate-90":""}`})]}),rt&&g.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 px-5 py-4",children:g.jsx(R2,{toolId:St,options:ht,onChange:q=>T(U=>({...U,[lt]:q}))})})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("button",{type:"button",onClick:()=>ct(lt),className:"inline-flex items-center gap-2 rounded-xl bg-indigo-600 dark:bg-indigo-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-indigo-700 dark:hover:bg-indigo-600",children:[g.jsx(km,{className:"h-4 w-4"}),"Apply"]}),g.jsxs("button",{type:"button",onClick:()=>N(lt),className:"inline-flex items-center gap-2 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-5 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 shadow-sm transition-colors hover:bg-gray-50 dark:hover:bg-gray-700",children:[g.jsx(gl,{className:"h-4 w-4"}),"Skip this step"]})]})]})},ot=lt=>{const St=ni[h[lt-1]];return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:["Processing: ",St?.name??h[lt-1]]}),g.jsxs("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:["Processing step ",lt," of ",R,"..."]})]}),g.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-6 shadow-sm",children:[g.jsx(ss,{}),g.jsx("p",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"Please wait while the operation completes."})]})]})},at=lt=>{const St=h[lt-1],Pt=ni[St],Ft=n[lt],It=Ft?Ud(Ft):0,C=Ft?Ft.byteLength:0,ht=lt===R;return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:["Step ",lt,": ",Pt?.name??St]}),g.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[g.jsx(Tl,{className:"h-4 w-4"}),g.jsx("span",{children:"Completed successfully"})]})]}),g.jsx("div",{className:"rounded-xl border border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-950 px-5 py-4",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-green-100 dark:bg-green-900",children:g.jsx(Tl,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),g.jsxs("div",{children:[g.jsxs("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:["Output: ~",It," page",It!==1?"s":"",", ",ri(C)]}),j[lt]?.processingTime!=null&&g.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:["Processed in ",(j[lt].processingTime/1e3).toFixed(1),"s"]})]})]})}),!ht&&g.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[g.jsxs("button",{type:"button",onClick:()=>P(lt),className:"inline-flex items-center gap-2 rounded-xl bg-indigo-600 dark:bg-indigo-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-indigo-700 dark:hover:bg-indigo-600",children:["Continue to Next Step",g.jsx(R0,{className:"h-4 w-4"})]}),g.jsxs("button",{type:"button",onClick:()=>W(lt),className:"inline-flex items-center gap-2 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-5 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 shadow-sm transition-colors hover:bg-gray-50 dark:hover:bg-gray-700",children:[g.jsx(Br,{className:"h-4 w-4"}),"Reconfigure"]}),g.jsxs("button",{type:"button",onClick:()=>N(lt),className:"inline-flex items-center gap-2 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-5 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 shadow-sm transition-colors hover:bg-gray-50 dark:hover:bg-gray-700",children:[g.jsx(gl,{className:"h-4 w-4"}),"Skip & Continue"]})]})]})},_t=lt=>{const St=h[lt-1],Pt=ni[St],Ft=r[lt]??"An unknown error occurred.";return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:["Step ",lt,": ",Pt?.name??St]}),g.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-red-600 dark:text-red-400",children:[g.jsx(Ad,{className:"h-4 w-4"}),g.jsx("span",{children:"Step failed"})]})]}),g.jsx("div",{className:"rounded-xl border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-950 px-5 py-4",children:g.jsxs("div",{className:"flex gap-3",children:[g.jsx(eh,{className:"mt-0.5 h-5 w-5 flex-shrink-0 text-red-500 dark:text-red-400"}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-100",children:"Error"}),g.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:Ft})]})]})}),g.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[g.jsxs("button",{type:"button",onClick:()=>st(lt),className:"inline-flex items-center gap-2 rounded-xl bg-indigo-600 dark:bg-indigo-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-indigo-700 dark:hover:bg-indigo-600",children:[g.jsx(Br,{className:"h-4 w-4"}),"Retry"]}),g.jsxs("button",{type:"button",onClick:()=>N(lt),className:"inline-flex items-center gap-2 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-5 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 shadow-sm transition-colors hover:bg-gray-50 dark:hover:bg-gray-700",children:[g.jsx(gl,{className:"h-4 w-4"}),"Skip"]}),g.jsxs("button",{type:"button",onClick:G,className:"inline-flex items-center gap-2 rounded-xl border border-red-300 dark:border-red-700 bg-white dark:bg-gray-800 px-5 py-2.5 text-sm font-medium text-red-700 dark:text-red-400 shadow-sm transition-colors hover:bg-red-50 dark:hover:bg-red-950",children:[g.jsx(Ad,{className:"h-4 w-4"}),"Cancel Pipeline"]})]})]})},vt=()=>g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Pipeline Complete"}),g.jsxs("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:["All ",R," step",R!==1?"s":""," have been processed."]})]}),g.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 shadow-sm",children:[g.jsx("div",{className:"border-b border-gray-100 dark:border-gray-700 px-5 py-3",children:g.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Summary"})}),g.jsx("ul",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:I.map(lt=>{const St=s[lt.index]??"pending",Pt=lt.iconName?xm(lt.iconName):Ve,Ft=St==="done"?"Completed":St==="skipped"?"Skipped":St==="failed"?"Failed":St,It=St==="done"?"text-green-600 dark:text-green-400":St==="skipped"?"text-gray-500 dark:text-gray-400":St==="failed"?"text-red-600 dark:text-red-400":"text-gray-400 dark:text-gray-500";return g.jsxs("li",{className:"flex items-center gap-3 px-5 py-3",children:[g.jsx(Id,{status:St}),g.jsx(Pt,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),g.jsx("span",{className:"flex-1 text-sm text-gray-900 dark:text-gray-100",children:lt.name}),g.jsx("span",{className:`text-xs font-medium ${It}`,children:Ft})]},lt.index)})})]}),dt&&g.jsxs("div",{className:"space-y-4",children:[g.jsx(Ye,{result:dt}),g.jsx($e,{result:dt,onReset:O})]}),g.jsx("div",{className:"flex items-center gap-3 border-t border-gray-200 dark:border-gray-700 pt-6",children:g.jsxs("button",{type:"button",onClick:O,className:"inline-flex items-center gap-2 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-5 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 shadow-sm transition-colors hover:bg-gray-50 dark:hover:bg-gray-700",children:[g.jsx(Br,{className:"h-4 w-4"}),"Process Another File"]})})]}),Et=()=>{if(X)return vt();if(t===0)return B();if(t>=1&&t<=R)switch(s[t]??"pending"){case"configuring":return J(t);case"processing":return ot(t);case"done":return at(t);case"failed":return _t(t);case"skipped":return g.jsxs("div",{className:"space-y-4",children:[g.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:["Step ",t,": ",ni[h[t-1]]?.name??h[t-1]]}),g.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[g.jsx(gl,{className:"h-4 w-4"}),g.jsx("span",{children:"This step was skipped."})]})]});default:return J(t)}return B()};return g.jsxs("div",{className:"flex h-full min-h-0",children:[M(),g.jsx("main",{className:"flex-1 overflow-y-auto",children:g.jsx("div",{className:"mx-auto max-w-2xl px-6 py-8",children:Et()})})]})}function O2(){const{currentView:h,currentToolId:t,setView:s}=Pn(),n=Oe(d=>d.isExecuting),r=Ll(d=>d.resolved==="dark"),[o,l]=z.useState(!1);z.useEffect(()=>{const d=()=>{const f=window.location.hash.replace("#","");f==="pipeline"?s("pipeline"):f?s("tool",f):s("grid")};return window.addEventListener("hashchange",d),()=>window.removeEventListener("hashchange",d)},[s]),z.useEffect(()=>{const d=f=>{const p=f.target;if(!(p.tagName==="INPUT"||p.tagName==="TEXTAREA"||p.isContentEditable)){if(f.key==="Escape"){if(o){l(!1);return}if(h!=="grid"){s("grid");return}}f.key==="?"&&(f.preventDefault(),l(y=>!y))}};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[h,s,o]);const c=z.useCallback(()=>{if(h==="grid")return g.jsx(Fd,{});if(h==="tool"&&t){const d=ni[t];return d?g.jsxs("div",{className:"max-w-tool mx-auto",children:[g.jsxs("button",{onClick:()=>s("grid"),className:"flex items-center gap-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 mb-4 focus-ring rounded-lg px-2 py-1",children:[g.jsx(Pl,{size:16}),g.jsx("span",{className:"text-sm",children:"Back to tools"})]}),g.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:d.name}),d.component?g.jsx(Bd,{children:g.jsx(d.component,{})}):g.jsxs("div",{className:"text-center py-20 text-gray-400 dark:text-gray-500",children:[g.jsx("p",{className:"text-lg",children:"Coming soon"}),g.jsx("p",{className:"text-sm mt-1",children:"This tool is not yet implemented."})]})]}):g.jsx(Fd,{})}return h==="pipeline"?n?g.jsx(Bd,{children:g.jsx(D2,{})}):g.jsx(Bd,{children:g.jsx(j2,{})}):g.jsx(Fd,{})},[h,t,s,n]);return g.jsxs(g.Fragment,{children:[g.jsx(b2,{onShowShortcuts:()=>l(!0),children:c()}),g.jsx(A2,{isOpen:o,onClose:()=>l(!1)}),g.jsx(hA,{position:"top-right",toastOptions:{duration:4e3,style:{borderRadius:"8px",fontSize:"14px",background:r?"#1f2937":"#fff",color:r?"#f3f4f6":"#111827",border:r?"1px solid #374151":"none"}}})]})}Ix.createRoot(document.getElementById("root")).render(g.jsx(zr.StrictMode,{children:g.jsx(O2,{})}));export{z2 as a,pl as b,nn as c,Jd as g,w1 as r};
