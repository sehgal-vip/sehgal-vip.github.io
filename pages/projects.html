---
layout: page
title: Projects
description: Things I've built and worked on
permalink: /projects/
---

<div class="reading-list">
  {% if site.data.projects.size > 0 %}
  {% assign projects_by_year_temp = site.data.projects | group_by: "year" %}
  {% assign projects_years = projects_by_year_temp | map: "name" | sort | reverse %}
  <section class="collapsible-section" data-section="projects">
    <h2 class="section-title">
      <span class="section-icon">ðŸš€</span>
      Projects
    </h2>
    <div class="section-filters" aria-label="Filter projects">
      <div class="filter-group">
        <button class="filter-toggle" data-filter="year" data-section="projects">
          <span class="filter-label">Year</span>
          <span class="filter-selected-count"></span>
          <svg class="filter-chevron" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </button>
        <div class="filter-dropdown filter-year" data-section="projects">
          <label class="filter-option">
            <input type="checkbox" value="all" checked>
            <span>All</span>
          </label>
          {% for y in projects_years %}
          <label class="filter-option">
            <input type="checkbox" value="{{ y }}">
            <span>{{ y }}</span>
          </label>
          {% endfor %}
        </div>
      </div>
    </div>
    
    {% assign projects_sorted = site.data.projects | sort: "year" | reverse %}
    <table class="data-table">
      <thead>
        <tr>
          <th>Title</th>
          <th>Year</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {% for project in projects_sorted %}
        <tr data-year="{{ project.year }}">
          <td class="title-cell" data-label="Title">
            {% if project.url and project.url != "" %}
            {% if project.url contains "http" %}<a href="{{ project.url }}" target="_blank" rel="noopener noreferrer">{{ project.title }}</a>{% else %}<a href="{{ project.url | relative_url }}">{{ project.title }}</a>{% endif %}
            {% else %}
            {{ project.title }}
            {% endif %}
          </td>
          <td class="year-cell" data-label="Year">{{ project.year }}</td>
          <td class="desc-cell" data-label="Description">{{ project.description }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
  {% else %}
  <div class="text-center" style="padding: 4rem 0;">
    <p style="color: var(--text-muted); font-size: 1.125rem;">No projects yet.</p>
  </div>
  {% endif %}
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Collapsible filter dropdowns
  const filterToggles = document.querySelectorAll('.filter-toggle');
  const filterDropdowns = document.querySelectorAll('.filter-dropdown');
  
  // Toggle dropdown visibility
  filterToggles.forEach(toggle => {
    toggle.addEventListener('click', function(e) {
      e.stopPropagation();
      const dropdown = this.nextElementSibling;
      const isOpen = dropdown.classList.contains('open');
      
      // Close all dropdowns
      filterDropdowns.forEach(d => d.classList.remove('open'));
      filterToggles.forEach(t => t.classList.remove('active'));
      
      // Open clicked dropdown if it was closed
      if (!isOpen) {
        dropdown.classList.add('open');
        this.classList.add('active');
      }
    });
  });
  
  // Close dropdowns when clicking outside
  document.addEventListener('click', function(e) {
    if (!e.target.closest('.filter-group')) {
      filterDropdowns.forEach(d => d.classList.remove('open'));
      filterToggles.forEach(t => t.classList.remove('active'));
    }
  });
  
  // Filter functionality
  const applyFilters = () => {
    const sections = document.querySelectorAll('.collapsible-section');
    
    sections.forEach(section => {
      const sectionName = section.getAttribute('data-section');
      const table = section.querySelector('.data-table');
      if (!table) return;
      
      const rows = table.querySelectorAll('tbody tr');
      const yearCheckboxes = section.querySelectorAll('.filter-year input[type="checkbox"]:checked');
      
      const selectedYears = Array.from(yearCheckboxes).map(cb => cb.value).filter(v => v !== 'all');
      const showAllYears = yearCheckboxes.length > 0 && Array.from(yearCheckboxes).some(cb => cb.value === 'all');
      
      rows.forEach(row => {
        const year = row.getAttribute('data-year');
        const yearMatch = showAllYears || selectedYears.length === 0 || selectedYears.includes(year);
        
        row.style.display = yearMatch ? '' : 'none';
      });
      
      // Update selected count badge
      const yearToggle = section.querySelector('.filter-toggle[data-filter="year"]');
      if (yearToggle) {
        const count = showAllYears ? 0 : selectedYears.length;
        const countBadge = yearToggle.querySelector('.filter-selected-count');
        if (countBadge) {
          countBadge.textContent = count > 0 ? `(${count})` : '';
        }
      }
    });

    // Clear selection if filtered out
    if (selectedRow && selectedRow.style.display === 'none') {
      setSelectedRow(null);
    }
  };

  // Keyboard navigation
  const selectionClass = 'row-selected';
  let selectedRow = null;

  const isTypingInInput = (el) => {
    if (!el) return false;
    const tag = el.tagName ? el.tagName.toLowerCase() : '';
    return el.isContentEditable || tag === 'input' || tag === 'textarea' || tag === 'select';
  };

  const isCommandPaletteOpen = () => {
    if (window.ModalManager && typeof window.ModalManager.isOpen === 'function') {
      if (window.ModalManager.isOpen('command-palette')) return true;
    }
    return !!document.querySelector('#command-palette.is-open');
  };

  const getVisibleRows = () => {
    return Array.from(document.querySelectorAll('.data-table tbody tr'))
      .filter(row => row.style.display !== 'none');
  };

  const setSelectedRow = (row) => {
    if (selectedRow) {
      selectedRow.classList.remove(selectionClass);
      selectedRow.removeAttribute('aria-selected');
    }
    selectedRow = row;
    if (selectedRow) {
      selectedRow.classList.add(selectionClass);
      selectedRow.setAttribute('aria-selected', 'true');
      selectedRow.scrollIntoView({ block: 'nearest' });
    }
  };

  const moveSelection = (delta) => {
    const rows = getVisibleRows();
    if (!rows.length) return;
    if (!selectedRow || !rows.includes(selectedRow)) {
      setSelectedRow(delta > 0 ? rows[0] : rows[rows.length - 1]);
      return;
    }
    const index = rows.indexOf(selectedRow);
    const nextIndex = index + delta;
    if (nextIndex < 0 || nextIndex >= rows.length) return;
    setSelectedRow(rows[nextIndex]);
  };

  const openSelectedRowLink = () => {
    if (!selectedRow) return;
    const link = selectedRow.querySelector('a');
    if (link) link.click();
  };

  document.addEventListener('keydown', function(e) {
    if (isCommandPaletteOpen()) return;
    if (isTypingInInput(e.target)) return;
    if (e.metaKey || e.ctrlKey || e.altKey) return;

    if (e.key === 'ArrowDown') {
      e.preventDefault();
      moveSelection(1);
    } else if (e.key === 'ArrowUp') {
      e.preventDefault();
      moveSelection(-1);
    } else if (e.key === 'Enter' || e.key === ' ' || e.key === 'Spacebar') {
      if (selectedRow) {
        e.preventDefault();
        openSelectedRowLink();
      }
    }
  });
  
  // Handle checkbox changes
  document.addEventListener('change', function(e) {
    if (e.target.type === 'checkbox' && e.target.closest('.filter-dropdown')) {
      const checkbox = e.target;
      const dropdown = checkbox.closest('.filter-dropdown');
      
      // Handle "All" checkbox
      if (checkbox.value === 'all' && checkbox.checked) {
        dropdown.querySelectorAll('input[type="checkbox"]:not([value="all"])').forEach(cb => {
          cb.checked = false;
        });
      } else if (checkbox.value !== 'all' && checkbox.checked) {
        const allCheckbox = dropdown.querySelector('input[value="all"]');
        if (allCheckbox) {
          allCheckbox.checked = false;
        }
      }
      
      applyFilters();
    }
  });
  
  // Initial filter application
  applyFilters();
});
</script>
